<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
  </head>
  <body>
    <script>
      var dynamicContentRoot = &#39;&#39;;
    var dynamicContentPrefix = &#39;&#39;;
    var gtmOptions = {
        cookie_flags: &#39;secure;samesite=none&#39;
    };
    let pokiActive = false;
    let crazyGamesActive = false;
    let thirdPartyAdblocker = false;
    let testCrazy = false;
    let crazyGamesHouseAdCheck = null;
    </script>
    <script>
      let HouseAds;
    var shellLogo = &#39;img/logo.svg&#39;;

    async function getAds() {
        const response = await fetch(dynamicContentPrefix + &#39;data/housePromo.json?&#39; + Date.now());
        HouseAds = await response.json();
        if (HouseAds.shellLogo !== undefined &amp;&amp; HouseAds.shellLogo.length &gt; 0) {
            const useLogo = HouseAds.shellLogo.filter(logo =&gt; logo.active);
            if (useLogo.length &gt; 0) {
                shellLogo = dynamicContentPrefix + &#39;data/img/art/&#39; + useLogo[0].id + useLogo[0].imageExt;
            }
        }
    }

    getAds();

    class Loader {

        constructor() {
            this.logo = &#39;&#39;;
            this.blueWizSrcAlt = &#39;&#39;;
            this.isShowing = false;
        }

        static show() {
            let container = document.createElement(&#39;div&#39;);
            container.id = &#39;progress-container&#39;;
            container.style = `
			position: fixed;
			top: 0;
			left: 0;
			height: 100vh;
			width: 100vw;
			z-index: 2000;
			background-image: var(--ss-lightoverlay);
		`;

            const progressWrapper = document.createElement(&#39;div&#39;);
            progressWrapper.id = &#39;progress-wrapper&#39;;
            progressWrapper.className = &#39;load_screen align-items-center&#39;;
            progressWrapper.style = `
			position: absolute;
			left: 50%;
			top: -6em;
			transform: translateX(-50%);
			background-image: none;
		`;

            const blueWizLogo = document.createElement(&#39;img&#39;);

            if (this.blueWizSrcAlt) {
                blueWizLogo.src = this.blueWizSrcAlt;
            } else {
                blueWizLogo.src = &#39;img/blueWizard_logo.webp&#39;;
            }

            blueWizLogo.style = `
			width: 16em;
			display: block;
			margin: 5em auto 0;
			z-index: 2000;
			position: absolute;
			left: 50%;
			bottom: 8em;
			transform: translateX(-50%);
		`;

            this.logo = document.createElement(&#39;img&#39;);
            this.logo.src = shellLogo;
            this.logo.style = &#39;height: 16em&#39;;
            this.logo.id = &#39;logo-svg&#39;;
            // container.appendChild(logo);

            const progressOuter = document.createElement(&#39;div&#39;);
            progressOuter.id = &#39;progress-outer&#39;;
            progressOuter.style = `
			position: relative;
			background: #643219;
			border-radius: 2em;
			height: 3.3em;
			width: 24em;
			margin-top: 2em;
		`;


            let progress = document.createElement(&#39;div&#39;);
            progress.style = `
			margin-top: 1em;
			width: 23em;
			height: 2.2em;
			background: white;
			padding: 0.5em;
			border-radius: 2em;
			margin: .3em .5em 0;
		`;
            container.appendChild(progress);

            let progressBar = document.createElement(&#39;span&#39;);
            progressBar.id = &#39;progressBar&#39;;
            progressBar.style = `
			display: block;
			width: 20%;
			height: 100%;
			background: orange;
			border-radius: 2em;
			margin-left: 80%;
			margin: 0 .3em .5em 0;
			opacity: 0;
			transition: margin-left linear 500ms;
			transition-timing-function: ease-in-out;
		`;

            const progressBarOutside = document.createElement(&#39;div&#39;);


            progress.appendChild(progressBar);
            progressWrapper.appendChild(this.logo);
            progressOuter.appendChild(progress);
            progressWrapper.appendChild(progressOuter);

            container.appendChild(progressWrapper);
            container.appendChild(blueWizLogo);

            // Minor for the progress bar intial load
            setTimeout(() =&gt; progressBar.style.opacity = 1, 600);


            Loader.barInterval = setInterval(() =&gt; {
                if (Loader.progressBar.style.marginLeft == &#39;0%&#39;) {
                    Loader.progressBar.style.marginLeft = &#39;80%&#39;;
                } else {
                    Loader.progressBar.style.marginLeft = &#39;0%&#39;;
                }
            }, 500);

            Loader.progressBar = progressBar;
            Loader.container = container;

            let app = document.body;
            app.appendChild(container);
            this.isShowing = true;
        }

        static hide() {
            Loader.container.style = &#34;opacity : 0; transition: opacity 1s;&#34;;
            setTimeout(() =&gt; {
                Loader.container.remove();
                this.isShowing = false;
            }, 1000);
        }

        static addTask() {
            let id = Loader.loaded.length;
            //console.log(&#39;Loading tasks: &#39;, ++Loader.actualTasks);
            Loader.loaded.push(0);
            return id;
        }

        static finish(id) {
            clearInterval(Loader.barInterval);

            if (Loader.progressBar) {
                Loader.progressBar.style.marginLeft = &#39;0%&#39;;
                Loader.progressBar.style.transition = &#39;&#39;;

                Loader.loaded[id] = 1;
                Loader.updateBar();
            }
        }

        static progress(id, value, total) {
            clearInterval(Loader.barInterval);

            if (Loader.progressBar) {
                Loader.progressBar.style.marginLeft = &#39;0%&#39;;
                Loader.progressBar.style.transition = &#39;&#39;;

                Loader.loaded[id] = value / total;

                Loader.updateBar();
            }

            return id;
        }

        static updateBar() {
            let loadedTotal = 0;

            for (let l of Loader.loaded) {
                loadedTotal += l;
            }
            let percent = loadedTotal / Loader.tasks * 95 + 5;
            // no more than 100%
            if (percent &gt; 100) {
                percent = 100;
            }

            Loader.progressBar.style.width = percent + &#39;%&#39;;
        }

        static loadJS(path, callback) {
            let p = path;

            (function(p, cb) {
                let xhr = new XMLHttpRequest();
                xhr.open(&#39;GET&#39;, p, true);

                let id = Loader.addTask();

                xhr.onprogress = event =&gt; {
                    if (Loader.progressBar) {
                        id = Loader.progress(id, event.loaded, event.total);
                    }
                };

                xhr.onload = () =&gt; {
                    if (xhr.status != 200) {
                        console.log(`Error ${xhr.status}: ${xhr.statusText}`);
                    } else {
                        if (!cb) {
                            Loader.finish(id);
                            let script = document.createElement(&#39;script&#39;);
                            script.innerHTML = xhr.response;
                            document.body.appendChild(script);
                            return;
                        }

                        import(&#39;./js/wasm_loader.js?6&#39;).then(({
                            init,
                            process,
                            verify,
                            validate,
                            get_yaw_pitch,
                            reset_yaw_pitch,
                            set_mouse_params,
                            poll_gamepad
                        }) =&gt; {
                            window.verify = verify;
                            window.validate = validate;
                            window.get_yaw_pitch = get_yaw_pitch;
                            window.reset_yaw_pitch = reset_yaw_pitch;
                            window.set_mouse_params = set_mouse_params;
                            window.poll_gamepad = poll_gamepad;

                            let encoder = new TextEncoder(&#39;utf-8&#39;);
                            let decoder = new TextDecoder(&#39;utf-8&#39;);
                            let data = encoder.encode(xhr.response);
                            init().then(() =&gt; {
                                process(data);
                                cb();
                            });
                        });
                    }
                };

                xhr.send();
            })(path, callback);
        }
    }

    Loader.actualTasks = 0;
    Loader.tasks = 17;
    Loader.loaded = [];

    window.Loader = Loader;

    function openFirebaseDb() {
        return new Promise((resolve, reject) =&gt; {
            let req = window.indexedDB.open(&#39;firebaseLocalStorageDb&#39;);
            req.onsuccess = () =&gt; {
                let db = req.result;
                let transaction = db.transaction([&#39;firebaseLocalStorage&#39;], &#39;readwrite&#39;);
                let store = transaction.objectStore(&#39;firebaseLocalStorage&#39;);
                resolve({
                    db,
                    store
                });
            }
            req.onerror = err =&gt; reject(err);
            req.onupgradeneeded = () =&gt; {
                let db = req.result;
                let store = db.createObjectStore(&#39;firebaseLocalStorage&#39;, {
                    keyPath: &#39;fbase_key&#39;
                });
                resolve({
                    db,
                    store
                });
            }
        });
    }

    var redirectIframe

    function postStorageAndRedirect(iframe, storage, firebaseDb) {
        iframe.contentWindow.postMessage({
            storage,
            firebaseDb
        }, &#39;*&#39;);
        window.location = &#39;https://shellshock.io&#39; + window.location.search + window.location.hash;
    }

    // Loader.blueWizSrcAlt = &#39;img/blueWizard_logo_borg.webp&#39;;
    Loader.show();
    </script>
    <!-- title, seo meta and favicons -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="facebook-domain-verification" content="6lfua33vx0abiv1asnt9p13aac29xy" />
    <title>
      Shell Shockers üç≥ Also at shellgame.quest
    </title>
    <meta name="Description" content="Blocked? Try shellgame.quest | The OFFICIAL home of Shell Shockers, the world‚Äôs best egg-based shooter! It‚Äôs like your favorite FPS battlefield game‚Ä¶ with eggs." />
    <meta name="Keywords" content="Games, Free games, online, multiplayer, io games, shell shockers, web game, shooter, fps, bullets, egg game, egg shooter, unblocked games" />
    <meta name="author" content="Blue Wizard Digital" />
    <meta name="theme-color" content="#0B93BD" />
    <meta name="background-color" content="#0B93BD" />
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="favicon192.png" sizes="192x192" />
    <link rel="icon" href="favicon256.png" sizes="512x512" />
    <meta property="og:url" content="https://www.shellshock.io" />
    <meta property="og:type" content="website" />
    <meta property="og:image:width" content="1000" />
    <meta property="og:image:height" content="500" />
    <meta property="og:image" content="https://www.shellshock.io/img/previewImage_shellShockers.webp" />
    <meta name="image" property="og:image" content="https://www.shellshock.io/img/previewImage_shellShockers.webp" />
    <meta property="og:title" content="Shell Shockers | by Blue Wizard Digital" />
    <meta property="og:description" content="Blocked? Try shellgame.quest | The OFFICIAL home of Shell Shockers, the world‚Äôs best egg-based shooter! It‚Äôs like your favorite FPS battlefield game‚Ä¶ with eggs." />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@bluewizardgames" />
    <meta name="twitter:creator" content="@bluewizardgames" />
    <meta name="twitter:title" content="Shell Shockers | by Blue Wizard Digital" />
    <meta name="twitter:description" content="Blocked? Try shellgame.quest | The OFFICIAL home of Shell Shockers, the world‚Äôs best egg-based shooter! It‚Äôs like your favorite FPS battlefield game‚Ä¶ with eggs." />
    <meta name="twitter:image" content="https://www.shellshock.io/img/previewImage_shellShockers.webp" />
    <script type="application/ld+json">
      {
        &#34;@context&#34;: &#34;https://schema.org&#34;,
        &#34;@type&#34;: &#34;VideoGame&#34;,
        &#34;name&#34;: &#34;Shell Shockers&#34;,
        &#34;description&#34;: &#34;Shell Shockers is a browser-based first-person shooter game
        where players control armed eggs in multiplayer battles.
        &#34;,
        &#34;url&#34;: &#34;https://shellshock.io/&#34;,
        &#34;image&#34;: &#34;https://shellshock.io/img/logo.svg&#34;,
        &#34;applicationCategory&#34;: &#34;Game&#34;,
        &#34;applicationSubCategory&#34;: &#34;FirstPersonShooter&#34;,
        &#34;operatingSystem&#34;: &#34;ChromeOS, Windows, MACOS, Linux&#34;,
        &#34;genre&#34;: &#34;Action, Shooter&#34;,
        &#34;publisher&#34;: {
            &#34;@type&#34;: &#34;Organization&#34;,
            &#34;name&#34;: &#34;Blue Wizard Digital&#34;,
            &#34;url&#34;: &#34;https://bluewizard.com/&#34;
        }
    }
    </script>
    <!-- Crazy Games -->
    <script>
      // we need a getter and setter for the vue instance
    const getCrazyGamesActive = {
        _value: &#39;&#39;,
        set value(newValue) {
            this._value = newValue;
            crazyGamesActive = newValue;
            triggerCheck(newValue);
        },
        get value() {
            return this._value;
        }
    };

    function triggerCheck(value) {
        if (crazyGamesHouseAdCheck) {
            crazyGamesHouseAdCheck.isCrazyGames = value;
        }
    }

    class CrazyGames {
        constructor() {
            this.initialized = false;
            this.crazysdk = null;
            this.thirdPartyAdblocker = false;
            this.user = null;
            this.game = null;
            this.currentUser = null;
            this.cgUserAccountAvailable = false;
            this.instantMultiplayerSet = false;
        }

        async init() {
            if (!window.CrazyGames || !window.CrazyGames.SDK) {
                console.log(&#34;CrazyGames SDK not available&#34;);
                return;
            }

            try {
                await window.CrazyGames.SDK.init();
                this.crazysdk = window.CrazyGames.SDK;
                this.thirdPartyAdblocker = await this.crazysdk.ad.hasAdblock();
                this.initialized = true;
                this.game = this.crazysdk.game;
                this.user = this.crazysdk.user;
                crazyGamesActive = true;
                getCrazyGamesActive.value = true;
                // Add user authentication check on init
                await this.checkUserAuth();
                console.log(&#34;CrazyGames SDK initialized successfully.&#34;);
            } catch (error) {
                console.error(&#34;Failed to initialize CrazyGames SDK:&#34;, error);
            }
        }
        async performAction(action, ...args) {
            if (!this.initialized) {
                return;
            }

            try {
                const result = action.call(this, ...args);
                if (result instanceof Promise) {
                    await result;
                }
            } catch (error) {
                console.error(&#34;Error performing action:&#34;, error);
            }
        }

        inviteLink(invite) {
            if (!this.initialized) {
                return;
            }

            return this.crazysdk.game.inviteLink(invite);

        }

        async requestBanner(banner) {
            try {
                await this.performAction(() =&gt; this.crazysdk.banner.requestBanner(banner));
            } catch (error) {
                console.error(&#34;Error requesting banner:&#34;, error);
            }
        }

        async requestResponsiveBanner(banner) {
            try {
                await this.performAction(() =&gt; this.crazysdk.banner.requestResponsiveBanner(banner));
            } catch (error) {
                console.error(&#34;Error requesting responsive banner:&#34;, error);
            }
        }

        clearAllBanners() {
            this.performAction(() =&gt; this.crazysdk.banner.clearAllBanners());
        }

        showInviteButton(invite) {
            this.performAction(() =&gt; this.crazysdk.game.showInviteButton(invite));
        }

        hideInviteButton() {
            this.performAction(() =&gt; this.crazysdk.game.hideInviteButton());
        }

        requestAd(type, callbacks) {
            this.performAction(() =&gt; this.crazysdk.ad.requestAd(type, callbacks));
        }

        gameplayStop() {
            this.performAction(() =&gt; this.crazysdk.game.gameplayStop());
        }

        gameplayStart() {
            this.performAction(() =&gt; this.crazysdk.game.gameplayStart());
        }

        adBlocker() {
            return this.initialized ? this.thirdPartyAdblocker : undefined;
        }
        async checkUserAuth() {
            // need different return states for different cases
            if (!this.initialized) return {
                status: &#39;not_initialized&#39;
            };

            try {
                this.currentUser = await this.crazysdk.user.getUser();
                this.cgUserAccountAvailable = this.isUserAccountAvailable();
                return {
                    status: &#39;success&#39;,
                    user: this.currentUser
                };
            } catch (error) {
                console.error(&#34;Error checking user auth:&#34;, error);
                return {
                    status: &#39;error&#39;,
                    error: error
                };
            }
        }

        isUserAccountAvailable() {
            return this.initialized ? this.crazysdk.user.isUserAccountAvailable : false;
        }

        async showAuthPrompt() {
            if (!this.initialized) return null;

            try {
                const user = await this.crazysdk.user.showAuthPrompt();
                this.currentUser = user;
                return user;
            } catch (error) {
                console.error(&#34;Auth prompt error:&#34;, error);
                throw error;
            }
        }

        async getUserToken() {
            if (!this.initialized) return null;

            try {
                return await this.crazysdk.user.getUserToken();
            } catch (error) {
                console.error(&#34;Error getting user token:&#34;, error);

                throw error;
            }
        }

        async showAccountLinkPrompt() {
            if (!this.initialized) return null;

            try {
                return await this.crazysdk.user.showAccountLinkPrompt();
            } catch (error) {
                console.error(&#34;Account link prompt error:&#34;, error);
                throw error;
            }
        }

        addAuthListener(callback) {
            if (this.initialized) {
                this.crazysdk.user.addAuthListener(callback);
            }
        }

        removeAuthListener(callback) {
            if (this.initialized) {
                this.crazysdk.user.removeAuthListener(callback);
            }
        }

        getCurrentUser() {
            return this.currentUser;
        }
    }
    </script>
    <style>
      .hide-on-crazy-games {
        display: none;
    }
    </style>
    <!-- Styles & Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Sigmar+One|Nunito:100,200,600,700,900" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="styles/style.min.css?1767820131" />
    <script>
      function storageFactory(getStorage) {

	const inMemoryStorage = {};

	function isSupported() {
		try {
			var testKey = &#34;__some_random_key_you_are_not_going_to_use__&#34;;
			getStorage().setItem(testKey, testKey);
			getStorage().removeItem(testKey);
			return true;
		} catch (e) {
			return false;
		}
	}

	function clear() {
		if (isSupported()) {
			getStorage().clear();
		} else {
			inMemoryStorage = {};
		}
	}

	function getItem(name) {
		if (isSupported()) {
			return getStorage().getItem(name);
		}

		if (inMemoryStorage.hasOwnProperty(name)) {
			return inMemoryStorage[name];
		}

		return null;
	}

	function key(index) {
		if (isSupported()) {
			return getStorage().key(index);
		} else {
			return Object.keys(inMemoryStorage)[index] || null;
		}
	}

	function removeItem(name) {
		if (isSupported()) {
			getStorage().removeItem(name);
		} else {
			delete inMemoryStorage[name];
		}
	}

	function setItem(name, value) {
		if (isSupported()) {
			getStorage().setItem(name, value);
		} else {
			inMemoryStorage[name] = String(value);
		}
	}

	function length() {
		if (isSupported()) {
			return getStorage().length;
		} else {
			return Object.keys(inMemoryStorage).length;
		}
	}

	return {
		getItem: getItem,
		setItem: setItem,
		removeItem: removeItem,
		clear: clear,
		key: key,

		get length() {
			return length();
		}

	};
	}

	const localStore = storageFactory(() =&gt; localStorage);
	const sessionStore = storageFactory(() =&gt; sessionStorage);
    </script>
    <style>
      .eggIcon {
	display: inline-block;
	color: #444444;
	width: .8em;
	height: .8em;
	fill: currentColor;
}
    </style>
    <style>
      .eggIconLocked {
	display: inline-block;
	color: #444444;
	width: .8em;
	height: .8em;
	fill: currentColor;
}
    </style>
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden" version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink">
      <defs>
        <symbol id="icon-egg-locked" viewBox="0 0 14.59 18.12">
          <g>
            <path class="st0" d="M7.3,5.4c-0.6,0-1.1,0.5-1.1,1.1v1.3h2.2V6.5C8.4,5.9,7.9,5.4,7.3,5.4z">
            </path>
            <path class="st0" d="M7.5,0.1c-4,0-7.4,6.7-7.4,10.7S3.4,18,7.3,18c3.9,0,7.2-3.2,7.2-7.2S11.5,0.1,7.5,0.1z M11.3,12.5
		c0,0.9-0.7,1.6-1.6,1.6H4.8c-0.9,0-1.6-0.7-1.6-1.6V7.8h1.5V6.5C4.8,5.1,5.9,4,7.3,4c1.4,0,2.5,1.1,2.5,2.5v1.3h1.5V12.5z">
            </path>
          </g>
        </symbol>
      </defs>
    </svg>
    <!-- ParsedURL -->
    <script>
      var parsedUrl = (function parseUrl () {
        var url = {};
        var loc = window.location;
        url.root = loc.origin + loc.pathname;
        var query = loc.search.substring(1).split(&#39;&amp;&#39;);
        url.query = {};
        for (let i = 0; i &lt; query.length; i++)  {
            var arr = query[i].split(&#39;=&#39;);
            if (arr[0]) {
                if (arr[1] === undefined) {
                    arr[1] = true;
                } else if (!isNaN(arr[1])) {
                    arr[1] = parseFloat(arr[1]);
                }
                url.query[arr[0]] = arr[1];
            }
        }
        url.hash = loc.hash.substring(1);

        var host = loc.host.split(&#39;.&#39;);

        url.dom = host[0];
        url.top = host[1];

        if (url.hash.length == 0) url.hash = undefined;
        return url;
    })();
    </script>
    <!-- third party globals -->
    <!-- Crazy Games -->
    <!-- European Union detection -->
    <script>
      isFromEU = 0 ? true : false
    </script>
    <!-- AdInPlay -->
    <meta name="viewport" content="minimal-ui, user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width" />
    <script>
      var aiptag = aiptag || {};
    aiptag.cmd = aiptag.cmd || [];
    aiptag.cmd.display = aiptag.cmd.display || [];
    aiptag.cmd.player = aiptag.cmd.player || [];
    </script>
    <script async="" src="//api.adinplay.com/libs/aiptag/pub/SSK/shellshock.io/tag.min.js">
    </script>
    <!-- GTM -->
    <!-- Google tag (gtag.js) -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=G-79NWRZXYCB">
    </script>
    <script>
      window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag(&#39;js&#39;, new Date());
  gtag(&#39;config&#39;, &#39;G-79NWRZXYCB&#39;, gtmOptions);
    </script>
    <!-- Google Tag Manager -->
    <script>
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({&#39;gtm.start&#39;:
new Date().getTime(),event:&#39;gtm.js&#39;});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!=&#39;dataLayer&#39;?&#39;&amp;l=&#39;+l:&#39;&#39;;j.async=true;j.src=
&#39;https://www.googletagmanager.com/gtm.js?id=&#39;+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,&#39;script&#39;,&#39;dataLayer&#39;,&#39;GTM-K5MSJHJ&#39;);
    </script>
    <!-- End Google Tag Manager -->
    <!-- In house ads -->
    <script>
      window.googletag = window.googletag || {cmd: []};
    let inHouseSlot;
    const slots = [];

    const dpfNetwork = /21743024831/,
        inHouseAdSlot = &#39;ShellShockers_LoadingScreen_HouseAds&#39;
        inHouseAdSize = [[468, 60], [970, 90], [970, 250], [728, 90]],
        inHouseAdDiv = &#39;ShellShockers_LoadingScreen_HouseAds&#39;,
        adSlots = [];

    // Helper to setup slots and add to slot array
    const adDefineSlot = (slot, sizes, id) =&gt; {
        return adSlots.push([{slot, sizes, id}]);
    };

    // Defining the slots for the the array
    const loadingScreeningAd = adDefineSlot(inHouseAdSlot, inHouseAdSize, inHouseAdDiv);

    // Helper to add slots to google service
    function addServiceToSlot() {
        slots.forEach(slot =&gt; {
            slot.addService(googletag.pubads());
        });
    }

    // Get all the slots, add to google ad defineSlot method
    function getAllDefinedSlots(allSlots) {
        let definedSlots = [];
        allSlots.forEach(adSlot =&gt; {
            for (var i = 0, len = adSlot.length; i &lt; len; i++) {
                slots.push(googletag.defineSlot(dpfNetwork + adSlot[i].slot, adSlot[i].sizes, adSlot[i].id));
            }
        })
        return addServiceToSlot(slots);
    }

    const gtagInHouseLoadingBannerIntialLoad = () =&gt; {
        if (typeof hasPoki !== &#39;undefined&#39;) {
            console.log(&#39;haspoki&#39;, typeof(hasPoki));
            return; 
        }
        googletag.cmd.push(function() {
            getAllDefinedSlots(adSlots);
            googletag.pubads().disableInitialLoad();
            googletag.enableServices();
        });
    };

    gtagInHouseLoadingBannerIntialLoad();

    const adRenderedEvent = () =&gt; {
        return googletag.pubads().addEventListener(&#39;slotRenderEnded&#39;, (event) =&gt; {
            vueApp.disaplyAdEventObject(event);
        });
    };

    const gtagInHouseLoadingBanner = () =&gt; {
        googletag.cmd.push(function() {
            googletag.pubads().refresh([slots[0]]);
            adRenderedEvent();
        });
    };

    const destroyInhouseAdForPaid = () =&gt; {
        googletag.destroySlots([slots[0]]);
    };
    </script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-app-compat.js">
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-auth-compat.js">
    </script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth.js">
    </script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.2/firebase-ui-auth.css" />
    <!-- Facebook -->
    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
	n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
	n.push=n;n.loaded=!0;n.version=&#39;2.0&#39;;n.queue=[];t=b.createElement(e);t.async=!0;
	t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
	document,&#39;script&#39;,&#39;https://connect.facebook.net/en_US/fbevents.js&#39;);
	fbq(&#39;init&#39;, &#39;771186996377132&#39;);
	fbq(&#39;track&#39;, &#39;PageView&#39;);
    </script>
    <noscript>
      &lt;img height=&#34;1&#34; width=&#34;1&#34; style=&#34;display:none&#34; src=&#34;https://www.facebook.com/tr?id=771186996377132&amp;ev=PageView&amp;noscript=1&#34;/&gt;
    </noscript>
    <!-- DO NOT MODIFY -->
    <!-- End Facebook Pixel Code -->
    <!-- progressive web app -->
    <!-- <button id="addToHomescreen" style="z-index:333;display: none; position:absolute; top:0px; right: 75%; cursor:pointer;" class="ss_button btn_yolk bevel_yolk">Add to your desktop!</button> -->
    <script>
      let pwaBlockAds = false;

	// if (&#39;serviceWorker&#39; in navigator) {
    //             console.log(&#34;Will the service worker register?&#34;);
    //             navigator.serviceWorker.register(&#39;service-worker.js&#39;)
    //             .then(function(reg){
    //                     console.log(&#34;Yes, it did.&#34;);
    //             }).catch(function(err) {
    //                     console.log(&#34;No it didn&#39;t. This happened:&#34;, err)
    //             });
    // }

    if (window.matchMedia(&#39;(display-mode: standalone)&#39;).matches) { 
        pwaBlockAds = &#39;utm_source&#39; in parsedUrl.query &amp;&amp; parsedUrl.query.utm_source === &#39;homescreen&#39;;
	ga(&#39;send&#39;, &#39;event&#39;, &#39;pwa&#39;, &#39;desktop opened&#39;);
    }
    </script>
    <!-- Music audio tag -->
    <audio id="theAudio" preload="metadata">
    </audio>
    <!-- VueJS -->
    <script src="./js/vue/vue.min.2.6.10.js">
    </script>
    <!-- tools and varibles -->
    <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2">
    </script>
    <script>
      localStore.removeItem(&#39;brbTime&#39;);

	String.prototype.format = String.prototype.f = function() {
    var s = this,
        i = arguments.length;

    while (i--) {
        s = s.replace(new RegExp(&#39;\\{&#39; + i + &#39;\\}&#39;, &#39;gm&#39;), arguments[i]);
    }
    return s;
};

// HTMLCanvasElement.prototype.getContext = function(origFn) {
// 	return function(type, attribs) {
// 	  attribs = attribs || {};
// 	  attribs.preserveDrawingBuffer = true;
// 	  return origFn.call(this, type, attribs);
// 	};
//   }(HTMLCanvasElement.prototype.getContext);

function getKeyByValue (obj, value) {
	// if (!obj &amp;&amp; !value) {
	// 	return;
	// }
	for (var prop in obj) {
		if (obj.hasOwnProperty(prop)) {
			if (obj[prop] === value) {
				return prop;
			}
		}
	}
}

function objToStr (obj) {
	var str = JSON.stringify(obj, null, 4).replace(/\\|&#34;/g, &#39;&#39;);
	//str = str.replace(/\\|&#34;/g, &#39;&#39;);
	return str;
}

function detectChromebook() {
	return /\bCrOS\b/.test(navigator.userAgent);
}

function removeChildNodes (name) {
	var myNode = document.getElementById(name);
	while (myNode.firstChild) {
	    myNode.removeChild(myNode.firstChild);
	}
}

function logCallStack() {
	var stack = new Error().stack;
	console.log(stack);
}

function getRequest (url, callback) {
	if (url.startsWith(&#39;./&#39;)) url = url.slice(2);
	url = dynamicContentPrefix + url;

	var req = new XMLHttpRequest();
	if (!req) {
		return false;
	}

	if (typeof callback != &#39;function&#39;) callback = function () {};
	
	req.onreadystatechange = function(){
		if(req.readyState == 4) {
			return req.status === 200 ? 
				callback(null, req.responseText) : callback(req.status, null);
		}
	}
	req.open(&#34;GET&#34;, url, true);
	req.send(null);
	return req;
}

function hasValue (a) {
	return (a !== undefined &amp;&amp; a !== null &amp;&amp; a !== 0);
}

Array.prototype.shallowClone = function() {
	return this.slice(0);
}

function deepClone (o) {
	return JSON.parse(JSON.stringify(o));
}

function isString (value) {
	return typeof value === &#39;string&#39; || value instanceof String;
}

const capitalize = (s) =&gt; {
	if (typeof s !== &#39;string&#39;) return &#39;&#39;
	return s.charAt(0).toUpperCase() + s.slice(1)
};

function isHttps() {
	//return true // TODOJOSH
    return (document.location.protocol == &#39;https:&#39;);
}

function elOverlap(el1, el2) {
	const domRect1 = el1.getBoundingClientRect();
	const domRect2 = el2.getBoundingClientRect();
  
	return !(
	  domRect1.top &gt; domRect2.bottom ||
	  domRect1.right &lt; domRect2.left ||
	  domRect1.bottom &lt; domRect2.top ||
	  domRect1.left &gt; domRect2.right
	);
  }

  function loadJS(FILE_URL, async = true, callback, errorCallback) {
	let scriptEle = document.createElement(&#34;script&#34;);
  
	scriptEle.setAttribute(&#34;src&#34;, FILE_URL);
	scriptEle.setAttribute(&#34;type&#34;, &#34;text/javascript&#34;);
	scriptEle.setAttribute(&#34;async&#34;, async);
  
	document.body.appendChild(scriptEle);
  
	// success event 
	scriptEle.addEventListener(&#34;load&#34;, () =&gt; {
		if (callback) callback();
	  console.log(&#34;File loaded&#34;)
	});
	 // error event
	scriptEle.addEventListener(&#34;error&#34;, (ev) =&gt; {
		if (errorCallback) errorCallback();
	  console.log(&#34;Error on loading file&#34;, ev);
	});
  }

  function debounce(fn, wait){
	let timer;
	return function(...args){
		if(timer) {
			clearTimeout(timer); // clear any pre-existing timer
		}
		const context = this; // get the current context
		timer = setTimeout(()=&gt;{
			fn.apply(context, args); // call the function if time expires
		}, wait);
   }
}


function formatLargeNumbers(num) {
	if (num &gt;= 1_000_000_000) {
	  return (num / 1_000_000_000).toFixed(1).replace(/\.0$/, &#39;&#39;) + &#39;B&#39;;
	} else if (num &gt;= 1_000_000) {
	  return (num / 1_000_000).toFixed(1).replace(/\.0$/, &#39;&#39;) + &#39;M&#39;;
	} else if (num &gt;= 1_000) {
	  return (num / 1_000).toFixed(1).replace(/\.0$/, &#39;&#39;) + &#39;K&#39;;
	} else {
	  return num.toString();
	}
  }	
function getStoredNumber (name, def) {
	var num = localStore.getItem(name);
	if (!num) {
		return def;
	}
	return Number(num);
}

function getStoredBool (name, def) {
	var str = localStore.getItem(name);
	if (!str) {
		return def;
	}
	return str == &#39;true&#39; ? true : false;
}

function getStoredString (name, def) {
	var str = localStore.getItem(name);
	if (!str) {
		return def;
	}
	return str;
}

function getStoredObject (name, def) {
	var str = localStore.getItem(name);
	if (!str) {
		return def;
	}
	return JSON.parse(str);
}

function getSetIncrementStoredNum(name, set) {
	const val = localStore.getItem(name);
	if (val) {
		localStore.setItem(name, Number(val) + set);
	} else {
		localStore.setItem(name, set);
	}
	return Number(localStore.getItem(name));
}
	var shellColors = [
	&#39;#ffffff&#39;,
	&#39;#c4e3e8&#39;,
	&#39;#e2bc8b&#39;,
	&#39;#d48e52&#39;,
	&#39;#cb6d4b&#39;,
	&#39;#8d3213&#39;,
	&#39;#5e260f&#39;,

	&#39;#e70a0a&#39;,
	&#39;#aa24ce&#39;,
	//&#39;#f17ff9&#39;, // Old Pink
	&#39;#E0219A&#39;, // Barbie Pink
	&#39;#FFD700&#39;,
	&#39;#33a4ea&#39;,
	&#39;#3e7753&#39;,
	&#39;#59db27&#39;,
	//&#39;#99953a&#39;
];

var freeColors = shellColors.slice(0, 7);
var paidColors = shellColors.slice(7, shellColors.length);

	const RESPAWNADUNIT = &#39;shellshockers_respawn_banner-sh&#39;;
	const RESPAWN2ADUNIT = &#39;shellshockers_respawn_banner_2-sh&#39;;
	const RESPAWN3ADUNIT = &#39;shellshockers_respawn_banner_3-sh&#39;;
	const  AIPSUBID = &#39;shellshock.io&#39;;

	var Slot = {
		Primary: 0,
		Secondary: 1
	};

	var EGGCOLOR = {
		white: 0,
		skyblue: 1,
		beige: 2,
		tan: 3,
		brown: 4,
		caramel: 5,
		chocolate: 6,
		red: 7,
		purple: 8,
		violet: 9,
		yellow: 10,
		babyblue: 11,
		darkgreen: 12,
		green: 13	
	}

	// Type matches contents of the item_type table (could be generated from a db query but ... meh)
	var ItemType = {
		Hat: 1,
		Stamp: 2,
		Primary: 3,
		Secondary: 4,
		Grenade: 6,
		Melee: 7
	}

	var CharClass = {
		Soldier: 0,
		Scrambler: 1,
		Ranger: 2,
		Eggsploder: 3,
		Whipper: 4,
		Crackshot: 5,
		TriHard: 6
	};

	const PurchaseType = {
		vip: 0,
		purchase: 1
	};

	const DmgType = [
		{ name: &#39;Eggk47&#39; },
		{ name: &#39;Scrambler&#39; },
		{ name: &#39;FreeRanger&#39; },
		{ name: &#39;Cluck9mm&#39; },
		{ name: &#39;Rpegg&#39; },
		{ name: &#39;Whipper&#39; },
		{ name: &#39;Crackshot&#39; },
		{ name: &#39;TriHard&#39; },
		{ name: &#39;Grenade&#39; },
		{ name: &#39;Melee&#39; },
		{ name: &#39;Fall&#39; }
	];

	const SOCIALMEDIA = [
		&#39;fa-facebook-square&#39;,
		&#39;fa-instagram-square&#39;,
		&#39;fa-tiktok&#39;,
		&#39;fa-discord&#39;,
		&#39;fa-youtube&#39;,
		&#39;fa-twitter-square&#39;,
		&#39;fa-twitch&#39;
	];

	const ItemIcons = {
		Hat: &#39;#ico-hat&#39;,
		Stamp: &#39;#ico-stamp&#39;,
		Primary: &#39;#ico-primary&#39;,
		Secondary: &#39;#ico-secondary&#39;,
		Grenade: &#39;#ico-grenade&#39;,
		Melee: &#39;#ico-melee&#39;
	};

	const PhotoBoothCMD = {
		size: 0,
		pose: 1,
		map: 2,
		color: 0,
		itemHide: 4,
		open: 5,
		close: 6,
		reset: 7,
		screenGrab: 8,
	};

	const ChallengePeriod = {
		0: {type: &#39;daily&#39;, period: 86400},
		1: {type: &#39;weekly&#39;, period: 604800},
		2: {type: &#39;monthly&#39;, period: 2592000},
	};

const ChallengeType = {
	0: &#39;kills&#39;,
	1: &#39;damage&#39;,
	2: &#39;deaths&#39;,
	3: &#39;movement&#39;,
	4: &#39;collect&#39;,
	5: &#39;timed&#39;,
	6: &#39;kotc&#39;,
	7: &#39;cts&#39;,
	8: &#39;ffa&#39;,
	9: &#39;items&#39;,
	10: &#39;eggsEarned&#39;,
	11: &#39;shop&#39;,
};

const ChallengeSubType = {
	0: &#39;killStreak&#39;,
	1: &#39;weaponType&#39;,
	2: &#39;damage&#39;,
	3: &#39;distance&#39;,
	4: &#39;jump&#39;,
	5: &#39;map&#39;,
	6: &#39;timePlayed&#39;,
	7: &#39;timeAlive&#39;,
	8: &#39;condition&#39;,
	9: &#39;color&#39;,
	10: &#39;kills&#39;,
	11: &#39;shot&#39;,
	12: &#39;hp&#39;,
	13: &#39;scoped&#39;,
	14: &#39;scope&#39;,
	15: &#39;death&#39;,
	16: &#39;oneShot&#39;,
	17: &#39;reload&#39;,
	18: &#39;collect&#39;,
	20: &#39;capturing&#39;,
	21: &#39;capture&#39;,
	22: &#39;contest&#39;,
	23: &#39;win&#39;,
};

const ChallengeConditions = {
	0: &#39;killstreak&#39;,
	1: &#39;weaponType&#39;,
	2: &#39;damage&#39;,
	3: &#39;distance&#39;,
	4: &#39;jump&#39;,
	5: &#39;map&#39;,
	6: &#39;timesPlayed&#39;,
	7: &#39;timeAlive&#39;,
	8: &#39;condition&#39;,
	9: &#39;color&#39;,
	10: &#39;kills&#39;,
	11: &#39;shot&#39;,
	12: &#39;hp&#39;,
	13: &#39;scoped&#39;,
	14: &#39;scope&#39;,
	15: &#39;oneShot&#39;,
	16: &#39;ammo&#39;,
	17: &#39;grenade&#39;,
	18: &#39;victim&#39;,
};

const ShellStreak = {
	HardBoiled: 1,
	EggBreaker: 2,
	Restock: 4,
	OverHeal: 8,
	DoubleEggs: 16,
	MiniEgg: 32
};

			/* Ranges
		Hat			1000 - 1999
		Stamp		2000 - 2999
		Secondary	3000 - 3099
		Soldier		3100 - 3399
		Range		3400 - 3599
		Scrambler	3600 - 3799
		Eggsploder	3800 - 3999
		Whipper		4000 - 4199
		Crackshot	4200 - 4499
		TriHard		4500 - &lt; 16000
		Grenade		16000 - 16383
		*/
    </script>
    <!-- shellshockers js -->
    <script>
      function ssJSComplete () {
		window.onloadingcomplete();
	}

	let loaderInterval = setInterval(() =&gt; {
		if (window.Loader) {
			clearInterval(loaderInterval);
			Loader.loadJS(&#39;js/screenShot.js?1692215954&#39;);
			Loader.loadJS(&#39;js/shellshock.js?1767820197&#39;, ssJSComplete);
		}
	}, 100);
    </script>
    <!-- google tag manager noscript -->
    <!-- Google Tag Manager (noscript) -->
    <noscript>
      &lt;iframe src=&#34;https://www.googletagmanager.com/ns.html?id=GTM-K5MSJHJ&#34;
height=&#34;0&#34; width=&#34;0&#34; style=&#34;display:none;visibility:hidden&#34;&gt;&lt;/iframe&gt;
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    <svg width="0" height="0" style="position:absolute">
      <symbol viewBox="0 0 31.571 27.155" id="ico-backToGame" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.057 26.506c-2.893-4.578-5.684-18.63 13.655-18.63h1.522V0L31.57 11.857 17.234 23.716V15.84h-4.35c-5.621 0-11.757 1.656-8.87 9.685.622 1.722-1.231 2.13-1.957.98Z">
        </path>
      </symbol>
      <symbol space="preserve" style="enable-background:new 0 0 24 19.9" viewBox="0 0 24 19.9" id="ico-checkmark" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 18.2c-.2 0-.4-.1-.6-.2l-6.7-4.5c-.5-.3-.6-.9-.3-1.4l2.5-3.8c.2-.2.4-.4.7-.4h.1c.3 0 .6.1.8.3l3.4 3.1 6.8-9.1c.2-.2.5-.4.8-.4.3 0 .6.1.8.4l3.3 4c.3.4.3 1-.1 1.3L10.7 17.9c-.2.2-.5.3-.7.3z" style="fill:#f7ef1d">
        </path>
        <path d="m17.4 2.7 3.3 4L10 17.2l-6.7-4.5 2.5-3.8 4.2 3.8 7.4-10m0-2c-.7 0-1.2.3-1.6.8L9.7 9.8 7.1 7.4c-.3-.3-.8-.5-1.3-.5h-.2c-.6.1-1.2.4-1.5.9l-2.5 3.8c-.6.9-.4 2.2.5 2.8l6.7 4.5c.3.2.7.3 1.1.3.5 0 1-.2 1.4-.6L22.1 8.1c.7-.7.8-1.9.1-2.7l-3.3-4c-.3-.4-.9-.7-1.5-.7z" style="fill:#0c576f">
        </path>
      </symbol>
      <symbol viewBox="0 0 18.703 34.574" id="ico-costDollar" xmlns="http://www.w3.org/2000/svg">
        <path d="M16.876 27.512c-1.219 1.391-2.86 2.306-4.923 2.744v1.793c0 .756-.214 1.366-.642 1.83s-.983.695-1.663.695-1.235-.232-1.663-.695-.642-1.074-.642-1.83v-1.646c-2.437-.341-4.522-1.134-6.256-2.379-.395-.268-.675-.572-.84-.914C.083 26.769 0 26.318 0 25.757c0-.732.192-1.366.577-1.903.383-.536.84-.805 1.366-.805.263 0 .527.05.79.146.264.098.604.281 1.02.55.966.584 1.867 1 2.701 1.243a9.456 9.456 0 0 0 2.667.366c1.163 0 2.047-.213 2.65-.64.605-.427.907-1.067.907-1.921 0-.512-.181-.933-.544-1.262-.362-.33-.813-.591-1.35-.787s-1.323-.439-2.354-.732c-1.646-.463-2.996-.932-4.05-1.408-1.054-.476-1.965-1.22-2.733-2.232C.877 15.36.494 14.001.494 12.293c0-1.952.614-3.646 1.844-5.086 1.23-1.439 2.854-2.39 4.874-2.853v-1.83c0-.732.219-1.335.658-1.81A2.147 2.147 0 0 1 9.516 0c.68 0 1.235.232 1.663.695s.642 1.073.642 1.83v1.72c1.822.316 3.6 1.084 5.334 2.304.396.292.675.616.84.969.165.354.247.787.247 1.3 0 .731-.198 1.366-.593 1.902s-.856.805-1.383.805a2 2 0 0 1-.757-.147c-.242-.097-.592-.28-1.053-.548a37.775 37.775 0 0 0-1.022-.604 8.013 8.013 0 0 0-1.695-.732 6.624 6.624 0 0 0-1.926-.274c-.988 0-1.79.238-2.404.713-.615.475-.922 1.116-.922 1.92 0 .782.35 1.367 1.054 1.757.702.39 1.81.781 3.325 1.17 1.625.416 2.958.855 4.001 1.318 1.042.463 1.943 1.207 2.7 2.232.757 1.024 1.136 2.402 1.136 4.134 0 1.976-.61 3.658-1.827 5.048Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 24.675 30.834" id="ico-costEgg" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.612 0c6.814 0 12.063 12.114 12.063 18.774s-5.524 12.06-12.338 12.06S0 25.434 0 18.774 5.798 0 12.612 0Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 24 24" space="preserve" id="ico-disabled" xmlns="http://www.w3.org/2000/svg">
        <g fill="#0B93BD">
          <path d="M12 24C5.4 24 0 18.6 0 12S5.4 0 12 0s12 5.4 12 12-5.4 12-12 12zm0-22C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z">
          </path>
          <path d="M19.8 20.8c-.3 0-.5-.1-.7-.3L3.5 4.9c-.4-.4-.4-1 0-1.4s1-.4 1.4 0l15.6 15.6c.4.4.4 1 0 1.4-.2.2-.5.3-.7.3z">
          </path>
        </g>
      </symbol>
      <symbol viewBox="0 0 24 24" space="preserve" id="ico-egg-w-outline" xmlns="http://www.w3.org/2000/svg">
        <path class="afegg-fill" d="M12 21.6c-4.4 0-8-3.5-8-7.8 0-4 3.4-11.4 8.1-11.4 4.8 0 7.8 7.5 7.8 11.4.1 4.3-3.5 7.8-7.9 7.8z" style="fill-rule:evenodd;clip-rule:evenodd">
        </path>
        <path class="afegg-stroke" d="M12.1 3.9c3.6 0 6.3 6.4 6.3 9.9s-2.9 6.3-6.5 6.3-6.5-2.8-6.5-6.3c.1-3.5 3.2-9.9 6.7-9.9m0-3C6.2.9 2.5 9.4 2.5 13.8c0 5.2 4.3 9.3 9.5 9.3s9.5-4.2 9.5-9.3C21.5 9.4 18.2.9 12.1.9z">
        </path>
      </symbol>
      <symbol viewBox="0 0 35.313 35.313" id="ico-fullscreen" xmlns="http://www.w3.org/2000/svg">
        <path d="M31.243 0h-19.91a4.074 4.074 0 0 0-4.07 4.07v13.21H4.07A4.074 4.074 0 0 0 0 21.351v9.892a4.074 4.074 0 0 0 4.07 4.07h9.892a4.074 4.074 0 0 0 4.07-4.07V28.05h13.211a4.074 4.074 0 0 0 4.07-4.07V4.07A4.074 4.074 0 0 0 31.243 0ZM14.526 31.244c0 .31-.253.563-.564.563H4.07a.564.564 0 0 1-.564-.563V21.35c0-.31.253-.564.564-.564h3.193v3.194a4.074 4.074 0 0 0 4.07 4.07h3.193v3.193Zm17.28-7.263c0 .31-.252.563-.563.563h-19.91a.564.564 0 0 1-.564-.563V4.07c0-.31.253-.564.564-.564h19.91c.31 0 .564.253.564.564v19.91Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 30.281 36.454" id="ico-goldenEgg" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.14 36.45c9.214.215 16.596-7.384 14.897-17.837C28.537 9.395 21.957 0 15.14 0S1.744 9.395.245 18.613c-1.7 10.453 5.682 18.052 14.896 17.837Z" style="fill:#f7941d">
        </path>
        <path d="M21.984 7.734a.42.42 0 0 0 .346-.665c-1.55-2.204-6.684-8.21-12.969-1.834l-.061.066c-1.718 1.528-3.26 3.76-4.173 6.336-1.941 5.477-.647 10.123 2.658 11.294 3.305 1.172 8.42-2.123 10.362-7.6.725-2.043.945-4.06.77-5.849-.08-.818.483-1.56 1.301-1.647.66-.07 1.258-.11 1.766-.101Z" style="fill:#fab413">
        </path>
        <path d="M6.532 29.874c-.297-.103-.517.274-.283.483 2.236 1.995 7.782 5.884 14.261 2.568 7.119-3.643 7.38-11.682 6.402-15.857-.072-.308-.52-.284-.562.03-.392 2.92-1.934 9.49-7.948 12.181-5.194 2.324-9.717 1.342-11.87.595Z" style="fill:#ca7918">
        </path>
        <path d="M7.257 10.709s.697-3.93 4.722-6.338 4.468 1.807 2.313 2.979-4.257.087-7.035 3.359Z" style="fill:#fcd884">
        </path>
      </symbol>
      <symbol space="preserve" style="enable-background:new 0 0 30.3 36.5" viewBox="0 0 30.3 36.5" id="ico-goldenEgg-callout" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.1 36.4c9.2.2 16.6-7.4 14.9-17.8C28.5 9.4 22 0 15.1 0S1.7 9.4.2 18.6c-1.7 10.5 5.7 18.1 14.9 17.8z" style="fill:#f7941d">
        </path>
        <path d="M22 7.7c.2 0 .4-.2.4-.4 0-.1 0-.2-.1-.2-1.5-2.2-6.7-8.2-13-1.8C7.6 6.8 6 9.1 5.1 11.6c-1.9 5.5-.6 10.1 2.7 11.3 3.3 1.2 8.4-2.1 10.4-7.6.7-2 .9-4.1.8-5.8-.1-.8.5-1.6 1.3-1.6.6-.1 1.2-.2 1.7-.2z" style="fill:#fab413">
        </path>
        <path d="M6.5 29.9c-.3-.1-.5.3-.3.5 2.2 2 7.8 5.9 14.3 2.6 7.1-3.6 7.4-11.7 6.4-15.9-.1-.3-.5-.3-.6 0-.4 2.9-1.9 9.5-7.9 12.2-5.2 2.3-9.7 1.3-11.9.6z" style="fill:#ca7918">
        </path>
        <path d="M7.3 10.7S8 6.8 12 4.4s4.5 1.8 2.3 3-4.3 0-7 3.3z" style="fill:#fcd884">
        </path>
        <path d="M13 21c-.5 0-.8-.1-.9-.1-.1-.1-.1-.4-.2-.9 0-.1-.1-.2-.1-.3v-1.1c0-.2-.1-.8-.3-1.8v-.5c0-.1-.1-.3-.1-.5V15c0-.4-.1-.6-.1-.7v-.4c0-.2 0-.5-.1-.9 0-.1 0-.3-.1-.6-.1-.6-.2-1.2-.2-1.6 0-.3-.1-.7-.2-1.1v-.1s.1 0 .1-.1c.3-.1.7-.2 1.2-.2h.7c.3 0 .5 0 .7-.1.1 0 .2 0 .4-.1h4.6c.1.1.2.1.3.2.3.1.5.2.7.4.1.1.1.2.1.4 0 .8-.1 1.4-.3 2l-.7 4v.2c-.1.1-.1.2-.1.4l-.1.4v.2c0 .4-.1.9-.2 1.6-.1.5-.3 1.2-.4 2 0 0 0 .1-.1.1s-.2.1-.3.1c-.3.1-1 .1-2.1.1H14c-.4-.1-.7-.1-1-.2zm2.7 7h-1.9c-.7 0-1.2 0-1.6-.1-.2 0-.3 0-.3-.1l-.1-2.4v-1.1c0-.1 0-.2.1-.3v-.5c0-.1 0-.2.1-.3.1-.1.2-.2.4-.2H16c.6 0 1.1 0 1.5.1.5.1.8.2.8.5V25c0 .1 0 .6.1 1.3v1c0 .3-.1.4-.1.6-.2.1-.3.1-.5.2h-.5c-.7 0-1.2 0-1.6-.1z" style="fill:#fff">
        </path>
      </symbol>
      <symbol viewBox="0 0 58 58" id="ico-grenade" xmlns="http://www.w3.org/2000/svg">
        <path d="m41.24 26.11 1.95-2a1.91 1.91 0 0 0 0-2.71l-3.29-3.23.21-.21a1 1 0 0 0 0-1.45l-3.33-3.32a1 1 0 0 0-1.46 0l-1.92 1.93a4.57 4.57 0 1 0-5.28 7.31C23.8 23 19 25.21 16.69 27.57A10.18 10.18 0 0 0 17.07 42a10.18 10.18 0 0 0 14.4.3c3-3 6-9.87 5.32-14.68l.14.14a1.89 1.89 0 0 0 1.51.55L40 29.92a1.52 1.52 0 0 1 .29 1.65l-5.21 12.12 1.29.5a.88.88 0 0 0 1.05-.45l6.51-12.28a1.54 1.54 0 0 0-.09-1.59Zm-14.3-7.75a3.21 3.21 0 0 1 6.25-1.05l-2 2a1.91 1.91 0 0 0-.37 2.18 2.93 2.93 0 0 1-.67.07 3.21 3.21 0 0 1-3.21-3.2Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 58 58" id="ico-hat" xmlns="http://www.w3.org/2000/svg">
        <path d="M45.62 33a17.85 17.85 0 0 0-4.76-.7s-1.71-15.38-6-15.38c-2 0-4.32 2-5.9 2s-3.93-2-5.9-2c-4.25 0-6 15.38-6 15.38a17.85 17.85 0 0 0-4.76.7c-1.94.69-2.6 2.61-1.21 3.91 2.07 1.93 7.81 4 17.83 4.13 10-.16 15.76-2.2 17.83-4.13 1.47-1.28.81-3.2-1.13-3.91Z" style="fill:#fff">
        </path>
      </symbol>
      <symbol viewBox="0 0 33.956 34.476" id="ico-map-size-large" xmlns="http://www.w3.org/2000/svg">
        <path d="M33.868 33.088 30.273 25.1a1.613 1.613 0 0 0-1.47-.95h-5.872a82.739 82.739 0 0 1-4.097 4.925l-1.842 2.033-1.841-2.033a82.739 82.739 0 0 1-4.098-4.926h-5.9a1.61 1.61 0 0 0-1.47.951L.088 33.088a.984.984 0 0 0 .898 1.388H32.97a.984.984 0 0 0 .898-1.388Z" class="alcls-1">
        </path>
        <path d="M16.992 27.408s1.185-1.308 2.75-3.258c3.057-3.806 7.569-10.062 7.569-13.831C27.31 4.619 22.69 0 16.992 0S6.673 4.62 6.673 10.319c0 3.769 4.512 10.025 7.569 13.831a79.831 79.831 0 0 0 2.75 3.258Zm-2.836-12.124V8.496c0-.347.104-.625.312-.833.208-.207.49-.31.846-.31.364 0 .652.103.864.31.212.208.317.486.317.833v5.988h2.924c.737 0 1.107.318 1.107.954 0 .322-.091.558-.274.712-.183.152-.46.228-.833.228h-4.182c-.347 0-.615-.093-.8-.28-.187-.186-.28-.457-.28-.814Z" class="alcls-1">
        </path>
      </symbol>
      <symbol viewBox="0 0 33.956 34.476" id="ico-map-size-med" xmlns="http://www.w3.org/2000/svg">
        <path d="M30.273 25.1a1.613 1.613 0 0 0-1.47-.95h-5.872a82.739 82.739 0 0 1-4.097 4.926l-1.842 2.033-1.841-2.033a82.739 82.739 0 0 1-4.098-4.926h-5.9a1.61 1.61 0 0 0-1.47.951L.088 33.088a.984.984 0 0 0 .898 1.388H32.97a.984.984 0 0 0 .898-1.388L30.273 25.1Z" class="amcls-1">
        </path>
        <path d="M16.992 27.408s1.185-1.308 2.75-3.258c3.057-3.806 7.569-10.062 7.569-13.831C27.31 4.619 22.69 0 16.992 0S6.673 4.62 6.673 10.319c0 3.769 4.512 10.025 7.569 13.831a79.831 79.831 0 0 0 2.75 3.258ZM14.11 16.122c-.199.2-.457.298-.776.298-.308 0-.562-.097-.762-.29s-.297-.46-.297-.796v-7.21c0-.353.107-.64.324-.861s.492-.331.828-.331c.24 0 .455.068.65.205s.358.334.49.59l2.438 4.585 2.426-4.585c.273-.53.644-.795 1.113-.795.336 0 .61.11.821.33s.319.509.319.862v7.21c0 .336-.098.6-.292.795s-.45.291-.769.291c-.31 0-.562-.097-.761-.29s-.298-.46-.298-.796v-3.896l-1.511 2.783c-.15.282-.31.483-.478.602s-.367.18-.596.18-.429-.06-.596-.18c-.168-.119-.327-.32-.478-.602l-1.497-2.704v3.817c0 .326-.1.59-.298.788Z" class="amcls-1">
        </path>
      </symbol>
      <symbol viewBox="0 0 33.956 34.476" id="ico-map-size-small" xmlns="http://www.w3.org/2000/svg">
        <path d="M30.273 25.1a1.613 1.613 0 0 0-1.47-.95h-5.872a82.739 82.739 0 0 1-4.097 4.926l-1.842 2.033-1.841-2.033a82.739 82.739 0 0 1-4.098-4.926h-5.9a1.61 1.61 0 0 0-1.47.951L.088 33.088a.984.984 0 0 0 .898 1.388H32.97a.984.984 0 0 0 .898-1.388L30.273 25.1Z" class="ancls-1">
        </path>
        <path d="M16.992 27.408s1.185-1.308 2.75-3.258c3.057-3.806 7.569-10.062 7.569-13.831C27.31 4.619 22.69 0 16.992 0S6.673 4.62 6.673 10.319c0 3.769 4.512 10.025 7.569 13.831a79.831 79.831 0 0 0 2.75 3.258ZM13.48 15.585c-.15-.114-.26-.233-.326-.357s-.098-.282-.098-.477c0-.265.079-.495.238-.69s.345-.291.557-.291c.114 0 .225.017.33.053.107.036.24.102.398.199.363.203.723.35 1.08.437.359.088.763.133 1.213.133.522 0 .916-.077 1.187-.232a.743.743 0 0 0 .403-.683c0-.203-.125-.378-.377-.523s-.731-.29-1.438-.431c-.874-.186-1.56-.406-2.054-.662-.495-.257-.842-.559-1.041-.908-.198-.349-.298-.77-.298-1.266 0-.565.168-1.078.504-1.537.336-.46.797-.82 1.385-1.08s1.248-.392 1.981-.392c.645 0 1.219.071 1.723.213.504.14.963.362 1.378.662.159.115.272.237.338.364.066.13.1.286.1.471 0 .265-.078.495-.232.69-.155.194-.338.29-.55.29-.115 0-.222-.014-.318-.045a2.16 2.16 0 0 1-.411-.206 10.59 10.59 0 0 0-.378-.205c-.207-.11-.45-.199-.729-.265s-.581-.1-.908-.1c-.45 0-.813.086-1.086.26-.274.171-.411.399-.411.68 0 .169.048.306.145.412.098.106.279.21.544.311.265.102.658.205 1.179.312.849.185 1.516.41 2.002.669.485.26.83.563 1.033.908s.305.751.305 1.219a2.54 2.54 0 0 1-.49 1.544c-.328.446-.785.79-1.372 1.034-.587.243-1.27.364-2.047.364a7.943 7.943 0 0 1-1.968-.231c-.606-.156-1.103-.37-1.491-.644Z" class="ancls-1">
        </path>
      </symbol>
      <symbol viewBox="0 0 58 58" style="enable-background:new 0 0 58 58" space="preserve" id="ico-melee" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.4 46.3c.7.6 1.7.9 2.6.6.6-.2 1.2-.6 1.6-1.1L25 36c.2-.3.2-.6 0-.9v-.2l2.1-2.1h.1c3.1-.5 12.2-2.2 16.7-6.2 1.6-1.4 2.6-3.3 3-5.4.3-2.1 0-4.2-1.1-6.1-.6-1.2-1.6-2.2-2.8-2.8-1.8-1-4-1.4-6.1-1.1-2.1.3-4 1.4-5.4 3-4.1 4.6-5.8 13.6-6.2 16.7v.1l-2.2 2c-.3-.3-.7-.3-1 0l-9.8 8.4c-.5.4-.9 1-1.1 1.6-.3.9-.1 2 .7 2.7l.5.6zm20.4-31c1.4-1.6 3.4-2.6 5.6-2.6.5 0 .9 0 1.4.1-2.2.8-4.1 2.1-5.7 3.8-2.3 2.4-4.3 5.7-5.8 8.6.9-3.5 2.4-7.5 4.5-9.9zm2.6 2.6c2.3-2.5 4.8-3.6 6.6-3.6h.5L28.9 27.9c1.5-3.1 3.9-7.3 6.5-10zm8.3-2.4c.3 1.8-.8 4.5-3.6 7.1-2.8 2.6-6.9 4.9-10 6.5l13.6-13.6zm-1 9.7c-2.4 2.2-6.4 3.6-9.9 4.6 2.9-1.5 6.2-3.6 8.6-5.8 1.7-1.5 3-3.5 3.8-5.7.2 1.3.1 2.6-.3 3.8-.4 1.1-1.2 2.2-2.2 3.1z" style="fill:#fff">
        </path>
      </symbol>
      <symbol viewBox="0 0 37.146 24.123" id="ico-nav-equipment" xmlns="http://www.w3.org/2000/svg">
        <path d="M35.197 16.086c-1.938-.688-4.76-.704-4.76-.704S28.723 0 24.475 0c-1.973 0-4.32 2.004-5.902 2.004S14.643 0 12.67 0C8.423 0 6.709 15.382 6.709 15.382s-2.822.016-4.76.704c-1.94.688-2.6 2.608-1.207 3.906 2.066 1.926 7.813 3.965 17.83 4.13 10.019-.165 15.766-2.204 17.832-4.13 1.392-1.298.732-3.218-1.207-3.906Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 43.927 30.364" id="ico-nav-friends" xmlns="http://www.w3.org/2000/svg">
        <path d="m38.849 15.363-.008-.002a6.921 6.921 0 0 0-.34-.086l-.034-.008a6.956 6.956 0 0 0-.32-.063l-.056-.01a6.98 6.98 0 0 0-.308-.043l-.069-.008a7.047 7.047 0 0 0-.312-.026l-.067-.005a7.063 7.063 0 0 0-.378-.011h-.08a6.26 6.26 0 0 0-4.893-11.438 10.81 10.81 0 0 1 .933 4.402c0 1.95-.527 3.832-1.48 5.468 3.902 1.977 6.478 6.035 6.478 10.524v2.91h6.012v-4.896a6.972 6.972 0 0 0-5.078-6.708Zm-33.77 0 .007-.002c.112-.032.226-.06.34-.086l.035-.008c.105-.024.212-.044.32-.063l.055-.01a6.98 6.98 0 0 1 .308-.043l.07-.008c.103-.012.207-.02.311-.026l.067-.005c.125-.007.251-.011.379-.011h.08a6.26 6.26 0 0 1 4.893-11.438 10.81 10.81 0 0 0-.934 4.402c0 1.95.527 3.832 1.48 5.468-3.902 1.977-6.478 6.035-6.478 10.524v2.91H0v-4.896a6.972 6.972 0 0 1 5.079-6.708Z" class="aqcls-1">
        </path>
        <path d="m28.483 15.415-.01-.003a8.895 8.895 0 0 0-.438-.11l-.044-.01a8.93 8.93 0 0 0-.412-.081c-.024-.005-.048-.01-.071-.013a8.975 8.975 0 0 0-.397-.055l-.09-.012a9.02 9.02 0 0 0-.401-.033l-.086-.007a9.11 9.11 0 0 0-.488-.013h-.103a8.064 8.064 0 1 0-7.96 0h-.102a8.98 8.98 0 0 0-8.98 8.98v6.306h26.125v-6.307c0-4.114-2.768-7.58-6.543-8.642Z" class="aqcls-1">
        </path>
      </symbol>
      <symbol viewBox="0 0 32.36 31.597" id="ico-nav-home" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.468.295.297 15.465c-.634.635-.185 1.72.712 1.72H4.57c.556 0 1.006.45 1.006 1.006V30.59c0 .556.451 1.007 1.007 1.007h4.91c.556 0 1.006-.451 1.006-1.007v-8.174c0-.556.451-1.007 1.007-1.007h5.345c.556 0 1.007.451 1.007 1.007v8.174c0 .556.45 1.007 1.007 1.007h4.91c.555 0 1.006-.451 1.006-1.007v-12.4c0-.556.45-1.006 1.007-1.006h3.562c.897 0 1.346-1.085.712-1.72L16.892.296a1.007 1.007 0 0 0-1.424 0Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 26.805 31.155" id="ico-nav-profile" xmlns="http://www.w3.org/2000/svg">
        <path d="m20.092 15.817-.01-.003a9.136 9.136 0 0 0-.45-.114l-.045-.01a9.18 9.18 0 0 0-.423-.083c-.025-.004-.049-.01-.073-.013a9.204 9.204 0 0 0-.407-.057l-.092-.011a9.276 9.276 0 0 0-.413-.035l-.087-.007a9.352 9.352 0 0 0-.501-.014h-.105a8.275 8.275 0 1 0-8.167 0h-.105A9.214 9.214 0 0 0 0 24.684v6.47h26.805v-6.47c0-4.221-2.84-7.777-6.713-8.867Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 33.411 31.155" id="ico-nav-shop" xmlns="http://www.w3.org/2000/svg">
        <path d="M33.124 5.345a1.35 1.35 0 0 0-1.055-.528H7.877l-.95-3.797A1.322 1.322 0 0 0 5.627 0h-4.29a1.336 1.336 0 1 0 0 2.672h3.27l5.415 22.083a1.32 1.32 0 0 0 1.3 1.02H26.76a1.336 1.336 0 1 0 0-2.673H12.342l-.773-3.13h17.3c.598 0 1.126-.421 1.301-.984l3.2-12.518a1.3 1.3 0 0 0-.246-1.125Z">
        </path>
        <circle cx="13.819" cy="29.01" r="2.145">
        </circle>
        <circle cx="24.896" cy="29.01" r="2.145">
        </circle>
      </symbol>
      <symbol viewBox="0 0 58 58" id="ico-primary" xmlns="http://www.w3.org/2000/svg">
        <path d="m48.31 10.74-1.93 1.62a12.45 12.45 0 0 1-3.79-3.42l-.88.75A16.38 16.38 0 0 1 44.45 14l-.39.33L41.32 13l-1.52 1.21-.74-.44-5.23 4.3.12 1-.22.18-1.62-.48-2.39 2.18-.59-.37-.53.54 1.16 1.41L17 33l.2 3-1.2 2-1.39-.08-6.39 5.55L13 49l6.67-10.6.58-.25 3.94 10.91L29.08 45l-2.9-6.32 3.23-3-1.35-2.25c1.25 1.23 8.23 7.67 17.55 7.08l.57-6.88s-8 .58-13.25-5.32l.16-.57 10.15-8.92-.09-.82 6.63-5.72ZM25.62 37.42l-.71-1.56 1.64-.81-.2-.59-2 .14 2.11-1.42 1.34 2.21ZM12.9 20.87a5.82 5.82 0 0 0 1.75 1.31 5.64 5.64 0 0 0 2.15.59h.45a5.82 5.82 0 0 0 2.18-.41 6 6 0 0 0 1.86-1.16 5.85 5.85 0 0 0 1.9-3.92v-.45a6 6 0 0 0-1.58-4 6 6 0 0 0-1.75-1.31 5.87 5.87 0 0 0-2.15-.58h-.45a6 6 0 0 0-2.18.41 6.14 6.14 0 0 0-1.86 1.16 6 6 0 0 0-1.32 1.76 5.78 5.78 0 0 0-.59 2.15v.45a6 6 0 0 0 .42 2.13 6.22 6.22 0 0 0 1.17 1.87Zm2.24-7.79a.76.76 0 0 1 .63-.26h1.55a.83.83 0 0 1 .93.94v6.41a1 1 0 0 1-.26.74.87.87 0 0 1-.67.26 1 1 0 0 1-.7-.26 1 1 0 0 1-.26-.74v-5.61h-.59a.79.79 0 0 1-.63-.26.85.85 0 0 1-.23-.61.87.87 0 0 1 .23-.61Z" style="fill:#fff">
        </path>
      </symbol>
      <symbol viewBox="0 0 44 39.001" id="ico-private-game-config" xmlns="http://www.w3.org/2000/svg">
        <rect class="avcls-1" y="4" width="44" height="4" rx="1.952" ry="1.952">
        </rect>
        <circle class="avcls-1" cx="22.236" cy="6" r="6">
        </circle>
        <rect class="avcls-1" y="31.001" width="44" height="4" rx="1.952" ry="1.952">
        </rect>
        <circle class="avcls-1" cx="12" cy="33.001" r="6">
        </circle>
        <rect class="avcls-1" y="17.501" width="44" height="4" rx="1.952" ry="1.952">
        </rect>
        <circle class="avcls-1" cx="32.335" cy="19.501" r="6">
        </circle>
      </symbol>
      <symbol viewBox="0 0 58 58" id="ico-secondary" xmlns="http://www.w3.org/2000/svg">
        <path d="m43.75 16.19.79-.58-2.62-3.29-1.87 1.49-1.52-.81L37 14.12l.53 1.72L29 22.65l-1.39.08-6.38 5.1-.78-.65-1.35 1 .47 1-.7.56a.72.72 0 0 0-.17.93l3.16 5.27 2.22.33 4.33 9.48 2.64 1 4.56-4.37.27-2.72-2.37-5.37 5-4.59-2.25-3.3 2.8-2.4-.34-.89 5.61-4.58-.33-.48.63-.48Zm-7.31 13.27-3.57 3.31-.41-.93 1.67-1.66-2.52-1.47 2.36-2 .57.31Zm-14.38-7.83a5.87 5.87 0 0 0 1.31-1.76 5.68 5.68 0 0 0 .63-2.15v-.45a6 6 0 0 0-3.33-5.35 5.87 5.87 0 0 0-2.15-.58h-.45a6 6 0 0 0-4 1.58 6.16 6.16 0 0 0-1.32 1.75 5.68 5.68 0 0 0-.58 2.15v.45a5.91 5.91 0 0 0 1.58 4 6.16 6.16 0 0 0 1.75 1.32 5.83 5.83 0 0 0 2.15.59H18a6 6 0 0 0 2.18-.41 6.15 6.15 0 0 0 1.88-1.14Zm-5.81-.16a1.45 1.45 0 0 1-.84-.22.81.81 0 0 1-.31-.6 1.4 1.4 0 0 1 .44-.93l.77-.81.1-.1.71-.79.35-.39a3.28 3.28 0 0 0 .23-.28 9.49 9.49 0 0 0 .72-1.09 1.91 1.91 0 0 0 .21-.72.65.65 0 0 0-.2-.53.69.69 0 0 0-.54-.2.61.61 0 0 0-.53.22 2.34 2.34 0 0 0-.34.64 3 3 0 0 1-.33.65.71.71 0 0 1-.54.23.91.91 0 0 1-.65-.23 1 1 0 0 1-.28-.62 2.55 2.55 0 0 1 .38-1.35 2.9 2.9 0 0 1 1-1A3 3 0 0 1 18 13a2.54 2.54 0 0 1 1 .19 2.17 2.17 0 0 1 .85.51 2.39 2.39 0 0 1 .58.8 2.33 2.33 0 0 1 .21 1 2.75 2.75 0 0 1-.26 1.19 4.21 4.21 0 0 1-.58.94 11.56 11.56 0 0 1-.93 1.05 11.15 11.15 0 0 0-.87 1h2a.86.86 0 0 1 .64.25 1.11 1.11 0 0 1 .23.62.79.79 0 0 1-.25.61.78.78 0 0 1-.65.27Z" style="fill:#fff">
        </path>
      </symbol>
      <symbol viewBox="0 0 33.956 34.086" id="ico-settings" xmlns="http://www.w3.org/2000/svg">
        <path d="m32.988 14.471-2.331-.412c-.48-.068-.892-.48-1.03-.891a17.065 17.065 0 0 0-.754-1.989c-.205-.411-.205-.96.138-1.372l1.44-1.92a1.245 1.245 0 0 0-.137-1.577l-1.098-1.166-1.097-1.166a1.245 1.245 0 0 0-1.577-.137l-1.92 1.371c-.412.275-.96.343-1.372.069a9.532 9.532 0 0 0-1.92-.823 1.254 1.254 0 0 1-.892-1.029l-.343-2.4C20.026.41 19.478 0 18.929 0h-3.155c-.617 0-1.097.411-1.234 1.029l-.412 2.332c-.069.48-.48.891-.96 1.028-.686.206-1.372.48-2.058.823-.411.206-.96.206-1.371-.137l-1.92-1.44a1.245 1.245 0 0 0-1.578.137L5.075 4.869 3.91 5.967a1.245 1.245 0 0 0-.137 1.577l1.372 1.989c.274.412.274.96.068 1.372a10.125 10.125 0 0 0-.823 1.989c-.137.48-.548.823-1.028.891l-2.332.343c-.55.069-1.03.617-1.03 1.166v3.155c0 .617.412 1.097 1.029 1.234l2.332.412c.48.068.891.411 1.028.891.206.686.48 1.372.755 1.99.205.41.205.96-.137 1.371l-1.44 1.92a1.245 1.245 0 0 0 .136 1.578l1.098 1.166 1.097 1.166c.412.411 1.097.48 1.578.137l1.988-1.372c.412-.274.96-.274 1.372-.069.617.343 1.303.618 1.989.823.48.138.823.55.892 1.03l.343 2.331c.068.617.617 1.029 1.165 1.029h3.155c.617 0 1.098-.412 1.235-1.029l.411-2.332c.069-.48.48-.891.892-1.029.617-.205 1.303-.48 1.852-.754.411-.206.96-.206 1.371.137l1.92 1.44c.48.343 1.166.275 1.578-.137l1.166-1.097 1.166-1.097c.411-.412.48-1.098.137-1.578l-1.372-1.92c-.274-.412-.274-.96-.068-1.372a9.533 9.533 0 0 0 .823-1.92c.137-.48.548-.823 1.028-.892l2.4-.343c.618-.068 1.03-.617 1.03-1.166v-3.154c.068-.755-.343-1.303-.96-1.372ZM16.94 23.935c-3.84 0-6.995-3.154-6.995-6.995s3.154-6.995 6.995-6.995 6.995 3.154 6.995 6.995-3.154 6.995-6.995 6.995Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 68 76.14" id="ico-shell-streak-restock" xmlns="http://www.w3.org/2000/svg">
        <path class="aycls-1" d="M61.54 40.75c-3.08 0-5.74 2.19-6.34 5.2-.1.5-.21.99-.35 1.48-.34-8.84-1.5-12.63-3.89-18.67a4 4 0 0 0-3.72-2.52c-1.64 0-3.11 1-3.72 2.52-.87 2.19-1.57 4.09-2.14 6.03-.56-1.95-1.27-3.84-2.14-6.03-.1-.26-.24-.5-.39-.73.12-.08.24-.17.36-.27L52 18.06c.15-.11.28-.23.41-.36a4.334 4.334 0 0 0 0-6.11c-.09-.09-.18-.18-.28-.26L39.72 1.07A4.296 4.296 0 0 0 36.89 0c-1.15 0-2.27.47-3.09 1.29-.78.78-1.22 1.83-1.23 2.97l-.08 3.39c-8.47.43-16.39 3.94-22.42 9.95l-.04.04C3.56 24.1 0 32.71 0 41.87c.01 9.18 3.57 17.78 10.02 24.23 6.46 6.46 15.07 10.03 24.22 10.04 9.16 0 17.76-3.56 24.23-10.04a34.146 34.146 0 0 0 9.4-17.66c.38-1.88-.11-3.82-1.34-5.32a6.436 6.436 0 0 0-5-2.36ZM33.06 27.11c-.54.43-.98.99-1.25 1.66-.87 2.19-1.57 4.09-2.14 6.03-.56-1.95-1.27-3.84-2.14-6.03a4 4 0 0 0-3.72-2.52c-1.64 0-3.11 1-3.72 2.52-2.55 6.42-3.69 10.3-3.95 20.39l-.08 2.95c-.01.41.05.82.17 1.22A21.13 21.13 0 0 1 12.88 42c-.02-5.76 2.2-11.16 6.25-15.22l.06-.06.1-.1a21.27 21.27 0 0 1 12.94-6l-.11 3.7v.12c0 1.01.34 1.93.93 2.67Zm-7.42 26.46c-.49.15-1.08.25-1.81.25-.36 0-.69-.03-.99-.07a4.86 4.86 0 0 1-1.46-.44c-.96-.47-1.29-1.1-1.29-1.1l.08-2.95c.25-9.84 1.37-13.22 3.67-19.02 2.3 5.8 3.42 9.18 3.67 19.02l.08 2.95s-.05.1-.18.25-.32.35-.61.55c-.29.2-.66.4-1.15.55Zm-1.81 4.26c2.62 0 4.57-.91 5.85-2.02 1.29 1.11 3.24 2.02 5.85 2.02s4.57-.91 5.85-2.02c1.29 1.11 3.24 2.02 5.85 2.02.43 0 .84-.03 1.23-.08-3.9 3.5-8.9 5.44-14.23 5.44-5.65 0-10.97-2.16-14.97-6.09-.3-.29-.57-.61-.85-.92 1.28.94 3.07 1.66 5.4 1.66Zm19.74-8.57c.02-.62.03-1.2.06-1.77.02-.57.05-1.11.08-1.63a67 67 0 0 1 .36-4.2c.15-1.25.34-2.37.57-3.42.6-2.8 1.45-5.09 2.6-7.99 2.3 5.8 3.42 9.18 3.67 19.02l.08 2.95s-.85 1.61-3.74 1.61-3.74-1.61-3.74-1.61l.08-2.95Zm-4.36 0 .08 2.95s-.85 1.61-3.74 1.61-3.74-1.61-3.74-1.61l.08-2.95c.25-9.84 1.37-13.22 3.67-19.02 2.3 5.8 3.42 9.18 3.67 19.02Zm24.74-1.59c-1.14 5.89-4.01 11.3-8.3 15.6-5.72 5.72-13.31 8.87-21.4 8.87-8.08 0-15.68-3.15-21.4-8.87-5.7-5.7-8.84-13.3-8.85-21.4 0-8.09 3.15-15.7 8.85-21.4l.04-.04c1.04-1.03 2.14-1.98 3.29-2.84 1.16-.86 2.37-1.64 3.62-2.32.42-.23.84-.45 1.27-.65.86-.41 1.73-.79 2.63-1.12 3.12-1.16 6.45-1.8 9.86-1.88l2.83-.07.18-7.21c0-.13.04-.19.07-.22 0 0 .03-.02.06-.05.01 0 .02-.01.04-.02.03-.02.07-.03.12-.04.02 0 .02-.01.04-.01h.06c.05.01.1.03.15.09l12.5 10.32c.12.12.12.33 0 .45L36.7 24.65s-.04.04-.07.05c0 0-.02 0-.03.01l-.09.03h-.02c-.04 0-.09 0-.14-.03-.2-.09-.2-.22-.2-.29l.25-8-2.99.09a25.3 25.3 0 0 0-6.95 1.21c-3.71 1.2-7.12 3.25-9.96 6.04l-.16.16c-4.82 4.82-7.45 11.23-7.42 18.06.03 6.8 2.72 13.16 7.57 17.93.61.6 1.25 1.16 1.9 1.69l.01.01a23.21 23.21 0 0 0 2.04 1.47c.69.44 1.39.85 2.11 1.22.01 0 .03.01.04.02.71.37 1.44.7 2.18 1 .02 0 .04.02.05.02.74.29 1.48.55 2.24.77.02 0 .05.02.07.02.75.22 1.51.4 2.27.55.03 0 .06.01.09.02.76.14 1.53.25 2.29.33.03 0 .07 0 .1.01.76.07 1.53.11 2.3.11h.13c.21 0 .42 0 .63-.01.19 0 .39 0 .58-.02.21-.01.42-.03.63-.04.19-.01.39-.02.58-.04.21-.02.42-.05.62-.07.19-.02.39-.04.58-.07.21-.03.41-.07.62-.1.2-.03.39-.06.59-.1.2-.04.41-.09.61-.13.19-.04.39-.08.58-.13.2-.05.39-.11.59-.16.2-.05.4-.1.59-.16.19-.06.39-.12.58-.19.2-.06.39-.12.59-.19.2-.07.39-.15.58-.22l.57-.21c.19-.08.38-.16.57-.25.19-.08.38-.16.56-.24.19-.09.37-.18.56-.27.18-.09.37-.18.55-.27.19-.1.37-.21.56-.31.18-.1.35-.19.53-.29.19-.11.37-.23.56-.35.17-.11.34-.21.5-.32.19-.12.37-.26.56-.39l.48-.33c.19-.14.37-.29.56-.43.15-.12.3-.23.45-.35.2-.17.4-.34.6-.52.12-.11.25-.21.37-.32.32-.29.63-.59.94-.89 3.59-3.59 6-8.14 6.96-13.06a2.425 2.425 0 0 1 .85-1.42c.21-.17.46-.31.72-.41s.55-.15.84-.15c.39 0 .75.09 1.07.24s.6.38.83.65c.22.27.39.59.48.93.05.17.07.35.08.53 0 .18 0 .37-.05.56Z" data-name="icons flat">
        </path>
      </symbol>
      <symbol viewBox="0 0 58 58" id="ico-specialItem" xmlns="http://www.w3.org/2000/svg">
        <path d="M42.05 25.32h-8.88a.74.74 0 0 1-.71-.52l-2.75-8.44a.75.75 0 0 0-1.42 0l-2.75 8.44a.74.74 0 0 1-.71.52H16a.75.75 0 0 0-.44 1.35l7.19 5.22a.76.76 0 0 1 .27.84l-2.75 8.45a.75.75 0 0 0 1.16.83l7.18-5.22a.75.75 0 0 1 .88 0L36.62 42a.75.75 0 0 0 1.16-.83L35 32.73a.76.76 0 0 1 .27-.84l7.19-5.22a.75.75 0 0 0-.41-1.35Z" style="fill:#fff">
        </path>
      </symbol>
      <symbol id="ico-stamp" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <style>
            .bacls-1{fill:#fff}
          </style>
        </defs>
        <circle class="bacls-1" cx="26.49" cy="29.42" r="1.41">
        </circle>
        <circle class="bacls-1" cx="31.86" cy="29.42" r="1.41">
        </circle>
        <path class="bacls-1" d="M32.65 32.55a.91.91 0 0 0-1.11.64 2.4 2.4 0 0 1-4.64 0 .91.91 0 1 0-1.75.47 4.21 4.21 0 0 0 8.14 0 .91.91 0 0 0-.64-1.11Z">
        </path>
        <path class="bacls-1" d="M29 11c-8.2 0-14.86 13-14.86 21.22a14.86 14.86 0 0 0 29.72 0C43.86 24 37.2 11 29 11Zm.18 29.16a8.53 8.53 0 1 1 8.52-8.53 8.53 8.53 0 0 1-8.52 8.49Z">
        </path>
      </symbol>
      <symbol viewBox="0 0 29.297 30.465" id="ico-star" xmlns="http://www.w3.org/2000/svg">
        <path d="m11.527.247 6.535 6.356a.87.87 0 0 0 .777.23l8.94-1.782a.87.87 0 0 1 .951 1.238l-4.024 8.18a.87.87 0 0 0 .021.81l4.457 7.952a.87.87 0 0 1-.884 1.287l-9.022-1.3a.87.87 0 0 0-.764.27l-6.186 6.696a.87.87 0 0 1-1.497-.442L9.28 20.759a.87.87 0 0 0-.493-.642l-8.28-3.815a.87.87 0 0 1-.042-1.56l8.064-4.252a.87.87 0 0 0 .459-.668L10.056.77a.87.87 0 0 1 1.47-.522Z">
        </path>
      </symbol>
      <symbol class="bcvip-svg-icon-wrap" viewBox="0 0 58 58" style="enable-background:new 0 0 58 58" space="preserve" id="ico-vip" xmlns="http://www.w3.org/2000/svg">
        <path class="bcvip-svg-icon bcvip-svg-icon-wings" d="M28.1 42.7s-.8-.1-1.5-.2c-.4-.1-.8-.1-1.1-.1-.3-.1-.5-.1-.5-.1-.2-2.9-1.2-4.3-2-5.1-.5-.4-1.8-1-1.8-1 0 .9-.1 2 .2 3.1.3 1 1 2.1 2.4 2.7-.1.1-4.2-1.4-4.1-1.6.3-1.4.3-2.5.1-3.4-.1-.9-.3-1.5-.6-2s-1.3-1.4-1.3-1.4c-.3.8-.7 1.8-.8 2.9-.1.6.1 1.1.3 1.7.2.5.6 1.2 1.2 1.6 0 0-1-.6-1.9-1.3-.5-.3-.9-.7-1.2-1L15 37c1.3-2.5 1.8-4.2 1-6.4-.2-.3-.3-.4-.3-.4-1.1 1.2-3 3.2-1.5 6 0 0-.7-.9-1.3-1.8-.3-.4-.5-1-.7-1.3l-.3-.6c2.1-1.9 3-3.2 3.1-4.3.2-1.1-.1-2.1-.1-2.1-1.5.9-4 2.2-3.5 5.3l-.2-.6c-.1-.4-.2-.9-.4-1.5-.2-1.1-.3-2.2-.3-2.2 2.7-1 3.8-2.3 4.3-3.4s.4-2 .4-2c-1.7.5-4.4 1.1-4.8 4.1 0 0 0-1.1.1-2.2s.3-2.2.3-2.2c2.9-.3 4.3-1.2 5-1.9.4-.4.9-1.5.9-1.5-.9-.2-1.9-.3-3-.1-1.1.2-2.1.9-2.7 2.3 0 0 0-.2.1-.5s.2-.6.3-1c.3-.7.5-1.4.5-1.4.6-.2 1.4-.6 2.1-1.3.7-.7 1-1.8 1.7-3.9-2.4-.2-3.9 1.2-4.4 2.3-.6 1.2-.3 2.2-.1 2.7 0 0-.3.7-.6 1.5-.1.4-.2.8-.3 1.1-.1.3-.1.5-.1.5.2-1.6-.1-2.9-.5-4.1-.4-1.2-.9-2.3-1.1-3.4 0 0-.3.3-.7.9-.3.6-.7 1.4-.9 2.3-.3 1.8.4 4.1 3 5.3 0 0-.2 1.2-.3 2.3-.1 1.2 0 2.4 0 2.4-.5-3.2-2.6-4.7-3.9-6.4 0 0-.6 1.5-.4 3.2.2 1.8 1.4 3.8 4.3 4.3 0 0 .1 1.2.3 2.3.2 1.2.6 2.3.6 2.3-1.4-2.9-3.7-3.9-5.5-5.2 0 0-.2 1.5.5 3.2.7 1.6 2.4 3.5 5.4 3 0 0 .1.3.3.7.2.4.4 1 .8 1.4.7 1 1.4 1.9 1.4 1.9-2.3-2.2-4.9-2.3-7-3.1 0 0 .1.4.4 1 .3.6.7 1.4 1.3 2.1 1.4 1.3 3.6 2.3 6.2.8l.5.5c.3.3.8.7 1.3 1.1.5.4 1 .7 1.4 1 .3.2.6.3.6.4-.8-.2-1.4-.5-2.1-.6-.7-.1-1.4 0-1.9-.1-1.2 0-2.4.3-3.5.3 0 0 .2.3.7.8.5.4 1.1 1.1 1.9 1.4.9.4 1.9.6 2.9.5 1.1-.2 2.1-.7 3.1-1.8-.1.1 3.5 1.5 4.3 1.6h-2.1c-.7.1-1.3.3-1.9.5-1.2.4-2.2 1-3.2 1.4 0 0 .3.2.8.5s1.3.6 2.2.7c1.8.3 4-.3 5.3-2.9 0 0 .2 0 .5.1.3 0 .7.1 1.1.1l1.6.2c.2 0 .4-.2.4-.4.2.2 0 0-.2 0zm1.8 0s.8-.1 1.5-.2c.4-.1.8-.1 1.1-.1.3-.1.5-.1.5-.1.2-2.9 1.2-4.3 2-5.1.5-.4 1.8-1 1.8-1 0 .9.1 2-.2 3.1-.3 1-1 2.1-2.4 2.7 0 .1 4.2-1.4 4.1-1.6-.3-1.4-.3-2.5-.1-3.4.1-.9.3-1.5.6-2s1.3-1.4 1.3-1.4c.3.8.7 1.8.7 2.9.1.6-.1 1.1-.3 1.7-.2.5-.6 1.2-1.2 1.6 0 0 1-.6 1.9-1.3.5-.3.9-.7 1.2-1l.5-.5c-1.3-2.5-1.8-4.2-1-6.4.2-.3.3-.4.3-.4 1.1 1.2 3 3.2 1.5 6 0 0 .7-.9 1.3-1.8.3-.4.5-1 .7-1.3l.3-.6c-2.1-1.9-3-3.2-3.2-4.3-.2-1.1.1-2.1.1-2.1 1.5.9 4 2.2 3.5 5.3l.2-.6c.1-.4.2-.9.4-1.5.2-1.1.3-2.2.3-2.2-2.7-1-3.8-2.3-4.3-3.4s-.5-2-.5-2c1.7.5 4.4 1.1 4.8 4.1 0 0 0-1.1-.1-2.2s-.3-2.2-.3-2.2c-2.9-.3-4.2-1.2-5-1.9-.4-.4-.9-1.5-.9-1.5.9-.2 1.9-.3 3-.1 1 .2 2.1.9 2.7 2.3 0 0 0-.2-.1-.5s-.2-.6-.3-1c-.3-.7-.5-1.4-.5-1.4-.6-.2-1.4-.6-2.1-1.3-.7-.7-1-1.8-1.7-3.9 2.4-.2 3.9 1.2 4.4 2.3.6 1.2.3 2.2.1 2.7 0 0 .3.7.6 1.5.1.4.2.8.3 1.1.1.3.1.5.1.5-.2-1.6.1-2.9.5-4.1.4-1.2.9-2.3 1.1-3.4 0 0 .3.3.7.9.3.6.7 1.4.9 2.3.4 1.9-.3 4.2-2.9 5.4 0 0 .2 1.2.3 2.3.1 1.2 0 2.4 0 2.4.5-3.2 2.6-4.7 3.9-6.4 0 0 .6 1.5.4 3.2-.2 1.8-1.4 3.8-4.3 4.3 0 0-.1 1.2-.3 2.3-.2 1.2-.6 2.3-.6 2.3 1.4-2.9 3.7-3.9 5.5-5.2 0 0 .2 1.5-.5 3.2-.7 1.6-2.4 3.5-5.4 3 0 0-.1.3-.3.7-.2.4-.4 1-.8 1.4-.7 1-1.4 1.9-1.4 1.9 2.3-2.2 4.9-2.3 7-3.1 0 0-.1.4-.4 1-.3.6-.7 1.4-1.3 2.1-1.4 1.3-3.6 2.3-6.2.8l-.5.5c-.3.3-.8.7-1.3 1.1-.5.4-1 .7-1.4 1-.3.2-.6.3-.6.4.8-.2 1.4-.5 2.1-.6.7-.1 1.4 0 2-.1 1.2 0 2.4.3 3.5.3 0 0-.2.3-.7.8-.5.4-1.1 1.1-1.9 1.4-.9.4-1.9.6-2.9.5-1.1-.2-2.1-.7-3.1-1.8.1.1-3.5 1.5-4.3 1.6h2.1c.7.1 1.3.3 1.9.5 1.2.4 2.2 1 3.2 1.4 0 0-.3.2-.8.5s-1.3.6-2.2.7c-1.8.3-4-.3-5.3-2.9 0 0-.2 0-.5.1-.3 0-.7.1-1.1.1l-1.6.2c-.2 0-.4-.2-.4-.4-.1.1.1-.1.3-.1z">
        </path>
        <path class="bcvip-svg-icon bcvip-svg-icon-emblem" d="M29 12.7c-.1 0-.2 0-.3.1-1.9 1-7.1 3.2-9.4 4.1-.7.3-.8.4-.8.6-.1 2.5-.3 8.6 1.2 12.3 2 4.7 7.5 7 9.1 7.6h.4c1.6-.6 7.1-2.9 9-7.6 1.5-3.7 1.4-9.8 1.2-12.3 0-.2-.1-.4-.8-.6-2.2-.9-7.5-3-9.3-4.1-.1-.1-.2-.1-.3-.1z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-crackshot" xmlns="http://www.w3.org/2000/svg">
        <path class="bdst0" d="m97.3 9.6-3.1-3.1-3.6 2-36.2 31.7h-.8l-1.4-1.6 1.4-1.2 4.2-2 3.7-2.8-4.9-5.6-3.6 2.8-3.8 5.3-.4-.5-1.9 1.6.4.5-9.8 8.3-.5-.6-1.9 1.6.5.6-6.6 3.3-1.8 1.8 5.2 5.7 2.1-1.8 4-5.6 1.5 1.8-.5 1.6-1.1-.8-1.6 1.2.6.9-1.9 1.7 2.9 3.2-3.4 6.2-3.9.4-17 14 2.4 2.1-1.5 1.5-2.3-1.9-4.1 3.9 16.6 13.8 3.3-4.2-2.3-1.9 1.2-1.3 1.5 1.3L41 75.4l6 2.4 4-4-5.7-6-.4-2.8 3.3-4.3 2.3 2.4h6.3l3.7-3.2 1-5.7-3.2-3.6 22-19-3.1-4 16.9-14.1 3.2-3.9zM18.1 83.7l3 2.7-1.4 1.3-3.2-2.7 1.6-1.3zm6.2 7.9-2.4-2 1.3-1.3 2.3 2-1.2 1.3zm17.3-42-1-1.1 9.8-8.2 1.1 1.2-9.9 8.1zm17.3 5.6-.4 3.5-2.5 2.4-4.6.3-1.9-2.1.7-.9 1.3 1.4h3.4l.9-.8-2.8-.7-1.4-1.7.2-.3 4.6-4 2.5 2.9z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-ranger" xmlns="http://www.w3.org/2000/svg">
        <path class="best0" d="m76.8 32.6-.1-2.2 22.5-19.3-3.3-3.3-11.4 9.6-4.7-1.3-7.6 6.5-2.2-1-25.7 21.8-3.6-3.5.9-.7 6.5-3.9 2.7.2 1.2-1.1s-1.8-3.4-6.9-8l-1.2 1.3v2.1l-4.6 5.8-8.3 8-3.9 1.7-13.9 11.1-2.9.9s1 2.1 2.4 3.6c2 2 4 3.2 3.7 3l.8-2.6 13.1-11.7 2.5-3.1.2-.2 3.5 3.8-12.4 10.6 1.7 8.9-19 16.5L17 98.2l16.9-17 3.4 7.5 11.3-6.3-5-9.4 9.4-9.8-2.2-3.8 1.5.8 6.6 5.5 8.7-10.8c-7.7-4.6-9.6-8-9.6-8l5.2-2 13.6-12.3zm1.2-12 1.8.6-4.6 4-1-1.1 3.8-3.5zM17.5 89.1l-3.5-5 2.5-2.2 3.8 4.4-2.8 2.8zm8.1-4.2-4.4-7.3L29 71l3.5 7.3-6.9 6.6zm23.9-22.1-7.3 7.6-2.5-4.6 4.9-2.3-.3-2c-1.5.6-2.5-.1-3.2-.7l4.9-3.7.1.1 3.4 5.6z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-rpegg" xmlns="http://www.w3.org/2000/svg">
        <path class="bfst0" d="m78.1 48.5-5.1-.1.1-1.7 6.2-5.1 1.4-3.2.9 1.1 19.2-13.1s-.9-3.1-3.7-7l.2-1.8c.2-1.2-.7-2.3-1.9-2.4l-1.9-.2c-1.7-1.7-3.7-3.4-6.2-5L70.9 26.6l1.3 1.5-1.5.5-5.5-2.6-4.9 4.1.8 4.4-4.7 3.8-4-4.6.1-.1 1.4.3 7.4-6.9.6.7 4.2-3.4-5.3-6.3-4.2 3.4.4.6-7.8 6v1.5l-12.4 8.6 5.4 6.2 5.7-6 3.4 4.7-1.6-.4-3.7 2.8 1 1.3-22.3 19-1.4-.5-3.5 2.8.2 1.3-8.8 5.2-2.2-.3-3.9 3.5s3.4 11.5 14.7 18.2l4.4-3.5.3-2.2 6-7.5.6-.5 1.3.4 3.2-2.8-.1-1.4 2.9-2.5 11.1 11.6 7.1-6.2-10-12.6 9.5-8.2 8.3.2.2.3-2.1 2.1 5.1 6.8 1.8-1.7 5.8 9 6.5-6.1-4.2-10.8 5.2-5.7-4.6-6.1zm-1.4 2.6 2.5 3.6-3.2 3.4-2-2.5 2.5-1.9-.6-.7-3.1-.1.1-1.9 3.8.1zM63.2 31.2l2.4-2 1.4.7-.3.1-3.3 2.6-.2-1.4z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-scrambler" xmlns="http://www.w3.org/2000/svg">
        <path class="bgst0" d="M94.5 15.3c-.3-.6-.9-1.5-1.8-2.6-.9-1-1.6-1.8-2.2-2.3-.5-.4-1.1-.4-1.6-.1l-3.7 3-2.2-.6-3.1 2.2.5 2.2L46 44.6c-.2.2-.4.4-.7.6l-2.6-2.5-1.7 1.5 2.5 3c-5.2 6.5-10 17.3-10 17.3l-3.3.2L11.4 83l11.3 12.9L41 67.7l2.8 1.5.6-.2c7.9-2.4 9.5-7.5 9.5-7.7l.2-.7-3.9-5.1 10.5-6.8L85.1 28c.8-.7.9-1.8.3-2.7l-.7-1 9.4-7.5c.5-.3.7-1 .4-1.5zM44.1 66.1l-1.5-.8 2.5-3.8h3l.9-1-2.1-1.5 1.2-1.4 2.7 3.5c-.5 1.1-2.3 3.5-6.7 5z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-soldier" xmlns="http://www.w3.org/2000/svg">
        <path class="bhst0" d="m61.7 51.4.4-1.3 22.4-19.7-.2-1.8 14.6-12.7-3.3-3.3-4.3 3.6C86.7 13.9 83 8.7 83 8.7l-1.9 1.7c3.5 4 5.2 7.5 6.1 9.5l-.9.7-6.1-3-3.4 2.8-1.6-1-11.5 9.5.2 2.2-.5.4-3.6-1.1-5.3 4.8-1.3-.8-1.2 1.2 2.6 3.1-28 23.2.4 6.5-2.7 4.5-3.1-.2L7.1 85l10.5 12.1 14.8-23.3 1.3-.5 8.7 24.1 10.8-9.1-6.4-13.9 7.1-6.7-3-5c2.8 2.7 18.2 16.9 38.8 15.6L91 63.1s-17.8 1.3-29.3-11.7zm24.9-36.3c.2-.2.5-.2.8 0l1.6 1.2c.3.2.3.7 0 1l-.6.5c-.3.2-.7.2-.9-.2l-.9-1.7c-.3-.3-.2-.7 0-.8zM45.5 71.6 44 68.2l4.2-2.1-.5-.9-2.7-.7.9-2 1.4-.3 2.9 4.9-4.7 4.5z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-trihard" xmlns="http://www.w3.org/2000/svg">
        <path d="m94.3 7.4-2.8.5-1 3-12.1 11.8-1.1-.9-5 4.5 3.8 4.1.6 2.9-2 1.4-5.4-6.5-9-1-12 10.3-.5-.5 2-1.7-3.5-4.3-2.1 2-.7-.7-5.1 4.9.7.7-2 1.8 3.1 3.7 2.4-2 .6.6-6.2 5.2 1.8 1.9 7.9-6.8h1l1.1 1.2.2.7-.3.3.3 2.3-2 1.3-1.2-1.1-28.2 21.2 2.2 2.7-12.1 9.4v4.2l9.4 8.6 1.7-.6 6.2 6.1 5.2-4.6.6-14h2.9l1.5-1.4s2.9 3.2 6.7 6.1c3.8 2.9 10.3 8.1 10.3 8.1L58.3 81v-2.4l-2.7-.6s-8-4.8-11.6-9.1l1.1-1.1-1.1-2.6 7.4-6.5L59 70.5l3.4 1.1 9.5-8-5.7-15.9 1.9-1.4 1.5 1.1 2.3-1.8-1-1.9 1-.8 11.7 10.9 2.7-2.5L77.4 38l4.3-3.3-.7-6.2-.8-1.3.3-1.5L95 15.3l2.8-.5.5-2.9-4-4.5zm-37 31.2-4.3.6.8 2.3-1.8.5-1.1-.3-.9-1.3v-.9l11-9.6 2.3 1.5-.4 2.3-3.2-.1.9 2.2-4.2.4.9 2.4zm11.1 23.6-4.6 4.4-4.6-8 .8-2.4.9-.1-.1-1.6-1.7-2.5 4.3-3.8 5 14z">
        </path>
      </symbol>
      <symbol viewBox="0 0 106 106" space="preserve" id="ico-weapon-whipper" xmlns="http://www.w3.org/2000/svg">
        <path class="bjst0" d="m98 16.8-2.9-3.4c-.4-.4-1.1-.5-1.5-.1L90.4 16c-.3.3-.5.7-.3 1.1l-6.4 5.6-5.4-5.7-2-1-4-3.9-.7.5-.5 1.1-1.7-2.1-1 .8 1.7 2.1-1.2.2-1.8 1.4.2 1.1-1.1.8-1.1-.4-1.7 1.3.2 1.2-.9.9-1.1-.4-1.7 1.4.2 1.2-1 .8-1.2-.4-1.6 1.3.2 1.3-1.1.8-1.3-.4-1.7 1.4v1.3l-2.8-3.5-1.8 1.5 3.7 4.5-.8 1.2 1.8 8.1L7.8 78l16 16.3H26l18.4-16 10.5-.5 9.5-5.5 5.2-7.1v-7.4l9-6.2 2.1 4.1 5.3-4.2v-6.9l-3.7-6.2 3.7-3.2 3.9 4.2 4.1-3.3-4.7-6.1h-4l.8-2.2 7.6-6.6c.3.1.7 0 1-.2l3.2-2.7c.4-.4.5-1.1.1-1.5zM58.6 66.1l-6.2 4.5-6.6-7.3 10.6-9c1.5 1.9 4.6 4.9 4.6 4.9l-2.4 6.9zm-.8-29.5-.6-2.3 14.4-12.1 3 .5-16.8 13.9zM74.4 50l-4.1-3.3-.8-3.3 5.5-4.6 4.4 6.2-5 5z">
        </path>
      </symbol>
      <symbol viewBox="0 0 73.59 154.88" class="bkicon-spatula" id="ico_spatula">
        <path d="M63.08 0H10.51C4.73 0 0 5.15 0 11.44V57.2c0 6.29 4.73 11.44 10.51 11.44h21.03v21.92c0 2.59-.95 5.07-2.63 6.9s-2.63 4.31-2.63 6.9v40.76c0 5.39 4.02 9.76 8.97 9.76h3.09c4.95 0 8.97-4.37 8.97-9.76v-40.76c0-2.59-.95-5.07-2.63-6.9s-2.63-4.31-2.63-6.9V68.64h21.03c5.78 0 10.51-5.15 10.51-11.44V11.44C73.59 5.15 68.86 0 63.08 0ZM42.05 17.16v34.32c0 3.16-2.35 5.72-5.26 5.72-2.9 0-5.26-2.56-5.26-5.72V17.16c0-3.16 2.35-5.72 5.26-5.72 2.9 0 5.26 2.56 5.26 5.72ZM57.82 57.2c-2.9 0-5.26-2.56-5.26-5.72V17.16c0-3.16 2.35-5.72 5.26-5.72 2.9 0 5.26 2.56 5.26 5.72v34.32c0 3.16-2.35 5.72-5.26 5.72ZM21.03 17.16v34.32c0 3.16-2.35 5.72-5.26 5.72-2.9 0-5.26-2.56-5.26-5.72V17.16c0-3.16 2.35-5.72 5.26-5.72 2.9 0 5.26 2.56 5.26 5.72Z" style="stroke-width:0" data-name="Layer 1">
        </path>
      </symbol>
      <symbol viewBox="0 0 21.95 19.37" id="ico_stampArrow" xmlns="http://www.w3.org/2000/svg">
        <path d="M21.69 10.34 11.61.26a.9.9 0 0 0-1.27 0L.26 10.34c-.57.57-.16 1.53.63 1.53h4.08v6.6c0 .5.4.9.9.9h10.19c.5 0 .9-.4.9-.9v-6.6h4.08c.8 0 1.2-.97.63-1.53Z" style="stroke-width:0" data-name="Layer 1">
        </path>
      </symbol>
      <symbol viewBox="0 0 38.919 34.476" id="ico_watchAd" xmlns="http://www.w3.org/2000/svg">
        <path d="M0 12.44v17.55a4.487 4.487 0 0 0 4.487 4.486h29.945a4.487 4.487 0 0 0 4.487-4.487V12.44H0Zm25.075 11.533-7.18 4.788a1.313 1.313 0 0 1-2.042-1.093v-9.575A1.313 1.313 0 0 1 17.895 17l7.18 4.788c.78.52.78 1.666 0 2.185ZM5.933 9.774h6.368L22.075 0h-6.368L5.933 9.774zM34.316 0h-6.368l-9.774 9.774h6.368L34.316 0zM9.834 0H4.487A4.487 4.487 0 0 0 0 4.487v5.287h.06L9.834 0Zm20.581 9.774h8.504V4.487c0-.914-.275-1.763-.744-2.473l-7.76 7.76Z" style="fill:#fff">
        </path>
      </symbol>
    </svg>
    <!-- Ads -->
    <div id="gameAdContainer" class="hideme">
    </div>
    <div id="shellshockers_titlescreen">
    </div>
    <div id="shellshockers_chicken_nugget_banner">
    </div>
    <div id="shellshockers_respawn_banner-sh">
    </div>
    <div id="shellshockers_respawn_banner_2-sh">
    </div>
    <div id="shellshockers_respawn_banner_3-sh">
    </div>
    <div id="shellshockers_respawn_banner">
    </div>
    <div id="shellshockers_respawn_banner-new">
    </div>
    <div id="ShellShockers_LoadingScreen_HouseAds">
    </div>
    <div id="shellshock-io_728x90_HP">
    </div>
    <div id="videoAdContainer">
      <div id="preroll">
      </div>
    </div>
    <!-- <div class="video_ad_wrapper">
    <video id="asc_video_ad" class="video-js vjs-default-skin" controls preload="auto" width="640" height="360" muted="true" style="display: none;">
        <source src="video/tiny.mp4" type="video/mp4" />
    </video>
</div> -->
    <div id="ss_background">
    </div>
    <div class="canvas-wrapper gameCanvas">
      <canvas id="canvas">
      </canvas>
    </div>
    <!-- Instantiate the Vue instance -->
    <div id="app" :class="[currentLanguageCode, appClassObj, appClassScreen, isPhotoBooth]">
      <!-- vue instance div: all vue-controlled elements MUST be inside this tag -->
      <!-- <asc-video-player id="mainVideoPlayer" ref="mainVideoPlayer" adTagUrl="adTagUrl"></asc-video-player> -->
      <div class="firebaseID">
        firebase ID: {{ firebaseId }}, maskedEmail: {{ maskedEmail }} isAnonymous: {{ isAnonymous }}, isEmailVerified: {{ isEmailVerified }}
      </div>
      <!-- Canvas -->
      <div ref="gameCanvas" class="canvas-wrapper gameCanvas">
      </div>
      <!-- Overlays -->
      <light-overlay id="lightOverlay" ref="lightOverlay">
      </light-overlay>
      <dark-overlay ref="darkOverlay">
      </dark-overlay>
      <spinner-overlay id="spinnerOverlay" ref="spinnerOverlay" :loc="loc" :hide-ads="hideAds" :ad-unit="displayAd.adUnit.spinner" :account-date="accountCreated">
      </spinner-overlay>
      <div ref="abTestContainer" class="ab-test-inventory-flow hideme popup_window popup_sm roundme_md centered">
        <img ref="abTestArrow" class="ab-test-arrow lazy-load" :data-src="ui.lazyImages.kotcArrow" alt="" />
        <p v-html="abTestText">
        </p>
      </div>
      <!-- GDPR -->
      <gdpr id="gdpr" ref="gdpr" :loc="loc">
      </gdpr>
      <div ref="headerAdContainer">
      </div>
      <account-panel v-show="ui.showHomeEquipUi" id="account_panel" ref="accountPanelHome" :loc="loc" :firebase-id="firebaseId" :selected-language-code="currentLanguageCode" :eggs="eggs" :languages="languages" :current-lang-options="locLanguage" :show-corner-buttons="ui.showCornerButtons" :is-private-game="extern.isPrivateGame" :show-bottom="true" :photo-url="photoUrl" :is-anonymous="isAnonymous" :is-of-age="isOfAge" :show-targeted-ads="showTargetedAds" :current-screen="showScreen" :screens="screens" :is-egg-store-sale="isEggStoreSaleItem" :is-subscriber="isSubscriber" @sign-in-clicked="onSignInClicked" @sign-out-clicked="onSignOutClicked" :is-twitch="twitchLinked" :play-clicked="playClicked" :crazy-games-active="ui.crazyGames" :crazy-games-user="crazyGamesUser">
      </account-panel>
      <div id="main-content" class="main-content display-grid height-100vh">
        <photo-booth-ui id="photoBooth" ref="photoBooth" v-show="!ui.showHomeEquipUi" :loc="loc" :player-name="playerName" :item-type-change="ui.photoBooth.type" @bg-change-color="onPhotoboothBgColorChange" @bg-change-image="onPhotoBoothBgImageChange" @hide-ui="onPhotoBoothHideUi">
        </photo-booth-ui>
        <aside ref="mainAside" v-show="showScreen !== screens.photoBooth" class="main-aside">
          <main-sidebar ref="mainMenu" v-show="ui.showHomeEquipUi" :loc="loc" :firebase-id="firebaseId" :player-name="playerName" :menu-items="ui.mainMenu" :current-screen="showScreen" :screens="screens" :mode="equipMode" :current-mode="currentEquipMode" :is-game-paused="game.isPaused" :in-game="game.on" :play-clicked="playClicked" :picked-game-type="currentGameType" @previous-screen="setPreviousScreen">
          </main-sidebar>
          <house-ad v-show="showScreen !== screens.game &amp;&amp; ui.showHomeEquipUi" :loc="loc" :upgrade-name="upgradeName" :is-upgraded="isUpgraded" :is-subscriber="isSubscriber" :has-mobile-reward="hasMobileReward" :crazy-games-active="ui.crazyGames" :is-poki="isPoki" :chw-count="chw.winnerCounter" :chw-ready="showAdBlockerVideoAd" :chw-limit-reached="chw.limitReached" :ad="ui.houseAds.small" :in-game="game.on" :play-clicked="playClicked" @chw-video-request="showNuggyPopup">
          </house-ad>
          <div id="chw-home">
            <chw ref="chwHomeScreen" :loc="loc" :chw="chw" :firebase-id="firebaseId" :current-screen="showScreen" :screens="screens" :ui="ui" :play-clicked="playClicked">
            </chw>
          </div>
          <!-- .chw-timer -->
        </aside>
        <!-- .chw-home-timer -->
        <main id="mainScreens">
          <div id="paper_doll_container" class="paper-doll-click-container centered z-index-1" v-show="showScreen === screens.home || showScreen === screens.equip">
            <!-- <img :src="factionLogo" class="box_absolute faction-logo faction-egg-doll-logo" v-show="faction.playerFaction !== null" @click="showFactionActivatedPopup"> -->
          </div>
          <home-screen id="home_screen" ref="homeScreen" v-show="(showScreen === screens.home || showScreen === screens.profile)">
          </home-screen>
          <equip-screen id="equip_screen" class="height-100vh" ref="equipScreen" v-show="showEquipScreens" @photo-booth-type-id="photoBoothTypeChange">
          </equip-screen>
          <game-screen id="game_screen" ref="gameScreen" v-show="(showScreen === screens.game)" :kname="killName" :kdname="killedName" @show-welcome-bundle-popup="onWelcomeBundlePopupShow">
          </game-screen>
        </main>
      </div>
      <div id="gameDescription" v-show="(showScreen === screens.home)">
        <section class="social-icons ss_marginright">
          <social-panel ref="socialIconPanel" id="social_panel" :loc="loc" :is-poki="isPoki" :use-social="ui.socialMedia.footer" :social-media="ui.socialMedia.selected">
          </social-panel>
        </section>
        <section class="game-info">
          <h1 class="text-center">
            {{ loc.home_desc_about }}
          </h1>
          <p class="text-center">
            {{ loc.home_desc_pick }}
            <svg class="eggIcon">
              <use href="#icon-egg">
              </use>
            </svg>
            {{ loc.home_desc_loadout }}
            <svg class="eggIcon">
              <use href="#icon-egg">
              </use>
            </svg>
            {{ loc.home_desc_madeof }}
          </p>
          <section class="text-center">
            <p>
              {{ loc.home_blocked_start }} shellgame.quest {{ loc.home_blocked_end }}
            </p>
          </section>
          <div class="display-grid grid-column-2-eq gap-1 ">
            <section>
              <p>
                {{ loc.home_desc_p1 }}
              </p>
              <p>
                <img v-lazyload="" :data-src="ui.lazyImages.homeEgg1" class="lazy-load" style="width: 350px; float: left; margin-right: 1em; shape-outside: polygon(0% 0%, 100% 0%, 100% 41%, 84% 48%, 80% 63%, 59% 74%, 46% 100%, 0% 99%);" />
                {{ loc.home_desc_p2 }}
              </p>
            </section>
            <section>
              <p>
                <img v-lazyload="" :data-src="ui.lazyImages.homeEgg2" class="lazy-load" style="float: right; margin-left: 1em; margin-top: 1em; shape-outside: polygon(1% 0%, 100% 1%, 100% 99%, 50% 100%, 28% 86%, 16% 68%, 14% 51%, 0 35%);" />
                {{ loc.home_desc_p3 }}
                <br />
                <br />
                {{ loc.home_desc_p4 }}
              </p>
            </section>
          </div>
          <section>
            <header>
              <h2 class="text-center">
                {{ loc.home_game_mode_title }}
              </h2>
            </header>
            <ul class="display-grid grid-column-2-eq gap-1 ">
              <li v-html="loc.home_game_mode_content_li_1">
              </li>
              <li v-html="loc.home_game_mode_content_li_2">
              </li>
              <li v-html="loc.home_game_mode_content_li_3">
              </li>
              <li v-html="loc.home_game_mode_content_li_4">
              </li>
            </ul>
          </section>
          <h2 class="text-center">
            {{ loc.home_desc_controls }}
          </h2>
          <p class="text-center">
            {{ loc.home_desc_standard }}
          </p>
          <ul class="display-grid grid-column-2-eq" style="min-width: 25em;max-width: 35em;margin:0 auto">
            <li>
              {{ loc.home_desc_control1 }}
            </li>
            <li>
              {{ loc.home_desc_control2 }}
            </li>
            <li>
              {{ loc.home_desc_control3 }}
            </li>
            <li>
              {{ loc.home_desc_control4 }}
            </li>
            <li>
              {{ loc.home_desc_control5 }}
            </li>
            <li>
              {{ loc.home_desc_control6 }}
            </li>
            <li>
              {{ loc.home_desc_control7 }}
            </li>
            <li>
              {{ loc.home_desc_control8 }}
            </li>
            <li>
              {{ loc.home_desc_control9 }}
            </li>
          </ul>
          <p class="text-center">
            <button class="ss_button btn_lg btn_blue bevel_blue" @click="openUnblocked">
              {{ loc.home_unblocked_text }}
            </button>
          </p>
          <p v-html="footerLinksFormat">
          </p>
          <p align="center">
            <button class="ss_button btn_yolk bevel_yolk" @click="vueApp.scrollToTop()">
              {{ loc.home_backtotop }}
            </button>
          </p>
        </section>
      </div>
      <!-- #gameDescription -->
      <!-- Popup: Settings -->
      <large-popup id="settingsPopup" ref="settingsPopup" @popup-closed="onSharedPopupClosed" @popup-opened="onSettingsPopupOpened" @popup-x="onSettingsX">
        <template slot="content">
          <settings id="settings" ref="settings" :loc="loc" :settings-ui="settingsUi" :languages="languages" :current-language-code="currentLanguageCode" :show-privacy-options="showPrivacyOptions" @privacy-options-opened="onPrivacyOptionsOpened" :is-from-eu="showPrivacyOptions" :controller-id="controllerId" :controller-type="controllerType" :lang-option="locLanguage" :is-vip="(isSubscriber || contentCreator)" :region-list="regionList" :current-region-id="currentRegionId">
          </settings>
        </template>
      </large-popup>
      <!-- Popup: Private Game Options -->
      <game-options-popup ref="gameOptionsPopup" id="gameOptionsPopup" :loc="loc" :game-options-popup="gameOptionsPopup">
      </game-options-popup>
      <!-- Popup: Privacy Options -->
      <small-popup id="privacyPopup" ref="privacyPopup" hide-cancel="true" @popup-closed="onSharedPopupClosed">
        <template slot="header">
          {{ loc.p_settings_privacy }}
        </template>
        <template slot="content">
          <label class="ss_checkbox label">
            {{ loc.p_settings_of_age }}
            <input id="ofAgeCheck" type="checkbox" v-model="isOfAge" @change="ofAgeChanged($event)" />
            <span class="checkmark"></span>
          </label>
          <label class="ss_checkbox label">
            {{ loc.p_settings_target_ads }}
            <input id="targetedAdsCheck" type="checkbox" v-model="showTargetedAds" @change="targetedAdsChanged($event)" />
            <span class="checkmark"></span>
          </label>
          <!--
            <input id="ofAgeCheck" type="checkbox" v-model="isOfAge" @change="ofAgeChanged($event)">¬†{{ loc.p_settings_of_age }}<br>
            <input id="targetedAdsCheck" type="checkbox" v-model="showTargetedAds" @change="targetedAdsChanged($event)">¬†<span id="targetedAdsText">{{ loc.p_settings_target_ads }}</span>
            -->
        </template>
        <template slot="confirm">
          {{ loc.ok }}
        </template>
      </small-popup>
      <!-- Popup: Help & Feedback -->
      <large-popup id="helpPopup" ref="helpPopup" stop-key-capture="true" @popup-closed="onSharedPopupClosed">
        <template slot="content">
          <help id="help" ref="help" :loc="loc" :controls="ui.tutorialPopup" :account-type="accountStatus" :feedback-type="feedbackType" :open-with-type="feedbackSelected" @resetfeedbacktype="resetFeedbackType">
          </help>
        </template>
      </large-popup>
      <!-- Popup: VIP Help & Feedback -->
      <large-popup id="vipPopup" ref="vipPopup" stop-key-capture="true" @popup-closed="onVipHelpClosed">
        <template slot="content">
          <vip-help id="vip-help" ref="vip-help" :loc="loc" :is-vip="isSubscriber">
          </vip-help>
        </template>
      </large-popup>
      <!-- Popup: Egg Store -->
      <large-popup id="eggStorePopup" ref="eggStorePopup" stop-key-capture="true" @popup-closed="onSharedPopupClosed" :overlay-close="false">
        <template slot="content">
          <subscription-store id="eggStore" ref="eggStore" :loc="loc" :products="eggStoreItems" :sale-event="isSale">
          </subscription-store>
        </template>
      </large-popup>
      <!-- <img v-if="blackFridayBanner" class="black-friday-banner" style="display: none" src="img/black-friday-banner.jpg" alt="Black Friday Sale"/> -->
      <!-- Popup: VIP store -->
      <large-popup id="subStorePopup" ref="subStorePopup" stop-key-capture="true" @popup-closed="onSharedPopupClosed" :overlay-close="true">
        <template slot="content">
          <subscription-store id="shell-subscriptions" ref="shell-subscriptions" :loc="loc" :subs="subStoreItems">
          </subscription-store>
        </template>
      </large-popup>
      <!-- Popup: VIP ended -->
      <small-popup id="vipEnded" ref="vipEnded" stop-key-capture="true" @popup-confirm="showSubStorePopup" @popup-closed="onSharedPopupClosed" :overlay-close="true" class="vip">
        <template slot="content">
          <figure>
            <img v-lazyload="" :data-src="ui.lazyImages.vipEmblem" class="lazy-load" alt="Shell Shockers VIP" />
          </figure>
          <div class="vip-ended-popup">
            <p v-html="subEndedMsg">
            </p>
          </div>
        </template>
        <template slot="confirm">
          {{ loc.account_vip_expire_3 }}
        </template>
        <template slot="cancel">
          {{ loc.account_vip_expired_2 }}
        </template>
      </small-popup>
      <!-- Popup: Egg Store single -->
      <large-popup id="popupEggStoreSingle" ref="popupEggStoreSingle" stop-key-capture="true" @popup-closed="onSharedPopupClosed" :overlay-close="false" class="popup-store-single">
        <template slot="content">
          <egg-store-item v-for="item in premiumShopItems" :key="item.sku" :item="item" :loc="loc" :account-set="accountSettled" v-if="eggStorePopupSku &amp;&amp; item.sku === eggStorePopupSku">
          </egg-store-item>
        </template>
      </large-popup>
      <!-- Popup: Unsupported Platform -->
      <large-popup id="unsupportedPlatformPopup" ref="unsupportedPlatformPopup" hide-close="true">
        <template slot="content">
          <h2>
            {{ loc[&#39;unsupported_platform&#39;] }}
          </h2>
          <div>
            {{ loc[unsupportedPlatformPopup.contentLocKey] }}
          </div>
        </template>
      </large-popup>
      <!-- Popup: Missing Features -->
      <large-popup id="missingFeaturesPopup" ref="missingFeaturesPopup" hide-close="true">
        <template slot="content">
          <h2>
            {{ loc[&#39;oh_no&#39;] }}
          </h2>
          <span>          {{ loc[&#39;missing_features&#39;] }}
</span>
          <ul>
            <li v-for="f in missingFeatures" v-html="f">
            </li>
          </ul>
          <span>          {{ loc[&#39;missing_help&#39;] }}
</span>
        </template>
      </large-popup>
      <!-- Popup: No Anon -->
      <small-popup id="noAnonPopup" ref="noAnonPopup" @popup-confirm="onNoAnonPopupConfirm" @popup-closed="onSharedPopupClosed">
        <template slot="header">
          {{ loc.no_anon_title }}
        </template>
        <template slot="content">
          <div>
            {{ loc.no_anon_msg1 }}
          </div>
          <div>
            {{ loc.no_anon_msg2 }}
          </div>
        </template>
        <template slot="cancel">
          {{ loc.cancel }}
        </template>
        <template slot="confirm">
          {{ loc.no_anon_signup }}
        </template>
      </small-popup>
      <!-- Popup: Give Stuff -->
      <give-stuff-popup ref="giveStuffPopup" id="giveStuffPopup" :loc="loc" :give-stuff-popup="giveStuffPopup" :imgs="ui.lazyImages">
      </give-stuff-popup>
      <!-- Popup: Open URL -->
      <small-popup id="openUrlPopup" ref="openUrlPopup" @popup-confirm="onOpenUrlPopupConfirm" @popup-closed="onSharedPopupClosed">
        <template slot="header">
          {{ loc[openUrlPopup.titleLocKey] }}
        </template>
        <template slot="content">
          <!-- content not loc'd (yet) -->
          {{ openUrlPopup.content }}
        </template>
        <template slot="cancel">
          {{ loc[openUrlPopup.cancelLocKey] }}
        </template>
        <template slot="confirm">
          {{ loc[openUrlPopup.confirmLocKey] }}
        </template>
      </small-popup>
      <!-- Popup: Changelog -->
      <large-popup id="changelogPopup" ref="changelogPopup" @popup-closed="onSharedPopupClosed">
        <template slot="content">
          <h1 id="popup_title nospace" class="roundme_sm">
            {{ loc.changelog_title }}
          </h1>
          <div class="changelog_content roundme_lg">
            <section v-for="(log, idx) in changelog.current">
              <h3>
                {{ log.version }} -
                <i>                <time>                {{ log.date }}
</time>
</i>
              </h3>
              <ul>
                <li v-for="data in log.content" v-html="data">
                </li>
              </ul>
              <hr class="blue" />
            </section>
          </div>
          <div id="btn_horizontal">
            <button v-if="changelog.showHistoryBtn" @click="showHistoryChangelogPopup" class="ss_button btn_green bevel_green">
              {{ loc.more }}
            </button>
            <button @click="hideChangelogPopup" class="ss_button btn_red bevel_red">
              {{ loc.close }}
            </button>
          </div>
        </template>
      </large-popup>
      <!-- Popup: Golden Chicken -->
      <large-popup id="goldChickenPopup" ref="goldChickenPopup" :overlay-close="false">
        <template slot="content">
          <gold-chicken-popup id="gold_chicken" ref="gold_chicken" :loc="loc" @close-chw-popup="hideChickenPopup" @open-chw-game="goldChickenPopupOpenChw">
          </gold-chicken-popup>
        </template>
      </large-popup>
      <!-- Popup: Chicken Nugget -->
      <large-popup id="chicknWinner" ref="chicknWinner" :hide-close="!chwMiniGameComplete" :overlay-close="chwMiniGameComplete" @popup-closed="onChwPopupClosed">
        <template slot="content">
          <chicken-nugget-popup id="chickenNugget" ref="chickenNugget" :key="chw.nuggetReset" :loc="loc" :firebase-id="firebaseId" :reward="chw.reward" :ad-unit="displayAd.adUnit.nugget" :chw="chw" @chw-start-reward="chwDoIncentivized" @chw-mini-game-complete="chwMiniGameCompleted">
          </chicken-nugget-popup>
          <display-ad id="shellshockers_chicken_nugget_banner_ad" ref="nuggetDisplayAd" class="pauseFiller center_h" :ignore-size="true" :ad-unit="displayAd.adUnit.nugget" ad-size="728x90">
          </display-ad>
        </template>
      </large-popup>
      <!-- Popup: Generic Message -->
      <small-popup id="genericPopup" ref="genericPopup" :popup-model="genericMessagePopup" :hide-cancel="true" @popup-closed="onSharedPopupClosed" @popup-confirm="onGenericPopupConfirm">
        <template slot="header">
          {{ loc[genericMessagePopup.titleLocKey] }}
        </template>
        <template slot="content">
          {{ loc[genericMessagePopup.contentLocKey] }}
        </template>
        <template slot="confirm">
          {{ loc[genericMessagePopup.confirmLocKey] }}
        </template>
      </small-popup>
      <!-- Popup: Anon warning message -->
      <small-popup v-if="isAnonymous" id="anonWarningPopup" ref="anonWarningPopup" :hide-close="true" :overlay-close="false" @popup-cancel="anonWarningPopupCancel" @popup-confirm="anonWarningPopupConfrim">
        <template slot="header">
          <img src="img/svg/ico_goldenEgg.svg" class="egg_icon" />
          {{ loc.account_anon_warn_popup_title }}!
          <img src="img/svg/ico_goldenEgg.svg" class="egg_icon" />
        </template>
        <template slot="content">
          <p v-html="anonPopupContent">
          </p>
        </template>
        <template slot="cancel">
          {{ loc.pwa_no_thanks }}
        </template>
        <template slot="confirm">
          {{ loc.sign_in }}
        </template>
      </small-popup>
      <!-- Popup: Need More eggs popup -->
      <small-popup id="needMoreEggsPopup" ref="needMoreEggsPopup" @popup-confirm="showEggStorePopup">
        <template slot="header">
          {{ loc.p_buy_isf_title }}!
        </template>
        <template slot="content">
          <p>
            {{ loc.p_buy_isf_content }}.
          </p>
        </template>
        <template slot="cancel">
          {{ loc.p_buy_item_cancel }}
        </template>
        <template slot="confirm">
          {{ loc.account_title_eggshop }}
        </template>
      </small-popup>
      <!-- Popup: Firebase Sign In -->
      <large-popup id="firebaseSignInPopup" ref="firebaseSignInPopup" :overlay-close="false" @popup-closed="hideFirebaseSignInMsgChat">
        <template slot="content">
          <h1 class="nospace">
            {{ loc.sign_in }}
          </h1>
          <div id="firebaseui-auth-container">
          </div>
          <p ref="signinMsgChat" id="signin-msg-chat" class="text-center text_blue4" style="display: none;">
            {{ loc.signin_msg_chat }}
          </p>
          <div id="btn_horizontal" class="f_center">
            <button @click="onSignInCancelClicked()" class="ss_button btn_red bevel_red btn_sm">
              {{ loc.cancel }}
            </button>
          </div>
        </template>
      </large-popup>
      <small-popup ref="adBlockerPopup" id="adBlockerPopup" :overlay-close="false" hide-confirm="true" hide-cancel="true" hide-close="true">
        <template slot="header">
          We&#39;ve detected ad blocker!
        </template>
        <template slot="content">
          <p>
            To
            <i>            avoid
</i>
            this message please turn
            <i>            off
</i>
            ad blocker.
          </p>
          <h4>
            Please wait
          </h4>
          <h3>
            {{adBlockerCountDown}}
          </h3>
        </template>
      </small-popup>
      <!-- Popup: PWA -->
      <small-popup id="pwaPopup" class="pwa-popup" ref="pwaPopup" hide-confirm="true" @popup-closed="onSharedPopupClosed">
        <!-- <template slot="header">{{ loc.p_settings_privacy }}</template> -->
        <template slot="content">
          <p>
            {{loc.pwa_desc_one}}
          </p>
          <p>
            {{loc.pwa_desc_two}}
          </p>
          <button @click="pwaBtnClick" class="ss_button btn_big btn_green bevel_green btn_height_auto btn-pwa-download">
            <div class="pwa-btn-img-box roundme_lg bg-darkgreen">
              <img src="favicon192.png" alt="Egg yolk" />
              <i class="fas fa-share" aria-hidden="true"></i>
            </div>
            {{loc.pwa_btn_line_one}}
            <br />
            {{loc.pwa_btn_line_two}}
          </button>
        </template>
        <template slot="cancel">
          {{loc.pwa_no_thanks}}
        </template>
      </small-popup>
      <large-popup id="adBlockerVideo" ref="adBlockerVideo" @popup-closed="onSharedPopupClosed" :overlay-close="false" hide-confirm="true" hide-cancel="true" hide-close="true">
        <template slot="content">
          <p class="text-center">
            {{ loc.ad_blocker_big_popup_title }}
            <br />
            <span v-html="loc.ad_blocker_big_popup_desc"></span>
          </p>
          <img v-lazyload="" :data-src="ui.lazyImages.adBlockPopup" class="lazy-load" alt="Please remove ad blockers" />
          <!-- <house-ad id="house-ad-video-replacement" ref="house-ad-video-replacement" :data="bannerHouseAd" :isshowing="showAdBlockerVideoAd"></house-ad> -->
        </template>
      </large-popup>
      <!-- <large-popup ref="kotcInstrucPopup" id="kotcInstrucPopup" :overlay-close="true" hide-confirm="true" hide-cancel="true">
        <template slot="content">
            <img class="kotc-wordmark" src="img/kotc/kotc-wordmark.svg" alt="">
            <div class="kotc-how-to-play-wrapper box_absolute">
                <h2 class="kotc-how-to-play-title text-center"><span class="roundme_md">{{ loc.home_kotc_popup_how_to }}</span><br />{{ loc.home_play }}!</h2>
                <img src="img/kotc/kotc-arrow.svg" aria-hidden="true">
            </div>
            <div class="display-grid grid-column-2-eq grid-gap-space-lg fullwidth ss_margintop_xxxxl">
                <div class="img-container roundme_lg fullwidth step-one">
                    <div class="fullwidth">
                        <p class="text-center"><span class="sr-only">Step </span>1</p>
                        <h6 class="text-center">{{loc.home_kotc_popup_step_one}}</h6>
                    </div>
                </div>
                <div class="img-container roundme_md fullwidth step-two">
                    <div class="fullwidth">
                        <p class="text-center"><span class="sr-only">Step </span>2</p>
                        <h6 class="text-center">{{loc.home_kotc_popup_step_two}}</h6>
                    </div>
                </div>
            </div>
            <div class="display-grid grid-column-2-eq grid-gap-space-lg roundme_md fullwidth ss_margintop_lg kotc-play-now step-three-wrapper">
                <div class="fullwidth box_relative step-three">
                    <img class="kotc-logo box_absolute" src="img/kotc/kotc-rooster.svg" alt="The King of the Coop Rooster">

                    <div>
                        <p class="text-center"><span class="sr-only">Step </span>3</p>
                        <h6 class="text-center" v-html="loc.home_kotc_popup_step_three"></h6>
                    </div>
                </div>
                <div class="fullwidth f_col f_space_between">
                    <div class="display-grid grid-column-5-eq kotc-crowns">
                    <img aria-hidden="true" src="img/kotc/kotc-crown.svg" alt="Crowns">
                    <img aria-hidden="true" src="img/kotc/kotc-crown.svg" alt="Crowns">
                    <img aria-hidden="true" src="img/kotc/kotc-crown.svg" alt="Crowns">
                    <img aria-hidden="true" src="img/kotc/kotc-crown.svg" alt="Crowns">
                    <img aria-hidden="true" src="img/kotc/kotc-crown.svg" alt="Crowns">
                    </div>
                    <button class="ss_button btn_big btn_green bevel_green fullwidth" @click="onClickPlayKotcNow"><i class="fa fa-play fa-sm"></i> {{ loc.home_play }}</button>
                </div>
            </div>
        </template>   
    </large-popup> -->
      <large-popup ref="notificationPopup" id="notificationPopup" @popup-closed="onSharedPopupClosed" :overlay-close="false" :hide-close="true">
        <template slot="header">
          Notifications
        </template>
        <template slot="content">
          <notification-content ref="notifiContent" :notification="ui.notification" :loc="loc" :bonus="ui.bonus.showing" @open-bundle="onOpenBundle" @close-popup="onCloseNotification">
          </notification-content>
        </template>
      </large-popup>
      <!-- Popup: Banned -->
      <large-popup id="bannedPopup" ref="bannedPopup" hide-close="true">
        <template slot="content">
          <h1>
            {{ loc[&#39;banned_title&#39;] }}
          </h1>
          <p>
            {{ loc[&#39;banned_msg&#39;] }}
          </p>
          <p>
            {{ loc[&#39;banned_expire&#39;] }} {{ bannedPopup.expire }}
          </p>
        </template>
      </large-popup>
      <!--
    <small-popup id="openUrlPopup" ref="openUrlPopup" @popup-confirm="onOpenUrlPopupConfirm" @popup-closed="onSharedPopupClosed">
        <template slot="header">{{ loc[openUrlPopup.titleLocKey] }}</template>
        <template slot="content">
            {{ openUrlPopup.content }}
        </template>
        <template slot="cancel">{{ loc[openUrlPopup.cancelLocKey] }}</template>
        <template slot="confirm">{{ loc[openUrlPopup.confirmLocKey] }}</template>
    </small-popup>
-->
      <small-popup id="deleteAccountApprovalPopup" ref="deleteAccountApprovalPopup" @popup-confirm="onAccountDelectionConfirmed">
        <!-- <template slot="header">{{ loc.p_settings_privacy }}</template> -->
        <template slot="content">
          <h1 v-html="loc.feedback_account_deletion_title">
          </h1>
          <p class="text-center">
            <i class="fas fa-exclamation-triangle fa-2x text_red"></i>
          </p>
          <p v-html="loc.feedback_account_deletion_desc_1">
          </p>
          <p v-html="loc.feedback_account_deletion_desc_2">
          </p>
        </template>
        <template slot="cancel">
          {{loc.cancel}}
        </template>
        <template slot="confirm">
          {{loc.feedback_account_delection_confirm}}
        </template>
      </small-popup>
      <!-- Popup: Leave Game Confirm -->
      <small-popup id="leaveGameConfirmPopup" ref="leaveGameConfirmPopup" :overlay-close="false" :hide-close="true" @popup-confirm="onLeaveGameConfirm" @popup-cancel="onLeaveGameCancel" @popup-opened="sharedIngamePopupOpened" @popup-closed="sharedIngamePopupClosed">
        <template slot="header">
          {{ loc.leave_game_title }}
        </template>
        <template slot="content">
          <p>
            {{ loc.leave_game_text }}
          </p>
        </template>
        <template slot="cancel">
          {{ loc.no }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <small-popup id="fbTransferAccountSignin" ref="fbTransferAccountSignin" :hide-confirm="true" :overlay-close="false" @popup-cancel="onLeaveGameCancel" @popup-opened="sharedIngamePopupOpened" @popup-closed="sharedIngamePopupClosed">
        <!-- <template slot="header">{{ loc.leave_game_title }}</template> -->
        <template slot="content">
          <p>
            {{ loc.signin_fb_msg}}
          </p>
        </template>
        <template slot="cancel">
          {{ loc.close }}
        </template>
        <!-- <template slot="confirm">{{ loc.yes }}</template> -->
      </small-popup>
      <!-- Popup: Tutorial -->
      <small-popup id="tutorialPopup" ref="tutorialPopup" :hide-confirm="true" :hide-cancel="true" @popup-closed="onTutorialClosed">
        <template slot="header">
          {{ loc.tutorial_title }}
        </template>
        <template slot="content">
          <controls :loc="loc" :controls="ui.tutorialPopup">
          </controls>
        </template>
      </small-popup>
      <!-- Popup: xsollaPopup -->
      <small-popup id="xsollaPopup" ref="xsollaPopup" @popup-confirm="xsollaPopupConfrim" @popup-cancel="xsollaPopupCancel">
        <template slot="header">
          Warning!
        </template>
        <template slot="content">
          <div>
            Welcome to our exciting world of egg recipe experiments! Please note that while we&#39;re eager to explore the endless possibilities, we cannot guarantee the outcome of all purchases. So, let&#39;s embark on this culinary adventure together, but be prepared for the occasional crack in the shell. Happy cooking!
          </div>
        </template>
        <template slot="cancel">
          {{ loc.cancel }}
        </template>
        <template slot="confirm">
          Continue
        </template>
      </small-popup>
      <small-popup id="loginPopupWarning" ref="loginPopupWarning" @popup-confirm="onLeaveGameConfirmedSignIn">
        <template slot="header">
          {{ loc.sign_in_and_leave_game }}
        </template>
        <template slot="content">
          <div>
            <p class="text-left">
              {{ loc.sign_in_and_leave_game_1 }}
            </p>
            <ul class="text-left">
              <li>
                {{ loc.sign_in_and_leave_game_2 }}
              </li>
              <li>
                {{ loc.sign_in_and_leave_game_3 }}
              </li>
              <li>
                {{ loc.sign_in_and_leave_game_4 }}
              </li>
            </ul>
          </div>
        </template>
        <template slot="cancel">
          {{ loc.no }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <small-popup id="logOutPopupWarning" ref="logOutPopupWarning" @popup-confirm="onLeaveGameConfirmedSignOut">
        <template slot="header">
          {{ loc.sign_out_and_leave_game }}
        </template>
        <template slot="cancel">
          {{ loc.no }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <!-- <div id="kotc-play-kotc" class="kotc-play-kotc display-grid">
		<img class="kotc-play-kotc-watermark" src="img/kotc/kotc-crown-indicator.svg" alt="">
		<img class="kotc-play-kotc-arrow" src="img/kotc/kotc-arrow.svg" aria-hidden="true">
	</div> -->
      <!-- #kotc-play-kotc -->
      <!-- Popup: chromeIsABuggerPopup -->
      <large-popup id="chromeIsABuggerPopup" ref="chromeIsABuggerPopup" :overlay-close="false">
        <template slot="content">
          <h1 class="nospace">
            {{ loc.chrome_is_a_bugger_popup_title }}
          </h1>
          <p class="ss_marginbottom_xl" v-html="loc.chrome_is_a_bugger_popup_desc">
          </p>
          <div class="display-grid grid-column-2-eq">
            <img src="img/chromeIsABuggerPopup-guide-1.webp" alt="chrome guide 1 how to give shell mouse control" />
            <img src="img/chromeIsABuggerPopup-guide-2.webp" alt="chrome guide 2 how to give shell mouse control" />
          </div>
        </template>
      </large-popup>
      <large-popup id="welcomeBundlePopup" ref="welcomeBundlePopup" :overlay-close="false" @popup-closed="onWelcomeBundlePopupClosed">
        <template slot="content">
          <img v-lazyload="" :data-src="ui.lazyImages.welcomePackPopup" class="lazy-load" @click="onWelcomeBundlePopupConfirm" alt="" />
        </template>
      </large-popup>
      <small-popup v-if="crazyGamesUser &amp;&amp; crazyGamesUser.hasLinked" id="crazyGamesUserManagementPopup" ref="crazyGamesUserManagementPopup" :overlay-close="true" hide-confirm="true" hide-cancel="true">
        <template slot="content">
          <h1 class="text_white">
            {{ loc.crazygames_user_management_popup_title }}
          </h1>
          <p class="ss_marginbottom_xl" v-html="loc.crazygames_user_management_popup_desc">
          </p>
          <p v-if="cgCreatedAccount || isAnonymous" class="ss_marginbottom_xl" v-html="loc.crazygames_user_management_popup_anonymous_text">
          </p>
          <p v-else="" class="ss_marginbottom_xl" v-html="cgUserManagementPopupContent">
          </p>
          <div class="display-grid grid-auto-flow-column gap-1">
            <button v-if="!crazyGamesUser.isAnonymous" class="ss_button btn_md btn_red bevel_red" @click="showCrazyGamesDelink">
              <i class="fas fa-unlink"></i>
              {{ loc.crazygames_user_management_popup_delink_btn_text }}
            </button>
            <button v-if="crazyGamesUser.isAnonymous" class="ss_button btn_md btn_green bevel_green" @click="onCGLinkToAnotherAccountClicked">
              <i class="fas fa-link"></i>
              Link to another account
            </button>
            <button v-if="crazyGamesUser.isAnonymous" class="ss_button btn_md btn_green bevel_green" @click="onCGSignInClicked">
              {{ loc.contact_support }}
            </button>
          </div>
        </template>
        <!-- <template slot="confirm" v-if="crazyGamesUser.isAnonymous">{{ loc.ok }}</template> -->
      </small-popup>
      <small-popup id="crazyGamesDelink" ref="crazyGamesDelink" @popup-confirm="onCrazyGamesDelink">
        <template slot="header">
          {{ loc.crazygames_delink_title }}
        </template>
        <template slot="content">
          <p>
            {{ loc.crazygames_delink_content }}
          </p>
        </template>
        <template slot="cancel">
          {{ loc.no }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <small-popup id="crazyGamesAutoLinkPopup" ref="crazyGamesAutoLinkPopup" @popup-confirm="onCrazyGamesAutoLink">
        <template slot="header">
          {{ loc.crazygames_auto_link_title }}
        </template>
        <template slot="content">
          <p>
            {{ loc.crazygames_auto_link_content }}
          </p>
          <p>
            Player ID: {{ id }}
          </p>
          <p>
            Firebase ID: {{ firebaseId }}
          </p>
        </template>
        <template slot="cancel">
          {{ loc.no }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <small-popup id="linkCgAccountPopup" ref="linkCgAccountPopup" @popup-confirm="onLinkCgAccount">
        <template slot="header">
          {{ loc.link_cg_account_title }}
        </template>
        <template slot="content">
          <p>
            {{ loc.link_cg_account_content }}
          </p>
          <p>
            Player ID: {{ id }}
          </p>
          <p>
            Firebase ID: {{ firebaseId }}
          </p>
        </template>
        <template slot="cancel">
          {{ loc.cancel }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <small-popup id="firebasePasswordReauthPopup" ref="firebasePasswordReauthPopup" @popup-confirm="onFirebasePasswordReauth">
        <template slot="header">
          {{ loc.firebase_password_reauth_title }}
        </template>
        <template slot="content">
          <p>
            {{ loc.firebase_password_reauth_content }}
          </p>
          <form id="firebasePasswordReauthForm" @submit.prevent="onFirebasePasswordReauth">
            <input class="ss_field" type="email" placeholder="Email" />
            <input class="ss_field" type="password" placeholder="Password" />
          </form>
        </template>
        <template slot="cancel">
          {{ loc.cancel }}
        </template>
        <template slot="confirm">
          {{ loc.yes }}
        </template>
      </small-popup>
      <div ref="reAuthPasswordShowPasswordModal" class="hideme popup_window popup_sm roundme_md centered">
        <div class="modal-card">
          <h1>
            Re-authenticate
          </h1>
          <p>
            Confirm password for {{ reAuthPassword.firebasePasswordReauthEmail }}
          </p>
          <form id="firebasePasswordReauthForm" @submit.prevent="confirmPassword">
            <input type="password" v-model="reAuthPassword.firebasePasswordReauthPassword" @keyup.enter.prevent="confirmPassword" class="ss_field fullwidth" autofocus="" />
            <div class="actions f_center f_space_between fullwidth">
              <!-- Cancel must NOT submit the form -->
              <button type="button" class="ss_button btn_md btn_red bevel_red" @click="cancelPassword">
                Cancel
              </button>
              <!-- Confirm can be the submit -->
              <button type="submit" class="ss_button btn_md btn_green bevel_green" :disabled="!reAuthPassword.firebasePasswordReauthPassword">
                Confirm
              </button>
            </div>
          </form>
        </div>
      </div>
      <!-- <large-popup ref="factionPopup" id="factionPopup" @popup-closed="onFactionPopupClosed" :class="factionsPopupStyle">
		<template slot="header">Factions Popup</template>
		<template slot="content">
			<factions-popup :loc="loc" @close-popup="onFactionPopupClosed" @play-now-clicked="factionsPlayNowClicked" @factions-equip-item="factionsEquipItem" :factions="faction.factions" :player-faction="faction.playerFaction" :cooldown-timer="faction.switchTimer" :eggs="eggs" :firebase-id="firebaseId"></notification-content>
		</template>
	</large-popup> -->
    </div>
    <!-- End of vue instance div -->
    <script>
      var vueApp;
    var vueData = {
    ready: false,
    accountSettled: false,
    missingFeatures: [],
	showChangelogHistoryBtn: true,
	itemSearchVal: &#39;&#39;,
	changelog: {
		version: &#39;&#39;,
		current: [],
		history: [],
		showHistoryBtn: true
	},
	signInAttempts: 0,
	chatInitiatesLogin: false,
	onClickSignIn: false,
	checkProducts: 0,

    firebaseId: null,
    id: null,
	cgCreatedAccount: false,
	cgUser: false,
    photoUrl: null,
    maskedEmail: null,
    isEmailVerified: false,
    isAnonymous: true,
    showPrivacyOptions: isFromEU,
    isOfAge: false,
    showTargetedAds: false,
    delayTheCracking: false,
    displayAdFunction: Function,
    titleScreenDisplayAd: Function,
    displayAdObject: false,
    hideAds: false,

	feedbackSelected: null,

    isPoki: false,
    isPokiGameLoad: false,
    pokiRewardReady: false,
    isPokiNewRewardTimer: false,
    videoRewardTimers: {
        initial: 300000,
        primary: 420000
    },

    pokiRewNum: 1,

	eggOrg: {
		active: false,
		leaderboard: {
			0: 0,
			1: 0
		},
	},

	faction: {
		showPopup: false,
		factions: {
			0: &#39;Masters&#39;,
			1: &#39;Assasins&#39;
		},
		items: {
			0: 1584,
			1: 1585,
		},
		playerFaction: null,
		switchTimer : null,
	},

	tipComp: {
		loading: {
			ref: &#39;LoadingMsgs&#39;,
			time: null,
		},
		tips : {
			ref: &#39;tipMsg&#39;,
			refAlt: &#39;tipMsgAlt&#39;,
			time: 10000,
		}
	},


    displayAd: {
        adUnit: {
            home: &#39;shellshockers_titlescreen&#39;,
            nugget: &#39;shellshockers_chicken_nugget_banner&#39;,
            house: &#39;ShellShockers_LoadingScreen_HouseAds&#39;,
			spinner: &#39;shellshockers_respawn_banner&#39;,
			respawn: RESPAWNADUNIT,
			respawnTwo: RESPAWN2ADUNIT,
			respawnThree: RESPAWN3ADUNIT,
			header: &#39;shellshock-io_728x90_HP&#39;,
        },
		header: 0
    },

    cGrespawnBannerTimeout: null,
    cGrespawnBannerErrors: 0,

    classIdx: 0,
    playerName: &#39;&#39;,
    eggs: 0,
    kills: 0,
    deaths: 0,
    kdr: 0,
    streak: 0,
	accountCreated: null,
	kdrLifetime: 0,
	statsCurrent: {},
	statsLifetime: {},
	challengesClaimedUnique: 0,
	challengesClaimed : {
		total: 0,
		unique: 0
	},
	eggsSpent: 0,
	eggsSpentMonthly: 0,
	eggsEarnedBalance: 0,
    isUpgraded: false,
    upgradeName: &#39;&#39;,
    isSubscriber: false,
	regionList: [], // Populated by Matchmaker API
    currentRegionId: null,
	currentRegionLocKey: &#39;&#39;,
    currentGameType: 0,
    volume: 0,
   	getMusicVolume: 0.5,
	selectedWeaponDisabled: false,

    currentLanguageCode: &#39;en&#39;,

	feedbackType: {
		comment: {id: 0, locKey: &#39;fb_type_commquest&#39;},
		request: {id: 1, locKey: &#39;fb_type_request&#39;},
		bug: {id: 2, locKey: &#39;fb_type_bug&#39;},
		purchase: {id: 3, locKey: &#39;fb_type_purchase&#39;},
		account: {id: 4, locKey: &#39;fb_type_account&#39;},
		abuse: {id: 5, locKey: &#39;fb_type_abuse&#39;},
		other: {id: 6, locKey: &#39;fb_type_other&#39;},
		delete: {id: 7, locKey: &#39;fb_type_delete&#39;}
	},

	icon: {
		inventory : &#39;ico-nav-equipment&#39;,
		shop: &#39;ico-nav-shop&#39;,
		invite: &#39;fas fa-user-friends&#39;,
		home: &#39;ico-nav-home&#39;,
		user: &#39;ico-nav-profile&#39;,
		settings: &#39;fas fa-cog&#39;,
		fullscreen: &#39;fas fa-expand-alt&#39;,
		egg: &#39;fas fa-egg&#39;,
		dollar: &#39;fas fa-dollar-sign&#39;
	},

	showScreen: 0,
	previousScreen: 0,
	screens: {
		home: 0,
		equip: 1,
		game: 2,
		profile: 3,
		photoBooth: 4,
	},

	currentEquipMode: null,

	equipMode: {
		inventory: 0,
		gear: 1,
		featured: 2,
		skins: 3,
		shop: 4,
	},

    ui: {
		noob: {
		},
        overlayType: {
            none: 0,
            dark: 1,
            light: 2,
        },
        overlayClass: {
            inGame: &#39;overlay_game&#39;
        },
        team: {
            blue: 1,
            red: 2
        },
        houseAds: {
            small: null,
            big: null,
			homeScreen: []
        },
        showCornerButtons: true,
		hideUi: false,
		showHomeEquipUi: true,

		events: {
			twitch: false,
		},
		crazyGames: false,

		photoBooth: {
			type: 1,
			vignette: false,
		},
		homeToGameProgressBar: {
			progressValue: 0,
			totalAssets: 4, // Adjust this based on the actual number of assets
			loadedAssets: 0,
			nonAccountTotal: 8,
			accountTotal: 4
		},

		tutorialPopup: {
			show: false,
			keys: [
				{ locKey: &#39;keybindings_grenade&#39;, cls: &#39;tutorial-grenade&#39; },
				{ locKey: &#39;keybindings_melee&#39;, cls: &#39;tutorial-melee&#39; },
				{ locKey: &#39;keybindings_reload&#39;, cls: &#39;tutorial-reload&#39; },
				{ locKey: &#39;keybindings_fire&#39;, cls: &#39;tutorial-shoot&#39; },
				{ locKey: &#39;keybindings_aim&#39;, cls: &#39;tutorial-aim&#39; },
				{ locKey: &#39;keybindings_jump&#39;, cls: &#39;tutorial-jump&#39; },
				{ locKey: &#39;keybindings_swapweapon&#39;, cls: &#39;tutorial-swap-weapons&#39; },
				{ locKey: &#39;tutorial_move_up&#39;, cls: &#39;tutorial-move-up&#39; },
				{ locKey: &#39;tutorial_move_down&#39;, cls: &#39;tutorial-move-down&#39; },
				{ locKey: &#39;tutorial_move_left&#39;, cls: &#39;tutorial-move-left&#39; },
				{ locKey: &#39;tutorial_move_right&#39;, cls: &#39;tutorial-move-right&#39; },
				{ locKey: &#39;tutorial_q&#39;, cls: &#39;tutorial-q tutorial-special-keys tutorial-key-top text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_w&#39;, cls: &#39;tutorial-w tutorial-special-keys tutorial-key-top text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_e&#39;, cls: &#39;tutorial-e tutorial-special-keys tutorial-key-top text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_r&#39;, cls: &#39;tutorial-r tutorial-special-keys tutorial-key-top text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_a&#39;, cls: &#39;tutorial-a tutorial-special-keys tutorial-key-bottom text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_s&#39;, cls: &#39;tutorial-s tutorial-special-keys tutorial-key-bottom text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_d&#39;, cls: &#39;tutorial-d tutorial-special-keys tutorial-key-bottom text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_f&#39;, cls: &#39;tutorial-f tutorial-special-keys tutorial-key-bottom text-uppercase text_blue5&#39; },
				{ locKey: &#39;tutorial_spacebar&#39;, cls: &#39;tutorial-spacebar tutorial-special-keys text-uppercase text_blue5&#39;},
				{ locKey: &#39;tutorial_move_shift&#39;, cls: &#39;tutorial-shift tutorial-special-keys text-uppercase text_blue5&#39; },
			],
			imgKeys: &#39;&#39;,
			imgMouse: &#39;&#39;,
		},

		lazyImages: {
			homeEgg1: &#39;img/eggPose05.webp&#39;,
			homeEgg2: &#39;img/eggPose01.webp&#39;,
			vipEmblem: &#39;img/vip-club/vip-club-popup-emblem.webp&#39;,
			vipPayment: &#39;img/store/UI_paymentOptions.webp&#39;,
			vipPopupBg: &#39;img/vip-club/vip-club-popup-background.webp&#39;,
			chwPopup: &#39;img/chicken-nugget/ssAd_chicknWinner800x600-min.webp&#39;,
			rickRoll: &#39;img/rickroll.gif&#39;,
			adBlockPopup: &#39;img/shellshockers-unite-lg.webp&#39;,
			vipImportant: &#39;img/vip-club/very-important-poultry.webp&#39;,
			eggPackSm: &#39;img/egg_pack_small.webp&#39;,
			goldenEgg: &#39;img/svg/ico_goldenEgg.svg&#39;,
			eggOrgGiveStuff: &#39;img/egg-org/eggOrg_timeTravel_splash800x600-min.webp&#39;,
			welcomePack: &#39;img/eggstra-value-pack.webp&#39;,
			welcomePackPopup: &#39;img/welcome-pass-popup.webp&#39;,
			kotcArrow: &#39;/img/kotc/kotc-arrow.svg&#39;,
			chwChest: &#39;/chicken-nugget/chw-loot-btn.webp&#39;
		},

		notification: null,
		bonus: {
			showing: false,
			amount: 1000
		},

		mainMenu: [
			{
				locKey: &#39;account_title_home&#39;,
				icon: &#39;ico-nav-home&#39;,
				screen: 0,
				mode: [],
				hideOn: [2],
			},
			{
				locKey: &#39;account_title_profile&#39;,
				icon: &#39;ico-nav-profile&#39;,
				screen: 3,
				mode: [],
				hideOn: [],
			},
			{
				locKey: &#39;p_pause_equipment&#39;,
				icon: &#39;ico-nav-equipment&#39;,
				screen: 1,
				mode: [0],
				hideOn: [],
			},
			{
				locKey: &#39;eq_shop&#39;,
				icon: &#39;ico-nav-shop&#39;,
				screen: 1,
				mode: [3, 4, 2],
				hideOn: [],
			},
			// {
			// 	locKey: &#39;screen_photo_booth_menu&#39;,
			// 	icon: &#39;ico-nav-shop&#39;,
			// 	screen: 4,
			// 	mode: [],
			// 	hideOn: [],
			// },
		],
		profile: {
			statTab: 0,
			statTabClicked: false
		},
		playerListOverflow: false,
		typeSelectors: [
			{
				img: ItemIcons.Primary,
				type: ItemType.Primary
			},
			{
				img: ItemIcons.Secondary,
				type: ItemType.Secondary
			},
			{
				img: ItemIcons.Stamp,
				type: ItemType.Stamp
			},
			{
				img: ItemIcons.Hat,
				type: ItemType.Hat
			},
			{
				img: ItemIcons.Grenade,
				type: ItemType.Grenade
			},
			{
				img: ItemIcons.Melee,
				type: ItemType.Melee
			}
		],

		socialMedia: {
			footer: [
				{name: &#39;Facebook&#39;, reward: &#39;Facebook&#39;, url: &#39;https://www.facebook.com/bluewizarddigital&#39;, imgPath: &#39;footer-social-media-bubble-facebook.webp&#39;, icon: &#39;fa-facebook&#39;, id: 1227, owned: false},
				{name: &#39;Twitter&#39;, reward: &#39;Twitter&#39;, url: &#39;https://twitter.com/bluewizardgames&#39;, imgPath: &#39;footer-social-media-bubble-twitter.webp&#39;, icon: &#39;fa-twitter&#39;, id: 1234, owned: false},
				{name: &#39;Instagram&#39;, reward: &#39;Instagram&#39;, url: &#39;https://www.instagram.com/bluewizardgames/&#39;, imgPath: &#39;footer-social-media-bubble-instagram.webp&#39;, icon: &#39;fa-instagram&#39;, id: 1219, owned: false},
				{name: &#39;TikTok&#39;, reward: &#39;tiktok&#39;, url: &#39;https://www.tiktok.com/@bluewizarddigital&#39;, imgPath: &#39;footer-social-media-bubble-tiktok.webp&#39;, icon: &#39;fa-tiktok&#39;, id: 1208, owned: false},
				{name: &#39;Discord&#39;, reward: &#39;discord&#39;, url: &#39;https://discord.gg/bluewizard&#39;, imgPath: &#39;footer-social-media-bubble-discord.webp&#39;, icon: &#39;fa-discord&#39;, id: 1200, owned: false},
				{name: &#39;Steam&#39;, reward: &#39;Steam&#39;, url: &#39;https://store.steampowered.com/publisher/bluewizard&#39;, imgPath: &#39;footer-social-media-bubble-steam.webp&#39;, icon: &#39;fa-steam-symbol&#39;, id: 1223, owned: false},
				{name: &#39;Twitch&#39;, reward: &#39;Twitch&#39;, url: &#39;https://www.twitch.tv/bluewizarddigital&#39;, imgPath: &#39;footer-social-media-bubble-twitch.webp&#39;, icon: &#39;fa-twitch&#39;, id: 1268, owned: false},
				{name: &#39;newYolker&#39;, reward: &#39;&#39;, url: &#39;https://bluewizard.com/subscribe-to-the-new-yolker&#39;, imgPath: &#39;&#39;, icon: &#39;fa-envelope-open-text&#39;, id: null, owned: null},
			],
			selected: &#39;&#39;
		},
		isEvent: {
			active: false,
			houseAdImg: &#39;&#39;,
			homeBtnImg: &#39;&#39;,
			popupImg: &#39;&#39;,
			popupBtnLoc: &#39;&#39;,

		},
		premiumFeaturedTag: &#39;&#39;,
		game : {
			stats: {
				loading: false
			},
			spectate: false,
			spectatingPlayerName: null
		}
    },

	twitchLinked: 0,
	twitchName: &#39;&#39;,
    languages: [
            { name: &#39;English&#39;, code: &#39;en&#39; },
            { name: &#39;French&#39;, code: &#39;fr&#39; },
            { name: &#39;German&#39;, code: &#39;de&#39; },
            { name: &#39;Russian&#39;, code: &#39;ru&#39; },
            { name: &#39;Spanish&#39;, code: &#39;es&#39; },
            { name: &#39;Portuguese&#39;, code: &#39;pt&#39; },
            { name: &#39;Korean&#39;, code: &#39;ko&#39; },
            { name: &#39;Chinese&#39;, code: &#39;zh&#39; },
            { name: &#39;Dutch&#39;, code: &#39;nl&#39; }
        ],

	locLanguage: {},
    playTypes: {
        joinPublic: 0,
        createPrivate: 1,
        joinPrivate: 2
    },

    gameTypes: [
		{ locKey: &#39;gametype_ffa&#39;, value: 0, order: 2 },
        { locKey: &#39;gametype_teams&#39;, value: 1, order: 1 },
        { locKey: &#39;gametype_ctf&#39;, value: 2, order: 0 },
        { locKey: &#39;gametype_king&#39;, value: 3, order: 3 },
    ],
    // This makes me mad, but until Vue is put in the clojure with GameType,
    // where it should have been to begin with, HERE IT IS &gt;:(
	gameTypeKeys: [
        &#39;FFA&#39;,
        &#39;Teams&#39;,
        &#39;Spatula&#39;,
        &#39;King&#39;
    ],

	reportReasons: [
		{ locKey: &#39;report_reason_cheating&#39;, value: 1 },
		{ locKey: &#39;report_reason_harassment&#39;, value: 2 },
		{ locKey: &#39;report_reason_offensive&#39;, value: 4 },
		{ locKey: &#39;report_reason_other&#39;, value: 8 }
	],

	banDurations: [
		{ label: &#39;5 Minutes&#39;, value: 0 },
		{ label: &#39;15 Minutes&#39;, value: 1 },
		{ label: &#39;1 hour&#39;, value: 2 }
	],

    twitchStreams: [],
    youtubeStreams: [],
    newsfeedItems: [],
	maps: [],
    settingsUi: {
		settings: [],
        adjusters: {
            misc: [
                { id: &#39;volume&#39;, locKey: &#39;p_settings_mastervol&#39;, min: 0, max: 1, step: 0.01, value: 1, multiplier: 100 }
            ],
            mouse: [
                { id: &#39;mouseSpeed&#39;, locKey: &#39;p_settings_mousespeed&#39;, min: 1, max: 100, step: 1, value: 30 }
            ],
            gamepad: [
                { id: &#39;sensitivity&#39;, locKey: &#39;p_settings_sensitivity&#39;, min: 1, max: 100, step: 1, value: 30 },
                { id: &#39;deadzone&#39;, locKey: &#39;p_settings_deadzone&#39;, min: 0, max: 1, step: 0.01, value: 0.3, precision: 2 }
            ],
            // music: [
            //     { id: &#39;musicVolume&#39;, locKey: &#39;p_settings_music_volume&#39;, min: 0, max: 1, step: 0.01, value: 0.5,  multiplier: 100 }
            // ],
        },
        togglers: {
            misc: [
                { id: &#39;holdToAim&#39;, locKey: &#39;p_settings_holdtoaim&#39;, value: true },
                { id: &#39;enableChat&#39;, locKey: &#39;p_settings_enablechat&#39;, value: true },
                { id: &#39;safeNames&#39;, locKey: &#39;p_settings_safenames&#39;, value: false },
                { id: &#39;autoDetail&#39;, locKey: &#39;p_settings_autodetail&#39;, value: true },
                { id: &#39;shadowsEnabled&#39;, locKey: &#39;p_settings_shadows&#39;, value: true },
                { id: &#39;highRes&#39;, locKey: &#39;p_settings_highres&#39;, value: false },
                // { id: &#39;musicStatus&#39;, locKey: &#39;p_settings_music&#39;, value: true }
            ],
			misc2: [
                { id: &#39;hideBadge&#39;, locKey: &#39;p_settings_badge_hide&#39;, value: false },
                { id: &#39;closeWindowAlert&#39;, locKey: &#39;p_settings_close_alert&#39;, value: false },
				{ id: &#39;shakeEnabled&#39;, locKey: &#39;p_settings_shake&#39;, value: true },
				{ id: &#39;centerDot&#39;, locKey: &#39;p_settings_center_dot&#39;, value: true },
				{ id: &#39;hitMarkers&#39;, locKey: &#39;p_settings_hit_markers&#39;, value: true },
			],
            mouse: [
                { id: &#39;mouseInvert&#39;, locKey: &#39;p_settings_invertmouse&#39;, value: false },
				{ id: &#39;fastPollMouse&#39;, locKey: &#39;p_settings_fastpollmouse&#39;, value: false },
            ],
            gamepad: [
                { id: &#39;controllerInvert&#39;, locKey: &#39;p_settings_invertcontroller&#39;, value: false },
            ]
        },
        controls: {
            keyboard: {
                // The ids map to the field names in settings.controls[category]
                game: [
                    { id: &#39;up&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_forward&#39;, value: &#39;W&#39; },
                    { id: &#39;down&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_backward&#39;, value: &#39;S&#39; },
                    { id: &#39;left&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_left&#39;, value: &#39;A&#39; },
                    { id: &#39;right&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_right&#39;, value: &#39;D&#39; },
                    { id: &#39;jump&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_jump&#39;, value: &#39;SPACE&#39; },
					{ id: &#39;melee&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_melee&#39;, value: &#39;F&#39; },
					{ id: &#39;inspect&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_inspect&#39;, value: &#39;G&#39; },
					{ id: &#39;despawn&#39;, side: &#39;left&#39;, locKey: &#39;keybindings_despawn&#39;, value: &#39;P&#39; },
                    { id: &#39;fire&#39;, side: &#39;right&#39;, locKey: &#39;keybindings_fire&#39;, value: &#39;MOUSE 0&#39; },
                    { id: &#39;scope&#39;, side: &#39;right&#39;, locKey: &#39;keybindings_aim&#39;, value: &#39;SHIFT&#39; },
                    { id: &#39;reload&#39;, side: &#39;right&#39;, locKey: &#39;keybindings_reload&#39;, value: &#39;R&#39; },
                    { id: &#39;swap_weapon&#39;, side: &#39;right&#39;, locKey: &#39;keybindings_swapweapon&#39;, value: &#39;E&#39; },
                    { id: &#39;grenade&#39;, side: &#39;right&#39;, locKey: &#39;keybindings_grenade&#39;, value: &#39;Q&#39; },
                ],
                spectate: [
					{ id: &#39;ascend&#39;, locKey: &#39;keybindings_spectate_ascend&#39;, value: &#39;SPACE&#39; },
					{ id: &#39;descend&#39;, locKey: &#39;keybindings_spectate_descend&#39;, value: &#39;SHIFT&#39; },
					{ id: &#39;toggle_freecam&#39;, locKey: &#39;keybindings_spectate_freecam&#39;, value: &#39;V&#39; },
                    { id: &#39;slow&#39;, locKey: &#39;keybindings_spectate_slow&#39;, value: &#39;MOUSE 0&#39;},
                ]
            },
            gamepad: {
                // The ids map to the field names in settings.gamepad[category]
                game: [
                    { id: &#39;jump&#39;, locKey: &#39;keybindings_jump&#39;, value: &#39;0&#39; },
                    { id: &#39;fire&#39;, locKey: &#39;keybindings_fire&#39;, value: &#39;1&#39; },
                    { id: &#39;scope&#39;, locKey: &#39;keybindings_aim&#39;, value: &#39;2&#39; },
                    { id: &#39;reload&#39;, locKey: &#39;keybindings_reload&#39;, value: &#39;3&#39; },
                    { id: &#39;swap_weapon&#39;, locKey: &#39;keybindings_swapweapon&#39;, value: &#39;4&#39; },
                    { id: &#39;grenade&#39;, locKey: &#39;keybindings_grenade&#39;, value: &#39;5&#39; },
					{ id: &#39;melee&#39;, locKey: &#39;keybindings_melee&#39;, value: &#39;6&#39; },
					{ id: &#39;inspect&#39;, locKey: &#39;keybindings_inspect&#39;, value: &#39;7&#39; }
                ],
                spectate: [
                    { id: &#39;ascend&#39;, locKey: &#39;keybindings_spectate_ascend&#39;, value: &#39;1&#39; },
                    { id: &#39;descend&#39;, locKey: &#39;keybindings_spectate_descend&#39;, value: &#39;2&#39; }
                ]
            }
        }
    },

    songChanged: false,

    music: {
        isMusic: false,
        musicJson: &#39;data/sponsors.json&#39;,
        musicSrc: &#39;&#39;,
        theAudio: &#39;&#39;,
        playing: false,
        sponsors: {},
        sponsor: &#39;&#39;,
        currIndex: 0,
        currentTime: 0,
        duration: 0,
        timer: null,
        progress: 0,
        volume: 10,
        hideClass: &#39;music-widget--fade-out&#39;,
        serverTracks: {
            id: &#39;&#39;,
            title: &#39;&#39;,
            artist: &#39;&#39;,
            album: &#39;&#39;,
            albumArt: &#39;&#39;,
            url: &#39;&#39;,
            trackUrltest: &#39;https://shellshock.io&#39;,
            sponsor: &#39;&#39;,
            sponsorUrl: &#39;&#39;,
        }
    },

    home: {        
        joinPrivateGamePopup: {
            code: &#39;&#39;,
            showInvalidCodeMsg: false,
            validate: function () {
                if (this.code.length == 0) {
                    console.log(&#39;failed validation&#39;);
                    this.showInvalidCodeMsg =true;
                    BAWK.play(&#39;ui_reset&#39;);
                    return false;
                }
                console.log(&#39;passed validation&#39;);
                return true;
            },
            reset: function () {
                this.code = &#39;&#39;;
                this.showInvalidCodeMsg = false;
            }
        },
		gaugeData: {
			default: {
				min: 164,
				max: 196,
				default: 180,
			},
			min: 185,
			max: 195,
			loadvalue: 190,
			setValue: 180,
			active: false,
		},
		vipEndedType: 0,
		welcomeBundleInfoRequested: false,
    },

	hvsm: {
		hero: {
			name: &#39;Heroes&#39;,
			items: [],
			img: &#39;img/gauge-bar/shell_E&amp;E_good_popup.webp&#39;,
		},
		monster: {
			name: &#39;Monsters&#39;,
			items: [],
			img: &#39;img/gauge-bar/shell_E&amp;E_evil_popup.webp&#39;,
		},
	},

    equip: {
        get showingItems () {
            return this._showingItems;
        },
        set showingItems (items) {
            this._showingItems = items;
			for (let i = 0; i &lt; this.lazyRenderTimeouts.length; ++i) {
				clearTimeout(this.lazyRenderTimeouts[i]);
			}
        },
        lazyRenderTimeouts: [],
        equippedPrimary: null,
        equippedSecondary: null,
        equippedHat: null,
        equippedStamp: null,
        equippedGrenade: null,
        posingHat: null,
        posingStamp: null,
        posingWeapon: null,
        posingGrenade: null,
        posingMelee: null,
        posingStampPositionX: 0,
        posingStampPositionY: 0,
        showingWeaponType: ItemType.Primary,
        selectedItemType: ItemType.Primary,
		itemSearchTerm:  &#39;&#39;,
		itemSearchNone: false,
		itemSearchVal: &#39;&#39;,
        selectedItem: null,
        _showingItems: [],
        buyingItem: null,
        colorIdx: 0,
        extraColorsLocked: true,
        categoryLocKey: null,
        showSpecialItems: false,
        specialItemsTag: null,
		showUnVaultedItems: [],
		bundlePopupItems: [],
		chwRewardBuyItem: false,
		displayAdHeaderRefresh: true,
		bundle: {
			owned: false,
			items: [],
		},

        redeemCodePopup: {
            code: &#39;&#39;,
            showInvalidCodeMsg: false,
            validate: function () {
                if (this.code.length == 0) {
                    console.log(&#39;failed validation&#39;);
                    this.showInvalidCodeMsg = true;
                    BAWK.play(&#39;ui_reset&#39;);
                    return false;
                }
                console.log(&#39;passed validation&#39;);
                return true;
            },
            reset: function () {
                this.code = &#39;&#39;;
                this.showInvalidCodeMsg = false;
            }
        },

        physicalUnlockPopup: {
            item: null
        }
    },

    game: {
		eggOrg: {
			stats: {
				0: 0,
				1: 0
			}
		},
		on: false,
		isPaused: true,
        shareLinkPopup: {
            url: &#39;&#39;,
            code: &#39;&#39;
        },
        gameType: 0,
        team: 1,
        respawnTime: 0,
        tipIdx: 0,
        isGameOwner: false,
		openPopupId: &#39;&#39;,
        pauseScreen: {
            id: &#39;pausePopup&#39;,
            adContainerId: &#39;pauseAdPlacement&#39;,
            classChanged: false,
            wasGameInventoryOpen: false,
			mainContainer: &#39;&#39;,
			canvas: &#39;&#39;,
			showMenu: true,
        },
		disableRespawn: false,
		mapName: &#39;&#39;,
		serverName: &#39;&#39;,
		killDeathMsg: {
			showing: false,
			msgs: [],
			msg: &#39;&#39;,
			style: &#39;&#39;,
			timer: null,
		},
		challengeMsg: {
			showing: false,
			msgs: [],
			icon: &#39;&#39;,
			title: &#39;&#39;,
			timer: null,
		},
		ctsMsg: {
			showing: false,
			teams: [&#39;&#39;, &#39;blue&#39;, &#39;red&#39;],
			team: 0,
			msg: &#39;&#39;,
			timer: null,
		},
		streakMsg: {
			showing: false,
			msg: &#39;&#39;,
			count: 0,
			timer: null,
		},
		bestStreak: {
			count: 0,
			timer: null,
		},
		ingameNotification: {
			item: {type: 0, msg: &#39;&#39;, streak : 0, style: &#39;&#39;},
			showing: false,
			timer: null,
			multiTimer: null,
		},
		inGameNotification: {
			type: 0,
			timer: null,
		},
		shellStreakTimers: [
			{
				msg: &#39;ks_double_eggs&#39;,
				msgId: &#39;double-eggs&#39;,
			},
			{
				msg: &#39;ks_miniegg&#39;,
				msgId: &#39;shrink&#39;,
			},
			{
				msg: &#39;ks_dmg&#39;,
				msgId: &#39;egg-breaker&#39;,
			},
			{
				msg: &#39;ks_restock&#39;,
				msgId: &#39;restock&#39;,
			}
		],
		showWelcomeBundleCta: false,
    },

    isEvent: false,
    doubleEggWeekendSoon: false,
    doubleEggWeekend: false,
    announcementMessage: null,

    playerActionsPopup: {
        playerId: 0,
        uniqueId: 0,
        isGameOwner: false,
        playerName: &#39;&#39;,
        muted: false,
        muteFunc: null,
        bootFunc: null,
		reportFunc: null,
        social: false,
        vipMember: false
    },

	banPlayerPopup: {
		reason: &#39;&#39;
	},

	reportPlayerPopup: {
		checked: [false, false, false, false]
	},

    giveStuffPopup: {
        titleLoc: &#39;&#39;,
        eggs: 0,
        items: [],
        type: &#39;&#39;
    },

    openUrlPopup: {
        url: &#39;&#39;,
        titleLocKey: &#39;&#39;,
        contentLocKey: &#39;&#39;,
        confirmLocKey: &#39;ok&#39;,
        cancelLocKey: &#39;no_thanks&#39;
    },

	bannedPopup: {
		expire: &#39;&#39;
	},

    genericMessagePopup: {
        titleLocKey: &#39;uh_oh&#39;,
        contentLocKey: &#39;purchase_disabled&#39;,
        confirmLocKey: &#39;ok&#39;
    },

    unsupportedPlatformPopup: {
        titleLocKey: &#39;unsupported_platform&#39;,
        contentLocKey: &#39;&#39;
    },

    windowDimensions: {
        width: 0,
        height: 0,
    },

	bannerAds: {
        bannerElId: &#39;&#39;,
    },

    googleAnalytics: {
        isUser: null,
        cat: {
            purchases: &#39;Purchases&#39;,
            purchaseComplete: &#39;Purchase Complete&#39;,
            itemShop: &#39;Item Shop&#39;,
            inventory: &#39;Inventory&#39;,
            playerStats: &#39;player stats&#39;,
            play: &#39;play game&#39;,
            redeem: &#39;Redeem&#39;
        },
        action : {
            eggShackClick: &#39;Egg Shack Click&#39;,
            eggShackProductClick: &#39;Egg Shack Product Click&#39;,
            purchaseComplete: &#39;Purchase Complete&#39;,
            goldenChickenProductClick: &#39;Golden Chicken Product Click&#39;,
            goldenChickenNuggetClick: &#39;Golden Chicken Nugget Click&#39;,
            shopClick: &#39;Shop Opened &#39;,
            shopItemClick: &#39;Shop Item Selected&#39;,
            shopItemPopupClick: &#39;Shop Item Popup Click&#39;,
            shopItemPopupBuy: &#39;Item purchased&#39;,
            shopItemNeedMoreEggsPopup: &#39;Need More Eggs Popup&#39;,
            inventorySelected: &#39;Inventory Item &#39;,
            eggCount: &#39;Egg Count&#39;,
            inventoryTabClick: &#39;Inventory Opened&#39;,
            playGameClick: &#39;Play Game Click&#39;,
            redeemed: &#39;Redeemed&#39;,
            redeemClick: &#39;Redeem open&#39;,
            languageSwitch: &#39;Language setting change&#39;,
            langBeforeUpdate: &#39;Language before auto detect&#39;,
            privateGame: &#39;Private Game&#39;,
            shareGamePopup: &#39;Share game Popup&#39;,
            shareGameCopy: &#39;Shared game code&#39;,
            createGame: &#39;Created game&#39;,
            joinGame: &#39;Joined game&#39;,
            playerLimit: &#39;Player limit&#39;,
            timesPlayed: &#39;Times played&#39;,
            anonymousPopupOpenAuto: &#39;Anon warning auto opened&#39;,
            anonymousPopupOpen: &#39;Anon warning opened&#39;,
            anonymousPopupSignupClick: &#39;Anon warning Sign in clicked&#39;,
            anonymousPopupAgreeClick: &#39;Anon warning Understood clicked&#39;,
            denyAnonUserPopup: &#39;Deny anon user popup&#39;,
            denyAnonUserPopupSignin: &#39;sign in click&#39;,
            faqPopupClick: &#39;FAQ popup open&#39;,
            switchTeams: &#39;Switched Teams&#39;,
            error: &#39;error&#39;,
            signIn: &#39;Sign in&#39;
        },
        label : {
            signInClick: &#39;sign in click&#39;,
            understood: &#39;Understood click&#39;,
            getMoreEggs: &#39;Get More Eggs Click&#39;,
            waitForGameReadyTimeout: &#39;waitForGameReady timeout&#39;,
            signInAuthFailed: &#39;authorization failed&#39;,
            signInTiming: &#39;Sign in delay&#39;,
            signInCompleted: &#39;Completed&#39;,
            signInOut: &#39;Signed out&#39;,
            signInFailed: &#39;&#39;,
            homeToGameLoading: &#39;Home to game loading&#39;,
            loading: &#39;Loading&#39;
        }
    },

    urlParams: null,
    urlParamSet: null,
    adTagUrl: &#39;https://pubads.g.doubleclick.net/gampad/ads?iu=/21743024831/ShellShock_Video&amp;description_url=__page-url__&amp;env=vp&amp;impl=s&amp;correlator=&amp;tfcd=0&amp;npa=0&amp;gdfp_req=1&amp;output=vast&amp;sz=640x480&amp;unviewed_position_start=1&#39;,

    eggStoreItems: [],
    subStoreItems: [],
    premiumShopItems: [],

    eggStoreReferral:  &#39;&#39;,
    eggStoreHasSale:  false,
    eggStorePopupSku:  &#39;egg_pack_small&#39;,

    showNugget:  true,
    // isMiniGameComplete:  false,
	miniEggGameAmount:  0,
    showGoldenChicken:  false,
    nugStart:  null,
    nugCounter:  null,
    isBuyNugget:  false,
    adBlockerCountDown:  10,
    controllerType:  &#39;generic&#39;,
    controllerId:  &#39;&#39;,
    controllerButtonIcons: {
        xbox: [
            &#39;A&#39;,
            &#39;B&#39;,
            &#39;X&#39;,
            &#39;Y&#39;,
            &#39;LB&#39;,
            &#39;RB&#39;,
            &#39;LT&#39;,
            &#39;RT&#39;,
            &#39;Select&#39;,
            &#39;Start&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickright.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadup.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpaddown.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadright.svg&#34;&gt;&#39;
        ],
        ps: [
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_cross.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_circle.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_square.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_triangle.svg&#34;&gt;&#39;,
            &#39;LB&#39;,
            &#39;RB&#39;,
            &#39;LT&#39;,
            &#39;RT&#39;,
            &#39;Select&#39;,
            &#39;Start&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickright.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadup.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpaddown.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadright.svg&#34;&gt;&#39;
        ],
        switchpro: [
            &#39;B&#39;,
            &#39;A&#39;,
            &#39;Y&#39;,
            &#39;X&#39;,
            &#39;LB&#39;,
            &#39;RB&#39;,
            &#39;LT&#39;,
            &#39;RT&#39;,
            &#39;-&#39;,
            &#39;+&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_stickright.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadup.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpaddown.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadleft.svg&#34;&gt;&#39;,
            &#39;&lt;img class=&#34;ss_buttonbind_icon&#34; src=&#34;img/controller/button_dpadright.svg&#34;&gt;&#39;
        ],
        generic: [
            &#39;0&#39;,
            &#39;1&#39;,
            &#39;2&#39;,
            &#39;3&#39;,
            &#39;4&#39;,
            &#39;5&#39;,
            &#39;6&#39;,
            &#39;7&#39;,
            &#39;8&#39;,
            &#39;9&#39;,
            &#39;10&#39;,
            &#39;11&#39;,
            &#39;12&#39;,
            &#39;13&#39;,
            &#39;14&#39;,
            &#39;15&#39;
        ]
    },
    pwaDeferEvent: &#39;&#39;,
    blackFridayBanner: false,
	isSale: false,
   	smallHouseAd: {},
    bannerHouseAd: false,
    showAdBlockerVideoAd: false,
    hasMobileReward: false,

    killName: null,
    killedName: null,
    killedByMessage: null,
    killedMessage: null,

	chw: {
		reward: {
			eggs: null,
			itemIds: [],
			ownedItems: null,
		},
		winnerCounter: 0,
		resets: 0,
		winnerDailyLimitReached: false,
		isError: false,
		miniGameComplete: true,
		hasPlayClicked: false,
		onClick: false,
		activeTimer: 6000,
		homeTimer: null,
		homeEl: null,
		signInClicked: false,
		adBlockDetect: false,
		nuggetReset: 0,

		hours: 0,
		minutes: 0,
		seconds: 0,
		progress: 0,
		limitReached: false,
		ready: false,

		imgs: {
			// loot: &#39;img/chicken-nugget/chickLoop_sleep.svg&#39;,
			// speak: &#39;img/chicken-nugget/chickLoop_speak.svg&#39;,
			// limit: &#39;img/chicken-nugget/chickLoop_daily_limit.svg&#39;,
			// sleep: &#39;img/chicken-nugget/chickLoop_sleep.svg&#39;,
			// idle: &#39;img/chicken-nugget/chickLoop_idle.svg&#39;,

			idle: &#39;img/chicken-nugget/alt/cyborg/chickLoop_idle.svg&#39;,
			speak: &#39;img/chicken-nugget/alt/cyborg/chickLoop_speak.svg&#39;,
			limit: &#39;img/chicken-nugget/alt/cyborg/chickLoop_sleep.svg&#39;,
			sleep: &#39;img/chicken-nugget/alt/cyborg/chickLoop_sleep.svg&#39;,
			loot: &#39;img/chicken-nugget/alt/cyborg/chickLoop_sleep.svg&#39;,
		}
	},

	isChicknWinnerError: false,
	chwMiniGameComplete: true,
	hasChwPlayClicked: false,
	chwActiveTimer: 6000,
	chwHomeTimer: null,
	chwHomeEl: null,
	chwSignInClicked: false,

	chwRewardIds: [],

	contentCreator: false,
	playClicked: false,

	store: {
		premiumItemId: null,
		itemIdsToHide: [],
	},

	dev: {
		store: {
			sku: null,
			sub: false,
		}
	},

	player: {
		challenges: [],
		challengeDailyData: 0,
		challengeTimer: {
			played: 0,
			alive: 0,
		}
	},

	gameOptionsPopup: {
		resetClicked: false,
		usingDefaults: true,
		changesMade: false,
		options: {},
        togglers: [
			{ id: &#39;locked&#39;, name: &#39;Locked&#39;, locKey: &#39;game_locked&#39;, value: 0 },
			{ id: &#39;noTeamChange&#39;, name: &#39;Disable Manual Team Change&#39;, locKey: &#39;game_options_manual&#39;, value: 0 },
			{ id: &#39;noTeamShuffle&#39;, name: &#39;Disable Automatic Team Change&#39;, locKey: &#39;game_options_auto&#39;, value: 0 }
		],
		adjusters: [
			{ id: &#39;gravity&#39;, locKey: &#39;game_options_gravity&#39;, min: 0.25, max: 1, step: 0.25, value: 1, precision: 2 },
			{ id: &#39;damage&#39;, locKey: &#39;game_options_damage&#39;, min: 0, max: 2, step: 0.25, value: 1, precision: 2 },
			{ id: &#39;healthRegen&#39;, locKey: &#39;game_options_healthRegen&#39;, min: 0, max: 4, step: 0.25, value: 1, precision: 2 }
		]
	},
	
	abTestInventory: {
		closed: false,
		started: false,
		enabled: false,
		reward: {
			item: null,
			eggs: 0,
		},
		clickables: [
			{id: &#39;shop-menu-item&#39;, locKey: &#39;ab_test_shop&#39;, scroll: false, setting: false},
			{id: &#39;equip-tab-skins&#39;, locKey: &#39;ab_test_skins&#39;, scroll: false, setting: false},
			{id: &#39;type-selector-grenade&#39;, locKey: &#39;ab_test_grenades&#39;, scroll: false, setting: false},
			{id: &#39;item-tag-wero&#39;, locKey: &#39;ab_test_wero&#39;, scroll: true, setting: false},
			{id: &#39;btn_buy_item&#39;, locKey: &#39;ab_test_buy&#39;, scroll: false, setting: false},
			{id: &#39;&#39;, locKey: &#39;&#39;, scroll: false, setting: false},
			// {id: &#39;screens-menu-btn-return&#39;, locKey: &#39;ab_test_back_to_game&#39;, scroll: false, setting: &#39;grenade&#39;},
		],
		currentIdx: 0,
	},
	crazyGamesUser: {
		hasAccount: false,
		hasLinked: false,
		username: &#39;&#39;,
		profilePictureUrl: &#39;&#39;,
		userLoggedIn: false,
		isAnonymous: true,
	},
	reAuthPassword: {
		showPasswordModal: false,
		firebasePasswordReauthEmail: &#39;&#39;,
		firebasePasswordReauthPassword: &#39;&#39;,
		_pwResolve: null,
		_pwReject: null,
	},
}    // var vueData = new VueData();
    </script>
    <!-- Shared tags must come before the screen tags -->
    <script id="display-ad-template" type="text/x-template">
      &lt;div&gt;
        &lt;div v-show=&#34;isAdShowing&#34; :id=&#34;id&#34; class=&#34;display-ad-container&#34; :class=&#34;theClass&#34;&gt;&lt;/div&gt;
        &lt;house-ad :data=&#34;houseAdData&#34; :isshowing=&#34;isAdShowing &amp;&amp; houseAdData &amp;&amp; adBlocker&#34;&gt;&lt;/house-ad&gt;
    &lt;/div&gt;
    </script>
    <script>
      // Register popup components globally
Vue.component(&#39;display-ad&#39;, createDisplayAdComponent(&#39;#display-ad-template&#39;));

function createDisplayAdComponent(templateId) {
	return { 
		template: templateId,
        props: [&#39;id&#39;, &#39;adUnit&#39;, &#39;isHidden&#39;, &#39;poki&#39;, &#39;adSize&#39;, &#39;override&#39;, &#39;houseAd&#39;, &#39;ignoreSize&#39;, &#39;noRefresh&#39;, &#39;checkProducts&#39;, &#39;width&#39;, &#39;height&#39;],
		data: function () {
			return {
                isAdShowing: false,
				refreshAllowed: true,
                hideAds: false,
                theAd: &#39;&#39;,
                houseAdData: &#39;&#39;,
                adBlocker: false,
				finishedSetup: false
				// timerPeriod: 30000,
				// timerId: null,
				// observer: null,
				// isAdVisible: false,

			}
		},
        mounted() {
            this.$nextTick(() =&gt; {
                this.getTheAd();
            });
            // this.override = this.override || false;
        },
		methods: {
            getTheAd() {
				if (extern.adsLoaded) {
					return;
				}
                this.theAd = document.getElementById(this.adUnit);

				if (this.finishedSetup) {
					console.log(&#39;display ad stop trying to append&#39;);
					return;
				}

                const wrap = document.getElementById(this.id);
                wrap.appendChild(this.theAd);

                if (this.houseAd &amp;&amp; !crazyGamesActive &amp;&amp; !pokiActive) {
                    googletag.cmd.push(function() { googletag.display(&#39;ShellShockers_LoadingScreen_HouseAds&#39;) });
                }


				this.finishedSetup = true;
				// this.setUpObserver();
            },

			setUpObserver() {
				this.observer = new IntersectionObserver(this.onElObserved, { root: null, threshold: 0.1});
				this.observer.observe(this.theAd);
			},

			onElObserved(ad) {
				this.isAdVisible = Math.floor(ad[0].intersectionRatio * 100) &gt; 10 ? true : false;
			},

			setVisible(visible) {

				if (!visible) {
					this.isAdShowing = false;
				}

				// don&#39;t trigger ads if not paused or vip
				if ((visible &amp;&amp; !extern.gamePaused &amp;&amp; extern.inGame) || extern.productBlockAds) {
					return;
				}

                this.isAdShowing = visible;

				// if (!this.isAdShowing) {
                //    if (!crazyGamesActive) window.removeEventListener(&#39;resize&#39;, this.hideAdBasedOnscreenSize);
				// } else {
                //     this.triggerAd();
				// 	if (!crazyGamesActive) {
				// 		setTimeout(() =&gt; this.hideAdBasedOnscreenSize(), 500);
				// 		window.addEventListener(&#39;resize&#39;, this.hideAdBasedOnscreenSize);
				// 	}
                // }

				if (this.isAdShowing) {
					this.triggerAd();
				}

            },
			show() {
                if (extern.productBlockAds) return;
                console.log(`display ad container ${this.id} showing`);
                this.setVisible(true);
            },
			hide() {
				console.log(`display ad container ${this.id} hiding`);
                this.setVisible(false);
            },
            crazyGamesAd(id) {
				crazySdk.requestBanner({
                    id: id,
					width: this.width,
					height: this.height,
				});

            },
            triggerAd() {
                this.adBlocker = extern.adBlocker;

                if (this.adBlocker) {
                    this.adblockerSetup();
                    return;
                }

                if (!crazyGamesActive &amp;&amp; !testCrazy) {

                    if (this.houseAd) {
                        gtagInHouseLoadingBanner();
                        return;
                    }

					if (this.noRefresh) {
						return;
					}
					
					if (hasValue(this.timerId)) {
						clearTimeout(this.timerId);
						this.timerId = null;
					}

					// Ensure aiptag has a value before setting subid and pushing a command
					if (typeof aiptag === &#39;undefined&#39; || aiptag === null) {
						return;	
					}

					aiptag.subid = AIPSUBID;

					aiptag.cmd.display.push(() =&gt; {
						aipDisplayTag.display(this.adUnit);
						console.log(&#39;display ad requested&#39;, this.adUnit);
						// this.refreshAllowed = false;
						// this.timerId = window.setTimeout(() =&gt; this.refreshAllow(), this.timerPeriod);
					});

                }
            },
			destroyAd() {
				// this.setVisible(false);
				this.setVisible(false);
				if (extern.productBlockAds) {
					return;
				} else {
					if (!crazyGamesActive) {
						console.log(&#39;display ad destroy&#39;, this.adUnit);
						aiptag.cmd.display.push(() =&gt; {
							aipDisplayTag.destroySlot(this.adUnit);
						});
					}
				}
			},
            toggleAd(val) {
				console.log(&#39;display ad toggle visibility&#39;, this.adUnit, &#39;is showing &#39;, val);
                if (extern.productBlockAds) {
                    this.isAdShowing = false;
                } else {
					this.$nextTick(() =&gt; {
						this.isAdShowing = val;
						// if (this.refreshAllowed &amp;&amp; val) {
						// 	console.log(&#39;display ad toggle triggers refresh&#39;, this.adUnit);
						// 	this.triggerAd();
						// }
					});
				}

            },
            adblockerSetup() {
				if (pokiActive) return;

                switch(this.id) {
                    case &#39;div-gpt-ad-shellshockers-loading-houseads-wrap&#39;:
                    case &#39;shellshockers_respawn_banner_ad&#39;:
					case &#39;shellshockers_respawn_banner-new_ad&#39;:
                        this.houseAdData = extern.getHouseAd(&#39;bigBanner&#39;);
                        break;
                    case &#39;shellshockers_respawn_banner_2_ad&#39;:
                    case &#39;shellshockers_titlescreen_wrap&#39;:
                        this.houseAdData = extern.getHouseAd(&#39;small&#39;);
                    break;
                    default:
                        console.log(&#39;House ads say, huh?&#39;);
                }

            },
            hideAdBasedOnscreenSize() {
                let adWidth = this.$el.offsetWidth;
                let intViewportWidth = window.innerWidth;

                if (vueApp.displayAdObject &amp;&amp; vueApp.displayAdObject &gt; 1 ) {
                    if (vueApp.displayAdObject &lt; 970) {
                        return;
                    }

                    if (vueApp.displayAdObject &gt; intViewportWidth ) {
                        this.hide();
                    }
                } else {
                    if (adWidth &lt; 970) {
                        return;
                    }

                    if (adWidth &gt; intViewportWidth ) {
                        this.hide();
                    }
                }
            },
            adVisibility() {
                if (this.ignoreSize) return;
                googletag.pubads().addEventListener(&#39;slotVisibilityChanged&#39;, e =&gt; {
                        if (e.inViewPercentage &lt; 51) {
                            this.hide();
                        } else {
                            this.show();
                        }
                    }
                );
            },
			refreshAllow() {
				this.refreshAllowed = true;
				if (this.isAdShowing &amp;&amp; this.isAdVisible) {
					console.log(&#39;display ad auto refresh&#39;, this.adUnit);
					this.triggerAd();
				} else {
					console.log(&#39;display ad auto refresh cancelled&#39;, this.adUnit);
				}
			}
        },

        computed: {
            theClass() {
                return this.adUnit.toLowerCase().replace(/_/g, &#34;-&#34;);
            }
        },
        
        watch: {
            isHidden(value) {
                if (!value) {
                    this.hide();
                }
            },
			checkProducts(val) {
				if (val &amp;&amp; extern.productBlockAds) {
					this.hide();
				}
			},
			// isAdVisible(val) {
			// 	console.log(&#39;display ad visible&#39;, this.adUnit, val);
			// 	if (val &amp;&amp; this.isAdShowing &amp;&amp; this.refreshAllowed) {
			// 		this.triggerAd();
			// 	}
			// }
        }
	}
}
    </script>
    <script id="events-template" type="text/x-template">
      &lt;div v-if=&#34;showEvent&#34; id=&#34;event-notifications&#34;&gt;
        &lt;div class=&#34;double-eggs f_row align-items-center&#34;&gt;
            &lt;img :src=&#34;doubleEggEventUrl&#34; /&gt;

        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      const comp_events = {
        template: &#39;#events-template&#39;,
        props: [&#39;show&#39;, &#39;currentScreen&#39;, &#39;screens&#39;],
        mounted() {
            this.day = this.now.getUTCDay();
			this.hours = this.now.getUTCHours();
        },
        data() {
            return {
                now: new Date(),
				day: 0,
				hours: 0,
				doubleEggSoonImgSrc: &#39;img/events/2XEggWeekend_cominSoon.webp&#39;,
				doubleEggLiveImgSrc: &#39;img/events/2XEggWeekend_onNow.webp&#39;,
            };
        },
        methods: {
            isEventDate(days) {
                return days.includes(this.day);
            },
        },
		computed: {
			doubleEggWeekendSoon() {
				return this.isEventDate([4]) || this.isEventDate([5]) &amp;&amp; this.hours &lt; 20;
			},
			doubleEggWeekend() {
				return this.day &gt;= 5 &amp;&amp; this.hours &gt;= 20 || this.isEventDate([6,0]);
			},
			doubleEggEventUrl() {
				if (this.doubleEggWeekendSoon &amp;&amp; !this.doubleEggWeekend) {
					return this.doubleEggSoonImgSrc;
				} else if (!this.doubleEggWeekendSoon &amp;&amp; this.doubleEggWeekend) {
					return this.doubleEggLiveImgSrc;
				}
			},
			showEvent() {
				return (this.doubleEggWeekendSoon || this.doubleEggWeekend) &amp;&amp; this.currentScreen == this.screens.game;
			},
		}
    };
    </script>
    <script>
      var comp_light_overlay = {
	template: `&lt;transition name=&#34;fade&#34;&gt;
	&lt;div id=&#34;lightOverlay&#34; v-show=&#34;show&#34; :class=&#34;overlayClass&#34; class=&#34;overlay overlay_light&#34;&gt;&lt;/div&gt;
&lt;/transition&gt;`,
	data: function () {
		return {
			show: false,
			overlayClass: &#39;&#39;,
		};
	},
};
    </script>
    <script>
      const comp_dark_overlay = {
  template: `
    &lt;transition name=&#34;fade&#34;&gt;
      &lt;div v-show=&#34;show&#34; :class=&#34;overlayClass&#34; :style=&#34;overlayStyle&#34;&gt;&lt;/div&gt;
    &lt;/transition&gt;`,
  data() {
    return {
      show: false,
      overlayClass: &#39;&#39;
    };
  },
  computed: {
    overlayStyle() {
      return {
        zIndex: 6, // No need to use quotes for camelCased properties
        backgroundImage: &#39;none&#39;,
        backgroundColor: &#39;var(--ss-darkoverlay)&#39;,
        width: &#39;100%&#39;,
        height: &#39;100%&#39;,
        position: &#39;absolute&#39;,
        opacity: 1,
        top: 0, // Numerical values don&#39;t require quotes
        left: 0
      };
    }
  }
};
    </script>
    <script id="spinner-overlay-template" type="text/x-template">
      &lt;transition name=&#34;fadeout&#34;&gt;
		&lt;div v-show=&#34;isShowing&#34; class=&#34;load_screen align-items-center&#34;&gt;
			&lt;h3 class=&#34;load_message&#34;&gt;{{ header }}&lt;/h3&gt;
			&lt;wobbly-egg&gt;&lt;/wobbly-egg&gt;
			&lt;p class=&#34;load_message&#34;&gt;{{ footer }}&lt;/p&gt;
			&lt;div v-show=&#34;tip &amp;&amp; isShowTips&#34; class=&#34;spinner-tips display-grid&#34;&gt;
				&lt;img v-lazyload :data-src=&#34;eggGuyImg&#34; alt=&#34;Loading screen egg shouting&#34;&gt;
				&lt;p class=&#34;load_message tips&#34; v-html=&#34;loc[tip]&#34;&gt;&lt;/p&gt;
			&lt;/div&gt;
			&lt;display-ad id=&#34;shellshockers_respawn_banner_spinner&#34; ref=&#34;loadingScreenDisplayAd&#34; class=&#34;pauseFiller&#34; :ignoreSize=&#34;false&#34; :adUnit=&#34;adUnit&#34; adSize=&#34;728x90&#34; width=&#34;728&#34; height=&#34;90&#34;&gt;&lt;/display-ad&gt;
		&lt;/div&gt;
	&lt;/transition&gt;
    </script>
    <script id="wobble-egg-template" type="text/x-template">
      &lt;div id=&#34;wobbly-egg&#34;&gt;
        &lt;svg viewBox=&#34;0 0 240 240&#34; :class=&#34;[loadEggcontainer, {noanimate: noAnimate}]&#34; width=&#34;240&#34; height=&#34;240&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34;&gt;
            &lt;defs&gt;
                &lt;radialGradient r=&#34;0.5&#34; cy=&#34;0.4&#34; cx=&#34;0.4&#34; id=&#34;load_yolkgradient&#34; spreadMethod=&#34;pad&#34;&gt;
                    &lt;stop stop-color=&#34;#fed&#34; offset=&#34;0.3&#34;/&gt;
                    &lt;stop stop-color=&#34;#fb0&#34; offset=&#34;0.32&#34;/&gt;
                    &lt;stop stop-color=&#34;#fa0&#34; offset=&#34;1&#34;/&gt;
                &lt;/radialGradient&gt;
            
                &lt;filter id=&#34;load_eggshadow&#34; :class=&#34;{noanimate: noAnimate}&#34; x=&#34;-30%&#34; y=&#34;-30%&#34; width=&#34;160%&#34; height=&#34;160%&#34; &gt;
                    &lt;feDropShadow dx=&#34;0&#34; dy=&#34;8&#34; stdDeviation=&#34;8&#34; flood-color=&#34;#124&#34; flood-opacity=&#34;0.3&#34; /&gt;
                &lt;/filter&gt;
            &lt;/defs&gt;
            &lt;g&gt;
                &lt;path filter=&#34;url(#load_eggshadow)&#34; :class=&#34;[loadEggwhite, {noanimate: noAnimate}]&#34; stroke=&#34;#000&#34; id=&#34;svg_eggwhite&#34; d=&#34;m190.13055,40.86621c30.25552,23.71378 -12.26575,57.24017 0,81.77167c12.26575,24.5315 4.9063,80.13624 -33.52639,82.58939c-38.43269,2.45315 -55.60474,-26.16693 -94.03742,-17.98977c-38.43269,8.17717 -11.44803,-30.25552 -17.98977,-44.97442c-6.54173,-14.7189 -24.5315,-46.60985 -4.9063,-71.14135c9.8126,-12.26575 22.07835,-14.92333 34.95739,-15.02554c12.87904,-0.10221 19.01191,-15.63883 31.27766,-17.68312c12.26575,-2.04429 21.46506,17.58091 33.83303,11.2436c12.36797,-6.3373 35.26403,-20.64735 50.39179,-8.79045z&#34; stroke-width=&#34;0&#34; fill=&#34;#fff&#34; /&gt;
            &lt;/g&gt;
            &lt;g&gt;
                &lt;ellipse :class=&#34;[loadEggyolk, {noanimate: noAnimate}]&#34; ry=&#34;38&#34; rx=&#34;38&#34; id=&#34;svg_eggyolk&#34; cy=&#34;120&#34; cx=&#34;120&#34; stroke-width=&#34;0&#34; fill=&#34;url(#load_yolkgradient)&#34;/&gt;
            &lt;/g&gt;
        &lt;/svg&gt;
    &lt;/div&gt;
    </script>
    <script>
      var comp_wobbly_egg = {
        template: &#39;#wobble-egg-template&#39;,
        props: [&#39;noAnimate&#39;],
        
        data: function () {
            return {
                loadEggyolk: &#39;load_eggyolk&#39;,
                loadEggwhite: &#39;load_eggwhite&#39;,
                loadEggcontainer: &#39;load_eggcontainer&#39;
            }
        }
    };
    </script>
    <script>
      var comp_spinner_overlay = {
	template: &#39;#spinner-overlay-template&#39;,
	components: {
		&#39;wobbly-egg&#39;: comp_wobbly_egg
	},
	props: [&#39;loc&#39;, &#39;adblockerbanner&#39;, &#39;hideAds&#39;, &#39;adUnit&#39;, &#39;accountDate&#39;],
	
	data: function () {
		return {
			isShowing: false,
			header: &#39;&#39;,
			footer: &#39;&#39;,
			adIsShowing: false,
			isShowTips: false,
			tipKey: null,
			tips: [],
			tip: &#39;&#39;,
			eggGuyImg: &#39;img/shellShockers_loadingTipEgg.webp&#39;,
			goodBrowser: true,
			browserTipShown: false,
		}
	},

	mounted() {
		this.isNotChrome().then(result =&gt; {
			if (result) {
				this.goodBrowser = false;
			}
		});
	},

	methods: {
		show: function (headerLocKey, footerLocKey, showTips) {
			this.header = this.loc[headerLocKey];
			this.footer = this.loc[footerLocKey];
			this.isShowing = true;
			this.isShowTips = showTips;
		},

		showSpinnerLoadProgress: function (percent) {
			var msg = this.loc[&#39;ui_game_loading&#39;];
			this.header = this.loc[&#39;building_map&#39;];
			this.footer = &#39;{0}... {1}%&#39;.format(msg, percent);
			this.isShowTips = true;
			this.isShowing = true;
		},

		hide: function () {
			this.isShowing = false;
			this.isShowTips = this.isShowing;
			this.$emit(&#39;close-display-ad&#39;);
		},

		hideDisplayAd() {
			this.adIsShowing = false;
			console.log(&#39;do it&#39;);
		},
		showDisplayAd() {
			this.adIsShowing = true;
		},
		toggleDisplayAd() {
			return this.adIsShowing = this.adIsShowing ? false : true;
		},
		getTipKey() {
			if (!this.accountDate) {
				this.tipKey = &#39;tipNew_&#39;;
			} else {
				if (!this.accountDays) {
					this.accountDays = Math.ceil((new Date().getTime() - new Date(this.accountDate).getTime()) / (1000 * 3600 * 24));
				}
				if (this.accountDays &lt;= 14) {
					this.tipKey = &#39;tipNew_&#39;;
				} else {
					this.tipKey = &#39;tip_&#39;;
				}
			}
		},
		randomTip() {
			if (!this.goodBrowser &amp;&amp; !this.browserTipShown) {
				this.tip = &#39;tip_ofthe_day_107&#39;;
				this.browserTipShown = true;
				return;
			}

			if (this.tipKey === null) {
				this.getTipKey();
			}

			if (this.tips.length === 0) {
				Object.keys(this.loc).forEach(key =&gt; {
					if (key.startsWith(this.tipKey)) {
						this.tips.push(key);
					}
				});
			}
			this.tip = this.tips[Math.floor(Math.random() * this.tips.length)];
		},

		async isNotChrome() {
			if (navigator.userAgentData) {
				const brands = navigator.userAgentData.brands || [];
				const isChrome = brands.some(brand =&gt; brand.brand === &#39;Google Chrome&#39;);
				return !isChrome;
			} else {
				// Fallback to userAgent for older browsers
				return this.isNotChromeFallback();
			}
		},
		isNotChromeFallback() {
			const ua = navigator.userAgent;
			return !(ua.includes(&#39;Chrome&#39;) &amp;&amp; !ua.includes(&#39;Edg&#39;) &amp;&amp; !ua.includes(&#39;OPR&#39;));
		}
	},
	watch: {
		isShowing(val, old) {
			if (val &amp;&amp; !old) {
				this.randomTip();
			}
		}
	}
};
    </script>
    <script id="small-popup-template" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
		&lt;div v-show=&#34;isShowing&#34; class=&#34;popup_window popup_sm roundme_md centered&#34;&gt;
			&lt;div&gt;
				&lt;button v-show=&#34;!hideClose&#34; @click=&#34;onXClick&#34; class=&#34;roundme_sm popup_close clickme&#34;&gt;&lt;i class=&#34;fas fa-times text_white fa-2x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
				&lt;h3 id=&#34;popup_title&#34; v-show=&#34;!hideHeader&#34; class=&#34;roundme_sm shadow_blue4 nospace text_white&#34;&gt;
					&lt;slot name=&#34;header&#34;&gt;&lt;/slot&gt;
				&lt;/h3&gt;
			&lt;/div&gt;
			&lt;div v-show=&#34;!hideContent&#34; class=&#34;popup_sm_content&#34;&gt;&lt;slot name=&#34;content&#34;&gt;&lt;/slot&gt;&lt;/div&gt;
			&lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
				&lt;button class=&#34;ss_button btn_red bevel_red width_sm&#34; v-show=&#34;!hideCancel&#34; @click=&#34;cancelClick&#34;&gt;&lt;slot name=&#34;cancel&#34;&gt;&lt;/slot&gt;&lt;/button&gt;
				&lt;button class=&#34;ss_button btn_green bevel_green width_sm&#34; v-show=&#34;!hideConfirm&#34; @click=&#34;confirmClick&#34;&gt;&lt;slot name=&#34;confirm&#34;&gt;&lt;/slot&gt;&lt;/button&gt;
			&lt;/div&gt;
			&lt;slot name=&#34;footer&#34;&gt;&lt;/slot&gt;
		&lt;/div&gt;
	&lt;/transition&gt;
    </script>
    <script id="large-popup-template" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
		&lt;div id=&#34;popupPause&#34; v-show=&#34;isShowing&#34; class=&#34;popup_window popup_lg centered roundme_md&#34; :class=&#34;setOverlayCls&#34;&gt;
			&lt;button @click=&#34;onXClick&#34; v-show=&#34;!hideClose&#34; class=&#34;popup_close clickme roundme_sm&#34;&gt;&lt;i class=&#34;fas fa-times text_white fa-2x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
			&lt;slot name=&#34;content&#34;&gt;&lt;/slot&gt;
		&lt;/div&gt;
	&lt;/transition&gt;
    </script>
    <script>
      // Register popup components globally
Vue.component(&#39;small-popup&#39;, createPopupComponent(&#39;#small-popup-template&#39;));
Vue.component(&#39;large-popup&#39;, createPopupComponent(&#39;#large-popup-template&#39;));

function createPopupComponent(templateId) {
	return { 
		template: templateId,
		props: [&#39;hideHeader&#39;, &#39;hideContent&#39;, &#39;hideClose&#39;, &#39;hideCancel&#39;, &#39;hideConfirm&#39;, &#39;overlayType&#39;, &#39;overlayClass&#39;, &#39;popupModel&#39;, &#39;uiModel&#39;, &#39;stopKeyCapture&#39;, &#39;overlayClose&#39;],
		data: function () {
			return {
				isShowing: false,
				overlays: vueData.ui.overlayType,
				popupId: &#39;&#39;,
				removeOverlayClick: &#39;&#39;
			}
		},

		created() {
			this.popupId = this.$attrs &amp;&amp; this.$attrs.id;
		},

		destroyed: function() {
			document.removeEventListener(&#39;keyup&#39;, this.escapeKeyClose);
		},

		methods: {
			setVisible: function (visible) {

				this.isShowing = visible;

				if (extern.inGame) {
					if (this.isShowing) {
						extern.releaseKeys();	
					} else {
						extern.captureKeys();
					 }
				}

				if (this.isShowing &amp;&amp; this.popupModel &amp;&amp; this.popupModel.reset) {
					this.popupModel.reset();
				}

				if (!this.isShowing || this.overlayType === this.overlays.none || this.popupId === &#39;pausePopup&#39;) {
					vueApp.setDarkOverlay(false);
					vueApp.setLightOverlay(false);
				} else {
					vueApp.setDarkOverlay(true);
				}

				if (!this.isShowing) {
					console.log(&#39;Closed: &#39; + this.popupId);
					this.$emit(&#39;popup-closed&#39;, this.popupId);
					vueApp.$refs.equipScreen.onPopupClosed();
					vueApp.gameUiRemoveClassForNoScroll();
					this.cancelEventOverLayClickEscapeClose();
				} else {
					console.log(&#39;Opened: &#39; + this.popupId);
					this.$emit(&#39;popup-opened&#39;, this.popupId);
					vueApp.$refs.equipScreen.onPopupOpened();
					vueApp.scrollToTop();
					vueApp.gameUiAddClassForNoScroll();
					this.addEventListeners();
				}
				if (vueApp.showScreen !== vueApp.screens.game) {
					vueApp.toggleTitleScreenAd(this.isShowing ? false : true);
				} else {
					vueApp.toggleRespawnDisplayAd(this.isShowing ? false : true);
				}

			},

			toggle: function () {
				this.isShowing = !this.isShowing;

				this.setVisible(this.isShowing);
			},
			
			show: function () {
				this.setVisible(true);
			},

			hide: function () {
				this.setVisible(false);
			},

			close: function () {
				this.setVisible(false);
				console.log(&#39;Closing&#39;);
			},

			onCloseClick: function () {
				this.close();
				BAWK.play(&#39;ui_popupclose&#39;);
			},

			onXClick: function () {
				this.$emit(&#39;popup-x&#39;);
				this.close();
				BAWK.play(&#39;ui_popupclose&#39;);
			},

			cancelClick: function () {
				this.close();
				this.$emit(&#39;popup-cancel&#39;);
				BAWK.play(&#39;ui_popupclose&#39;);
			},

			confirmClick: function () {
				if (this.popupModel &amp;&amp; this.popupModel.validate &amp;&amp; !this.popupModel.validate()) {
					return;
				}
				this.close();
				this.$emit(&#39;popup-confirm&#39;);
				BAWK.play(&#39;ui_playconfirm&#39;);
			},

			addEventListeners: function() {
				document.addEventListener(&#39;click&#39;, this.handleOutsideClick);
				document.addEventListener(&#39;keyup&#39;, this.escapeKeyClose);
			},

			escapeKeyClose: function(e) {
				if (hasValue(this.overlayClose)) {
					return;
				}
				if ((this.overlayClose === undefined || hasValue(this.overlayClose)) &amp;&amp; e.keyCode === 27) {
					e.stopPropagation();
					this.onCloseClick();

				}
			},

			handleOutsideClick: function(e) {
				if (this.overlayClose === undefined || this.overlayClose !== false) {
					const clickedElement = e.target;

					// Introduce a small delay (e.g., 10ms) to ensure styles are correctly read... VUE
					setTimeout(() =&gt; {

						// Desired styles for comparison
						const desiredStyles = {
							zIndex: &#39;6&#39;,
							backgroundImage: &#39;none&#39;,
							backgroundColor: &#39;var(--ss-darkoverlay)&#39;,
							width: &#39;100%&#39;,
							height: &#39;100%&#39;,
							position: &#39;absolute&#39;,
							opacity: &#39;1&#39;,
							top: &#39;0px&#39;,
							left: &#39;0px&#39;
						};

						// Function to check if styles match
						const stylesMatch = Object.entries(desiredStyles).every(([key, value]) =&gt; {
							const actualValue = clickedElement.style[key];
							const matches = actualValue === value;
							return matches;
						});

						// Proceed only if styles match
						if (stylesMatch) {
							e.stopPropagation();
							this.$emit(&#39;popup-x&#39;);
							this.onCloseClick();
						}
					}, 10);
				}
			},

			cancelEventOverLayClickEscapeClose: function() {
				document.removeEventListener(&#39;click&#39;, this.handleOutsideClick);
				document.removeEventListener(&#39;keyup&#39;, this.escapeKeyClose);
			}
		},
		computed: {
			setOverlayCls() {
				if (extern.inGame) {
					return &#39;overlay_game&#39;;
				}
			}
		}
	}
}
    </script>
    <script>
      const SvgIcon = {
		template:
			`&lt;svg :class=&#34;cls&#34;&gt;
				&lt;use :xlink:href=&#34;svgName&#34;&gt;&lt;/use&gt;
			&lt;/svg&gt;`,
		props: [&#39;name&#39;, &#39;cls&#39;],
		// data() {
		// 	return {
		// 	};
		// },
		// methods: {
		// },
		computed: {
			svgName() {
				return `#${this.name}`;
			}
		},
	};
    // Register component globally
    Vue.component(&#39;icon&#39;, SvgIcon);
    </script>
    <template id="comp-ss-button" type="text/x-template">
      <button :id="btnId" :class="cls" class="ss_button">
        <i v-if="iconLeft" class="iconLeft"></i>
        {{ locTxt }}
        <i v-if="iconRight" class="iconRight"></i>
      </button>
    </template>
    <template id="comp-ss-button-dropdown-template" type="text/x-template">
      <button ref="ssDropDown" :id="btnId" @click="onDropdownClick" class="is-for-play ss_button btn_dropdown btn_big common-box-shadow btn_game_mode bg_blue6 text-left box_relative ss-dropdown-select" :class="clsBtn">
        <h3 class="ss-dropdown-select text_blue3" :class="btnId">
          {{ locTxt.title }}
        </h3>
        <p class="game-mode-type ss-dropdown-select text_blue5" :class="btnId">
          {{ locTxt.subTitle }}
        </p>
        <span class="open-close centered_y ss-dropdown-select" :class="btnId">        <i class="fas ss-dropdown-select" :class="[caretDirection, btnId, cartOnOpen]"></i>
</span>
        <div :class="menuPosClass" class="option-box box_absolute roundme_sm common-box-shadow bg_blue6" v-show="isPromptOpen">
          <ul ref="optionBoxList" class="list-no-style nospace ss-dropdown-select f_col">
            <li v-if="listItems" ref="items" v-for="(g, idx) in dropdownList" :class="{ &#39;selected&#39; : selectedItem === g.value || selectedItem === idx || selectedItem === g.id }" class="display-grid gap-sm align-items-center text_blue5 font-nunito" @click="onListItemClick(g, idx)">
              <div class="f_row align-items-center">
                <icon v-show="selectedItem === g.value" class="option-box-checkmark" name="ico-checkmark">
                </icon>
              </div>
              {{ listItemTxt(g) }}
            </li>
            <slot name="dropdown">
            </slot>
          </ul>
        </div>
      </button>
    </template>
    <script>
      const createSsBtn = (tempId) =&gt; {
		return {
			template: tempId,
			props: [&#39;loc&#39;, &#39;cls&#39;, &#39;locTxt&#39;, &#39;iconRight&#39;, &#39;iconLeft&#39;, &#39;listItems&#39;, &#39;selectedItem&#39;, &#39;menuDown&#39;, &#39;menuPos&#39;, &#39;sort&#39;, &#39;locList&#39;],
			data: function() {
				return {
					isPromptOpen: false,
					btnId: &#39;btn-&#39; + (Math.random() + 1).toString(36).substring(7),
					onClickVal: null,
					caret: {
						up: &#39;fa-caret-up&#39;,
						down: &#39;fa-caret-down&#39;,
						right: &#39;fa-caret-right&#39;,
						rotate: &#39;fa-rotate-180&#39;
					}
				}
			},		
			methods: {
				onListItemClick(val, idx) {
					if (val.value !== undefined) {
						this.onClickVal = val.value;
					} else if (val.subdom !== undefined) { 
						this.onClickVal = val.id;
					} else {
						this.onClickVal = idx;
					}
					this.$emit(&#39;onListItemClick&#39;, this.onClickVal);
				},
				onDropdownClick(e) {
					if (!this.isPromptOpen) {
						this.isPromptOpen = true;
						this.$emit(&#39;dropdownOpen&#39;);
						document.addEventListener(&#39;click&#39;, this.onOutsideClick);
					} else {
						this.isPromptOpen = false;
						this.$emit(&#39;dropdownClosed&#39;);
						document.removeEventListener(&#39;click&#39;, this.onOutsideClick);
					}
				},
				onOutsideClick(e) {
					if (this.isPromptOpen) {			
						if (e.target.classList.contains(this.btnId) === false) {
							this.isPromptOpen = false;
							this.$emit(&#39;dropdownClosed&#39;);
							document.removeEventListener(&#39;click&#39;, this.onOutsideClick);
						}
					}
				},
				listItemTxt(val) {
					if (val.name !== undefined) {
						if (this.locList !== undefined) {
							return this.loc[val.name];
						}
						return val.name;
					} else {
						return this.loc[val.locKey];
					}
				}
			},
			computed: {
				menuPosClass() {
					if (this.menuPos === &#39;bottom&#39;) {
						return &#39;pos-bottom&#39;;
					} else if (this.menuPos === &#39;right&#39;) {
						return &#39;pos-right&#39;;
					}
				},
				caretDirection() {
					if (this.menuPos === &#39;bottom&#39;) {
						return this.caret.down;
					} else if (this.menuPos === &#39;right&#39;) {
						return this.caret.right;
					} else {
						return this.caret.up;
					}
				},
				cartOnOpen() {
					if (this.isPromptOpen) {
						return this.caret.rotate;
					} 
				},
				clsBtn() {
					return `${this.cls} ${this.btnId}`;
				},
				dropdownList() {
					if (this.sort) {
						return this.listItems.sort((a, b) =&gt; {
							return a.order - b.order;
						});
					} else {
						return this.listItems;
					}
				}
			},
			watch: {
				isPromptOpen(val) {
					BAWK.play(&#39;ui_toggletab&#39;);

				}
			}
		};
	}
	Vue.component(&#39;ss-button&#39;, createSsBtn(&#39;#comp-ss-button&#39;));
	Vue.component(&#39;ss-button-dropdown&#39;, createSsBtn(&#39;#comp-ss-button-dropdown-template&#39;));
    </script>
    <template id="house-display-ad">
      <transition name="fade">
        <figure v-if="isshowing &amp;&amp; data" class="house-wrap">
          <img :src="src" :alt="title" @click="adClicked" />
        </figure>
      </transition>
    </template>
    <script>
      function createHouseAd() {
        return {
            template: &#39;#house-display-ad&#39;,
            props: [&#39;isshowing&#39;, &#39;data&#39;],
            data() {
                return {
                    count: 0
                }
            },
            methods: {
                adClicked() {
                    if (&#39;link&#39; in this.data) {
                        this.data.link = this.data.link + &#39;/?utm_source=shell_shockers&amp;utm_medium=referral&amp;utm_campaign=house-ads&#39;;
                    }
                    extern.clickedHouseLink(this.data);
                }
            },
            computed: {
                src() {
                    return dynamicContentPrefix + `data/img/art/${this.data.id}${this.data.imageExt}`;
                },
                alt() {
                    return `${this.data.label} banner image!`;
                },
                link() {
                    return `${this.data.link}/?utm_source=shell_shockers&amp;utm_medium=referral&amp;utm_campaign=house-ads`;
                },
                title() {
                    return `Play ${this.data.label} now!`;
                }

            }
        }
    }

    Vue.component(&#39;house-ad&#39;, createHouseAd());
    </script>
    <script id="language-selector-template" type="text/x-template">
      &lt;select id=&#34;pickLanguage&#34; v-model=&#34;languageCode&#34; @change=&#34;onChangeLanguage&#34; class=&#34;ss_select ss_marginright_sm&#34;&gt;
        &lt;option v-for=&#34;(language, code) in langOptions&#34; v-bind:value=&#34;code&#34;&gt;
            {{ language }}
        &lt;/option&gt;
    &lt;/select&gt;
    </script>
    <script>
      var comp_language_selector = {
    template: &#39;#language-selector-template&#39;,
    props: [&#39;languages&#39;, &#39;selectedLanguageCode&#39;, &#39;loc&#39;, &#39;langOptions&#39;],

    data: function () {
        return {
            languageCode: this.selectedLanguageCode,
        }
    },

    methods: {
        playSound (sound) {
			BAWK.play(sound);
        },

		onChangeLanguage: function () {
            vueApp.changeLanguage(this.languageCode);
            // Update localStore for selected language.
            localStore.setItem(&#39;languageSelected&#39;, this.languageCode);
            BAWK.play(&#39;ui_onchange&#39;);
            ga(&#39;send&#39;, &#39;event&#39;, {
                eventCategory: vueData.googleAnalytics.cat.playerStats,
                eventAction: vueApp.googleAnalytics.action.languageSwitch,
                eventLabel: this.languageCode,
            });
		}
    },

    watch: {
        selectedLanguageCode: function (code) {
            this.languageCode = code;
        }
    }
};
    </script>
    <script id="gdpr-template" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
    &lt;div v-show=&#34;isShowing&#34;&gt;
        &lt;div id=&#34;consent&#34; v-show=&#34;showingNotification&#34; class=&#34;gdpr_banner f_row&#34;&gt;
            &lt;div&gt;{{ loc.gdpr_notification }} &lt;a href=&#34;http://www.bluewizard.com/privacypolicy&#34; target=&#34;_window&#34;&gt;{{ loc.gdpr_link }}&lt;/a&gt;
            &lt;/div&gt;
            &lt;div class=&#34;f_row&#34;&gt;
                &lt;button @click=&#34;onDisagreeClicked()&#34; class=&#34;ss_button btn_red bevel_red ss_marginright ss_marginleft&#34;&gt;{{ loc.gdpr_disagree }}&lt;/button&gt;
                &lt;button @click=&#34;onAgreeClicked()&#34; class=&#34;ss_button btn_green bevel_green&#34;&gt;{{ loc.gdpr_agree }}&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div id=&#34;doConsent&#34; v-show=&#34;showingConsent&#34; class=&#34;gdpr_banner f_row&#34;&gt;
            &lt;div&gt;{{ loc.gdpr_consent }}&lt;/div&gt;
            &lt;div&gt;
                &lt;button @click=&#34;close()&#34; class=&#34;ss_button btn_green bevel_green btn_md&#34;&gt;{{ loc.ok }}&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;div id=&#34;noConsent&#34;v-show=&#34;showingNoConsent&#34; class=&#34;gdpr_banner f_row&#34;&gt;
            &lt;div&gt;{{ loc.gdpr_noConsent }}&lt;/div&gt;
            &lt;div&gt;
                &lt;button @click=&#34;close()&#34; class=&#34;ss_button btn_green bevel_green btn_md&#34;&gt;{{ loc.ok }}&lt;/button&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;/transition&gt;
    </script>
    <script>
      var comp_gdpr = {
	template: &#39;#gdpr-template&#39;,
	props: [&#39;loc&#39;],

    data: function () {
        return {
            isShowing: false,
            showingNotification: false,
            showingConsent: false,
            showingNoConsent: false
        }
    },

	methods: {
        show: function () {
            this.isShowing = true;
            this.showingNotification = true;
            this.showingConsent = false;
            this.showingNoConsent = false;
        },

        close: function () {
            this.isShowing = false;
            BAWK.play(&#39;ui_playconfirm&#39;);
        },

        onAgreeClicked: function () {
            this.showingConsent = true;
            this.showingNotification = false;
            extern.doConsent();
            BAWK.play(&#39;ui_onchange&#39;);
        },

        onDisagreeClicked: function () {
            this.showingNoConsent = true;
            this.showingNotification = false;
            extern.doNotConsent();
            BAWK.play(&#39;ui_onchange&#39;);
        }
    }
};
    </script>
    <script id="settings-template" type="text/x-template">
      &lt;div&gt;
  	&lt;h1 class=&#34;roundme_sm text-center&#34;&gt;{{ loc.p_settings_title }}&lt;/h1&gt;

	&lt;div class=&#34;display-grid grid-column-3-eq gap-sm&#34;&gt;
        &lt;button id=&#34;keyboard_button&#34; @click=&#34;selectTab&#34; class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar f_row align-items-center justify-content-center gap-sm&#34; :class=&#34;(showKeyboardTab ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;&lt;img v-lazyload :data-src=&#34;icons.keyboard&#34; class=&#34;lazy-load ss_bigtab_icon&#34; /&gt; &lt;img v-lazyload :data-src=&#34;icons.mouse&#34; class=&#34;lazy-load ss_bigtab_icon&#34; /&gt;&lt;/button&gt;
        &lt;button id=&#34;controller_button&#34; @click=&#34;selectTab&#34; class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar f_row align-items-center justify-content-center gap-sm&#34; :class=&#34;(showControllerTab ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;&lt;img v-lazyload :data-src=&#34;icons.gamePad&#34; class=&#34;lazy-load ss_bigtab_icon&#34; /&gt;&lt;/button&gt;
        &lt;button id=&#34;misc_button&#34; @click=&#34;selectTab&#34; class=&#34;ss_bigtab bevel_blue ss_bigtab bevel_blue roundme_md font-sigmar f_row align-items-center justify-content-center gap-sm&#34; :class=&#34;(showMiscTab ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;&lt;img v-lazyload :data-src=&#34;icons.monitor&#34; class=&#34;lazy-load ss_bigtab_icon&#34; /&gt; &lt;img v-lazyload :data-src=&#34;icons.speaker&#34; class=&#34;lazy-load ss_bigtab_icon&#34; /&gt; &lt;/button&gt;
    &lt;/div&gt;

    &lt;div id=&#34;popupInnards&#34; class=&#34;roundme_sm fullwidth f_col ss_margintop_sm ss_marginbottom_xl&#34;&gt;
		&lt;div id=&#34;settings_keyboard&#34; v-show=&#34;showKeyboardTab&#34; class=&#34;settings-section&#34;&gt;
			&lt;h3 class=&#34;margin-bottom-none h-short&#34;&gt;{{ loc.p_settings_keybindings }}&lt;/h3&gt;
			
			&lt;div class=&#34;f_row ss_margintop&#34;&gt;
				&lt;div class=&#34;f_col&#34;&gt;
					&lt;div v-for=&#34;c in settingsUi.controls.keyboard.game&#34; v-if=&#34;c.side == &#39;left&#39;&#34; v-show=&#34;showForCrazyGame(c.locKey)&#34;class=&#34;nowrap&#34;&gt;
						&lt;settings-control-binder :loc=&#34;loc&#34; :control-id=&#34;c.id&#34; :control-value=&#34;c.value&#34; @control-captured=&#34;onGameControlCaptured&#34;&gt;&lt;/settings-control-binder&gt;
						&lt;div class=&#34;label&#34;&gt;{{ loc[c.locKey] }}&lt;/div&gt;
					&lt;/div&gt;

					&lt;div class=&#34;ss_margintop_xl&#34;&gt;
						&lt;div v-for=&#34;c in settingsUi.controls.keyboard.spectate&#34; class=&#34;nowrap&#34;&gt;
							&lt;settings-control-binder :loc=&#34;loc&#34; :control-id=&#34;c.id&#34; :control-value=&#34;c.value&#34; @control-captured=&#34;onSpectateControlCaptured&#34;&gt;&lt;/settings-control-binder&gt;
							&lt;div class=&#34;label&#34;&gt;{{ loc[c.locKey] }}&lt;/div&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;div class=&#34;f_col ss_marginleft_xl&#34;&gt;
					&lt;div v-for=&#34;c in settingsUi.controls.keyboard.game&#34; v-if=&#34;c.side == &#39;right&#39;&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-control-binder :loc=&#34;loc&#34; :control-id=&#34;c.id&#34; :control-value=&#34;c.value&#34; @control-captured=&#34;onGameControlCaptured&#34;&gt;&lt;/settings-control-binder&gt;
						&lt;div class=&#34;label&#34;&gt;{{ loc[c.locKey] }}&lt;/div&gt;
					&lt;/div&gt;

					&lt;div class=&#34;ss_margintop&#34;&gt;
						&lt;div v-for=&#34;t in settingsUi.adjusters.mouse&#34; class=&#34;nowrap&#34;&gt;
							&lt;settings-adjuster :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; :min=&#34;t.min&#34; :max=&#34;t.max&#34; :step=&#34;t.step&#34; :multiplier=&#34;t.multiplier&#34; @setting-adjusted=&#34;onSettingAdjusted&#34;&gt;&lt;/settings-adjuster&gt;
						&lt;/div&gt;

						&lt;div v-for=&#34;t in settingsUi.togglers.mouse&#34; class=&#34;nowrap&#34;&gt;
							&lt;settings-toggler v-if=&#34;(t.id === &#39;shadowsEnabled&#39; || t.id === &#39;highRes&#39;) ? showDetailSettings : true&#34; :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; @setting-toggled=&#34;onSettingToggled&#34;&gt;&lt;/settings-toggler&gt;
						&lt;/div&gt;
					&lt;/div&gt;

				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		
		&lt;div id=&#34;settings_controller&#34; v-show=&#34;showControllerTab&#34; class=&#34;settings-section&#34;&gt;
			&lt;h3 class=&#34;margin-bottom-none h-short&#34;&gt;{{ loc.p_settings_gamepadbindings }}&lt;/h3&gt;
			
			&lt;div class=&#34;f_row ss_margintop&#34;&gt;
				&lt;div class=&#34;f_col&#34;&gt;
					&lt;div v-for=&#34;c in settingsUi.controls.gamepad.game&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-gamepad-binder :loc=&#34;loc&#34; :control-id=&#34;c.id&#34; :control-value=&#34;c.value&#34; @control-captured=&#34;onGamepadGameControlCaptured&#34; :controller-type=&#34;controllerType&#34;&gt;&lt;/settings-gamepad-binder&gt;
						&lt;div class=&#34;label&#34;&gt;{{ loc[c.locKey] }}&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;div class=&#34;f_col ss_marginleft_xl&#34;&gt;
					&lt;div class=&#34;ss_marginbottom_xl&#34;&gt;
						&lt;div v-for=&#34;c in settingsUi.controls.gamepad.spectate&#34; class=&#34;nowrap&#34;&gt;
							&lt;settings-gamepad-binder :loc=&#34;loc&#34; :control-id=&#34;c.id&#34; :control-value=&#34;c.value&#34; @control-captured=&#34;onGamepadSpectateControlCaptured&#34; :controller-type=&#34;controllerType&#34;&gt;&lt;/settings-gamepad-binder&gt;
							&lt;div class=&#34;label&#34;&gt;{{ loc[c.locKey] }}&lt;/div&gt;
						&lt;/div&gt;
					&lt;/div&gt;

					&lt;div v-for=&#34;t in settingsUi.adjusters.gamepad&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-adjuster :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; :min=&#34;t.min&#34; :max=&#34;t.max&#34; :step=&#34;t.step&#34; :multiplier=&#34;t.multiplier&#34; :precision=&#34;t.precision&#34; @setting-adjusted=&#34;onSettingAdjusted&#34;&gt;&lt;/settings-adjuster&gt;
					&lt;/div&gt;

					&lt;div v-for=&#34;t in settingsUi.togglers.gamepad&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-toggler v-if=&#34;(t.id === &#39;shadowsEnabled&#39; || t.id === &#39;highRes&#39;) ? showDetailSettings : true&#34; :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; @setting-toggled=&#34;onSettingToggled&#34;&gt;&lt;/settings-toggler&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;

			&lt;p class=&#34;text_blue5 nospace&#34;&gt;{{ getControllerId }}&lt;/p&gt;
			&lt;p class=&#34;text_blue8 nospace&#34;&gt;{{ loc.p_settings_controllerhelp }} &lt;a target=&#34;_blank&#34; class=&#34;text_blue5&#34; href=&#34;https://hardwaretester.com/gamepad&#34;&gt;hardwaretester.com&lt;/a&gt;&lt;/p&gt;
		&lt;/div&gt;

		&lt;div id=&#34;settings_misc&#34; v-show=&#34;showMiscTab&#34; class=&#34;settings-section&#34;&gt;
			&lt;div class=&#34;display-grid grid-column-2-eq&#34;&gt;
				&lt;div class=&#34;f_col&#34;&gt;
					&lt;div v-for=&#34;t in settingsUi.adjusters.misc&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-adjuster :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; :min=&#34;t.min&#34; :max=&#34;t.max&#34; :step=&#34;t.step&#34; :multiplier=&#34;t.multiplier&#34; @setting-adjusted=&#34;onSettingAdjusted&#34;&gt;&lt;/settings-adjuster&gt;
					&lt;/div&gt;
					&lt;div v-for=&#34;t in settingsUi.adjusters.music&#34; class=&#34;nowrap&#34;&gt;
						&lt;settings-adjuster :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; :min=&#34;t.min&#34; :max=&#34;t.max&#34; :step=&#34;t.step&#34; :multiplier=&#34;t.multiplier&#34; @setting-adjusted=&#34;onSettingAdjusted&#34;&gt;&lt;/settings-adjuster&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;div class=&#34;f_col&#34;&gt;
					&lt;h3 class=&#34;margin-bottom-none h-short&#34;&gt;{{loc.p_servers_title}}&lt;/h3&gt;
					&lt;select id=&#34;regionSelect&#34; v-model=&#34;currentRegion&#34; @change=&#34;onChangeRegion&#34; class=&#34;ss_select ss_marginright_sm ss_select&#34;&gt;
						&lt;option v-for=&#34;(region, id) in regionList&#34; v-bind:value=&#34;region.id&#34;&gt;{{ loc[region.locKey] }} {{ region.ping }}ms&lt;/option&gt;
					&lt;/select&gt;
				&lt;/div&gt;

				&lt;div class=&#34;f_col&#34;&gt;
					&lt;h3 class=&#34;margin-bottom-none h-short&#34;&gt;{{ loc.p_settings_language }}&lt;/h3&gt;
					&lt;language-selector :languages=&#34;languages&#34; :loc=&#34;loc&#34; :selectedLanguageCode=&#34;currentLanguageCode&#34; class=&#34;ss_select&#34; :langOptions=&#34;langOption&#34;&gt;&lt;/language-selector&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;h3 class=&#34;margin-bottom-none h-short&#34;&gt;More options&lt;/h3&gt;
			&lt;div class=&#34;display-grid grid-column-2-eq&#34;&gt;
				&lt;div class=&#34;f_col&#34;&gt;
					&lt;div v-for=&#34;t in settingsUi.togglers.misc&#34;&gt;
						&lt;settings-toggler v-if=&#34;(t.id === &#39;shadowsEnabled&#39; || t.id === &#39;highRes&#39;) ? showDetailSettings : true&#34; v-show=&#34;hideSetting(t.id)&#34; :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; @setting-toggled=&#34;onSettingToggled&#34;&gt;&lt;/settings-toggler&gt;
					&lt;/div&gt;
					&lt;button v-if=&#34;showPrivacyOptions&#34; @click=&#34;onPrivacyOptionsClicked&#34; class=&#34;ss_button btn_blue bevel_blue btn_md ss_margintop_xl&#34;&gt;{{ loc.p_settings_privacy }}&lt;/button&gt;
				&lt;/div&gt;
				&lt;div class=&#34;f_col&#34;&gt;
					&lt;div v-for=&#34;t in settingsUi.togglers.misc2&#34;&gt;
						&lt;settings-toggler v-if=&#34;hideSetting(t.id)&#34; :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; @setting-toggled=&#34;onSettingToggled&#34;&gt;&lt;/settings-toggler&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;

	&lt;div class=&#34;display-grid grid-align-items-center justify-items-strech grid-column-3-eq grid-gap-1 fullwidth gap-sm&#34;&gt;
		&lt;button @click=&#34;onCloseClick&#34; class=&#34;ss_button btn_red bevel_red btn_md no_margin_bottom&#34;&gt;{{ loc.cancel }}&lt;/button&gt;
		&lt;button @click=&#34;onResetClick&#34; class=&#34;ss_button btn_yolk bevel_yolk btn_md no_margin_bottom&#34;&gt;{{ loc.p_settings_reset }}&lt;/button&gt;
		&lt;button @click=&#34;onSaveClick&#34; class=&#34;ss_button btn_green bevel_green btn_md no_margin_bottom&#34;&gt;{{ loc.confirm }}&lt;/button&gt;
	&lt;/div&gt;

  &lt;/div&gt;
    </script>
    <script id="settings-control-binder-template" type="text/x-template">
      &lt;input ref=&#34;controlInput&#34; @change=&#34;BAWK.play(&#39;ui_onchange&#39;)&#34; type=&#34;text&#34; v-model=&#34;currentValue&#34; :placeholder=&#34;loc.press_key&#34; class=&#34;ss_keybind clickme text_blue8&#34; :class=&#34;(currentValue === &#39;undefined&#39; ? &#39;ss_keybind_undefined&#39; : &#39;&#39;)&#34;
		v-on:mousedown=&#34;onMouseDown($event)&#34;
		v-on:keydown=&#34;onKeyDown($event)&#34; 
		v-on:keyup=&#34;onKeyUp($event)&#34; 
		v-on:wheel=&#34;onWheel($event)&#34;
		v-on:focusout=&#34;onFocusOut($event)&#34;&gt;
    </script>
    <script>
      var comp_settings_control_binder = {
	template: &#39;#settings-control-binder-template&#39;,
	props: [&#39;loc&#39;, &#39;controlId&#39;, &#39;controlValue&#39;],
	
	data: function () {
		return {
			currentValue: this.controlValue,
			isCapturing: false
		}
	},

	methods: {
		playSound (sound) {
			BAWK.play(sound);
		},
		
		reset: function () {
			this.currentValue = (this.controlValue === null) ? &#39;undefined&#39; : this.controlValue;
			this.isCapturing = false;
			this.$refs.controlInput.blur();
		},

		capture: function (value) {
			this.isCapturing = false;
			this.$refs.controlInput.blur();
			this.$emit(&#39;control-captured&#39;, this.controlId, value);
		},

		onMouseDown: function (event) {
			if (!this.isCapturing) {
				this.currentValue = &#39;&#39;;
				this.isCapturing = true;
			} else {
				BAWK.play(&#39;ui_onchange&#39;)
				this.capture(&#39;MOUSE &#39; + event.button);
			}
		},

		onKeyDown: function (event) {
			this.currentValue = &#39;&#39;;
			event.stopPropagation();
		},

		onKeyUp: function (event) {
			event.stopPropagation();
			var key = event.key;

			if (key == &#39;Escape&#39; || key == &#39;Tab&#39; || key == &#39;Enter&#39;) {
				return;
			}

			if (key == &#39; &#39;) {
				key = &#39;space&#39;;
				event.preventDefault();
			}
			
			this.capture(key);
		},

		onWheel: function (event) {
			if (this.isCapturing) {
				BAWK.play(&#39;ui_onchange&#39;)
				if (event.deltaY &gt; 0) {
					this.capture(&#39;WHEEL DOWN&#39;);
				} else if (event.deltaY &lt; 0) {
					this.capture(&#39;WHEEL UP&#39;);
				}
			}
		},

		onFocusOut: function (event) {
			this.reset();
		}
	},

	watch: {
		// The value prop gets updated by the parent control; watch for changes and update the backing field of the textbox
		controlValue: function (newValue) {
			this.currentValue = (newValue === null) ? &#39;undefined&#39; : newValue;
		}
	}
};
    </script>
    <script id="settings-gamepad-binder-template" type="text/x-template">
      &lt;button ref=&#34;gamepadInput&#34; class=&#34;ss_keybind clickme&#34; :class=&#34;(currentValue === &#39;undefined&#39; ? &#39;ss_keybind_undefined&#39; : &#39;&#39;)&#34;
		v-on:mousedown=&#34;onMouseDown($event)&#34;
		v-on:keydown=&#34;onKeyDown($event)&#34; 
		v-on:keyup=&#34;onKeyUp($event)&#34; 
		v-on:focusout=&#34;onFocusOut($event)&#34;
		:key=&#34;controllerType&#34;&gt;
		&lt;span v-html=&#34;currentValue&#34;&gt;&lt;/span&gt;&lt;/button&gt;
    </script>
    <script>
      var comp_settings_gamepad_binder = {
	template: &#39;#settings-gamepad-binder-template&#39;,
	props: [&#39;loc&#39;, &#39;controlId&#39;, &#39;controlValue&#39;, &#39;controllerType&#39;],
	
	data: function () {
		return {
			currentValue: (this.controlValue === null) ? &#39;undefined&#39; : vueData.controllerButtonIcons[this.controllerType][this.controlValue],
			isCapturing: false
		}
	},

	beforeUpdate: function () {
		if (!this.isCapturing) {
			this.setIcon(this.controlValue);
		}
	},

	methods: {
		playSound (sound) {
			BAWK.play(sound);
		},
		
		reset: function () {
			this.setIcon(this.controlValue);
			this.isCapturing = false;

			removeEventListener(&#39;gamepadbuttondown&#39;, this.onButtonDown);
			removeEventListener(&#39;gamepadbuttonup&#39;, this.onButtonUp);
		},

		capture: function (value) {
			this.isCapturing = false;
			this.$refs.gamepadInput.blur();
			this.$emit(&#39;control-captured&#39;, this.controlId, value);
			this.reset();
		},

		onMouseDown: function (event) {
			if (!this.isCapturing) {
				this.currentValue = this.loc.press_button;
				this.isCapturing = true;

				addEventListener(&#39;gamepadbuttondown&#39;, this.onButtonDown);
				addEventListener(&#39;gamepadbuttonup&#39;, this.onButtonUp);
			}
		},

		onKeyDown: function (event) {
			event.stopPropagation();
		},

		onKeyUp: function (event) {
			event.stopPropagation();
		},

		onButtonDown: function (event) {
			if (event.detail == 8 || event.detail == 9) return;
			BAWK.play(&#39;ui_onchange&#39;)
			this.capture(event.detail);
		},

		onFocusOut: function (event) {
			this.reset();
		},

		setIcon: function (value) {
			this.currentValue = (value === null) ? &#39;undefined&#39; : vueData.controllerButtonIcons[this.controllerType][value];
		}
	},

	watch: {
		// The value prop gets updated by the parent control; watch for changes and update the backing field of the textbox
		controlValue: function (newValue) {
			this.setIcon(newValue);
		}
	}
};
    </script>
    <script id="settings-adjuster-template" type="text/x-template">
      &lt;div&gt;
		&lt;h3 v-if=&#34;!smallHeader&#34; class=&#34;margin-bottom-none h-short&#34; v-html=&#34;loc[locKey]&#34;&gt;&lt;/h3&gt;
		&lt;label v-if=&#34;smallHeader&#34; class=&#34;label&#34; v-html=&#34;loc[locKey]&#34;&gt;&lt;/label&gt;

		&lt;div class=&#34;f_row&#34;&gt;
			&lt;input class=&#34;ss_slider&#34; :disabled=&#34;disabled&#34; type=&#34;range&#34; :min=&#34;min&#34; :max=&#34;max&#34; :step=&#34;step&#34; v-model=&#34;currentValue&#34; @change=&#34;onChange&#34;&gt;
			&lt;label class=&#34;ss_slider label text_blue4&#34;&gt;{{ getCurrentValue() }}{{ labelSuffix }}&lt;/label&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_settings_adjuster = {
	template: &#39;#settings-adjuster-template&#39;,
	props: [&#39;loc&#39;, &#39;smallHeader&#39;, &#39;locKey&#39;,
		&#39;controlId&#39;, &#39;controlValue&#39;, &#39;disabled&#39;,
		&#39;min&#39;, &#39;max&#39;, &#39;step&#39;, &#39;multiplier&#39;,
		&#39;precision&#39;, &#39;labelSuffix&#39;
	],

	data: function () {
		return {
			currentValue: this.controlValue
		}
	},

	methods: {
		onChange: function (event) {
			this.$emit(&#39;setting-adjusted&#39;, this.controlId, this.currentValue);
			BAWK.play(&#39;ui_onchange&#39;);
		},

		getCurrentValue: function () {
			if (this.precision) {
				return Number.parseFloat(this.currentValue).toFixed(this.precision);
			}
			else {
				return Math.floor(this.currentValue * (this.multiplier || 1));
			}
		}
	},

	watch: {
		// controlValue prop could change when player X&#39;s out or clicks Cancel
		controlValue: function (newValue) {
			if (this.currentValue !== newValue) {
				this.currentValue = newValue;
			}
		}
	}
};
    </script>
    <script id="settings-toggler-template" type="text/x-template">
      &lt;label v-if=&#34;!hide&#34; class=&#34;ss_checkbox label&#34;&gt; {{ loc[locKey] }}
		&lt;input type=&#34;checkbox&#34; v-model=&#34;currentValue&#34; @change=&#34;onChange($event)&#34;&gt;
		&lt;span class=&#34;checkmark&#34;&gt;&lt;/span&gt;
	&lt;/label&gt;
    </script>
    <script>
      var comp_settings_toggler = {
	template: &#39;#settings-toggler-template&#39;,
	props: [&#39;loc&#39;, &#39;locKey&#39;, &#39;controlId&#39;, &#39;controlValue&#39;, &#39;hide&#39;],

	data: function () {
		return {
			currentValue: this.controlValue
		}
	},

	methods: {
		onChange: function (event) {
			this.$emit(&#39;setting-toggled&#39;, this.controlId, this.currentValue);
			BAWK.play(&#39;ui_onchange&#39;);
		}
	},

	watch: {
		// controlValue prop could change when player X&#39;s out or clicks Cancel
		controlValue: function (newValue) {
			if (this.currentValue !== newValue) {
				this.currentValue = newValue;
			}
		}
	}
};
    </script>
    <script>
      var comp_settings = {
	template: &#39;#settings-template&#39;,
	components: {
		&#39;settings-control-binder&#39;: comp_settings_control_binder,
		&#39;settings-gamepad-binder&#39;: comp_settings_gamepad_binder,
		&#39;language-selector&#39;: comp_language_selector,
		&#39;settings-adjuster&#39;: comp_settings_adjuster,
		&#39;settings-toggler&#39;: comp_settings_toggler
	},
	props: [&#39;loc&#39;, &#39;settingsUi&#39;, &#39;languages&#39;, &#39;currentLanguageCode&#39;, &#39;showPrivacyOptions&#39;, &#39;controllerId&#39;, &#39;isFromEU&#39;, &#39;controllerType&#39;, &#39;langOption&#39;, &#39;isVip&#39;, &#39;regionList&#39;, &#39;currentRegionId&#39;],

	data: function () {
		return {
			showKeyboardTab: true,
			showControllerTab: false,
			showMiscTab: false,

			originalSettings: {},
			showDetailSettings: false,
			originalLanguage: &#39;&#39;,
			originalMusicVolume: &#39;&#39;,
			musicStatChg: &#39;&#39;,
			currentRegion: &#39;&#39;,
			icons: {
				keyboard: &#39;img/ico_keyboard.svg&#39;,
				mouse: &#39;img/ico_mouse.svg&#39;,
				gamePad: &#39;img/ico_gamepad.svg&#39;,
				monitor: &#39;img/ico_monitor.svg&#39;,
				speaker: &#39;img/ico_speaker.svg&#39;
			}
		}
	},
	
	methods: {
		onChangeRegion() {
			if (vueData.currentRegionId !== this.currentRegion) {
				extern.selectRegion(this.currentRegion);
				BAWK.play(&#39;ui_onchange&#39;);
			}
		},

		selectTab: function (e) {
			return this.switchTab(e.target.id)
		},
		
		switchTab(tab) {

			this.showKeyboardTab = false;
			this.showControllerTab = false;
			this.showMiscTab = false;

			switch (tab) {
				case &#39;keyboard_button&#39;:
					this.showKeyboardTab = true;
					break;

				case &#39;controller_button&#39;:
					this.showControllerTab = true;
					break;

				case &#39;misc_button&#39;:
					this.showMiscTab = true;
					break;
			}

			BAWK.play(&#39;ui_toggletab&#39;);
		},

		captureOriginalSettings: function () {
			this.originalSettings = deepClone(vueData.settingsUi);
			this.originalLanguage = this.currentLanguageCode;
			// this.originalMusicVolume = this.originalSettings.adjusters.music[0].value;
		},

		applyOriginalSettings: function () {
			vueData.settingsUi = this.originalSettings;
			this.showDetailSettings = !vueData.settingsUi.togglers.misc.find( a =&gt; { return a.id === &#39;autoDetail&#39;; }).value;

			console.log(&#39;applying original settings: &#39; + JSON.stringify(vueData.settingsUi));
		},

		onGameControlCaptured: function (id, value) {
			this.onControlCaptured(this.settingsUi.controls.keyboard.game, id, value)
		},

		onSpectateControlCaptured: function (id, value) {
			this.onControlCaptured(this.settingsUi.controls.keyboard.spectate, id, value)
		},

		onGamepadGameControlCaptured: function (id, value) {
			this.onControlCaptured(this.settingsUi.controls.gamepad.game, id, value)
		},

		onGamepadSpectateControlCaptured: function (id, value) {
			this.onControlCaptured(this.settingsUi.controls.gamepad.spectate, id, value)
		},

		onControlCaptured: function (controls, id, value) {
			value = value.toLocaleUpperCase();

			controls
				.forEach( (c) =&gt; {
					if (c.id === id) {
						c.value = value;
					} else {
						if (c.value === value) {
							c.value = null;
						}
					}
			});
		},

		onSettingToggled: function (id, value) {
			console.log(&#39;value: &#39; + value);

			Object.values(this.settingsUi.togglers).forEach(v =&gt; {
				var toggler = v.find(t =&gt; { return t.id === id; });
				if (toggler) toggler.value = value;
			})

			if (id === &#39;autoDetail&#39;) {
				this.showDetailSettings = !value;
			}

			if (id === &#39;safeNames&#39;) {
				extern.setSafeNames(value);
			}

			// if (id === &#39;musicStatus&#39;) {
			// 	extern.setMusicStatus(value);
			// 	this.musicStatChg = true;

			// 	if (extern.inGame) {
			// 		vueApp.toggleMusic();
			// 	}
			// }
		},

		onSettingAdjusted: function (id, value) {
			Object.values(this.settingsUi.adjusters).forEach(v =&gt; {
				var adjuster = v.find( (a) =&gt; { return a.id === id; });
				if (adjuster) adjuster.value = value;
			})

			if (id === &#39;volume&#39;) {
				extern.setVolume(value);
			}

			if (id === &#39;mouseSpeed&#39;) {
				extern.setMouseSpeed(value);
			}

			if (id === &#39;sensitivity&#39;) {
				extern.setControllerSpeed(value);
			}

			if (id === &#39;deadzone&#39;) {
				extern.setDeadzone(value);
			}

			if (id === &#39;musicVolume&#39;) {
				extern.setMusicVolume(value);
			}

		},

		onVolumeChange: function () {
			extern.setVolume(this.settingsUi.volume);
		},

		onPrivacyOptionsClicked: function () {
			this.$emit(&#39;privacy-options-opened&#39;);
			BAWK.play(&#39;ui_popupopen&#39;);
		},
		
		onCancelClick: function () {
			this.applyOriginalSettings();
			//extern.setMusicVolume(this.originalMusicVolume);
			this.cancelLanguageSelect();
			if (this.musicStatChg) {
				if (extern.inGame) { 
					vueApp.toggleMusic();
				}
			};
			this.$parent.close();
		},

		onCloseClick: function () {
			this.applyOriginalSettings();
			//extern.setMusicVolume(this.originalMusicVolume);
			this.cancelLanguageSelect();
			if (this.musicStatChg) {
				if (extern.inGame) {
					vueApp.toggleMusic();
				}
			};
			vueApp.sharedIngamePopupClosed();
			this.$parent.toggle();
			BAWK.play(&#39;ui_popupclose&#39;);
		},

		quickSave() {
			extern.applyUiSettings(this.settingsUi, this.originalSettings);
			this.resetOriginalLanguage();		
		},
		
		onSaveClick: function () {
			// if (vueApp.music.serverTracks.title) {
			// 	this.gaMusicVol();
			// }
			// this.gaMusicVol();

			extern.applyUiSettings(this.settingsUi, this.originalSettings);
			this.resetOriginalLanguage();
			vueApp.sharedIngamePopupClosed();
			this.$parent.toggle();
			BAWK.play(&#39;ui_playconfirm&#39;);
			this.sendChangesToGa(this.originalSettings, this.settingsUi);
		},

		sendChangesToGa(originalSettings, currentSettings) {
			const changes = [];

			function compareSettingsArray(type, category, originalArray, currentArray) {
				originalArray.forEach((originalItem, index) =&gt; {
					const currentItem = currentArray[index];

					// Check if value has changed
					if (originalItem.value !== currentItem.value) {
						changes.push({
							type,
							category,
							id: originalItem.id,
							originalValue: originalItem.value,
							newValue: currentItem.value
						});
					}
				});
			}

			function compareSettings(type, original, current) {
				Object.keys(current).forEach(category =&gt; {
					compareSettingsArray(type, category, original[category], current[category]);
				});
			}

			compareSettings(&#39;adjusters&#39;, originalSettings.adjusters, currentSettings.adjusters);
			compareSettings(&#39;togglers&#39;, originalSettings.togglers, currentSettings.togglers);
			
			Object.keys(currentSettings.controls).forEach(inputType =&gt; {
				compareSettings(`controls_${inputType}`, originalSettings.controls[inputType], currentSettings.controls[inputType]);
			});

			function hasDecimal(value) {
				return typeof value === &#39;number&#39; &amp;&amp; !Number.isInteger(value);
			}

			changes.forEach(el =&gt; {
				let val = el.newValue;

				if (el.type === &#39;adjusters&#39;) {
					let toNumber = Number(val);
					val = hasDecimal(toNumber) ? Math.round(toNumber * 100) : toNumber;
				}
				ga(&#39;send&#39;, &#39;event&#39;, &#39;game&#39;, &#39;settings&#39;, el.id, val);
			});
		},

		gaMusicVol() {
			let newVol = Number(this.settingsUi.adjusters.music[0].value);
			if (newVol === Number(this.originalMusicVolume)) return;
			if ((Math.round(newVol*100)) &lt;= 1) {
				ga(&#39;send&#39;, &#39;event&#39;, &#39;music&#39;, &#39;mute&#39;, vueApp.music.serverTracks.title);
			}
		},
		onResetClick: function () {
			extern.resetSettings();
			BAWK.play(&#39;ui_reset&#39;);
		},
		cancelLanguageSelect: function() {
			this.originalLanguage === vueApp.$data.currentLanguageCode ?
				vueApp.changeLanguage(vueApp.$data.currentLanguageCode) : vueApp.changeLanguage(this.originalLanguage);
			// Revert localStore for language
			localStore.setItem(&#39;languageSelected&#39;, this.originalLanguage);
			this.resetOriginalLanguage();
		},
		resetOriginalLanguage: function() {
			this.originalLanguage = &#39;&#39;;
		},
		setSettings: function (settings) {
			var getSettingById = (list, id) =&gt; {
				return list.filter( o =&gt; {
						return o.id == id;
				})[0];
			};

			// Keyboard

			getSettingById(this.settingsUi.controls.keyboard.game, &#39;up&#39;).value = settings.controls.keyboard.game.up;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;down&#39;).value = settings.controls.keyboard.game.down;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;left&#39;).value = settings.controls.keyboard.game.left;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;right&#39;).value = settings.controls.keyboard.game.right;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;jump&#39;).value = settings.controls.keyboard.game.jump;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;melee&#39;).value = settings.controls.keyboard.game.melee;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;inspect&#39;).value = settings.controls.keyboard.game.inspect;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;fire&#39;).value = settings.controls.keyboard.game.fire;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;scope&#39;).value = settings.controls.keyboard.game.scope;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;reload&#39;).value = settings.controls.keyboard.game.reload;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;swap_weapon&#39;).value = settings.controls.keyboard.game.swap_weapon;
			getSettingById(this.settingsUi.controls.keyboard.game, &#39;grenade&#39;).value = settings.controls.keyboard.game.grenade;
			getSettingById(this.settingsUi.controls.keyboard.spectate, &#39;ascend&#39;).value = settings.controls.keyboard.spectate.ascend;
			getSettingById(this.settingsUi.controls.keyboard.spectate, &#39;descend&#39;).value = settings.controls.keyboard.spectate.descend;
			getSettingById(this.settingsUi.controls.keyboard.spectate, &#39;toggle_freecam&#39;).value = settings.controls.keyboard.spectate.toggle_freecam;
			getSettingById(this.settingsUi.controls.keyboard.spectate, &#39;slow&#39;).value = settings.controls.keyboard.spectate.slow;

			// Gamepad

			getSettingById(this.settingsUi.controls.gamepad.game, &#39;jump&#39;).value = settings.controls.gamepad.game.jump;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;fire&#39;).value = settings.controls.gamepad.game.fire;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;scope&#39;).value = settings.controls.gamepad.game.scope;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;reload&#39;).value = settings.controls.gamepad.game.reload;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;swap_weapon&#39;).value = settings.controls.gamepad.game.swap_weapon;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;grenade&#39;).value = settings.controls.gamepad.game.grenade;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;melee&#39;).value = settings.controls.gamepad.game.melee;
			getSettingById(this.settingsUi.controls.gamepad.game, &#39;inspect&#39;).value = settings.controls.gamepad.game.inspect;
			getSettingById(this.settingsUi.controls.gamepad.spectate, &#39;ascend&#39;).value = settings.controls.gamepad.spectate.ascend;
			getSettingById(this.settingsUi.controls.gamepad.spectate, &#39;descend&#39;).value = settings.controls.gamepad.spectate.descend;

			// Misc

			getSettingById(this.settingsUi.adjusters.misc, &#39;volume&#39;).value = settings.volume;
			// getSettingById(this.settingsUi.adjusters.music, &#39;musicVolume&#39;).value = settings.musicVolume;
			getSettingById(this.settingsUi.adjusters.mouse, &#39;mouseSpeed&#39;).value = settings.mouseSpeed;
			getSettingById(this.settingsUi.adjusters.gamepad, &#39;sensitivity&#39;).value = settings.controllerSpeed;
			getSettingById(this.settingsUi.adjusters.gamepad, &#39;deadzone&#39;).value = settings.deadzone;

			getSettingById(this.settingsUi.togglers.mouse, &#39;mouseInvert&#39;).value = (settings.mouseInvert !== 1);
			getSettingById(this.settingsUi.togglers.mouse, &#39;fastPollMouse&#39;).value = settings.fastPollMouse;
			getSettingById(this.settingsUi.togglers.gamepad, &#39;controllerInvert&#39;).value = (settings.controllerInvert !== 1);

			getSettingById(this.settingsUi.togglers.misc, &#39;holdToAim&#39;).value = settings.holdToAim;
			getSettingById(this.settingsUi.togglers.misc, &#39;enableChat&#39;).value = settings.enableChat;
			getSettingById(this.settingsUi.togglers.misc, &#39;safeNames&#39;).value = settings.safeNames;
			getSettingById(this.settingsUi.togglers.misc, &#39;autoDetail&#39;).value = settings.autoDetail;
			getSettingById(this.settingsUi.togglers.misc, &#39;shadowsEnabled&#39;).value = settings.shadowsEnabled;
			getSettingById(this.settingsUi.togglers.misc, &#39;highRes&#39;).value = settings.highRes;
			getSettingById(this.settingsUi.togglers.misc2, &#39;hideBadge&#39;).value = settings.hideBadge;
			getSettingById(this.settingsUi.togglers.misc2, &#39;closeWindowAlert&#39;).value = settings.closeWindowAlert;
			getSettingById(this.settingsUi.togglers.misc2, &#39;shakeEnabled&#39;).value = settings.shakeEnabled;
			getSettingById(this.settingsUi.togglers.misc2, &#39;centerDot&#39;).value = settings.centerDot;
			getSettingById(this.settingsUi.togglers.misc2, &#39;hitMarkers&#39;).value = settings.hitMarkers;
			// getSettingById(this.settingsUi.togglers.misc, &#39;musicStatus&#39;).value = settings.musicStatus;

			console.log(&#39;auto detail: &#39; + settings.autoDetail);
			this.showDetailSettings = !settings.autoDetail;
		},

		hideSetting(id) {
			if (id === &#39;hideBadge&#39;) {
				return this.isVip;
			}
			return true;
		},

		onHelpClickDelete() {
			vueApp.hideSettingsPopup();
			vueApp.showHelpPopupFeedbackWithDelete();
			ga(&#39;send&#39;, &#39;event&#39;, vueApp.googleAnalytics.cat.playerStats, vueApp.googleAnalytics.action.faqPopupClick);
			BAWK.play(&#39;ui_popupopen&#39;);
		},

		showForCrazyGame(locRef) {
			return locRef !== &#39;keybindings_despawn&#39; || crazyGamesActive;
		}
	},
	computed: {
		getControllerId() {
			if (this.controllerId == &#39;No controller detected&#39;) {
				return vueApp.loc[&#39;p_settings_nocontroller&#39;]
			} else {
				return this.controllerId
			}
		}
	},
	watch: {
		currentRegionId(val) {
			if (this.currentRegion !== val) {
				this.currentRegion = val;
			}
		}
	}
};
    </script>
    <script id="help-template" type="text/x-template">
      &lt;div&gt;
       &lt;div class=&#34;f_row align-items-center  justify-content-center&#34;&gt;
            &lt;button id=&#34;faq_button&#34; @click=&#34;toggleTabs&#34; class=&#34;ss_bigtab bevel_blue ss_marginright roundme_md font-sigmar&#34; :class=&#34;(showTab1 ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;{{ loc.faq }}&lt;/button&gt;
            &lt;button id=&#34;fb_button&#34; @click=&#34;toggleTabs&#34; class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar&#34; :class=&#34;(!showTab1 ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;{{ loc.feedback }}&lt;/button&gt;
        &lt;/div&gt;
        &lt;div v-show=&#34;showTab1&#34;&gt;
            
            &lt;div id=&#34;feedback_panel&#34;&gt;      

                &lt;h1&gt;{{ loc.faq_title }}&lt;/h1&gt;

				&lt;help-questions :loc=&#34;loc&#34; :content=&#34;localizeThis&#34; :controls=&#34;controls&#34;&gt;&lt;/help-questions&gt;

                &lt;hr&gt;
                &lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
	            	&lt;button @click=&#34;onBackClick&#34; class=&#34;ss_button btn_md btn_red bevel_red ss_marginright&#34;&gt;{{ loc.cancel }}&lt;/button&gt;
                &lt;/div&gt;
                
            &lt;/div&gt;            
        &lt;/div&gt;

        &lt;div v-show=&#34;!showTab1&#34;&gt;
	        
	        &lt;div id=&#34;feedback_panel&#34;&gt;
	            &lt;h1 :class=&#34;{&#39;text-center&#39; : isAccountDeleteReq}&#34;&gt;{{ feedbackTitle }}&lt;/h1&gt;
	            
	            &lt;p v-if=&#34;!isAccountDeleteReq&#34;&gt;{{ loc.fb_feedback_intro }}&lt;/p&gt;
				&lt;h4 v-if=&#34;isNoAccountForDelete&#34; class=&#34;text-center&#34;&gt;{{loc.feedback_sign_in_msg}}&lt;/h4&gt;

				&lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
	                &lt;select v-model=&#34;selectedType&#34; class=&#34;ss_field ss_marginright&#34; @click=&#34;BAWK.play(&#39;ui_click&#39;)&#34; @change=&#34;BAWK.play(&#39;ui_onchange&#39;)&#34;&gt;
	                    &lt;option v-for=&#34;type in feedbackType&#34; :value=&#34;type.id&#34;&gt;{{ loc[type.locKey] }}&lt;/option&gt;
	                &lt;/select&gt;
	            
	                &lt;input id=&#34;feedbackEmail&#34; v-model=&#34;email&#34; :placeholder=&#34;loc.fb_email_ph&#34; class=&#34;ss_field&#34; v-on:keyup=&#34;validateEmail&#34;&gt;
				&lt;/div&gt;
				
				&lt;div&gt;
	                &lt;textarea v-if=&#34;!isAccountDeleteReq&#34; id=&#34;feedbackText&#34; ref=&#34;feedbackText&#34; class=&#34;ss_field&#34; v-model=&#34;feedback&#34; :placeholder=&#34;loc.fb_feedback_ph&#34; v-on:keyup=&#34;validateMessage&#34;&gt;&lt;/textarea&gt;
				&lt;/div&gt;
				
				&lt;div class=&#34;f_center f_col&#34;&gt;
					&lt;span v-show=&#34;emailInvalid&#34; class=&#34;ss_marginright error_text&#34;&gt;{{ loc.fb_bad_email }}&lt;/span&gt;
					&lt;span v-show=&#34;messageInvalid&#34; class=&#34;ss_marginright error_text&#34;&gt;{{ loc.fb_no_comment }}&lt;/span&gt;
				&lt;/div&gt;
				
	            &lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
	            	&lt;button @click=&#34;onBackClick&#34; class=&#34;ss_button btn_md btn_red bevel_red ss_marginright&#34;&gt;{{ loc.cancel }}&lt;/button&gt;
	                &lt;button @click=&#34;onSendClick&#34; class=&#34;ss_button btn_md btn_green bevel_green&#34;&gt;{{ sendBtnText }}&lt;/button&gt;
	            &lt;/div&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script id="help-question-template" type="text/x-template">
      &lt;div&gt;
		&lt;div v-for=&#34;qa in content&#34;&gt;
			&lt;a :name=&#34;qa[0]&#34;&gt;&lt;/a&gt;
			&lt;h3&gt;{{ qa[1] }}&lt;/h3&gt;
			&lt;span v-html=&#34;qa[2]&#34;&gt;&lt;/span&gt;
		&lt;/div&gt;
        &lt;div&gt;
            &lt;a name=&#34;Instructions&#34;&gt;&lt;/a&gt;
            &lt;h3&gt;How do I throw a grenade, melee or inspect a weapon?&lt;/h3&gt;
            &lt;div id=&#34;controls_panel&#34;&gt;
                &lt;controls :loc=&#34;loc&#34; :controls=&#34;controls&#34;&gt;&lt;/controls&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script id="controls-template" type="text/x-template">
      &lt;div id=&#34;controls_panel&#34; class=&#34;font-700 line-height-1-2&#34;&gt;
        &lt;div class=&#34;box_relative display-grid grid-template tutorial-labels&#34;&gt;
        &lt;span v-for=&#34;(item, idx) in controls.keys&#34; :key=&#34;idx&#34; v-html=&#34;loc[item.locKey]&#34; class=&#34;box_absolute&#34; :class=&#34;item.cls&#34;&gt;&lt;/span&gt;
        &lt;img src=&#34;img/tutorial/ss_tutorial_Keyboard.webp&#34; class=&#34;tutorial-keyboard&#34; alt=&#34;Tutorial keyboard image&#34;&gt;
        &lt;img src=&#34;img/tutorial/ss_tutorial_Mouse.webp&#34; class=&#34;tutorial-mouse&#34; alt=&#34;Tutorial mouse image&#34;&gt;
    &lt;/div&gt;
    &lt;div class=&#34;tutorial-content display-grid align-items-center center_h&#34;&gt;
        &lt;div&gt;
            &lt;img src=&#34;img/tutorial/ss_tutorial_EggTarget.webp&#34; class=&#34;tutorial-egg&#34; alt=&#34;Tutorial egg image&#34;&gt;
        &lt;/div&gt;
        &lt;ul class=&#34;tutorial-list list-no-style&#34;&gt;
            &lt;li class=&#34;text-left&#34;&gt;{{ loc.tutorial_point_1 }}&lt;/li&gt;
            &lt;li class=&#34;text-left&#34;&gt;{{ loc.tutorial_point_2 }}&lt;/li&gt;
            &lt;li class=&#34;text-left&#34;&gt;{{ loc.tutorial_point_3 }}&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      const ControlsSetup = {
        template: &#39;#controls-template&#39;,
        props: [&#39;loc&#39;, &#39;controls&#39;],
    }
    </script>
    <script>
      var comp_help_question = {
        template: &#39;#help-question-template&#39;,
        props: [&#39;loc&#39;, &#39;content&#39;, &#39;controls&#39;],
        components: {
            controls: ControlsSetup,
        },
        methods: {
            playSound(sound) {
                BAWK.play(sound);
            },
        },
    };
    </script>
    <script>
      var comp_help = {
        template: &#39;#help-template&#39;,
        components: {
            &#39;help-questions&#39;: comp_help_question,
        },
        props: [&#39;loc&#39;, &#39;controls&#39;, &#39;accountType&#39;, &#39;feedbackType&#39;, &#39;openWithType&#39;],
        mounted() {
            this.helpLocSetup();
        },
        data: function() {
            return {
                showTab1: true,
                selectedType: 0,
                email: &#39;&#39;,
                feedback: &#39;&#39;,
                doValidation: false,
                emailInvalid: false,
                messageInvalid: false,
                qaNum: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
                newLoc: [],
                localizeThis: [],


            }
        },
        feedbackValidateTimeout: 0,
        methods: {
            playSound(sound) {
                BAWK.play(sound);
            },

            validateEmail: function() {
                if (!this.doValidation) {
                    return;
                }
                // Insane e-mail-validating regex
                var re = /(?:[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&amp;&#39;*+/=?^_`{|}~-]+)*|&#34;(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*&#34;)@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;

                this.emailInvalid = (this.email === &#39;&#39; || !re.test(this.email));
                return !this.emailInvalid;
            },

            validateMessage: function() {
                if (!this.doValidation) {
                    return;
                }
                this.messageInvalid = this.feedback === &#39;&#39;;
                return !this.messageInvalid;
            },

            toggleTabs: function() {
                this.showTab1 = !this.showTab1;
                this.selectedType = 0;
                this.$emit(&#39;resetFeedbackType&#39;);
                BAWK.play(&#39;ui_toggletab&#39;);
                if (!this.showTab1) {
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;feedback opened&#39;);
                }
            },

            onBackClick: function() {
                vueApp.$refs.helpPopup.toggle();
                BAWK.play(&#39;ui_popupclose&#39;);
            },

            sendFeedbackApi(selected) {
                if (!selected) {
                    selected = this.selectedType;
                }

                extern.api_feedback(selected, this.email, this.feedback);

                setTimeout(() =&gt; {
                    if (this.selectedType !== this.feedbackType.delete.id) {
                        this.$parent.toggle();
                    }
                    this.selectedType = 0;
                    this.feedback = null;
                    this.email = null;
                }, 900);
            },

            onSendClick: function() {
                if (this.isNoAccountForDelete) {
                    vueApp.hideHelpPopup();
                    vueApp.showFirebaseSignIn();
                    return;
                }
                this.doValidation = true;

                if (this.selectedType === this.feedbackType.delete.id) {
                    this.comment = null;
                    this.$parent.toggle();
                    vueApp.showDeleteAccoutApprovalPopup();
                    BAWK.play(&#39;ui_popupopen&#39;);
                    return;
                } else {
                    if (!this.validateEmail() || !this.validateMessage()) {
                        return;
                    }
                }

                BAWK.play(&#39;ui_playconfirm&#39;);

                // Send that shit out
                this.sendFeedbackApi();
            },

            onAccountDelectionConfirmed() {
                this.sendFeedbackApi(this.feedbackType.delete.id);
            },

            helpLocSetup(locContent) {
                let content = this.loc;

                const locArray = Object.entries(content);
                this.newLoc = locArray.filter((item, i) =&gt; {
                    if (item[0].includes(&#39;faqItems_q&#39;)) {
                        return item;
                    }
                });

                const tranlateThat = [];

                for (let n = 0; n &lt; this.qaNum.length; n++) {
                    tranlateThat.push([]);
                    for (let i = 0; i &lt; this.newLoc.length; i++) {
                        if (this.newLoc[i][0].includes(&#39;faqItems_q&#39; + this.qaNum[n] + &#39;_&#39;)) {
                            tranlateThat[n].push(this.newLoc[i][1]);
                        }
                    }
                }
                // Cause once again... vue
                setTimeout(() =&gt; {
                    this.localizeThis = tranlateThat
                }, 500);
            },
            openFeedbackTabWith(type) {
                this.showTab1 = false;
                if (type) {
                    this.selectedType = type;
                }
            }
        },
        computed: {
            isAccountDeleteReq() {
                return this.selectedType === this.feedbackType.delete.id;
            },
            isNoAccountForDelete() {
                return this.isAccountDeleteReq &amp;&amp; this.accountType == &#39;no-account&#39;;
            },
            sendBtnText() {
                if (this.isNoAccountForDelete) {
                    return this.loc.sign_in;
                } else {
                    return this.loc.fb_send;
                }
            },
            feedbackTitle() {
                if (!this.isAccountDeleteReq) {
                    return this.loc.fb_feedback_title;
                } else {
                    return this.loc.fb_delete_account;
                }
            }
        },
        watch: {
            loc(val) {
                this.helpLocSetup(val);
            },
        }
    };
    </script>
    <script id="vip-help-template" type="text/x-template">
      &lt;div&gt;
        &lt;div id=&#34;feedback_panel&#34;&gt;      
            &lt;h1&gt;{{ loc.vipHelptitle }}&lt;/h1&gt;
            &lt;strong&gt;&lt;small class=&#34;text_yellow&#34;&gt;&lt;i class=&#34;fas fa-exclamation-triangle&#34;&gt;&lt;/i&gt; {{loc.vipHelpDesc2}}&lt;/small&gt;&lt;/strong&gt;
            &lt;p&gt;{{loc.vipHelpDesc}}&lt;/p&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q1_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q1_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q1_a_1 }}&lt;/p&gt;
				&lt;ul&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_1 }}&lt;/li&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_2 }}&lt;/li&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_3 }}&lt;/li&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_4 }}&lt;/li&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_5 }}&lt;/li&gt;
					&lt;li&gt;{{ loc.vipFaqItems_q1_li_6 }}&lt;/li&gt;
				&lt;/ul&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q2_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q2_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q2_a_1 }}&lt;/p&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q3_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q3_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q3_a_1 }}&lt;/p&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q4_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q4_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q4_a_mobile_3 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q4_a_1 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q4_a_2 }}&lt;/p&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q5_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q5_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q5_a_1 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q5_a_2 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q5_a_3 }}&lt;/p&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q6_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q6_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q6_a_1 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q6_a_2 }}&lt;/p&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q6_a_3 }}&lt;/p&gt;
			&lt;/div&gt;

			&lt;div&gt;
				&lt;a :name=&#34;loc.vipFaqItems_q7_anchor&#34;&gt;&lt;/a&gt;
				&lt;h3&gt;{{ loc.vipFaqItems_q7_q }}&lt;/h3&gt;
				&lt;p&gt;{{ loc.vipFaqItems_q7_a_1 }}&lt;/p&gt;
			&lt;/div&gt;

&lt;!-- 
            &lt;div v-for=&#34;qa in loc.vipFaqItems&#34;&gt;
                &lt;a :name=&#34;qa.anchor&#34;&gt;&lt;/a&gt;
                &lt;h3&gt;{{ qa.q }}&lt;/h3&gt;
                &lt;p v-for=&#34;p in qa.a&#34;&gt;
                   {{p}}
                &lt;/p&gt;
                &lt;ul v-if=&#34;qa.li&#34;&gt;
                    &lt;li v-for=&#34;li in qa.li&#34;&gt;{{li}}&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/div&gt; --&gt;

            &lt;hr&gt;
            &lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
                &lt;button @click=&#34;openVipStore&#34; class=&#34;ss_button btn_md btn_green bevel_green ss_marginright&#34;&gt;{{ subButtonTxt }}&lt;/button&gt;
                &lt;button @click=&#34;onBackClick&#34; class=&#34;ss_button btn_md btn_red bevel_red ss_marginright&#34;&gt;{{ loc.cancel }}&lt;/button&gt;
            &lt;/div&gt;

        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      var vip_help = {
    template: &#39;#vip-help-template&#39;,
    props: [&#39;loc&#39;, &#39;isVip&#39;],
    data: function () {
        return {

        }
    },
    methods: {
        onBackClick() {
            BAWK.play(&#39;ui_popupclose&#39;);
            this.$parent.hide();
        },
        openVipStore() {
            this.$parent.hide();
            vueApp.showSubStorePopup();
        }
    },
    computed: {
        subButtonTxt() {
            return this.isVip ? this.loc.sManageBtn : this.loc.account_vip;
        }
    }
};
    </script>
    <script id="house-ad-big-template" type="text/x-template">
      &lt;div v-show=&#34;(useAd !== null)&#34;&gt;
        &lt;button @click=&#34;onCloseClicked&#34; class=&#34;popup_close splash_ad_close ad_close&#34;&gt;&lt;i class=&#34;fas fa-times text_white fa-2x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;img :src=&#34;adImageUrl&#34; @click=&#34;onClicked&#34; class=&#34;splash_ad_image centered roundme_md&#34;&gt;
    &lt;/div&gt;
    </script>
    <script>
      var comp_house_ad_big = {
    template: &#39;#house-ad-big-template&#39;,
    data: function() {
        return {
            removeOverlayClick: &#39;&#39;,
        }
    },
    
    props: [&#39;useAd&#39;],

    bigAdTimeout: null,

    methods: {
        onCloseClicked: function () {
            console.log(&#39;big ad closed&#39;);
            this.close();
        },

        onClicked: function () {
            this.close();
            BAWK.play(&#39;ui_click&#39;);
            extern.clickedHouseAdBig(this.useAd);
        },

        close: function () {
            if (this.useAd === null) {
				return;
			}
            BAWK.play(&#39;ui_popupclose&#39;);
            this.$emit(&#39;big-house-ad-closed&#39;);
        },

        outsideClickClose: function() {
            const showingId = document.getElementById(&#39;house-ad-big-template&#39;, true);
            this.removeOverlayClick = this.handleOutsideClick;
            document.addEventListener(&#39;click&#39;, this.removeOverlayClick);
        },
        
        handleOutsideClick: function(e) {
            // Stop bubbling
            e.stopPropagation();
            // If the target does NOT include the class splash_ad_image use the onCloseClicked method and remove the eventListener
            if ( ! e.target.id.includes(&#39;splash_ad_image&#39;) ) {
                this.onCloseClicked();
                document.removeEventListener(&#39;click&#39;, this.removeOverlayClick);
            }
        },
    },

    computed: {
        adImageUrl: function () {
            if (!hasValue(this.useAd)) {
                return;
            }

            return dynamicContentPrefix + &#39;data/img/art/{0}{1}&#39;.format(this.useAd.id, this.useAd.imageExt);
        }
    },

    watch: {
        useAd: function (bigAd) {
            if (hasValue(bigAd)) {
				setTimeout(() =&gt; {
					vueApp.hideTitleScreenAd();
				}, 100);
                this.$options.bigAdTimeout = setTimeout(function () {
                    vueApp.ui.houseAds.big = null;
                }, 15000);
                // Close with outside click
                this.outsideClickClose();
            } else {
				vueApp.showTitleScreenAd();
			}
        }
    }
};
    </script>
    <script id="house-ad-small-template" type="text/x-template">
      &lt;img v-show=&#34;(useAd !== null)&#34; :src=&#34;adImageUrl&#34; @click=&#34;onClicked&#34; class=&#34;news_banner roundme_md&#34;&gt;
    </script>
    <script>
      var comp_house_ad_small = {
    template: &#39;#house-ad-small-template&#39;,
    
    props: [&#39;useAd&#39;],

    methods: {
        onClicked: function () {
            BAWK.play(&#39;ui_click&#39;);
            extern.clickedHouseAdSmall(this.useAd);
        }
    },

    computed: {
        adImageUrl: function () {
            if (!hasValue(this.useAd)) {
                return;
            }
            ga(&#39;send&#39;, &#39;event&#39;, {
				eventCategory: &#39;House banner ad&#39;,
				eventAction: &#39;show&#39;,
				eventLabel: this.useAd.label
			});

            return dynamicContentPrefix + &#39;data/img/art/{0}{1}&#39;.format(this.useAd.id, this.useAd.imageExt);
        }
    }
};
    </script>
    <script id="factions-popup-template" type="text/x-template">
      &lt;div id=&#34;popupInnards&#34; class=&#34;box_dark roundme_sm fullwidth f_col&#34;&gt;
    &lt;img :src=&#34;eggOrgLogo&#34; class=&#34;centered_x factions-egg-org-logo&#34;&gt;
    &lt;h2 class=&#34;faction-popup-title text-center text_white nospace&#34;&gt;
      &lt;span&gt;The&lt;br /&gt;&lt;/span&gt; Shadow War
    &lt;/h2&gt;

    &lt;p class=&#34;factions-desc-txt&#34; v-html=&#34;loc.egg_org_popup_desc_1&#34;&gt;&lt;/p&gt;
    &lt;p class=&#34;factions-desc-txt&#34; v-html=&#34;paraDescTxt&#34;&gt;&lt;/p&gt;

    &lt;div id=&#34;egg-org-meter-popup&#34;&gt;&lt;/div&gt;

    &lt;div class=&#34;factions-types-wrap box_relative&#34;&gt;
      &lt;div class=&#34;f_row centered_x gap-1&#34;&gt;

        &lt;!-- Faction A (ID 1) --&gt;
        &lt;div id=&#34;faction-a&#34; class=&#34;f_col box_relative justify-content-end&#34;&gt;
          &lt;img :src=&#34;getFactionImg(1)&#34; class=&#34;faction-img bottom-0 right-0 faction-popup-faction-img&#34; :class=&#34;getFactionActiveStyle(1)&#34;&gt;
          &lt;button
		  	v-if=&#34;firebaseId&#34;
            :class=&#34;[getBtnStyle(1), &#39;box_absolute bottom-0&#39;]&#34;
            @click=&#34;handleFactionClick(1)&#34;
			v-html=&#34;getBtnText(1)&#34;
          &gt;
          &lt;/button&gt;
        &lt;/div&gt;

        &lt;!-- Faction B (ID 0) --&gt;
        &lt;div id=&#34;faction-b&#34; class=&#34;f_col box_relative justify-content-end&#34;&gt;
          &lt;img :src=&#34;getFactionImg(0)&#34; class=&#34;faction-img bottom-0 left-0 faction-popup-faction-img&#34; :class=&#34;getFactionActiveStyle(0)&#34;&gt;
          &lt;button
		  	v-if=&#34;firebaseId&#34;
            :class=&#34;[getBtnStyle(0), &#39;box_absolute bottom-0&#39;]&#34;
            @click=&#34;handleFactionClick(0)&#34;
			v-html=&#34;getBtnText(0)&#34;
          &gt;
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
	&lt;div class=&#34;centered_x factions-popup-no-account text-center&#34; v-if=&#34;!firebaseId&#34;&gt;
			&lt;h3 class=&#34;factions-desc-txt text_white&#34;&gt;{{ loc.factions_popup_noAccountText }}&lt;/h3&gt;
			&lt;button class=&#34;is-for-play ss_button btn_big btn_green bevel_green play-button box_relative&#34; @click=&#34;handlePlayNowClick&#34;&gt;&lt;i class=&#34;fa fa-play fa-sm&#34;&gt;&lt;/i&gt; Play&lt;/button&gt;
		&lt;/div&gt;
  &lt;/div&gt;
    </script>
    <script>
      var FactionsPopup = {
  template: &#39;#factions-popup-template&#39;,
  props: [&#39;loc&#39;, &#39;factions&#39;, &#39;playerFaction&#39;, &#39;popupOpen&#39;, &#39;cooldownTimer&#39;, &#39;eggs&#39;, &#39;firebaseId&#39;],

  data() {
    return {
      btnStyles: {
        join: &#39;ss_button ss_join_faction_button btn_yolk bevel_yolk btn_md margin-0 f_col align-items-center justify-items-center&#39;,
        equip: &#39;ss_button ss_equip_faction_button margin-0 btn_blue bevel_blue text_blue1&#39;,
		disabled: &#39;ss_button btn_yolk bevel_yolk btn_md margin-0 ss_join_faction_button btn_disabled&#39;,
      },
	  isOnCooldown: false,
	  cooldownCount: 60000,
	  costToSwitch: 10000,
    };
  },

  methods: {
	handleFactionClick(factionId) {
		if (!this.firebaseId) {
			return;
		}
		if (this.playerFaction === factionId) {
			BAWK.play(&#39;ui_click&#39;);
			this.$emit(&#39;factions-equip-item&#39;, factionId);
			return;
		}

		if (this.eggs &lt; this.costToSwitch) return;

		BAWK.play(&#39;ui_click&#39;);

		// if (!this.isOnCooldown) {
		// 	extern.apiEggOrgSwitchFaction();
		// }

		this.startCooldown();
	},
	handlePlayNowClick() {
		this.$emit(&#39;play-now-clicked&#39;);
	},
	startCooldown() {
    	this.isOnCooldown = true;

		setTimeout(() =&gt; {
			this.isOnCooldown = false;
			this.cooldownCount = 60000;
		}, this.cooldownCount);
  	},
    getBtnText(factionId) {
		if (this.isOnCooldown &amp;&amp; this.playerFaction !== factionId) {
			return this.loc.factions_popup_cooldown;
		}
      return this.playerFaction === factionId ? this.loc.factions_popup_equip: this.eggs &lt; this.costToSwitch ? this.loc.factions_popup_moreEggs : this.loc.factions_popup_switch;
    },
    getBtnStyle(factionId) {
		if (this.isOnCooldown &amp;&amp; this.playerFaction !== factionId) {
			return this.btnStyles.disabled;
		}
      return this.playerFaction === factionId ? this.btnStyles.equip : this.btnStyles.join;
    },
	getFactionActiveStyle(factionId) {
		if (this.firebaseId === null) {
			return &#39;&#39;;
		}
		return this.playerFaction === factionId ? &#39;faction-active&#39; : &#39;&#39;;
	},
    getFactionImg(factionId) {
      const base = factionId === 1 ? &#39;eggsassins&#39; : &#39;masters&#39;;
      const glam = this.playerFaction === factionId ? &#39;glamON&#39; : &#39;glamOFF&#39;;
      return `img/gauge-bar/${base}_${glam}.png`;
    }
  },

  computed: {
    eggOrgLogo() {
      return this.playerFaction === 1
        ? &#39;img/gauge-bar/egg-org-red.png&#39;
        : &#39;img/gauge-bar/egg-org-blue.png&#39;;
    },
	paraDescTxt() {
		if (!this.firebaseId) {
			return this.loc.egg_org_popup_desc_no_faction;
		}
		return this.playerFaction === 1
			? this.loc.egg_org_popup_desc_2
			: this.loc.egg_org_popup_desc_2_alt;
	}
  },

  watch: {
	popupOpen(val) {
		// Add open/close logic here if needed
	},
	cooldownTimer(val) {
		if (val &amp;&amp; val &gt; 0) {
			this.cooldownCount = val * 1000;
			this.startCooldown();
		}
	}
}
};
    </script>
    <script id="item-template" type="text/x-template">
      &lt;div v-if=&#34;active&#34; class=&#34;box_relative center_h&#34; ref=&#34;itemObserver&#34;&gt;
		&lt;div :class=&#34;tooltip&#34; ref=&#34;theTooltip&#34;&gt;
			&lt;span v-if=&#34;showTooltip&#34; class=&#34;paddings_sm display-grid&#34;&gt;
				&lt;div&gt;
					&lt;h4 class=&#34;nospace text_yolk&#34;&gt;{{ itemName }}&lt;/h4&gt;
				&lt;/div&gt;
				&lt;!-- &lt;p class=&#34;nospace text_blue5&#34;&gt;{{ tooltipTxt.desc }}&lt;/p&gt; --&gt;
			&lt;/span&gt;
			&lt;div ref=&#34;eggItemInvetory&#34; class=&#34;grid-item roundme_lg clickme common-box-shadow box_relative&#34; :class=&#34;[itemClass, itemType, itemTagsString]&#34; @click=&#34;onClick&#34;&gt;
				&lt;div v-show=&#34;!renderDone&#34; class=&#34;centered&#34;&gt;&lt;i class=&#34;fas fa-egg fa-spin fa-2x&#34;&gt;&lt;/i&gt;&lt;/div&gt;
				&lt;span v-if=&#34;isVipItem&#34;&gt;
					&lt;icon name=&#34;ico-vip&#34; class=&#34;equip-vip-icon&#34;&gt;&lt;/icon&gt;
				&lt;/span&gt;
				&lt;div v-if=&#34;hasBanner &amp;&amp; !notify&#34; class=&#34;equip-item-banner shadow&#34;&gt;
					&lt;span class=&#34;visibility-hidden&#34;&gt;{{bannerTxt}}&lt;/span&gt;
				&lt;/div&gt;
				&lt;div v-if=&#34;hasBanner &amp;&amp; !notify&#34; class=&#34;equip-item-banner&#34;&gt;
					{{bannerTxt}}
				&lt;/div&gt;
				&lt;div v-if=&#34;showPrice &amp;&amp; renderDone&#34; class=&#34;equip_smallprice display-grid box_absolute grid-column-auto-1 gap-sm&#34;&gt;
					&lt;div class=&#34;equip_cost box_absolute f_row align-items-center&#34; :class=&#34;equipCostTagCls&#34;&gt;
						&lt;i v-if=&#34;isPremium &amp;&amp; !isItemOwned&#34; :class=&#34;priceIcon&#34;&gt;&lt;/i&gt;&lt;span v-if=&#34;!isPremium &amp;&amp; !isItemOwned &amp;&amp; !hidePrice&#34; class=&#34;egg-price-egg&#34;&gt;&lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 24 24&#34; xml:space=&#34;preserve&#34;&gt;&lt;path class=&#34;egg-fill&#34; d=&#34;M12 21.6c-4.4 0-8-3.5-8-7.8 0-4 3.4-11.4 8.1-11.4 4.8 0 7.8 7.5 7.8 11.4.1 4.3-3.5 7.8-7.9 7.8z&#34; style=&#34;fill-rule:evenodd;clip-rule:evenodd;&#34;/&gt;&lt;path class=&#34;egg-stroke&#34; d=&#34;M12.1 3.9c3.6 0 6.3 6.4 6.3 9.9s-2.9 6.3-6.5 6.3-6.5-2.8-6.5-6.3c.1-3.5 3.2-9.9 6.7-9.9m0-3C6.2.9 2.5 9.4 2.5 13.8c0 5.2 4.3 9.3 9.5 9.3s9.5-4.2 9.5-9.3C21.5 9.4 18.2.9 12.1.9z&#34;/&gt;&lt;/svg&gt;
&lt;/span&gt;{{ itemPrice }}
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;canvas ref=&#34;itemCanvas&#34; class=&#34;equip_icon centered&#34; :class=&#34;canvasCls&#34; width=&#34;250&#34; height=&#34;250&#34;&gt;&lt;/canvas&gt;
				&lt;div v-if=&#34;notify &amp;&amp; hasBanner&#34; class=&#34;notification-banner box_relative&#34;&gt;
					&lt;img :src=&#34;bannerIconImg&#34; alt=&#34;&#34;&gt;
				&lt;/div&gt;
				&lt;p v-if=&#34;showItemOnly&#34; class=&#34;item-name text-center&#34;&gt;{{ item.name }}&lt;/p&gt;
			&lt;/div&gt;
			&lt;button class=&#34;ss_button btn_green bevel_green btn_sm fullwidth ss_margintop box_absolute&#34; v-show=&#34;hasBuyBtn &amp;&amp; isSelected&#34; @click=&#34;onClickBuy&#34;&gt;Get it now!&lt;/button&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_item = {
	template: &#39;#item-template&#39;,
	props: {
		loc: {
			type: Object,
			default: () =&gt; ({})
		},
		item: {
			type: Object,
			default: () =&gt; ({})
		},
		showItemOnly: {
			type: Boolean,
			default: false
		},
		isSelected: {
			type: Boolean,
			default: false
		},
		equippedSlot: {
			type: String,
			default: &#39;&#39;
		},
		hasBuyBtn: {
			type: Boolean,
			default: false
		},
		isShop: {
			type: Boolean,
			default: false
		},
		hidePrice: {
			type: Boolean,
			default: false
		},
		showTooltip: {
			type: Boolean,
			default: false
		},
		notify: {
			type: Boolean,
			default: false
		},
		itemsToHide: {
			type: Array,
			default: () =&gt; []
		}
	},

	data: function () {
		return {
			itemOnly: hasValue(this.showItemOnly) ? this.showItemOnly : false,
			active: true,
			itemLimited: false,
			itemUnlock: &#39;purchase&#39;,
			itemTags: [],
			itemTagsString: &#39;&#39;,
			renderDone: false,
			observer: null,
			premTxt: {
				title: &#39;&#39;,
				desc: &#39;&#39;
			}
		}
	},

	mounted() {
		this.$nextTick(() =&gt; {
			this.setupObserver();
		});
		this.prepareItem();
		this.itemHightlightedOrder();
	},

	beforeDestroy() {
		// Disconnect the observer when the component is destroyed
		if (this.observer) {
			this.observer.disconnect();
		}
	},

	methods: {
		setupObserver() {
			// Ensure the itemObserver element exists
			const targetElement = this.$refs.itemObserver;
			if (targetElement &amp;&amp; targetElement instanceof HTMLElement) {
				this.observer = new IntersectionObserver(this.onIntersection, {
				root: null, // observe in the viewport
				threshold: 0.1 // trigger when 10% of the item is visible
				});
				this.observer.observe(targetElement);
			} else {
				console.error(&#39;itemObserver element not found or not an HTMLElement.&#39;);
			}
		},
		onIntersection(entries) {
			const entry = entries[0];
			if (entry.isIntersecting &amp;&amp; !this.renderDone) {
				setTimeout(() =&gt; {
					this.renderItem();
					this.observer.disconnect(); // Stop observing after rendering
				}, 0);
			}
		},
		prepareItem: function () {

			this.itemUnlock = this.item.unlock;

			if (this.itemsToHide.includes(this.item.id) &amp;&amp; this.isShop) {
				this.active = false;
			}

			if (this.itemUnlock == &#39;premium&#39; &amp;&amp; !this.item.activeProduct &amp;&amp; this.isShop) {
				this.active = false;
			}

			// We don&#39;t need this mess
			if (this.itemUnlock === &#39;physical&#39; &amp;&amp; this.isShop) {
				this.active = false;
			}
			
			this.setUpTags();
			this.isEquippedSlot();
			// this.tooltipOnMouseOver();
		},
		setUpTags() {
			if (this.item.item_data !== undefined &amp;&amp; this.item.item_data.tags !== undefined &amp;&amp; this.item.item_data.tags.length) {
				this.item.item_data.tags.forEach(el =&gt; this.itemTags.push(&#39;item-tag-&#39; + el.toLowerCase().replace(/\s+/g, &#39;-&#39;)));
				this.itemTagsString = this.itemTags.toString().replace(/,/g, &#39; &#39;);
			}
		},

		isEquippedSlot() {
			if (this.equippedSlot) {
				this.active = true;
			}
		},

		tooltipOnMouseOver() {
			const tooltip = this.$refs.theTooltip;
			const itemGrid = document.getElementById(&#39;item-smack-down&#39;);
			const searchBox = document.getElementById(&#39;item-search-wrap&#39;);

			tooltip.addEventListener(&#34;mouseover&#34;, () =&gt; {
				// Cache the bounding rectangles
				const tooltipBounds = tooltip.getBoundingClientRect();
				const itemGridBounds = itemGrid.getBoundingClientRect();
				const searchBoxBounds = searchBox.getBoundingClientRect();

				// Use constants to avoid recalculating values
				const tooltipY = Math.floor(tooltipBounds.y);
				const searchBoxY = Math.floor(searchBoxBounds.y);
				const itemGridY = Math.floor(itemGridBounds.y);
				const tooltipLeft = Math.floor(tooltipBounds.left - 10);
				const tooltipRight = Math.floor(tooltipBounds.right + 10);
				const itemGridLeft = Math.floor(itemGridBounds.left);
				const itemGridRight = Math.floor(itemGridBounds.right);

				// Determine conditions
				const elTouchSearch = tooltipY &lt; searchBoxY;
				const topTouch = tooltipY === itemGridY;
				const leftTouch = tooltipLeft &lt; itemGridLeft;
				const rightTouch = tooltipRight &gt; itemGridRight;

				// Add or remove classes based on conditions
				tooltip.classList.toggle(&#39;tooltip-bottom&#39;, topTouch &amp;&amp; !rightTouch &amp;&amp; !leftTouch);
				tooltip.classList.toggle(&#39;tooltip-left&#39;, leftTouch);
				tooltip.classList.toggle(&#39;tooltip-right&#39;, rightTouch);
			});
		},

		highlightSelected: function () {
			return this.isSelected ? &#39;highlight&#39; : &#39;&#39;;
		},

		itemHightlightedOrder: function() {
			if (this.isPhysicalMerch &amp;&amp; vueData.currentEquipMode == vueData.equipMode.shop) return;
			return this.$refs.eggItemInvetory.classList.contains(&#39;highlight&#39;) ? this.$refs.eggItemInvetory.style.order=&#39;-1&#39; : null;
		},

		renderItem() {
			if (this.$refs.itemCanvas === undefined) {
				return;
			}
			extern.renderItemToCanvas(this.item, this.$refs.itemCanvas, () =&gt; {
				this.renderDone = true;
			});
		},

		onClick: function () {
			this.$emit(&#39;item-selected&#39;, this.item);
		},

		onClickBuy() {
			extern.buyProductForMoney(this.item.sku[0]);
		},
		countWords (str) {
			str = str.trim();
			const words = str.match(/\S+/g);

			words.forEach((w, i) =&gt; {
				if (w.length &gt; 10) {
					const wLength = Math.floor(w.length / 2);
					const newWord = w.substring(0, wLength) + &#39;-&#39; + w.substring(wLength, w.length);
					words[i] = newWord;
				}
			});
			return words.join(&#39; &#39;);
		},

	},

	computed: {
		dataItem() {
			return this.item.name.toLowerCase().replace(/\s+/g, &#39;-&#39;);
		},
		isItemSellable: function () {
			return (!this.itemOnly &amp;&amp; vueData.currentEquipMode == vueData.equipMode.shop) || (!this.itemOnly &amp;&amp; vueData.currentEquipMode == vueData.equipMode.skins) || (!this.itemOnly &amp;&amp; vueData.currentEquipMode == vueData.equipMode.featured);
		},

		showPrice () {
			return  this.isItemSellable &amp;&amp; this.item.price &gt; 0;
		},

		isPhysicalMerch () {
			return this.isItemSellable &amp;&amp; this.itemUnlock === &#39;physical&#39;;
		},

		isPremium() {
			return this.itemUnlock === &#39;premium&#39; &amp;&amp; !this.itemTags.includes(&#39;item-tag-vipitem&#39;);
		},

		isVipItem() {
			return this.itemUnlock === &#39;vip&#39;;
		},

		isLimited() {
			return this.itemTags.includes(&#39;item-tag-limited&#39;);
		},

		isDrop() {
			return this.itemTags.includes(&#39;drop&#39;);
		},

		isItemOwned() {
			return extern.isItemOwned(this.item);
		},

		hasBanner() {
			return this.isPremium || this.isVipItem || this.isLimited || this.isPremiumEggPurchase;
		},

		isPremiumEggPurchase() {
			return this.itemUnlock === &#39;purchase&#39; &amp;&amp; this.itemTags.includes(&#39;item-tag-premium&#39;) &amp;&amp; this.item.price &gt; 150000;
		},

		itemType() {
			return getKeyByValue(ItemType, this.item.item_type_id).toLowerCase();
		},

		bannerTxt() {
			if (!this.hasBanner) {
				return;
			} else {
				if (this.isPremium || this.isPremiumEggPurchase) {
					return &#39;PREMIUM&#39;;
				}
				if (this.isVipItem) {
					return &#39;VIP&#39;;
				}
				if (this.isLimited) {
					return this.loc.eq_limited;
				}
			}
		},

		canvasCls() {
			if (!this.isItemSellable) {
				return &#39;full-width-height&#39;
			}
		},

		itemClass() {
			return {
				&#39;is-premium&#39;: this.isPremium || this.isPremiumEggPurchase,
				&#39;is-vip&#39;: this.isVipItem,
				&#39;highlight&#39;: this.isSelected,
			}
		},

		itemPrice() {
			if (this.hidePrice) {
				if (this.isItemOwned ) {
					return this.loc.eq_owned;
				}
			} else {
				return !this.isItemOwned ? this.item.price : this.loc.eq_owned + &#39;!&#39;;
			}
		},

		priceIcon() {
			if (this.isPremium) {
				return vueApp.icon.dollar;
			}
		},
		equipCostTagCls() {
			if (this.isPremium &amp;&amp; !this.isItemOwned) {
				return &#39;premium-item-cost&#39;;
			} else if (this.isItemOwned) {
				return &#39;equip-cost-is-owned&#39;;
			}
		},
		tooltipTxt() {
			if (this.showTooltip) {
				return this.premTxt;
			}
		},
		tooltip() {
			if (this.showTooltip) {
				return &#39;tool-tip&#39;;
			}
		},
		bannerIconImg() {
			if (this.isPremium) {
				return &#39;img/store/PremiumTag.webp&#39;;
			} else if (this.isVipItem) {
				return &#39;img/store/VIPTag.webp&#39;;
			}
		},
		itemName() {
			return this.countWords(this.item.name);
		}
	},

	watch: {
		item: function (val) {
			this.prepareItem();
		}
	}
};
    </script>
    <script id="chickn-winner-template" type="text/x-template">
      &lt;div id=&#34;popupInnards&#34; class=&#34;box_dark roundme_sm fullwidth f_col&#34;&gt;
		&lt;header class=&#34;display-grid grid-column-1-eq align-items-center roundme_lg&#34;&gt;
			&lt;h1 class=&#34;chickn-winner-title nospace text-center&#34;&gt;{{ loc.p_chicken_header_txt}}&lt;/h1&gt;
		&lt;/header&gt;
		&lt;section id=&#34;chickn-winner-wrapper&#34; class=&#34;egg-chick-wrapper f_row roundme_lg box_relative justify-content-center&#34;&gt;
			&lt;div v-show=&#34;eggGameReady&#34; class=&#34;egg-chick-box box_relative&#34; v-for=&#34;egg in eggs&#34; :key=&#34;egg.id&#34;&gt;
				&lt;div v-if=&#34;showAmountRewarded &amp;&amp; busted &amp;&amp; egg.value &gt; 5&#34; class=&#34;text-center chw-reward-amount box_absolute&#34;&gt;
					&lt;h2 class=&#34;box_relative shadow_grey&#34;&gt;{{ showAmountRewarded }} &lt;img class=&#34;chw-winner-egg&#34; src=&#34;img/ico_goldenEgg.svg&#34; /&gt;&lt;/h2&gt;
				&lt;/div&gt;
				&lt;img class=&#34;incentivized-egg-chick box_relative&#34; :class=&#34;eggClass(egg.value)&#34; @click=&#34;checkIfReady&#34; :src=&#34;eggSrc(egg.value)&#34; :id=&#34;egg.id&#34;&gt;
				&lt;div v-if=&#34;rewardHasItem &amp;&amp; egg.value &gt; 5&#34; class=&#34;centered&#34;&gt;
					&lt;item :loc=&#34;loc&#34; :item=&#34;rewardItem&#34; :has-buy-btn=&#34;false&#34; :is-shop=&#34;false&#34;&gt;&lt;/item&gt;
					&lt;h4 class=&#34;text_white text-center nospace text-shadow-black-40&#34;&gt;{{ rewardItem.name }}&lt;/h4&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;img v-show=&#34;!eggGameReady&#34; class=&#34;incentivized-egg-chick centered&#34; :src=&#34;chickSrc&#34;&gt;
			&lt;button v-show=&#34;showAdWatch&#34; class=&#34;ss_button btn_large btn_green bevel_green btn_shiny ss_marginbottom_lg&#34; @click=&#34;watchVideo&#34;&gt;{{ loc.chw_btn_watch_ad }}&lt;/button&gt;
			&lt;h2 class=&#34;centered nospace fullwidth text-center&#34;&gt;{{ txtState.desc }}&lt;/h2&gt;
			&lt;div v-show=&#34;!chw.ready &amp;&amp; !chw.adBlockDetect&#34;class=&#34;chw-progress-bar-wrap-popup roundme_sm box_relative bg_blue5 center_h ss_marginbottom_lg ss_button&#34;&gt;
				&lt;p class=&#34;chw-progress-bar-msg box_absolute centered nospace text-center fullwidth chw-msg chw-p-msg text_white&#34;&gt;
					&lt;span v-show=&#34;chw.hours&#34; class=&#34;chw-pie-num&#34;&gt;{{chw.hours}}:&lt;/span&gt;&lt;span class=&#34;chw-pie-num&#34;&gt;{{chw.minutes}}:&lt;/span&gt;&lt;span class=&#34;chw-pie-num&#34;&gt;{{chw.seconds}}&lt;/span&gt;
				&lt;/p&gt;
				&lt;div class=&#34;chw-progress-bar-inner-popup bg_blue4&#34; :style=&#34;{width: chwBarProgress}&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/section&gt;
		&lt;!-- #chickn-winner-wrapper --&gt;
		&lt;footer class=&#34;nugget-footer text-center box_relative&#34;&gt;
			&lt;div&gt;
			&lt;button v-show=&#34;showPopupBtn&#34; id=&#34;gotWinnerOk&#34; @click=&#34;onGotWinner&#34; class=&#34;ss_button btn_medium btn_yolk bevel_yolk btn_shiny&#34;&gt;{{ txtState.btn }}&lt;/button&gt;
			&lt;button v-show=&#34;!firebaseId&#34; @click=&#34;signIn&#34; class=&#34;ss_button btn_medium btn_green bevel_green btn_shiny&#34;&gt;{{ loc.sign_in}}&lt;/button&gt;
			&lt;/div&gt;
		&lt;/footer&gt;
    &lt;/div&gt;
	&lt;!-- #popupInnards --&gt;
    </script>
    <script>
      var comp_chickn_winner_popup = {
    template: &#39;#chickn-winner-template&#39;,
    props: [&#39;loc&#39;, &#39;firebaseId&#39;, &#39;reward&#39;, &#39;adUnit&#39;, &#39;chw&#39;],
	components: {
		&#39;item&#39;: comp_item,
	},

    data: function () {
        return {
			clickedIdx: 0,
			eggs: [{id:&#39;eggOne&#39;, value: 0, active: true, hide: 0}, {id:&#39;eggTwo&#39;, value: 0, active: true, hide: 0}, {id:&#39;eggThree&#39;, value: 0, active: true, hide: 0}],
			isMiniGameComplete: false,
			bustedSrc: `img/incentivized-mini-game/svg/Egg07.svg`,
			busted: false,
			showEggGame: false,
			clickBeforeReady: false,
			watchAdClicked: false,
			show: false
		}
    },

    methods: {
        placeBannerAdTag: function (tagEl) {
            this.$refs.chickenNuggetAdContainer.appendChild(tagEl);
        },
		eggSrc(count) {
			if (count &gt; 6) {
				return `img/incentivized-mini-game/svg/Egg06.svg`;
			}
			return `img/incentivized-mini-game/svg/Egg0${count}.svg`;
		},

		eggSrcBusted() {
			setTimeout(() =&gt; {
				return `img/incentivized-mini-game/svg/Egg07.svg`;
			}, 2424);
		},

		eggBg(count) {
			if (count &gt; 5) {
				return &#39;incentivized-show&#39;
			}
		},
		eggClass(count) {
			let hide;
			if (count &gt; 5 &amp;&amp; this.reward.itemIds.length &gt; 0) {
				hide = &#39;visibility-hidden cyborg-egg&#39;;
			}
			if (count &gt; 5) {
				return `chick-alive ${hide} egg-${count} cyborg-egg`;
			}
		},

		checkIfReady(e) {
				this.eggClickCounter(e);
		},

		eggClickCounter(e) {
			if (!this.busted) {
				BAWK.play(&#39;mini-egg-game_shellhit&#39;);
			} else {
				BAWK.play(&#39;mini-egg-game_chick&#39;);
			}

			this.clickedIdx = this.eggs.findIndex(i =&gt; i.id === e.target.id);

			let elem = document.getElementById(this.eggs[this.clickedIdx].id);

			if (this.eggs[this.clickedIdx].value &lt; 6) {
				elem.classList.add(&#39;chickn-winner-clicked&#39;);
				setTimeout(() =&gt; elem.classList.remove(&#39;chickn-winner-clicked&#39;), 650);
			}

				if (this.eggs[this.clickedIdx].value === 5) {

					this.isMiniGameComplete = true;

					ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, &#39;Egg Game&#39;, `egg-cracked-${this.eggs[this.clickedIdx].id}`);

					setTimeout(() =&gt; {
						this.eggs[this.clickedIdx].active = false;
						elem.src = this.bustedSrc;
					}, 1414);

					this.busted = true;

					extern.api_checkBalance();

					this.eggs.forEach(i =&gt; {
						if (i.id === e.target.id) return;
						let btn = document.getElementById(i.id);
						if (btn) {
							btn.style.pointerEvents = &#39;none&#39;;
							btn.disabled = true;
						}
					});
				}


			if (this.eggs[this.clickedIdx].value === 100) {
				BAWK.play(&#39;mini-egg-game_shial&#39;);
			}

			this.eggs[this.clickedIdx].value++;
		},
		resetGame() {
			if (this.firebaseId !== null) {
				extern.checkStartChicknWinner();
			}
			if (extern.inGame) {
				vueApp.disableRespawnButton(false);
				vueApp.showGameMenu();
			}
			setTimeout(() =&gt; {
				this.$emit(&#39;chw-mini-game-complete&#39;, true);
				this.isMiniGameComplete = false;
				this.busted = false;
				this.reward.eggs = null;
				this.reward.itemIds.length = 0;
				this.reward.ownedItem = null;
				this.reward.ownedItems = null;
				this.clickBeforeReady = false;
				this.watchAdClicked = false;

				this.eggs.forEach(i =&gt; {
					const Btn = document.getElementById(i.id);
					if (Btn) {
						Btn.style.pointerEvents = &#39;all&#39;;
						Btn.disabled = false;
					}
					i.value = 0;
					i.active = true;
					i.hide = 0;
				});
			}, 500);
		},

        onGotWinner: function () {
			BAWK.play(&#39;ui_popupclose&#39;);
            this.$parent.hide();
        },

		watchVideo() {
			if (this.watchAdClicked) {
				return;
			}

			this.watchAdClicked = true;
			vueApp.chwDoIncentivized();
			setTimeout(() =&gt; {
				this.watchAdClicked = false;
			}, 2000);
		},

		signIn() {
            this.$parent.hide();
			vueApp.onChwSignInClicked();
			vueApp.onSignInClicked();
		}
    },
	computed: {
		chwBarProgress() {
			return this.chw.progress + &#39;%&#39;;
		},
		showAmountRewarded() {
			if (this.reward.eggs) {
				return `+${this.reward.eggs}`;
			}
		},

		rewardItem() {
			return this.reward.itemIds.length &gt; 0 ? extern.catalog.findItemById(this.reward.itemIds[0]) : [];
		},

		txtState() {
			let t = {};

			if (!this.firebaseId) {
				t.desc = this.loc.chw_create_account;
				t.btn = this.loc.not_now;
			} else {
				if (this.eggGameReady) {
					t.desc = this.loc.p_nugget_instruction;
					t.btn = this.loc.p_nugget_button;
					if (this.busted) {
						t.desc = &#39;&#39;;
					}
				} else {
					if (this.chw.winnerCounter &gt; 3) {
						t.desc = this.loc.chw_daily_limit_msg_two;
						t.btn = this.loc.close;
					} else {
						t.desc = &#39;&#39;;
						t.btn = this.loc.close;
					}
				}
			}

			return t;
		},

		limitReached() {
			return this.chw.winnerCounter &gt; 3;
		},

		eggGameReady() {
			return ((this.reward.eggs || this.reward.itemIds.length &gt; 0) &amp;&amp; this.firebaseId &amp;&amp; !this.limitReached);
		},

		showCountDown() {
			return (!(this.reward.eggs || this.reward.itemIds.length &gt; 0) &amp;&amp; this.firebaseId &amp;&amp; !this.limitReached &amp;&amp; !this.chw.ready);
		},

		showAdWatch() {
			return (!(this.reward.eggs || this.reward.itemIds.length &gt; 0) &amp;&amp; this.firebaseId &amp;&amp; !this.limitReached &amp;&amp; this.chw.ready);
		},

		showDescTxt() {
			return (!this.chw.ready &amp;&amp; this.limitReached);
		},

		showPopupBtn() {
			return ((this.busted &amp;&amp; (this.reward.eggs || this.reward.itemIds.length &gt; 0)) || this.showCountDown || this.showAdWatch || this.limitReached || !this.firebaseId);
		},

		chickSrc() {
			if (this.limitReached || !this.firebaseId) {
				return this.chw.imgs.limit;
			}
			return this.chw.imgs.sleep;
		},

		rewardHasItem() {
			return this.reward.itemIds.length &gt; 0 &amp;&amp; !this.reward.eggs &amp;&amp; this.busted;
		},
		
	},
	watch: {
		busted(val) {
			if (val) {
				BAWK.play(&#39;mini-egg-game_shellburst&#39;);
				setTimeout(() =&gt; {
					BAWK.play(&#39;mini-egg-game_victory&#39;);
				}, 500);
			}
		},
	}
};
    </script>
    <script id="social-panel-template" type="text/x-template">
      &lt;div ref=&#34;socialMediaIcons&#34; class=&#34;social_icons roundme_sm f_row gap-sm ss_margintop_xl fullwidth justify-content-end&#34;&gt;
		&lt;!-- &lt;a :href=&#34;newsLetterUrl&#34; target=&#34;_blank&#34; @click=&#34;playSound(&#39;newYolker&#39;)&#34;&gt;
			&lt;div class=&#34;icon-wrap bg_blue3 roundme_sm&#34;&gt;
				&lt;span class=&#34;sr-only&#34;&gt;Get the Shell Shocker&#39;s Newsletter: The New Yolker&lt;/span&gt;
				&lt;i aria-hidden=&#34;true&#34; class=&#34;text_blue1 fas fa-envelope-open-text&#34;&gt;&lt;/i&gt;
			&lt;/div&gt;
		&lt;/a&gt; --&gt;
		&lt;!-- [&#39;name&#39;, &#39;reward&#39;, &#39;url&#39;, &#39;img&#39;, &#39;icon&#39;] --&gt;
		&lt;social-promo ref=&#34;socialIcons&#34; v-for=&#34;(item, idx) in socialItems&#34; :key=&#34;idx&#34; :name=&#34;item.name&#34; :reward=&#34;item.reward&#34; :url=&#34;item.url&#34; :img=&#34;item.imgPath&#34; :icon=&#34;item.icon&#34; :is-active=&#34;item.active&#34; :loc=&#34;loc&#34; :is-poki=&#34;isPoki&#34; :use-social=&#34;socialMedia&#34; :id=&#34;item.id&#34;&gt;&lt;/social-promo&gt;
		&lt;!-- &lt;social-promo ref=&#34;socialIcons&#34; :name=&#34;showSocialMedia.name&#34; :reward=&#34;showSocialMedia.reward&#34; :url=&#34;showSocialMedia.url&#34; :img=&#34;showSocialMedia.imgPath&#34; :icon=&#34;showSocialMedia.icon&#34; :is-active=&#34;showSocialMedia.active&#34; :loc=&#34;loc&#34; :is-poki=&#34;isPoki&#34; :use-social=&#34;showSocialMedia.reward&#34; :overlap=&#34;adOverlap&#34;&gt;&lt;/social-promo&gt; --&gt;

	&lt;/div&gt;
    </script>
    <script id="social-promo-template" type="text/x-template">
      &lt;div class=&#34;social-media box_relative&#34; :class=&#34;cls&#34;&gt;
		&lt;div v-if=&#34;isActive&#34; class=&#34;tool-tip&#34; :class=&#34;{&#39;active&#39; : isBubbleActive}&#34;&gt;
			&lt;a :href=&#34;url&#34; target=&#34;_blank&#34; :title=&#34;urlTitle&#34; class=&#34;bg_blue4&#34;  @click=&#34;onClickReward()&#34;&gt;
				&lt;div class=&#34;icon-wrap bg_blue3 f_row align-items-center justify-content-center roundme_sm text-center&#34;&gt;
					&lt;span class=&#34;sr-only&#34;&gt;Vist Shell Shocker&#39;s {{ name }} page&lt;/span&gt;
					&lt;i aria-hidden=&#34;true&#34; class=&#34;text_blue1&#34; :class=&#34;useIcon&#34;&gt;&lt;/i&gt;
				&lt;/div&gt;
			&lt;/a&gt;
			&lt;div class=&#34;tool-tip--bubble&#34; v-show=&#34;bubbleHover&#34;&gt;
				&lt;div class=&#34;tool-tip--group display-grid grid-column-1-2&#34;&gt;
					&lt;div class=&#34;tool-tip--image box_relative&#34;&gt;
						&lt;img v-if=&#34;img&#34; class=&#34;discord-bubble-img box_absolute&#34; :src=&#34;imgSrc&#34; :alt=&#34;imgAlt&#34;&gt;
					&lt;/div&gt;
					&lt;div class=&#34;tool-tip--text text-left&#34;&gt;
						&lt;section v-html=&#34;socialDesc&#34;&gt;&lt;/section&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;!-- .tool-tip--group --&gt;
			&lt;/div&gt;
				&lt;!-- .tool-tip--bubble --&gt;
		&lt;/div&gt;
		&lt;!-- .tool-tip --&gt;
		&lt;a v-if=&#34;!isActive&#34; :href=&#34;url&#34; target=&#34;_blank&#34; class=&#34;bg_blue4&#34; @click=&#34;onClickReward()&#34;&gt;
			&lt;div class=&#34;icon-wrap bg_blue3 f_row align-items-center justify-content-center roundme_sm text-center&#34;&gt;
				&lt;span class=&#34;sr-only&#34;&gt;Vist Shell Shocker&#39;s {{ name }} page&lt;/span&gt;
				&lt;i aria-hidden=&#34;true&#34; class=&#34;text_blue1 fab&#34; :class=&#34;useIcon&#34;&gt;&lt;/i&gt;
			&lt;/div&gt;
		&lt;/a&gt;
	&lt;/div&gt;
    </script>
    <script>
      var COMPSOCIALPROMO = {
	template: &#39;#social-promo-template&#39;,
	props: [&#39;name&#39;, &#39;reward&#39;, &#39;url&#39;, &#39;img&#39;, &#39;icon&#39;, &#39;loc&#39;, &#39;isPoki&#39;, &#39;useSocial&#39;, &#39;id&#39;],
	data: function () {
		return {
			isBubbleActive: false,
			bubbleRepeat : &#39;&#39;,
			bubbleHover: true,
			isActive: false,
			isItemOwned: false,
			inventoryCheck: 0
		}
	},
	mounted() {
		this.discordBubbleTimer();
	},
	methods: {
		playSound (label) {
			BAWK.play(&#39;ui_click&#39;);
		},
		discordBubbleTimer() {
			if (this.reward === this.useSocial) {
				if (extern.isGameReady) {
					this.inventoryCheck = 0;
					setTimeout(() =&gt; {
						this.isItemOwned = extern.isItemOwned({id: this.id});
						if (!this.isItemOwned) {
							this.isActive = true;
							this.bubbleRepeat = setInterval(() =&gt; {
                               this.isBubbleActive = this.isBubbleActive ? false : true;
                       		}, 3000);
						}
					}, 1000);
				} else {
					this.inventoryCheck++;
					if (this.inventoryCheck &lt; 6 &amp;&amp; !this.isActive) {
						setTimeout(() =&gt; this.discordBubbleTimer(), 2000);
					}
				}
			}
		},

		onClickReward() {
			if (!this.reward) return;
			this.gaSend(this.reward);

			if (!this.isItemOwned &amp;&amp; this.reward) {
				extern.socialReward(this.reward);
			}
			this.playSound();
			this.isBubbleActive = false;
			this.bubbleHover = false;

			if (this.bubbleRepeat) {
				clearInterval(this.bubbleRepeat);
			}
		},
		gaSend(label) {
			if (!label) return;
            ga(&#39;send&#39;, &#39;event&#39;, &#39;social-buttons&#39;, &#39;click&#39;, label);
		}
	},
	computed: {
		itemRedeemed() {
			return localStore.getItem(this.reward + &#39;Rewarded&#39;);
		},
		urlTitle() {
			return `Blue Wizard ${this.name} page`;
		},
		imgAlt() {
			return `Join Blue Wizard&#39;s ${this.name} page`;
		},
		imgSrc() {
			return `img/social-media/${this.img}`;
		},
		socialDesc() {
			return this.loc[&#39;footer_social_media_&#39; + this.name.toLowerCase()];
		},
		cls() {
			return this.useSocial === this.reward ? `active-social-${this.useSocial.toLowerCase()}` : &#39;&#39;;
		},
		useIcon() {
			if (this.name == &#39;newYolker&#39;) {
				return `fas ${this.icon}`;
			} else {
				return `fab ${this.icon}`;
			}
		},
	},
	watch: {
		// useSocial(val) {
		// 	if (!val) {
		// 		return;
		// 	}
		// 	this.isActive = this.reward === val;
		// }
	}
};
    </script>
    <script>
      var comp_social_panel = {
	template: &#39;#social-panel-template&#39;,
	components: {
		&#39;social-promo&#39;: COMPSOCIALPROMO
	},
	props: [&#39;loc&#39;, &#39;isPoki&#39;, &#39;socialMedia&#39;, &#39;useSocial&#39;],
	data: function () {
		return {
			// adOverlap: false,
			newsLetterUrl: &#39;https://bluewizard.com/subscribe-to-the-new-yolker/&#39;,
		}
	},
	computed: {
		// showSocialMedia() {
		// 	return this.useSocial[Math.floor(Math.random()*this.useSocial.length)];
		// },
		socialItems() {
			const idx = this.useSocial.findIndex(el =&gt; el.reward === this.socialMedia);
			if (idx &gt;= 0) {
				const social = this.useSocial[idx]
				this.useSocial.splice(idx, 1);
				this.useSocial.push(social);
			}
			return this.useSocial;
		}
	}
};
    </script>
    <script id="chw-home-screen" type="text/x-template">
      &lt;div id=&#34;chw-home-timer&#34; ref=&#34;chw-home-timer&#34; style=&#34;display: none&#34; v-show=&#34;showChw&#34; class=&#34;chw-home-timer display-grid grid-column-1-2 grid-align-items-center box_absolute grid-gap-1&#34;&gt;
			&lt;div class=&#34;box_relative&#34;&gt;
				&lt;img class=&#34;box_absolute chw-loot-img lazy-load&#34; v-lazyload :data-src=&#34;chest&#34; /&gt;
				&lt;img class=&#34;chw-home-timer-chick box_absolute&#34; :src=&#34;chwChickSrc&#34;&gt;
			&lt;/div&gt;
			&lt;div class=&#34;chw-bubble-wrap box_relative&#34; :class=&#34;chwHomeTimerCls&#34;&gt;
				&lt;div class=&#34;display-grid grid-align-items-center bg_white chw-circular-timer-container box_relative gap-sm&#34; :class=&#34;chwClass&#34;&gt;
					&lt;div v-show=&#34;!chw.onClick&#34;&gt;
						&lt;p class=&#34;chw-circular-timer-countdown nospace text-center&#34;&gt;
							&lt;span class=&#34;chw-pie-remaining text-center chw-msg chw-r-msg&#34; v-html=&#34;remainingMsg&#34;&gt;&lt;/span&gt;
							&lt;br /&gt;
							&lt;span v-show=&#34;!chw.ready &amp;&amp; !chw.adBlockDetect&#34;&gt;&lt;span v-show=&#34;chw.hours&#34; class=&#34;chw-pie-num&#34;&gt;{{chw.hours}}:&lt;/span&gt;&lt;span v-show=&#34;chwShowTimer&#34; class=&#34;chw-pie-num&#34;&gt;{{chw.minutes}}:&lt;/span&gt;&lt;span v-show=&#34;chwShowTimer&#34; class=&#34;chw-pie-num&#34;&gt;{{chw.seconds}}&lt;/span&gt;&lt;/span&gt;
						&lt;/p&gt;
						&lt;button v-if=&#34;chwShowBtn&#34; class=&#34;ss_button btn_sm btn_yolk bevel_yolk&#34; :class=&#34;btnStyle&#34; @click=&#34;playIncentivizedAd&#34; v-html=&#34;playAdText&#34;&gt;&lt;icon v-show=&#34;chw.winnerCounter&#34; name=&#34;ico_watchAd&#34; class=&#34;chw-icon-watch-ads&#34;&gt;&lt;/icon&gt;&lt;/button&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;div class=&#34;speech-tail&#34;&gt;&lt;/div&gt;
				&lt;div class=&#34;chw-circular-timer-container-shadow&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;!-- .chw-timer --&gt;
    </script>
    <script>
      const CompChwHomeScreen = {
        template: &#39;#chw-home-screen&#39;,
        props: [&#39;loc&#39;, &#39;screens&#39;, &#39;currentScreen&#39;, &#39;ui&#39;, &#39;chw&#39;, &#39;firebaseId&#39;, &#39;playClicked&#39;],
        data: function() {
            return {
                chest: &#39;img/chicken-nugget/chw-loot-btn.webp&#39;
            }
        },
        methods: {
            playIncentivizedAd() {
                vueApp.playIncentivizedAd();
            }
        },
        computed: {
            remainingMsg() {
                if (this.chw.adBlockDetect) {
                    return &#39;Please turn off ad blocker&#39;;
                }

                if (this.isChicknWinnerError) {
                    return this.loc.chw_error_text;
                }

                if (this.chw.limitReached &amp;&amp; !this.chw.ready) {
                    return this.loc.chw_daily_limit_msg;
                }

                if (this.chw.ready) {
                    return this.chw.winnerCounter &gt; 0 ? this.loc.chw_cooldown_msg : this.loc.chw_ready_msg;
                }

                return this.loc.chw_time_until;
            },
            chwHomeTimerCls() {
                if (this.chw.limitReached) {
                    return &#39;chw-home-screen-max-watched&#39;;
                } else {
                    if (this.chw.ready) {
                        return &#39;is-ready active&#39;;
                    } else {
                        return &#39;not-ready&#39;;
                    }
                }
            },
            chwClass() {
                if (this.chw.limitReached || this.isChicknWinnerError) {
                    return &#39;grid-column-1-eq&#39;;
                } else {
                    return &#39;grid-column-1-eq&#39;;
                }
            },
            chwChickSrc() {
                if (this.chw.limitReached || this.isChicknWinnerError) {
                    // return &#39;img/chicken-nugget/chickLoop_daily_limit.svg&#39;;
                    return this.chw.imgs.limit;
                } else {
                    if (!this.chw.ready) {
                        // return &#39;img/chicken-nugget/chickLoop_sleep.svg&#39;;
                        return this.chw.imgs.sleep;
                    } else {
                        // return &#39;img/chicken-nugget/chickLoop_speak.svg&#39;;
                        return this.chw.imgs.speak;
                    }
                }
            },
            chwShowTimer() {
                return true;
                if (this.chw.limitReached) {
                    // this.chwStopCycle();
                    return false;
                } else {
                    if (this.chw.ready) {
                        this.chwShowCycle();
                        return false;
                    } else {
                        // this.chwStopCycle();
                        return true;
                    }
                }
            },
            chwShowBtn() {
                if ((this.chw.ready &amp;&amp; !this.chw.limitReached &amp;&amp; !this.chw.adBlockDetect) || (!this.chw.ready &amp;&amp; this.chw.limitReached &amp;&amp; !this.chw.adBlockDetect)) {
                    return true;
                } else {
                    return false;

                }
            },
            playAdText() {
                if (this.chw.limitReached) {
                    return this.loc.chw_wake.format(200 * (this.chw.resets + 1));
                } else {
                    return this.loc.chw_btn_free_reward;
                }
            },
            btnStyle() {
                if (this.chw.limitReached) {
                    return &#39;chw-limit-reached&#39;;
                }
            },
            showChw() {
                return this.firebaseId &amp;&amp; this.ui.showHomeEquipUi &amp;&amp; !this.playClicked;
            },
        }
    };
    </script>
    <script id="home-screen-template" type="text/x-template">
      &lt;div&gt;
		&lt;!-- &lt;div class=&#34;twitch-btn-wrap box_absolute&#34;&gt;
			&lt;button v-if=&#34;ui.events.twitch &amp;&amp; !extern.inGame&#34; class=&#34;ss_button twitch-btn btn_sm box_relative text-right&#34; @click=&#34;onTwitchDropsClick&#34;&gt;Twitch Drops Live!&lt;span class=&#34;twitch-btn-status&#34; v-html=&#34;isTwitchLinked&#34;&gt;&lt;/span&gt; &lt;img class=&#34;box_absolute&#34; src=&#34;/twitch/img/twitch-drops-parachute.svg&#34; alt=&#34;&#34;&gt;&lt;/button&gt;
		&lt;/div&gt; --&gt;

		&lt;house-ad-big id=&#34;big-house-ad&#34; ref=&#34;bigHouseAd&#34; :useAd=&#34;ui.houseAds.big&#34; @big-house-ad-closed=&#34;onBigHouseAdClosed&#34;&gt;&lt;/house-ad-big&gt;
		&lt;div id=&#34;display-ad-header-home&#34; ref=&#34;displayAdHeader&#34;&gt;
			&lt;display-ad id=&#34;shellshock-io_728x90_HP_wrap&#34; ref=&#34;headerDisplayAd&#34; class=&#34;display-ad-header centered_x&#34; :ignoreSize=&#34;true&#34; :adUnit=&#34;displayAd.adUnit.header&#34; adSize=&#34;468x60&#34; :check-products=&#34;checkProducts&#34;&gt;&lt;/display-ad&gt;
		&lt;/div&gt;
		&lt;!-- &lt;div id=&#34;egg-org-meter-home&#34;&gt;
			&lt;faction-meter :faction-data=&#34;eggOrg.leaderboard&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34; :play-clicked=&#34;playClicked&#34; :loc=&#34;loc&#34; /&gt;
		&lt;/div&gt; --&gt;
		&lt;!-- &lt;gauge-meter v-show=&#34;showScreen !== screens.profile&#34; ref=&#34;gaugeMeter&#34; @gauge-meter-click=&#34;onGaugeMeterClick&#34;&gt;&lt;/gauge-meter&gt; --&gt;
		&lt;div class=&#34;homescreen-main-wrapper display-grid&#34;&gt;
			&lt;div class=&#34;box_relative fullwidth&#34;&gt;
				&lt;profile-screen id=&#34;profileScreen&#34; ref=&#34;profileScreen&#34; :loc=&#34;loc&#34; :ui=&#34;ui&#34; :claimed=&#34;challengesClaimed&#34; :player-id=&#34;id&#34; :crazy-games-user=&#34;crazyGamesUser&#34; :player-name=&#34;playerName&#34; :account-created=&#34;accountCreated&#34; v-show=&#34;(showScreen === screens.profile)&#34; @leave-game-confimed=&#34;leaveGameConfirmed&#34;&gt;&lt;/profile-screen&gt;
				&lt;play-panel id=&#34;play_game&#34; ref=&#34;playPanel&#34; v-show=&#34;showScreen === screens.home&#34; :show-screen=&#34;showScreen&#34; :screens=&#34;screens&#34; :loc=&#34;loc&#34; :player-name=&#34;playerName&#34; :game-types=&#34;gameTypes&#34; :current-game-type=&#34;currentGameType&#34; :is-game-ready=&#39;accountSettled&#39; :region-list=&#34;regionList&#34; :current-region-id=&#34;currentRegionId&#34; :home=&#34;home&#34; :play-clicked=&#34;playClicked&#34; :current-class=&#34;classIdx&#34; :language-code=&#34;currentLanguageCode&#34; @playerNameChanged=&#34;onPlayerNameChanged&#34; @game-type-changed=&#34;onGameTypeChanged&#34; :maps=&#34;maps&#34;&gt;&lt;/play-panel&gt;
			&lt;/div&gt;
			&lt;aside class=&#34;secondary-aside box_relative display-grid justify-content-end&#34;&gt;
				&lt;div class=&#34;secondary-aside-wrap box_relative&#34;&gt;	
					&lt;transition name=&#34;fade&#34;&gt;
						&lt;media-tabs v-show=&#34;!playClicked&#34; ref=&#34;mediaTabs&#34; :loc=&#34;loc&#34; :newsfeedItems=&#34;newsfeedItems&#34; :twitchStreams=&#34;twitchStreams&#34; :youtubeStreams=&#34;youtubeStreams&#34; :challenges=&#34;player.challenges&#34; :challenge-daily-data=&#34;player.challengeDailyData&#34; :firebase-id=&#34;firebaseId&#34; @chlgReroll=&#34;challengeReroll&#34;&gt;&lt;/media-tabs&gt;
					&lt;/transition&gt;
					&lt;display-ad id=&#34;shellshockers_titlescreen_wrap&#34; ref=&#34;titleScreenDisplayAd&#34; class=&#34;house-small box_absolute&#34; :ignoreSize=&#34;true&#34; :adUnit=&#34;displayAd.adUnit.home&#34; adSize=&#34;300x250&#34; :check-products=&#34;checkProducts&#34;&gt;&lt;/display-ad&gt;
				&lt;/div&gt;
			&lt;/aside&gt;
			&lt;!-- &lt;house-ad-small id=&#34;banner-ad&#34; :useAd=&#34;ui.houseAds.small&#34;&gt;&lt;/house-ad-small&gt; --&gt;
		&lt;/div&gt;
		&lt;shell-tips :loc=&#34;loc&#34; :is-showing=&#34;playClicked&#34; :obj-ref=&#34;tipComp.tips.ref&#34; :obj-ref-alt=&#34;tipComp.tips.refAlt&#34; :timer-duration=&#34;tipComp.tips.time&#34; /&gt;
		&lt;progress-bar :progress=&#34;ui.homeToGameProgressBar.progressValue&#34; :is-showing=&#34;playClicked&#34; /&gt;
		&lt;shell-tips :loc=&#34;loc&#34; :is-showing=&#34;playClicked&#34; :obj-ref=&#34;tipComp.loading.ref&#34; :timer-duration=&#34;tipComp.loading.time&#34; /&gt;
		&lt;transition name=&#34;fade&#34;&gt;
			&lt;div id=&#34;mainFooter&#34; v-show=&#34;!playClicked&#34; class=&#34;centered_x&#34;&gt;
				&lt;!-- &lt;chicken-panel ref=&#34;chickenPanel&#34; id=&#34;chicken_panel&#34; :local=&#34;loc&#34; :do-upgraded=&#34;isUpgraded&#34;&gt;&lt;/chicken-panel&gt; --&gt;
				&lt;section&gt;
					&lt;footer-links-panel id=&#34;footer_links_panel&#34; :loc=&#34;loc&#34; :version=&#34;changelog.version&#34; :is-poki=&#34;isPoki&#34;&gt;&lt;/footer-links-panel&gt;
				&lt;/section&gt;
			&lt;/div&gt;
		&lt;/transition&gt;
		

		&lt;!-- Popup: Check Email --&gt;
		&lt;small-popup id=&#34;checkEmailPopup&#34; ref=&#34;checkEmailPopup&#34; :hide-cancel=&#34;true&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_check_email_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;p&gt;{{ loc.p_check_email_text1 }}:&lt;/p&gt;
				&lt;h5 class=&#34;nospace text-center&#34;&gt;{{ maskedEmail }}&lt;/h5&gt;
				&lt;p class=&#34;ss_marginbottom&#34;&gt;{{ loc.p_check_email_text2 }}&lt;/p&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.ok }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;!-- Popup: Resend Email --&gt;
		&lt;small-popup id=&#34;resendEmailPopup&#34; ref=&#34;resendEmailPopup&#34; @popup-confirm=&#34;onResendEmailClicked&#34; @popup-x=&#34;onHideResendEmail&#34; @popup-cancel=&#34;onHideResendEmail&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_resend_email_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;p&gt;{{ loc.p_resend_email_text1 }}:&lt;/p&gt;
				&lt;h5 class=&#34;nospace text-center&#34;&gt;{{ maskedEmail }}&lt;/h5&gt;
				&lt;p class=&#34;ss_marginbottom&#34;&gt;{{ loc.p_resend_email_text2 }}&lt;/p&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.ok }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.p_resend_email_resend }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;small-popup id=&#34;resendEmailConfirm&#34; ref=&#34;resendEmailConfirm&#34; :hide-cancel=&#34;true&#34; @popup-closed=&#34;onHideResendEmail&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.verify_email_sent }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;!-- content not loc&#39;d (yet) --&gt;
				{{ loc.verify_email_instr }}
			&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.close }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;large-popup id=&#34;hvsmPopup&#34; ref=&#34;hvsmPopup&#34; @popup-closed=&#34;onHvsmPopupClose&#34; @popup-opened=&#34;onHvsmPopupOpen&#34; @popup-x=&#34;onHvsmPopupClose&#34;&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div id=&#34;hvsm-popup-item-grid-wrap&#34; class=&#34;hvsm-popup-item-grid-wrap paddings_lg display-grid gap-1 grid-column-3-eq&#34;&gt;
					&lt;div class=&#34;hvsm-popup-item-grid hvsm-popup-heroes-column&#34;&gt;
						&lt;header&gt;
							&lt;img class=&#34;display-block center_h&#34; :src=&#34;hvsm.hero.img&#34; alt=&#34;Heroes logo&#34;&gt;
							&lt;h3 class=&#34;text-center text-uppercase text_blue5&#34;&gt;{{ hvsm.hero.name }}&lt;/h3&gt;
						&lt;/header&gt;
						&lt;div id=&#34;equip_grid&#34; class=&#34;center_h f_row align-content-start align-content-start gap-sm&#34;&gt;
							&lt;item v-for=&#34;(item, idx) in hvsm.hero.items&#34; :loc=&#34;loc&#34; :item=&#34;item&#34; :key=&#34;item.id&#34; @item-selected=&#34;onHvsmClicked&#34; :is-shop=&#34;false&#34;&gt;&lt;/item&gt;
						&lt;/div&gt;
						&lt;button class=&#34;ss_button btn_md btn_yolk bevel_yolk fullwidth&#34; @click=&#34;onHvsmClicked(hvsm.hero.name)&#34;&gt;
							Hero Items
						&lt;/button&gt;
					&lt;/div&gt;
					&lt;div class=&#34;hvsm-popup-desc&#34;&gt;
						&lt;header&gt;
							&lt;h1 class=&#34;nospace text_white text-shadow-black-40 text-center&#34;&gt;Egg Org &amp;#38; Eggventure&lt;/h1&gt;	
						&lt;/header&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Welcome brave Eggventurers, to a tale of mystery, magic, &amp; mayhem! 
						&lt;/p&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Equip your skins of choice to choose your side. Each kill with an equipped Monsters or Heroes item will bring your side closer to victory! Who will win to unlock an item for all? You decide. 
						&lt;/p&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Grab your swords &amp; prepare yourshellves, for the eggventure of a lifetime awaits!
						&lt;/p&gt;
					&lt;/div&gt;
					&lt;div class=&#34;hvsm-popup-item-grid hvsm-popup-monsters-column&#34;&gt;
						&lt;header&gt;
							&lt;img class=&#34;display-block center_h&#34; :src=&#34;hvsm.monster.img&#34; alt=&#34;Monsters logo&#34;&gt;
							&lt;h3 class=&#34;text-center text-uppercase text_blue5&#34;&gt;{{ hvsm.monster.name }}&lt;/h3&gt;
						&lt;/header&gt;
						&lt;div id=&#34;equip_grid&#34; class=&#34;center_h f_row align-content-start align-content-start gap-sm&#34;&gt;
							&lt;item v-for=&#34;(item, idx) in hvsm.monster.items&#34; :loc=&#34;loc&#34; :item=&#34;item&#34; :key=&#34;item.id&#34; @item-selected=&#34;onHvsmClicked&#34; :is-shop=&#34;false&#34;&gt;&lt;/item&gt;
						&lt;/div&gt;
						&lt;button class=&#34;ss_button btn_md btn_yolk bevel_yolk fullwidth&#34; @click=&#34;onHvsmClicked(hvsm.monster.name)&#34;&gt;
							Monster Items
						&lt;/button&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/template&gt;
		&lt;/large-popup&gt;
		
	&lt;/div&gt;
    </script>
    <script id="create-private-game-template" type="text/x-template">
      &lt;div&gt;
        &lt;div class=&#34;roundme_sm fullwidth&#34;&gt;
            &lt;div&gt;
                &lt;div class=&#34;create-game-map-select display-grid&#34;&gt;
					&lt;h1 class=&#34;create-game-header roundme_sm text-center&#34;&gt;
						{{ loc.p_privatematch_title }}
					&lt;/h1&gt;
					&lt;div class=&#34;create-game-map-search box_relative&#34;&gt;
						&lt;!-- &lt;input ref=&#34;mapSearch&#34; name=&#34;name&#34; v-bind:placeholder=&#34;loc.p_privatematch_find_map&#34; v-on:keyup=&#34;onMapSerachKeyup($event)&#34; class=&#34;ss_field font-nunito box_relative&#34;&gt; --&gt;
						&lt;div class=&#34;box_relative display-grid grid-column-auto-1 gap-sm&#34;&gt;
							&lt;div class=&#34;box_relative&#34;&gt;
								&lt;label for=&#34;search-map&#34; class=&#34;centered_y&#34;&gt;&lt;i class=&#34;fas fa-search text_blue3&#34; :class=&#34;[mapSearchResults.length || mapNotFound ? &#39;fa-times-circle&#39; : &#39;fa-search&#39;]&#34; @click=&#34;onMapSearchReset&#34;&gt;&lt;/i&gt;&lt;/label&gt;
								&lt;input ref=&#34;mapSearch&#34; name=&#34;search-map&#34; v-bind:placeholder=&#34;loc.p_privatematch_find_map&#34; v-on:keyup=&#34;onMapSerachKeyup($event)&#34; @blur=&#34;onBlurSearhFocus&#34; class=&#34;ss_field font-nunito box_relative fullwidth&#34;&gt;
							&lt;/div&gt;
							&lt;button class=&#34;ss_button btn_blue bevel_blue box_relative text-shadow-none create-game-map-btn-random&#34; @click=&#34;onRandomMapClick&#34;&gt;&lt;i class=&#34;fas fa-random&#34;&gt;&lt;/i&gt;&lt;/button&gt;
						&lt;/div&gt;
						&lt;div v-show=&#34;mapSearchResultsShow&#34; class=&#34;option-box box_absolute roundme_sm common-box-shadow bg_blue6 pos-right&#34;&gt;
							&lt;ul class=&#34;list-no-style nospace ss-dropdown-select f_col&#34;&gt;
								&lt;li v-show=&#34;!mapSearchResults.length&#34; class=&#34;text_blue5 font-nunito&#34; @click=&#34;onMapSearchReset&#34;&gt;{{ loc.p_privatematch_map_not_found }}&lt;/li&gt;
								&lt;li v-for=&#34;(item, idx) in mapSearchResults&#34; :key=&#34;idx&#34; @click=&#34;onMapSearchResultClick(item)&#34; class=&#34;text_blue5 font-nunito&#34;&gt;
									{{ item.name }}
								&lt;/li&gt;
							&lt;/ul&gt;
						&lt;/div&gt;
					&lt;/div&gt;
                    &lt;div id=&#34;private_maps&#34; class=&#34;roundme_md&#34; :style=&#34;{ backgroundImage: &#39;url(&#39; + mapImgPath + &#39;)&#39; }&#34;&gt;
	                    &lt;!-- &lt;img :src=&#34;mapImgPath&#34; id=&#34;mapThumb&#34; class=&#34;roundme_sm text-center&#34;&gt; --&gt;
	                    &lt;div id=&#34;mapNav&#34;&gt;
	                    	&lt;button id=&#34;mapLeft&#34; @click=&#34;onMapChange(-1)&#34; class=&#34;clickme map-arrows text_white&#34;&gt;&lt;i class=&#34;fas fa-caret-left fa-3x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
		                    &lt;h5 id=&#34;mapText&#34; class=&#34;text-shadow-black-40&#34;&gt;
                                {{ mapList[mapIdx].name }}
                                &lt;span class=&#34;map_playercount text-shadow-black-40 font-nunito box_absolute&#34;&gt;
									&lt;icon class=&#34;map-avg-size-icon fill-white shadow-filter&#34; :name=&#34;mapSizeIcon&#34;&gt;&lt;/icon&gt;
                                &lt;/span&gt;
                            &lt;/h5&gt;
							&lt;button id=&#34;mapRight&#34; @click=&#34;onMapChange(1)&#34; class=&#34;clickme map-arrows text_white&#34;&gt;&lt;i class=&#34;fas fa-caret-right fa-3x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
	                    &lt;/div&gt;
                    &lt;/div&gt;
					&lt;div class=&#34;hideme&#34;&gt;{{ currentRegionId }}&lt;/div&gt;
					&lt;ss-button-dropdown class=&#34;btn-1 fullwidth&#34; :loc=&#34;loc&#34; :loc-txt=&#34;gameTypeTxt&#34; :list-items=&#34;gameTypes&#34; :selected-item=&#34;pickedGameType&#34; menuPos=&#34;right&#34; @onListItemClick=&#34;onGameTypeChange&#34;&gt;&lt;/ss-button-dropdown&gt;
					&lt;!-- &lt;ss-button-dropdown :loc=&#34;loc&#34; :loc-txt=&#34;mapTxt&#34; :list-items=&#34;gameTypeMapList&#34; :selected-item=&#34;mapIdx&#34; @onListItemClick=&#34;onMapChangeClick&#34;&gt;&lt;/ss-button-dropdown&gt; --&gt;
					&lt;!-- &lt;ss-button-dropdown class=&#34;btn-2 fullwidth&#34; :loc=&#34;loc&#34; :loc-txt=&#34;serverTxt&#34; :list-items=&#34;regions&#34; :selected-item=&#34;currentRegionId&#34; menuPos=&#34;right&#34; @onListItemClick=&#34;onServerChange&#34;&gt;&lt;/ss-button-dropdown&gt; --&gt;
					&lt;ss-button-dropdown class=&#34;play-panel-region-select btn-2 fullwidth&#34; :loc=&#34;loc&#34; :loc-txt=&#34;serverTxt&#34;  :selected-item=&#34;currentRegionId&#34; @onListItemClick=&#34;onServerChange&#34; menuPos=&#34;right&#34;&gt;
						&lt;template slot=&#34;dropdown&#34;&gt;
							&lt;li v-if=&#34;regions&#34; ref=&#34;items&#34; v-for=&#34;(g, idx) in regions&#34; :class=&#34;{ &#39;selected&#39; : currentRegionId === g.id }&#34; class=&#34;display-grid gap-1 align-items-center text_blue5 font-nunito regions-select&#34; @click=&#34;onServerChange(g.id)&#34;&gt;
								&lt;div class=&#34;f_row align-items-center&#34;&gt;
									&lt;icon v-show=&#34;currentRegionId === g.id&#34; name=&#34;ico-checkmark&#34; class=&#34;option-box-checkmark&#34;&gt;&lt;/icon&gt;
								&lt;/div&gt;
								&lt;div&gt;
									{{ loc[g.locKey ]}}
								&lt;/div&gt;
								&lt;div class=&#34;text-right&#34;&gt;
									{{ g.ping }}ms
								&lt;/div&gt;
							&lt;/li&gt;
						&lt;/template&gt;
					&lt;/ss-button-dropdown&gt;
					&lt;!-- &lt;button class=&#34;ss_button button_blue bevel_blue fullwidth&#34; @click=&#34;onServerClick&#34;&gt;{{ loc.server }}: {{ loc[serverLocKey] }}&lt;/button&gt; --&gt;
					&lt;button name=&#34;play&#34; @click=&#34;onPlayClick&#34; class=&#34;btn-3 f_row align-items-center gap-sm is-for-play ss_button btn_md text-uppercase font-sigmar fullwidth btn_green bevel_green margin-0&#34;&gt;{{ loc.p_privatematch_button }} &lt;icon class=&#34;fill-white shadow-filter&#34; name=&#34;ico-backToGame&#34;&gt;&lt;/icon&gt;&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      var comp_create_private_game_popup = {
        template: &#39;#create-private-game-template&#39;,
        props: [&#39;loc&#39;, &#39;regionLocKey&#39;, &#39;mapImgBasePath&#39;, &#39;isGameReady&#39;, &#39;gameTypeTxt&#39;, &#39;mapList&#39;, &#39;regions&#39;, &#39;currentRegionId&#39;, &#39;gameTypes&#39;, &#39;pickedGameType&#39;],

        mounted() {
            this.randomMap();
        },

        data: function() {
            return {
                showingRegionList: false,
                mapIdx: 0,
                playClickedBeforeReady: false,
                map: &#39;&#39;,
                mapLocKey: &#39;&#39;,
                mapImgPath: &#39;&#39;,
                mapNotFound: false,
                mapSearchResults: [],
                mapSearchResultsIdx: 0,
                mapSearchResultsMax: 5,
                mapSearchResultsMin: 0,
                mapSearchResultsShow: false,
                mapSearchIsFocused: false,
                mapKeyListners: &#39;&#39;,
                vueData,
            }
        },

        methods: {
            randomMap() {
                this.mapIdx = Math.randomInt(0, this.mapList.length);
                this.map = this.mapList[this.mapIdx];
                this.mapLocKey = this.map.locKey;
                this.mapImgPath = this.mapImgBasePath + this.map.filename + &#39;.png?&#39; + this.map.hash;
            },
            onRandomMapClick() {
                BAWK.play(&#39;ui_onchange&#39;);
                this.selectMapForPickedGameType(&#39;&#39;, true);
            },
            playSound(sound) {
                BAWK.play(sound);
            },

            onCloseClick: function() {
                this.$parent.close();
                BAWK.play(&#39;ui_popupclose&#39;);
            },

            onRegionChanged: function() {
                this.showingRegionList = true;
                this.$parent.toggle();
                vueApp.$refs.homeScreen.$refs.playPanel.$refs.pickRegionPopup.toggle();
                BAWK.play(&#39;ui_click&#39;);
            },

            onMapChange: function(dir) {
                this.selectMapForPickedGameType(dir);
                BAWK.play(&#39;ui_onchange&#39;);
            },

            selectMapForPickedGameType(dir, rnd) {
                let idx = this.mapIdx;

                let gameTypeShortName;

                for (var i = 0; i &lt; vueData.maps.length; i++) { // Prevent race condition
                    if (dir) idx = (idx + dir + vueData.maps.length) % vueData.maps.length;
                    if (rnd) idx = Math.randomInt(0, vueData.maps.length);
                    let map = vueData.maps[idx];
                    gameTypeShortName = vueData.gameTypeKeys[this.pickedGameType];

                    if (map.modes[gameTypeShortName]) {
                        break;
                    }
                    if (dir == 0) dir = 1
                    //idx = (idx + dir + vueData.maps.length) % vueData.maps.length;
                }

                console.log(&#39;Random map deets: &#39;, gameTypeShortName, vueData.maps[idx].modes[gameTypeShortName]);

                this.mapImgPath = this.mapImgBasePath + vueData.maps[idx].filename + &#39;.png?&#39; + vueData.maps[idx].hash;
                this.mapLocKey = vueData.maps[idx].locKey;
                this.mapIdx = idx;
            },

            onKeyDownMapSelect() {
                document.addEventListener(&#39;keydown&#39;, this.handleKeydown, true);
            },

            handleKeydown(e) {
                const keyName = e.key;
                switch (keyName) {
                    case &#39;ArrowRight&#39;:
                        this.onMapChange(1);
                        break;
                    case &#39;ArrowLeft&#39;:
                        this.onMapChange(-1);
                        break;
                    case &#39;ArrowDown&#39;:
                    case &#39;ArrowUp&#39;:
                        if (this.mapSearchIsFocused) return;
                        this.mapSearchIsFocused = true;
                        this.$refs.mapSearch.focus();
                    default:
                        break;
                }

            },

            removeKeydown() {
                this.mapSearchIsFocused = false;
                document.removeEventListener(&#39;keydown&#39;, this.handleKeydown, true);
            },

            onGameTypeChanged() {
                BAWK.play(&#39;ui_onchange&#39;);
                this.selectMapForPickedGameType(0);
            },

            onPlayTypeWhenSignInComplete() {
                return this.playClickFunction();
            },
            onPlaySentBeforeSignIn() {
                this.gameClickedBeforeReady = true;
                vueApp.showSpinner(&#39;signin_auth_title&#39;, &#39;signin_auth_msg&#39;);
            },
            onPlayClick: function() {
                this.removeKeydown();
                this.$parent.close();

                vueApp.externPlayObject(vueData.playTypes.createPrivate, this.pickedGameType, this.vueData.playerName, this.mapIdx, &#39;&#39;);
                BAWK.play(&#39;ui_playconfirm&#39;);
                vueApp.hideSpinner();
                Loader.hide();
            },
            onGameTypeChange(val) {
                // Not using a select here because it&#39;s not possible to style it so we have to update the game mode
                // manually. This is a bit of a hack but it works.
                this.pickedGameType = val;
                // Minor change here. Sending the game type to update global game type change this if we want.
                this.$emit(&#39;onGameTypeChange&#39;, this.pickedGameType);
                this.selectMapForPickedGameType(0);
            },
            onMapChangeClick(idx) {
                if (idx &gt;= 0) {
                    for (var i = 0; i &lt; this.mapList.length; i++) { // Prevent race condition
                        let map = this.mapList[idx];
                        let gameTypeShortName = vueData.gameTypeKeys[this.pickedGameType];

                        if (map.modes[gameTypeShortName]) {
                            break;
                        }
                    }
                    this.mapImgPath = this.mapImgBasePath + this.mapList[idx].filename + &#39;.png?&#39; + this.mapList[idx].hash;
                    this.mapLocKey = this.mapList[idx].locKey;
                    this.mapIdx = idx;
                    BAWK.play(&#39;ui_onchange&#39;);
                }
            },
            onServerChange(val) {
                this.$emit(&#39;onRegionPicked&#39;, val);
            },
            onMapSerachKeyup(e) {
                if (this.$refs.mapSearch.value.length &gt;= 1) {
                    this.mapSearchResultsShow = true;
                    this.mapSearchResults = this.mapList.filter((map, idx) =&gt; {
                        if (map.name.toLowerCase().replace(/[^a-zA-Z ]/g, &#34;&#34;).startsWith(this.$refs.mapSearch.value.toLowerCase())) {
                            if (map.modes[vueData.gameTypeKeys[this.pickedGameType]]) {
                                if (!this.mapSearchResults.some(map =&gt; idx === map.id)) {
                                    return true;
                                }
                                return false;
                            }
                        } else {
                            return false;
                        }
                    });
                    if (!this.mapSearchResults.length) {
                        this.mapNotFound = true;
                    }
                } else {
                    this.mapSearchResults.length = 0;
                    this.mapSearchResultsShow = false;
                    this.mapNotFound = false;
                }

                if (this.mapSearchResults.length === 1) {
                    this.onMapChangeClick(this.mapList.findIndex(m =&gt; m.filename === this.mapSearchResults[0].filename));
                    this.mapSearchResultsShow = false;
                    this.mapNotFound = false;
                }
            },
            onMapSearchReset() {
                this.$refs.mapSearch.value = &#39;&#39;;
                this.mapSearchResultsShow = false;
                this.mapSearchResults.length = 0;
                this.mapNotFound = false;
                this.mapSearchIsFocused = false;
            },
            onMapSearchResultClick(map) {
                this.onMapSearchReset();
                this.onMapChangeClick(this.mapList.findIndex(m =&gt; m.filename === map.filename));
            },
            onBlurSearhFocus() {
                this.mapSearchIsFocused = false;
            }
        },
        computed: {
            serverTxt() {
                let name = &#39;&#39;;
                if (hasValue(this.regions) &amp;&amp; hasValue(this.currentRegionId)) {
                    name = this.regions.filter(s =&gt; s.id === this.currentRegionId)[0].locKey;
                }
                return {
                    title: this.loc.p_servers_title,
                    subTitle: this.loc[name]
                }
            },
            mapSizeIcon() {
                if (this.mapList[this.mapIdx].numPlayers &lt;= 13) {
                    return &#39;ico-map-size-small&#39;;
                } else if (this.mapList[this.mapIdx].numPlayers &gt;= 14 &amp;&amp; this.mapList[this.mapIdx].numPlayers &lt;= 17) {
                    return &#39;ico-map-size-med&#39;;
                } else if (this.mapList[this.mapIdx].numPlayers &gt; 17) {
                    return &#39;ico-map-size-large&#39;;
                }
            }
        },
        watch: {
            isGameReady(val) {
                if (this.gameClickedBeforeReady &amp;&amp; val) {
                    setTimeout(() =&gt; this.onPlayClick(), 700);
                }
            }
        }
    };
    </script>
    <!-- Main Account Panel Template -->
    <script id="account-panel-template" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
        &lt;div v-if=&#34;!playClicked&#34;&gt;
            &lt;account-header 
                :current-screen=&#34;normalizedCurrentScreen&#34; 
                :screens=&#34;screens&#34;
                :show-corner-buttons=&#34;showCornerButtons&#34;
                :egg-balance=&#34;eggBalance&#34;
                :is-anonymous=&#34;isAnonymous&#34;
                :account-btn-text=&#34;accountBtnText&#34;
                :account-btn-class=&#34;accountBtnCls&#34;
                :is-not-signed-in=&#34;isNotSignedIn&#34;
                :show-not-in-game=&#34;showNotInGame&#34;
                :sign-in-button-visibility=&#34;signInButtonVisibility&#34;
                :is-private-game=&#34;isPrivateGame&#34;
                :show-share-link-button=&#34;showShareLinkButton&#34;
                :is-crazy-games=&#34;isCrazyGames&#34;
                :crazy-games-active=&#34;crazyGamesActive&#34;
                :cg-user-btn-text=&#34;cgUserBtnText&#34;
                :cg-profile-picture-url=&#34;cgProfilePictureUrl&#34;
                :is-crazy-games-linked=&#34;isCrazyGamesLinked&#34;
                :loc=&#34;loc&#34;
                @egg-store-click=&#34;handleEggStoreClick&#34;
                @account-btn-click=&#34;handleAccountBtnClick&#34;
                @crazy-games-link-click=&#34;handleCrazyGamesLinkClick&#34;
                @game-options-click=&#34;handleGameOptionsClick&#34;
                @tutorial-click=&#34;handleTutorialClick&#34;
                @share-link-click=&#34;handleShareLinkClick&#34;
                @settings-click=&#34;handleSettingsClick&#34;
                @fullscreen-click=&#34;handleFullscreenClick&#34;
            /&gt;
        &lt;/div&gt;
    &lt;/transition&gt;
    </script>
    <!-- Account Header Sub-component -->
    <script id="account-header-template" type="text/x-template">
      &lt;div id=&#34;account_top&#34; class=&#34;f_row f_end_only account-wrapper align-items-center&#34;&gt;
        &lt;event-panel 
            v-if=&#34;hasEventPanel&#34;
            v-show=&#34;showCornerButtons&#34; 
            :current-screen=&#34;currentScreen&#34; 
            :screens=&#34;screens&#34;
        /&gt;
        
        &lt;egg-counter
            :egg-balance=&#34;eggBalance&#34;
            :is-anonymous=&#34;isAnonymous&#34;
            :title=&#34;loc.account_title_eggshop || &#39;&#39;&#34;
            @click=&#34;$emit(&#39;egg-store-click&#39;)&#34;
        /&gt;
        
        &lt;crazy-games-button
            v-if=&#34;crazyGamesActive &amp;&amp; showCornerButtons&#34;
            :text=&#34;cgUserBtnText&#34;
            :img=&#34;cgProfilePictureUrl&#34;
            :is-linked=&#34;isCrazyGamesLinked&#34;
            @click=&#34;$emit(&#39;crazy-games-link-click&#39;)&#34;
        /&gt;
        
        &lt;account-status-button
            v-show=&#34;signInButtonVisibility&#34;
            :text=&#34;accountBtnText&#34;
            :class-name=&#34;accountBtnClass&#34;
            :is-not-signed-in=&#34;isNotSignedIn&#34;
            @click=&#34;$emit(&#39;account-btn-click&#39;)&#34;
        /&gt;
        
        &lt;corner-buttons
            v-show=&#34;showCornerButtons&#34;
            :is-private-game=&#34;isPrivateGame&#34;
            :show-not-in-game=&#34;showNotInGame&#34;
            :sign-in-button-visibility=&#34;signInButtonVisibility&#34;
            :current-screen=&#34;currentScreen&#34;
            :screens=&#34;screens&#34;
            :show-share-link-button=&#34;showShareLinkButton&#34;
            :crazy-games-active=&#34;crazyGamesActive&#34;
            :is-crazy-games=&#34;isCrazyGames&#34;
            :loc=&#34;loc&#34;
            @game-options-click=&#34;$emit(&#39;game-options-click&#39;)&#34;
            @tutorial-click=&#34;$emit(&#39;tutorial-click&#39;)&#34;
            @share-link-click=&#34;$emit(&#39;share-link-click&#39;)&#34;
            @settings-click=&#34;$emit(&#39;settings-click&#39;)&#34;
            @fullscreen-click=&#34;$emit(&#39;fullscreen-click&#39;)&#34;
        /&gt;
    &lt;/div&gt;
    </script>
    <!-- Egg Counter Sub-component -->
    <script id="egg-counter-template" type="text/x-template">
      &lt;div 
        class=&#34;account_eggs roundme_sm clickme f_row align-items-center&#34; 
        :title=&#34;title&#34;
        @click=&#34;handleClick&#34;
    &gt;
        &lt;div class=&#34;box_relative&#34;&gt;
            &lt;img 
                :src=&#34;iconSrc&#34; 
                class=&#34;egg_icon&#34;
                alt=&#34;Golden Egg Icon&#34;
            &gt;
        &lt;/div&gt;
        &lt;div ref=&#34;eggCounter&#34; class=&#34;egg_count_container&#34; :class=&#34;{&#39;has_egg_count_total&#39;: formattedBalance.showTotal}&#34;&gt;
            &lt;span class=&#34;egg_count egg_count_formatted&#34; :title=&#34;formattedBalance.eggBalance&#34;&gt;{{ formattedBalance.formattedBalance }}&lt;/span&gt;
            &lt;span v-if=&#34;formattedBalance.showTotal&#34; class=&#34;egg_count egg_count_total&#34;&gt;{{ formattedBalance.eggBalance }}&lt;/span&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    </script>
    <!-- Account Status Button Sub-component -->
    <script id="account-status-button-template" type="text/x-template">
      &lt;button 
        :class=&#34;buttonClasses&#34;
        class=&#34;ss_button btn-account-status font-sigmar align-items-center text-center justify-content-center&#34;
        @click=&#34;$emit(&#39;click&#39;)&#34;
    &gt;
        &lt;span v-if=&#34;!isNotSignedIn&#34;&gt;
            &lt;icon name=&#34;ico-vip&#34;&gt;&lt;/icon&gt;
        &lt;/span&gt;
        {{ text }}
    &lt;/button&gt;
    </script>
    <!-- Corner Buttons Sub-component -->
    <script id="corner-buttons-template" type="text/x-template">
      &lt;div id=&#34;corner-buttons&#34; class=&#34;f_row f_end_only align-items-center&#34;&gt;
        &lt;button 
            v-if=&#34;isPrivateGame &amp;&amp; !showNotInGame&#34; 
            class=&#34;ss_button btn_blue bevel_blue box_relative pause-screen-ui btn-account-w-icon text-shadow-none text_blue1&#34; 
            :title=&#34;getLocValue(&#39;p_privateoptions_button&#39;)&#34;
            @click=&#34;$emit(&#39;game-options-click&#39;)&#34;
        &gt;
            &lt;icon name=&#34;ico-private-game-config&#34; class=&#34;icon-md svg-icon&#34;&gt;&lt;/icon&gt;
        &lt;/button&gt;
        
        &lt;button 
            v-show=&#34;isGameScreen&#34;
            class=&#34;ss_button btn_blue bevel_blue box_relative pause-screen-ui btn-account-w-icon text-shadow-none text_blue1&#34; 
            :title=&#34;getLocValue(&#39;tutorial_title&#39;)&#34;
            @click=&#34;$emit(&#39;tutorial-click&#39;)&#34;
        &gt;
            &lt;i class=&#34;fas fa-question&#34;&gt;&lt;/i&gt;
        &lt;/button&gt;
        
        &lt;button 
            v-show=&#34;showShareLinkButton&#34;  
            class=&#34;ss_button btn_blue bevel_blue box_relative pause-screen-ui btn-account-w-icon text-shadow-none text_blue1&#34; 
            :title=&#34;getLocValue(&#39;p_pause_sharelink&#39;)&#34;
            @click=&#34;$emit(&#39;share-link-click&#39;)&#34;
        &gt;
            &lt;i :class=&#34;shareIcon&#34;&gt;&lt;/i&gt;
        &lt;/button&gt;
        
        &lt;button 
            class=&#34;ss_button btn_blue bevel_blue box_relative pause-screen-ui btn-account-w-icon text-shadow-none text_blue1&#34; 
            :title=&#34;getLocValue(&#39;account_title_settings&#39;)&#34;
            @click=&#34;$emit(&#39;settings-click&#39;)&#34;
        &gt;
            &lt;i :class=&#34;settingsIcon&#34;&gt;&lt;/i&gt;
        &lt;/button&gt;

        &lt;button
            v-if=&#34;!crazyGamesActive&#34;
            class=&#34;ss_button btn_blue bevel_blue box_relative pause-screen-ui btn-account-w-icon text-shadow-none text_blue1&#34; 
            :title=&#34;getLocValue(&#39;account_title_fullscreen&#39;)&#34;
            @click=&#34;$emit(&#39;fullscreen-click&#39;)&#34;
        &gt;
            &lt;icon name=&#34;ico-fullscreen&#34; class=&#34;btn-fullscreen&#34;&gt;&lt;/icon&gt;
        &lt;/button&gt;
    &lt;/div&gt;
    </script>
    <!-- Crazy Games Button Sub-component -->
    <script id="crazy-games-button-template" type="text/x-template">
      &lt;button 
        class=&#34;width-auto ss_button btn_yolk btn-account-status ss_button_cg_user display-grid gap-1 text-left grid-column-auto-1 align-items-center justify-content-center&#34; 
        @click=&#34;$emit(&#39;click&#39;)&#34;
    &gt;
        &lt;img v-if=&#34;text.img&#34; :src=&#34;text.img&#34; alt=&#34;Crazy Games Profile Picture&#34; class=&#34;icon-md svg-icon&#34;&gt;
        &lt;div&gt;
            &lt;span&gt;{{ text.text }}&lt;/span&gt;
            &lt;span v-show=&#34;!text.isLinked &amp;&amp; text.isLoggedIn&#34; class=&#34;display-block font-size-lg&#34;&gt;Link to Shell Shockers&lt;/span&gt;
            &lt;span v-show=&#34;text.isLinked&#34; class=&#34;display-block font-size-lg&#34;&gt;Linked to Shell Shockers&lt;/span&gt;
        &lt;/div&gt;
    &lt;/button&gt;
    </script>
    <script>
      // Constants for better maintainability
    const CONSTANTS = {
        EGG_SHAKE_DURATION: 300,
        LOCAL_STORAGE_KEY: &#39;localLoadOut&#39;,
        ANALYTICS: {
            CATEGORY: &#39;header-buttons&#39;,
            ACTION: &#39;click&#39;
        },
        SCREENS: {
            GAME: &#39;game&#39;,
            HOME: &#39;home&#39;,
            EQUIP: &#39;equip&#39;
        }
    };

    // Type conversion utilities
    const typeUtils = {
        // Convert various truthy/falsy values to boolean
        toBoolean(value) {
            if (typeof value === &#39;boolean&#39;) return value;
            if (typeof value === &#39;number&#39;) return value !== 0;
            if (typeof value === &#39;string&#39;) return value !== &#39;&#39; &amp;&amp; value !== &#39;0&#39; &amp;&amp; value.toLowerCase() !== &#39;false&#39;;
            return Boolean(value);
        },

        // Convert various values to string
        toString(value) {
            if (value === null || value === undefined) return &#39;&#39;;
            return String(value);
        },

        // Convert to number with fallback
        toNumber(value, fallback = 0) {
            const num = Number(value);
            return isNaN(num) ? fallback : num;
        }
    };

    // Utility functions for defensive programming
    const safeGlobal = {
        get vueApp() {
            if (typeof window !== &#39;undefined&#39; &amp;&amp; window.vueApp) {
                return window.vueApp;
            }
            return null;
        },

        get extern() {
            if (typeof window !== &#39;undefined&#39; &amp;&amp; window.extern) {
                return window.extern;
            }
            return null;
        },

        get BAWK() {
            if (typeof window !== &#39;undefined&#39; &amp;&amp; window.BAWK) {
                return window.BAWK;
            }
            return {
                play: () =&gt; {}
            }; // Safe fallback
        },

        get ga() {
            if (typeof window !== &#39;undefined&#39; &amp;&amp; window.ga) {
                return window.ga;
            }
            return () =&gt; {}; // Safe fallback
        },

        get isFromEU() {
            if (typeof window !== &#39;undefined&#39;) {
                return Boolean(window.isFromEU);
            }
            return false;
        }
    };

    // Local storage utility with error handling
    const localStorageUtil = {
        getItem(key) {
            try {
                if (typeof localStorage === &#39;undefined&#39;) return null;
                const item = localStorage.getItem(key);
                return item ? JSON.parse(item) : null;
            } catch (error) {
                console.error(&#39;Error reading from localStorage:&#39;, error);
                return null;
            }
        },

        setItem(key, value) {
            try {
                if (typeof localStorage === &#39;undefined&#39;) return false;
                localStorage.setItem(key, JSON.stringify(value));
                return true;
            } catch (error) {
                console.error(&#39;Error writing to localStorage:&#39;, error);
                return false;
            }
        }
    };

    // Safe component checker
    const componentChecker = {
        isAvailable(componentName) {
            try {
                return typeof window !== &#39;undefined&#39; &amp;&amp;
                    typeof window[componentName] !== &#39;undefined&#39;;
            } catch (error) {
                return false;
            }
        }
    };

    // Egg Counter Component
    const EggCounterComponent = {
        template: &#39;#egg-counter-template&#39;,
        props: {
            eggBalance: {
                type: Number,
                default: 0,
                validator: value =&gt; !isNaN(value) &amp;&amp; value &gt;= 0
            },
            isAnonymous: {
                type: Boolean,
                default: true
            },
            title: {
                type: String,
                default: &#39;&#39;
            }
        },
        computed: {
            iconSrc() {
                return this.isAnonymous ?
                    &#39;img/svg/ico_goldenEgg_callout.svg&#39; :
                    &#39;img/svg/ico_goldenEgg.svg&#39;;
            },
            formattedBalance() {
                // Add number formatting for large values
                try {
                    const num = this.eggBalance;

                    if (num &lt; 1000) {
                        return {
                            formattedBalance: num.toString(),
                            eggBalance: Number(num).toLocaleString(),
                            showTotal: false
                        };
                    }

                    const units = [&#39;k&#39;, &#39;M&#39;, &#39;B&#39;, &#39;T&#39;];
                    let unitIndex = 0;
                    let value = num / 1000;

                    while (value &gt;= 1000 &amp;&amp; unitIndex &lt; units.length - 1) {
                        value /= 1000;
                        unitIndex++;
                    }

                    // Show decimal only if under 10 in the current unit
                    return {
                        formattedBalance: (value &lt; 10 ? value.toFixed(1) : Math.floor(value)) + units[unitIndex],
                        eggBalance: Number(num).toLocaleString(),
                        showTotal: num &gt; 999
                    };
                } catch (error) {
                    return {
                        formattedBalance: String(this.eggBalance),
                        eggBalance: Number(this.eggBalance).toLocaleString(),
                        showTotal: this.eggBalance &gt; 999
                    };
                }
            }
        },
        methods: {
            handleClick() {
                this.$emit(&#39;click&#39;);
            },
            shake() {
                const counter = this.$refs.eggCounter;
                if (!counter) return;

                counter.classList.add(&#39;egg-shake&#39;);
                setTimeout(() =&gt; {
                    if (counter &amp;&amp; counter.classList) {
                        counter.classList.remove(&#39;egg-shake&#39;);
                    }
                }, CONSTANTS.EGG_SHAKE_DURATION);
            }
        }
    };

    // Account Status Button Component
    const AccountStatusButtonComponent = {
        template: &#39;#account-status-button-template&#39;,
        props: {
            text: {
                type: String,
                default: &#39;&#39;
            },
            className: {
                type: String,
                default: &#39;&#39;
            },
            isNotSignedIn: {
                type: Boolean,
                default: false
            }
        },
        computed: {
            buttonClasses() {
                return this.className;
            }
        }
    };

    // Corner Buttons Component
    const CornerButtonsComponent = {
        template: &#39;#corner-buttons-template&#39;,
        props: {
            isPrivateGame: {
                type: Boolean,
                default: false
            },
            showNotInGame: {
                type: Boolean,
                default: false
            },
            signInButtonVisibility: {
                type: Boolean,
                default: true
            },
            currentScreen: {
                type: String,
                default: &#39;&#39;
            },
            screens: {
                type: Object,
                default: () =&gt; CONSTANTS.SCREENS
            },
            showShareLinkButton: {
                type: Boolean,
                default: false
            },
            crazyGamesActive: {
                type: Boolean,
                default: false
            },
            loc: {
                type: Object,
                default: () =&gt; ({})
            }
        },
        computed: {
            shareIcon() {
                const vueData = safeGlobal.vueApp?.vueData;
                return vueData?.icon?.invite || &#39;fas fa-user-friends&#39;;
            },
            settingsIcon() {
                const vueData = safeGlobal.vueApp?.vueData;
                return vueData?.icon?.settings || &#39;fas fa-cog&#39;;
            },
            isGameScreen() {
                return Number(this.currentScreen) === Number(this.screens.game);
            }
        },
        methods: {
            getLocValue(key) {
                return this.loc[key] || &#39;&#39;;
            }
        }
    };

    // Crazy Games Button Component
    const CrazyGamesButtonComponent = {
        template: &#39;#crazy-games-button-template&#39;,
        props: {
            text: {
                type: Object,
                default: () =&gt; ({
                    text: &#39;&#39;,
                    img: &#39;&#39;,
                    isLinked: false,
                    isLoggedIn: false
                })
            },
            img: {
                type: String,
                default: &#39;&#39;
            },
            isLinked: {
                type: [Boolean, String],
                default: &#39;&#39;
            }
        },
    };

    // Account Header Component
    const AccountHeaderComponent = {
        template: &#39;#account-header-template&#39;,
        components: {
            &#39;egg-counter&#39;: EggCounterComponent,
            &#39;account-status-button&#39;: AccountStatusButtonComponent,
            &#39;corner-buttons&#39;: CornerButtonsComponent,
            &#39;crazy-games-button&#39;: CrazyGamesButtonComponent
        },
        props: {
            currentScreen: {
                type: String,
                default: &#39;&#39;
            },
            screens: {
                type: Object,
                default: () =&gt; CONSTANTS.SCREENS
            },
            showCornerButtons: {
                type: Boolean,
                default: true
            },
            eggBalance: {
                type: Number,
                default: 0
            },
            isAnonymous: {
                type: Boolean,
                default: true
            },
            accountBtnText: {
                type: String,
                default: &#39;&#39;
            },
            accountBtnClass: {
                type: String,
                default: &#39;&#39;
            },
            isNotSignedIn: {
                type: Boolean,
                default: true
            },
            showNotInGame: {
                type: Boolean,
                default: false
            },
            signInButtonVisibility: {
                type: Boolean,
                default: true
            },
            isPrivateGame: {
                type: Boolean,
                default: false
            },
            showShareLinkButton: {
                type: Boolean,
                default: false
            },
            isCrazyGames: {
                type: Boolean,
                default: false
            },
            crazyGamesActive: {
                type: Boolean,
                default: false
            },
            cgUserBtnText: {
                type: Object,
                default: () =&gt; ({
                    text: &#39;&#39;,
                    img: &#39;&#39;,
                    isLinked: false,
                    isLoggedIn: false
                })
            },
            cgProfilePictureUrl: {
                type: String,
                default: &#39;&#39;
            },
            isCrazyGamesLinked: {
                type: [Boolean, String],
                default: &#39;&#39;
            },
            loc: {
                type: Object,
                default: () =&gt; ({})
            }
        },
        computed: {
            hasEventPanel() {
                return componentChecker.isAvailable(&#39;comp_events&#39;);
            }
        }
    };

    // Main Account Panel Component
    const comp_account_panel = {
        template: &#39;#account-panel-template&#39;,
        components: {
            &#39;language-selector&#39;: componentChecker.isAvailable(&#39;comp_language_selector&#39;) ? comp_language_selector : {},
            &#39;eggstore-notify&#39;: componentChecker.isAvailable(&#39;compEggStoreSaleNotify&#39;) ? compEggStoreSaleNotify : {},
            &#39;event-panel&#39;: componentChecker.isAvailable(&#39;comp_events&#39;) ? comp_events : {},
            &#39;account-header&#39;: AccountHeaderComponent
        },

        props: {
            loc: {
                type: Object,
                default: () =&gt; ({}),
                validator: value =&gt; value &amp;&amp; typeof value === &#39;object&#39;
            },
            firebaseId: {
                type: String,
                default: &#39;&#39;
            },
            eggs: {
                type: Number,
                default: 0,
                validator: value =&gt; !isNaN(value) &amp;&amp; value &gt;= 0
            },
            languages: {
                type: Array,
                default: () =&gt; []
            },
            selectedLanguageCode: {
                type: String,
                default: &#39;&#39;
            },
            isPaused: {
                type: Boolean,
                default: false
            },
            photoUrl: {
                type: String,
                default: &#39;&#39;
            },
            isAnonymous: {
                type: Boolean,
                default: true
            },
            isOfAge: {
                type: Boolean,
                default: false
            },
            showTargetedAds: {
                type: Boolean,
                default: false
            },
            showCornerButtons: {
                type: Boolean,
                default: true
            },
            ui: {
                type: Object,
                default: () =&gt; ({})
            },
            isEggStoreSale: {
                type: Boolean,
                default: false
            },
            sku: {
                type: String,
                default: &#39;&#39;
            },
            isSubscriber: {
                type: Boolean,
                default: false
            },
            isTwitch: {
                // Accept multiple types but convert to Boolean
                validator: () =&gt; true // Allow any type
            },
            currentLangOptions: {
                type: Object,
                default: () =&gt; ({})
            },
            currentScreen: {
                // Accept multiple types but convert to String
                validator: () =&gt; true // Allow any type
            },
            screens: {
                type: Object,
                default: () =&gt; CONSTANTS.SCREENS
            },
            isPrivateGame: {
                type: Boolean,
                default: false
            },
            playClicked: {
                type: Boolean,
                default: false
            },
            crazyGamesUser: {
                type: Object,
                default: () =&gt; ({
                    hasAccount: false,
                    hasLinked: false,
                    username: &#39;&#39;,
                    profilePictureUrl: &#39;&#39;,
                    userLoggedIn: false,
                    isAnonymous: true,
                })
            },
            crazyGamesActive: {
                type: Boolean,
                default: false
            },
        },

        data() {
            return {
                languageCode: this.selectedLanguageCode,
                eggBalance: typeUtils.toNumber(this.eggs, 0),
            };
        },

        created() {
            this.initializeEggBalance();
        },

        computed: {
            // Normalize props to correct types
            normalizedIsTwitch() {
                return typeUtils.toBoolean(this.isTwitch);
            },

            normalizedCurrentScreen() {
                return typeUtils.toString(this.currentScreen);
            },

            // Safe access to vueData
            vueData() {
                return safeGlobal.vueApp?.vueData || {};
            },

            showSignIn() {
                if (!safeGlobal.isFromEU) return true;
                return safeGlobal.isFromEU &amp;&amp; this.isOfAge &amp;&amp; this.showTargetedAds;
            },

            showShareLinkButton() {
                return this.showCornerButtons &amp;&amp; this.normalizedCurrentScreen == this.screens.game;
            },

            vipButtonText() {
                const extern = safeGlobal.extern;
                const isExpired = extern?.account?.upgradeIsExpired ?? true;
                return (this.isSubscriber &amp;&amp; !isExpired) ? &#39;&#39; : (this.loc.s_btn_txt_subscribe || &#39;&#39;);
            },

            showVipButton() {
                return this.normalizedCurrentScreen === this.screens.home ||
                    this.normalizedCurrentScreen === this.screens.equip;
            },

            isVipLive() {
                const extern = safeGlobal.extern;
                const isExpired = extern?.account?.upgradeIsExpired ?? true;
                return this.isSubscriber &amp;&amp; !isExpired;
            },

            accountBtnCls() {
                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    return &#39;btn_green bevel_green&#39;;
                } else {
                    return this.isSubscriber ?
                        &#39;btn_yolk bevel_yolk btn_vip width-auto vertical-align-middle&#39; :
                        &#39;btn_yolk bevel_yolk btn_vip vertical-align-middle&#39;;
                }
            },

            cgUserBtnText() {
                // Early exit if CrazyGames isn&#39;t active
                if (!this.crazyGamesActive) return undefined;

                const sdk = window?.crazySdk;

                // Early exit if SDK or user account system isn&#39;t available
                if (!sdk?.cgUserAccountAvailable) {
                    return this.createBaseState(this.loc.sign_in_cg_not_available);
                }

                // Get the current user from the SDK or what might have been set when user logs in after load
                const currentUser = sdk?.getCurrentUser() || this.crazyGamesUser;

                const localUser = this.crazyGamesUser;

                // Not logged into CrazyGames
                if (!currentUser?.username) {
                    return this.createBaseState(this.loc.sign_in_cg_not_logged_in);
                }

                // Logged into CrazyGames, but no Firebase account
                if (!this.firebaseId) {
                    return this.createBaseState(this.loc.sign_in_cg_not_logged_in_no_account);
                }

                // Has Firebase account but hasn&#39;t linked CrazyGames yet
                if (localUser?.hasAccount &amp;&amp; !localUser?.hasLinked) {
                    return this.createBaseState(this.loc.sign_in_link_cg);
                }

                // Fully linked account
                return {
                    text: currentUser.username || this.loc.sign_in_cg_linked,
                    img: currentUser.profilePictureUrl || &#39;img/crazy-games-logo.png&#39;,
                    isLinked: localUser?.hasLinked || false,
                    isLoggedIn: true
                };
            },

            isCrazyGamesLinked() {
                if (this.crazyGamesUser?.hasLinked) {
                    return this.loc.linked_with_crazygames;
                }
                return false;
            },

            cgProfilePictureUrl() {
                if (this.crazyGamesActive) {
                    const user = this.crazyGamesUser || {
                        hasAccount: false,
                        hasLinked: false,
                        username: &#39;&#39;,
                        profilePictureUrl: &#39;&#39;,
                        userLoggedIn: false,
                        isAnonymous: true,
                    };
                    return user?.profilePictureUrl || &#39;img/crazy-games-logo.png&#39;;
                }
                return &#39;&#39;;
            },

            accountBtnText() {
                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    return this.loc.sign_in || &#39;&#39;;
                } else {
                    return this.isSubscriber ? &#39;&#39; : (this.loc.s_btn_txt_subscribe || &#39;&#39;);
                }
            },

            isNotSignedIn() {
                return this.isAnonymous &amp;&amp; this.showSignIn;
            },

            showNotInGame() {
                const extern = safeGlobal.extern;
                return this.normalizedCurrentScreen !== this.screens.game &amp;&amp; !extern?.inGame;
            },

            signInButtonVisibility() {
                if (!this.showNotInGame) return false;

                if (this.crazyGamesActive) {

                    const providerData = firebase?.auth()?.currentUser?.providerData || [];

                    if (!this.isAnonymous &amp;&amp; providerData.length &gt; 0) {
                        return true;
                    } else {
                        if (!this.firebaseId) {
                            return false;
                        } else {
                            return this.crazyGamesUser?.hasLinked;
                        }
                    }

                }
                return true;
            },

            isGameOwner() {
                const extern = safeGlobal.extern;
                return extern?.isGameOwner ?? false;
            },

            isCrazyGames() {
                return !this.crazyGamesActive;
            }
        },

        watch: {
            eggs: {
                handler(newEggs) {
                    const normalizedEggs = typeUtils.toNumber(newEggs, 0);
                    if (normalizedEggs !== this.eggBalance) {
                        this.eggShake();
                        this.eggBalance = normalizedEggs;
                    }
                },
                immediate: true
            }
        },

        methods: {
            createBaseState(text) {
                return {
                    text: text,
                    img: &#39;img/crazy-games-logo.png&#39;,
                    isLinked: false,
                    isLoggedIn: false
                };
            },
            // Initialization
            initializeEggBalance() {
                const storage = localStorageUtil.getItem(CONSTANTS.LOCAL_STORAGE_KEY);
                if (storage &amp;&amp; typeof storage.balance === &#39;number&#39;) {
                    this.eggBalance = storage.balance;
                }
            },

            // Event handlers with defensive programming
            handleEggStoreClick() {
                const vueApp = safeGlobal.vueApp;
                if (!vueApp) return;

                if (vueApp.vueData?.showAdBlockerVideoAd) return;

                if (!vueApp?.firebaseId) {
                    if (vueApp.showGenericPopup) {
                        vueApp.showGenericPopup(
                            &#39;p_redeem_error_no_player_title&#39;,
                            &#39;p_redeem_error_no_player_content&#39;,
                            &#39;ok&#39;
                        );
                    }
                    return;
                }

                if (vueApp.openEquipSwitchTo &amp;&amp; vueApp.equipMode?.shop) {
                    vueApp.openEquipSwitchTo(vueApp.equipMode.shop);
                }
                safeGlobal.BAWK.play(&#39;ui_popupopen&#39;);
                this.gaSend(&#39;eggCount&#39;);
            },

            handleSettingsClick() {
                this.gaSend(&#39;openSettings&#39;);
                this.onSharedPopupOpen();
                const vueApp = safeGlobal.vueApp;
                if (vueApp?.showSettingsPopup) {
                    vueApp.showSettingsPopup();
                }
                safeGlobal.BAWK.play(&#39;ui_popupopen&#39;);
            },

            handleTutorialClick() {
                this.gaSend(&#39;openTutorial&#39;);
                const vueApp = safeGlobal.vueApp;
                if (vueApp?.onTutorialPopupClick) {
                    vueApp.onTutorialPopupClick();
                }
                safeGlobal.BAWK.play(&#39;ui_popupopen&#39;);
            },

            handleFullscreenClick() {
                this.gaSend(&#39;fullscreen&#39;);
                const extern = safeGlobal.extern;
                if (extern?.toggleFullscreen) {
                    extern.toggleFullscreen();
                }
                safeGlobal.BAWK.play(&#39;ui_click&#39;);
            },

            handleShareLinkClick() {
                this.gaSend(&#39;openShareLink&#39;);
                this.onSharedPopupOpen();
                const extern = safeGlobal.extern;
                if (extern?.inviteFriends) {
                    extern.inviteFriends();
                }
            },

            handleAccountBtnClick() {
                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    this.onSignInClicked();
                    return;
                } else {
                    this.onSubscriptionClick();
                }
            },

            handleGameOptionsClick() {
                this.gaSend(&#39;gameOptions&#39;, &#39;respawn-popup&#39;);
                const vueApp = safeGlobal.vueApp;
                if (vueApp?.onGameOptionsClick) {
                    vueApp.onGameOptionsClick();
                }
            },

            async handleCrazyGamesLinkClick() {
                if (!this.crazyGamesActive) return null;

                const cgAccountAvailable = await crazySdk.isUserAccountAvailable();

                console.log(&#39;handleCrazyGamesLinkClick cgAccountAvailable&#39;, cgAccountAvailable);

                if (cgAccountAvailable) {
                    const cgUser = await window.CrazyGames.SDK.user.getUser();
                    console.log(&#39;handleCrazyGamesLinkClick cgUser&#39;, cgUser);

                    if (!cgUser) {
                        safeGlobal.BAWK.play(&#39;ui_click&#39;);
                        safeGlobal.extern.showCrazyGamesAuthPrompt();
                        return;
                    }
                }

                const user = this.crazyGamesUser || {
                    hasAccount: false,
                    hasLinked: false,
                    username: &#39;&#39;,
                    profilePictureUrl: &#39;&#39;,
                    userLoggedIn: false,
                    isAnonymous: true,
                };
                const firebaseId = vueApp?.firebaseId;


                if (!firebaseId) {
                    safeGlobal.BAWK.play(&#39;ui_click&#39;);
                    extern.cgCreateAccount();
                    return;
                }

                if (user?.hasAccount &amp;&amp; !user?.hasLinked) {
                    vueApp.showLinkCgAccountPopup();
                    return;
                }

                if (user.hasAccount &amp;&amp; user?.hasLinked) {
                    vueApp.showCrazyGamesUserManagementPopup();
                    return;
                }

                // vueApp.showGenericPopup(&#39;player_not_found_title&#39;, &#39;player_not_found_desc&#39;, &#39;ok&#39;);
            },

            // Helper methods
            onSignInClicked() {
                const vueApp = safeGlobal.vueApp;
                if (vueApp?.setDarkOverlay) {
                    vueApp.setDarkOverlay(true);
                }
                this.$emit(&#39;sign-in-clicked&#39;);
            },

            onSubscriptionClick() {
                this.gaSend(&#39;openVipPopup&#39;);
                const vueApp = safeGlobal.vueApp;
                if (vueApp?.showSubStorePopup) {
                    vueApp.showSubStorePopup();
                }
            },
            eggShake() {
                this.$nextTick(() =&gt; {
                    // Find the egg counter component
                    const accountHeader = this.$children.find(child =&gt;
                        child.$options.components &amp;&amp; child.$options.components[&#39;egg-counter&#39;]
                    );

                    if (accountHeader) {
                        const eggCounter = accountHeader.$children.find(child =&gt;
                            child.$options === EggCounterComponent
                        );

                        if (eggCounter?.shake) {
                            eggCounter.shake();
                        }
                    }
                });
            },

            onSharedPopupOpen() {
                // Reserved for future popup handling logic
            },

            // Analytics with error handling
            gaSend(label, category = CONSTANTS.ANALYTICS.CATEGORY) {
                if (!label) return;

                try {
                    safeGlobal.ga(&#39;send&#39;, &#39;event&#39;, category, CONSTANTS.ANALYTICS.ACTION, label);
                } catch (error) {
                    console.warn(&#39;Analytics tracking failed:&#39;, error);
                }
            },
        },

    };
    </script>
    <script id="play-panel-template" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
			&lt;div v-if=&#34;!playClicked&#34; id=&#34;play-panel&#34; class=&#34;box_relative&#34;&gt;
				&lt;weapon-select-panel id=&#34;weapon_select&#34; class=&#34;justify-content-center centered_x&#34; :loc=&#34;loc&#34; :account-settled=&#34;isGameReady&#34; :current-class=&#34;currentClass&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34; :play-clicked=&#34;playClicked&#34; @changed-class=&#34;onChangedClass&#34;&gt;&lt;/weapon-select-panel&gt;
				&lt;div class=&#34;play-panel-btn-group display-grid grid-auto-flow-column gap-1 centered_x&#34;&gt;
					&lt;button @click=&#34;onJoinPrivateGameClick&#34; class=&#34;is-for-play ss_button btn_big btn_blue_light bevel_blue_light btn_play_w_friends display-grid align-items-center box_relative&#34;&gt;
						&lt;!-- &lt;img src=&#34;img/svg/ico_star_gold.svg&#34; class=&#34;icon-star top-left&#34;/&gt; --&gt;
						&lt;span&gt;{{ loc.p_privatematch_friends }}&lt;/span&gt;
					&lt;/button&gt;
					&lt;button @click=&#34;onPlayButtonClick&#34; class=&#34;is-for-play ss_button btn_big btn_green bevel_green play-button box_relative&#34; v-html=&#34;playBtn&#34;&gt;&lt;/button&gt;
					&lt;ss-button-dropdown :loc=&#34;loc&#34; :loc-txt=&#34;gameTypeTxt&#34; :list-items=&#34;gameTypes&#34; :selected-item=&#34;pickedGameType&#34; @onListItemClick=&#34;onGameTypeChange&#34; @dropdownOpen=&#34;onGameTypeBtnOpen&#34; @dropdownClosed=&#34;onGameTypeBtnClosed&#34; sort=&#34;order&#34;&gt;&lt;/ss-button-dropdown&gt;
				&lt;/div&gt;
				&lt;!-- Popup: Pick Region --&gt;
				&lt;large-popup id=&#34;pickRegionPopup&#34; ref=&#34;pickRegionPopup&#34; @popup-closed=&#34;onPickRegionPopupClosed&#34;&gt;
					&lt;template slot=&#34;header&#34;&gt;{{ loc.server }}&lt;/template&gt;
					&lt;template slot=&#34;content&#34;&gt;
						&lt;region-list-popup id=&#34;region_list_popup&#34; ref=&#34;regionListPopup&#34; v-if=&#34;(regionList.length &gt; 0)&#34; :loc=&#34;loc&#34; :regions=&#34;regionList&#34; :region-id=&#34;currentRegionId&#34; @region-picked=&#34;onRegionPicked&#34;&gt;&lt;/region-list-popup&gt;
					&lt;/template&gt;
				&lt;/large-popup&gt;
	
				&lt;!-- Popup: Join Private Game --&gt;
				&lt;large-popup id=&#34;joinPrivateGamePopup&#34; ref=&#34;joinPrivateGamePopup&#34; :class=&#34;joinOnlyCls&#34; :popup-model=&#34;home.joinPrivateGamePopup&#34; @popup-confirm=&#34;onJoinConfirmed&#34; :hide-cancel=&#34;true&#34; :hide-close=&#34;showCreateGameOnly&#34; @popup-closed=&#34;onCloseCreateGame&#34;&gt;
					&lt;template slot=&#34;content&#34;&gt;
						&lt;div class=&#34;&#34;&gt;
							&lt;div v-show=&#34;!joinUrlRequest&#34; class=&#34;play-panel-panels roundme_md&#34;&gt;
								&lt;create-private-game-popup id=&#34;createPrivateGame&#34; ref=&#34;createPrivateGame&#34; :loc=&#34;loc&#34; :region-loc-key=&#34;regionLocKey&#34; :is-game-ready=&#34;isGameReady&#34; :picked-game-type=&#34;pickedGameType&#34; :game-type-txt=&#34;gameTypeTxt&#34; :game-types=&#34;gameTypes&#34; @onGameTypeChange=&#34;onGameTypeChange&#34; @onRegionPicked=&#34;onRegionPicked&#34; map-img-base-path=&#34;maps/&#34; :mapList=&#34;maps&#34; :regions=&#34;regionList&#34; :currentRegionId=&#34;currentRegionId&#34;&gt;&lt;/create-private-game-popup&gt;
								&lt;div class=&#34;error_text shadow_red&#34; v-show=&#34;home.joinPrivateGamePopup.showInvalidCodeMsg&#34;&gt;{{ loc.p_game_code_blank }}&lt;/div&gt;
							&lt;/div&gt;
							&lt;div v-show=&#34;!showCreateGameOnly&#34; class=&#34;play-panel-panels play-panel-panels-join roundme_md&#34;&gt;
								&lt;div class=&#34;private-game-wrapper fullwidth&#34;&gt;
									&lt;div class=&#34;inner-wrapper&#34;&gt;
										&lt;header&gt;
											&lt;h1 class=&#34;nospace&#34;&gt;{{ loc.p_game_code_title }}&lt;/h1&gt;
										&lt;/header&gt;
										&lt;div class=&#34;display-grid grid-column-2-1 gap-sm&#34;&gt;
											&lt;input type=&#34;text&#34; class=&#34;ss_field fullwidth&#34; v-model=&#34;home.joinPrivateGamePopup.code&#34; v-bind:placeholder=&#34;loc.p_game_code_enter&#34; @focus=&#34;onJoinGameFocus&#34; v-on:keyup.enter=&#34;onJoinConfirmed&#34;&gt;
											&lt;button class=&#34;ss_button common-box-shadow ss_button_join&#34; @click=&#34;onJoinConfirmed&#34;&gt;{{ loc.p_game_code_title }}!&lt;/button&gt;
										&lt;/div&gt;
									&lt;/div&gt;
								&lt;/div&gt;
							&lt;/div&gt;
						&lt;/div&gt;
					&lt;/template&gt;
	
					&lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
					&lt;template slot=&#34;confirm&#34;&gt;{{ loc.confirm }}&lt;/template&gt;
				&lt;/large-popup&gt;
	
				&lt;small-popup id=&#34;showGameModePopup&#34; ref=&#34;showGameModePopup&#34; @popup-confirm=&#34;onGameModePopupConfirm&#34;&gt;
					&lt;template slot=&#34;header&#34;&gt;Game Mode&lt;/template&gt;
					&lt;template slot=&#34;content&#34;&gt;
					&lt;div class=&#34;select-box-wrap&#34;&gt;
						&lt;label for=&#34;create-select-type&#34; class=&#34;ss_button btn_yolk bevel_yolk&#34;&gt;&lt;i class=&#34;fas fa-chevron-down&#34;&gt;&lt;/i&gt;&lt;/label&gt;
						&lt;select id=&#34;create-select-type&#34; name=&#34;gameType&#34; v-model=&#34;pickedGameType&#34; class=&#34;ss_select select&#34; @change=&#34;onGameTypeChange($event)&#34;&gt;
							&lt;option v-for=&#34;g in gameTypes&#34; v-bind:value=&#34;g.value&#34; :class=&#34;&#39;game-select-&#39; + g.locKey&#34; v-html=&#34;loc[g.locKey]&#34;&gt;&lt;/option&gt;
						&lt;/select&gt;
					&lt;/div&gt;
					&lt;/template&gt;
					&lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
					&lt;template slot=&#34;confirm&#34;&gt;{{ loc.confirm }}&lt;/template&gt;
				&lt;/small-popup&gt;
			&lt;/div&gt;
		&lt;/transition&gt;
    </script>
    <script id="region-list-template" type="text/x-template">
      &lt;div&gt;
        &lt;h1 class=&#34;roundme_sm&#34;&gt;{{ loc.p_servers_title }}&lt;/h1&gt;
		{{ regions }} - {{ regionId }}
        &lt;div v-for=&#34;r in regions&#34; :key=&#34;r.id&#34;&gt;
            &lt;div id=&#34;region_list_item&#34;&gt;
                &lt;input type=&#34;radio&#34; :id=&#34;(&#39;rb_&#39; + r.id)&#34; name=&#34;pickRegion&#34; v-bind:value=&#34;r.id&#34; v-model=&#34;regionId&#34; @click=&#34;BAWK.play(&#39;ui_onchange&#39;)&#34;&gt;
                &lt;label :for=&#34;(&#39;rb_&#39; + r.id)&#34; class=&#34;regionName&#34;&gt;{{ getLockText }} &lt;/label&gt;
                &lt;label :for=&#34;(&#39;rb_&#39; + r.id)&#34; class=&#34;regionPingWrap roundme_sm&#34;&gt;
                    &lt;span class=&#34;pingBar&#34; :class=&#34;barColorClass(r)&#34; :style=&#34;barStyle(r)&#34;&gt;&lt;/span&gt;
                &lt;/label&gt;
                &lt;label :for=&#34;(&#39;rb_&#39; + r.id)&#34; class=&#34;regionPingNumber ss_marginleft_lg&#34;&gt; {{ r.ping }}ms&lt;/label&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div id=&#34;btn_horizontal&#34; class=&#34;f_center&#34;&gt;
			&lt;button @click=&#34;onConfirmClick()&#34; class=&#34;ss_button btn_green bevel_green btn_sm&#34;&gt;{{ loc.ok }}&lt;/button&gt;
		&lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      var comp_region_list_popup = {
    template: &#39;#region-list-template&#39;,
    props: [&#39;loc&#39;, &#39;regions&#39;, &#39;regionId&#39;],

    data: function () {
        return {
            colorClasses: [&#39;greenPing&#39;, &#39;yellowPing&#39;,&#39;orangePing&#39;, &#39;redPing&#39;],
        }
    },

    methods: {
		playSound (sound) {
			BAWK.play(sound);
        },
        
        barColorClass: function (region) {
            var colorIdx = Math.min(3, Math.floor(region.ping / 150));
            return this.colorClasses[colorIdx];
        },

        barStyle: function (region) {
            return {
                width: (10 - Math.min(9, region.ping / 50)) + &#39;em&#39;
            }
        },

        onConfirmClick: function () {
            this.$emit(&#39;region-picked&#39;, this.regionId);
            this.$parent.close();
            BAWK.play(&#39;ui_playconfirm&#39;);
        }
    },
	computed: {
		getLockText() {
			return extern.getLocText(this.locKey);
		}
	}
};
    </script>
    <template id="weaponselect_panel_template" type="text/x-template">
      <div class="center_h ss_marginbottom_sm">
        <div v-show="showDesc" class="grid-span-column-all text-center align-items-center ss_marginbottom_sm">
          <h3 class="nospace text_blue8">
            {{ weapon.title }}
          </h3>
          <p class="nospace text_blue3">
            <i>            {{ weapon.desc }}
</i>
          </p>
        </div>
        <div :class="gridCls">
          <div class="nospace" @click="onWeaponSelect(charClass.Soldier)">
            <icon name="ico-weapon-soldier" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Soldier)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.Scrambler)">
            <icon name="ico-weapon-scrambler" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Scrambler)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.Ranger)">
            <icon name="ico-weapon-ranger" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Ranger)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.Eggsploder)">
            <icon name="ico-weapon-rpegg" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Eggsploder)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.Whipper)">
            <icon name="ico-weapon-whipper" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Whipper)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.Crackshot)">
            <icon name="ico-weapon-crackshot" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.Crackshot)">
            </icon>
          </div>
          <div class="nospace" @click="onWeaponSelect(charClass.TriHard)">
            <icon name="ico-weapon-trihard" class="weapon_img roundme_md" :cls="addSelectedCssClass(charClass.TriHard)">
            </icon>
          </div>
        </div>
        <div v-if="currentScreen == screens.game &amp;&amp; !disabler" class="grid-span-column-all text-center align-items-center ss_marginbottom_sm">
          <h3 class="nospace text_blue8">
            {{ weapon.title }}{{ selectedWeaponDisabled }}
          </h3>
          <p class="nospace text_blue3">
            <i>            {{ weapon.desc }}
</i>
          </p>
        </div>
      </div>
    </template>
    <script>
      var comp_weapon_select_panel = {
        template: &#39;#weaponselect_panel_template&#39;,
        props: [&#39;currentClass&#39;, &#39;loc&#39;, &#39;accountSettled&#39;, &#39;playClicked&#39;, &#39;currentScreen&#39;, &#39;screens&#39;, &#39;hideDesc&#39;, &#39;disabler&#39;],

        data: function() {
            return {
                charClass: CharClass
            }
        },

        methods: {
            onWeaponSelect: function(classIdx) {
                if (!extern.inGame &amp;&amp; (this.playClicked || (this.currentClass === classIdx))) {
                    return;
                } else {
                    if (this.$parent.$attrs.id !== &#39;game_screen&#39; &amp;&amp; !this.disabler) {
                        extern.changeClass(classIdx);
                        this.$emit(&#39;changed-class&#39;, classIdx);
                    } else if (this.disabler) {
                        if (!extern.isGameOwner) return;
                        vueApp.$nextTick(() =&gt; this.$forceUpdate());
                        this.$emit(&#39;weapon-toggled&#39;, classIdx);
                    } else {
                        if (!extern.GameOptions.value.weaponDisabled[classIdx]) {
                            extern.changeClass(classIdx);
                            this.$emit(&#39;changed-class&#39;, classIdx);
                        }
                    }
                    BAWK.play(&#39;ui_click&#39;);
                }
            },

            addSelectedCssClass: function(classIdx) {
                if (this.disabler) {
                    let classes = &#39;&#39;;

                    if (vueData.gameOptionsPopup.options.weaponDisabled &amp;&amp; vueData.gameOptionsPopup.options.weaponDisabled[classIdx]) {
                        classes += &#39;weapon_disabled &#39;;
                    }

                    if (!extern.isGameOwner) {
                        classes += &#39;interactive-disabled &#39;;
                    }

                    return classes;
                } else {
                    if (this.$parent.$attrs.id === &#39;game_screen&#39; &amp;&amp;
                        extern.GameOptions.value &amp;&amp;
                        extern.GameOptions.value.weaponDisabled[classIdx]
                    ) {
                        return &#39;weapon_disabled noclick&#39;;
                    } else if (this.currentClass === classIdx) {
                        return &#39;weapon_selected&#39;;
                    }
                }
                return &#39;&#39;;
            }
        },
        computed: {
            weapon() {
                let className = getKeyByValue(this.charClass, this.currentClass).toLowerCase();
                return {
                    title: this.loc[`weapon_${className}_title`],
                    desc: this.loc[`weapon_${className}_content`],
                }
            },
            selectedWeaponDisabled() {
                let weap = this.disabler ?
                    vueData.gameOptionsPopup.options.weaponDisabled :
                    extern.GameOptions.value.weaponDisabled;

                return weap[this.currentClass] ? ` (${this.loc[&#39;p_weapon_disabled&#39;]})` : &#39;&#39;;
            },

            isDisabled() {
                return this.disabled ? &#39;interactive-disabled&#39; : &#39;&#39;;
            },

            showDesc() {
                return !this.hideDesc &amp;&amp; this.currentScreen !== this.screens.game;
            },

            gridCls() {
                if (this.currentScreen === this.screens.game) {
                    return &#39;weapon-grid f_row f_wrap-wrap justify-content-center gap-sm&#39;;
                }
                return &#39;display-grid grid-auto-flow-column justify-content-around gap-sm&#39;;
            },

            containerCls() {
                return this.currentScreen === this.screens.game ? &#39;center_h&#39; : &#39;&#39;;
            }
        }
    };
    </script>
    <script>
      var comp_play_panel = {
        template: &#39;#play-panel-template&#39;,
        components: {
            &#39;create-private-game-popup&#39;: comp_create_private_game_popup,
            &#39;region-list-popup&#39;: comp_region_list_popup,
            &#39;weapon-select-panel&#39;: comp_weapon_select_panel,
        },

        props: [&#39;loc&#39;, &#39;playerName&#39;, &#39;gameTypes&#39;, &#39;currentGameType&#39;, &#39;regionList&#39;, &#39;currentRegionId&#39;, &#39;home&#39;, &#39;isGameReady&#39;, &#39;maps&#39;, &#39;currentClass&#39;, &#39;showScreen&#39;, &#39;screens&#39;, &#39;playClicked&#39;, &#39;languageCode&#39;],

        data: function() {
            return {
                pickedGameType: this.currentGameType,
                isButtonDisabled: true,
                playClickedBeforeReady: false,
                playClickFunction: Function,
                kotcPrompt: &#39;&#39;,
                typeSelect: &#39;&#39;,
                isPromptOpen: false,
                joinUrlRequest: false,
                showCreateGameOnly: false,
            }
        },

        methods: {
            onPickRegionButtonClick: function() {
                this.$refs.pickRegionPopup.toggle();
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onRegionPicked: function(regionId) {
                if (vueData.currentRegionId === regionId) {
                    return;
                }

                vueData.currentRegionId = regionId;
                extern.selectRegion(vueData.currentRegionId);
                BAWK.play(&#39;ui_onchange&#39;);
            },

            onPickRegionPopupClosed: function() {
                if (this.$refs.createPrivateGame.showingRegionList) {
                    this.$refs.createPrivateGame.showingRegionList = false;
                    this.$refs.createPrivateGamePopup.toggle();
                    this.$refs.createPrivateGame.onKeyDownMapSelect();
                }
            },

            onNameChange: function(event) {
                console.log(&#39;name changed to: &#39; + event.target.value);
                this.$emit(&#39;playerNameChanged&#39;, event.target.value);
            },

            onPlayerNameKeyUp: function(event) {
                event.target.value = extern.filterUnicode(event.target.value);
                event.target.value = extern.fixStringWidth(event.target.value);
                event.target.value = event.target.value.substring(0, 128);

                // Send username to server to start the game!
                if (event.code == &#34;Enter&#34; || event.keyCode == 13) {
                    if (vueData.playerName.length &gt; 0) {
                        vueApp.externPlayObject(vueData.playTypes.joinPublic, this.pickedGameType, this.playerName, -1, &#39;&#39;);
                    }
                }
            },
            onGameTypeBtnOpen() {
                if (this.isWinSizeSmall()) {
                    document.querySelector(&#39;.house-small&#39;).style.display = &#39;none&#39;;
                    vueApp.hideTitleScreenAd();
                }
            },
            onGameTypeBtnClosed() {
                if (this.isWinSizeSmall()) {
                    document.querySelector(&#39;.house-small&#39;).style.display = &#39;block&#39;;
                    vueApp.showTitleScreenAd();
                }
            },
            isWinSizeSmall() {
                var win = window,
                    doc = document,
                    docElem = doc.documentElement,
                    body = doc.getElementsByTagName(&#39;body&#39;)[0],
                    x = win.innerWidth || docElem.clientWidth || body.clientWidth,
                    y = win.innerHeight || docElem.clientHeight || body.clientHeight;
                // if (x &lt;= 1366 &amp;&amp; y &lt;= 768) {
                if (x &lt;= 1366) {
                    return true;
                }
                return false;
            },

            onGameTypeChange: function(event) {
                let type;
                if (event.target !== undefined) {
                    type = event.target.value;
                } else {
                    type = event;
                }

                this.pickedGameType = type;
                this.$emit(&#39;game-type-changed&#39;, this.pickedGameType);
                extern.selectGameType(this.pickedGameType);
                BAWK.play(&#39;ui_onchange&#39;);
            },
            onPlayTypeWhenSignInComplete() {
                return this.playClickFunction();
            },
            onPlaySentBeforeSignIn(callback) {
                this.gameClickedBeforeReady = true;
                vueApp.showSpinner(&#39;signin_auth_title&#39;, &#39;signin_auth_msg&#39;);
                this.playClickFunction = callback;
            },
            hasValidPlayerNameCheck() {
                console.log(&#39;invalid player name&#39;);
                vueApp.showGenericPopup(&#39;play_pu_name_title&#39;, &#39;play_pu_name_content&#39;, &#39;ok&#39;);
                vueApp.hideSpinner();
                return;
            },
            onPlayButtonClick: function() {
                // if (!hasValue(this.playerName)) {
                // 	this.hasValidPlayerNameCheck();
                // 	return;
                // }
                // if (!this.isGameReady) {
                // 	this.onPlaySentBeforeSignIn(this.onPlayButtonClick);
                // 	return;
                // }

                this.onCloseCreateGame();
                vueApp.game.respawnTime = 0;
                vueApp.externPlayObject(vueData.playTypes.joinPublic, this.pickedGameType, this.playerName, -1, &#39;&#39;);
                BAWK.play(&#39;ui_playconfirm&#39;);
            },

            onCloseCreateGame() {
                this.$refs.createPrivateGame.removeKeydown();
            },

            onJoinPrivateGameClickCrazyGames() {
                this.showCreateGameOnly = true;
                this.showJoinPrivateGamePopup(vueData.home.joinPrivateGamePopup.code);
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onJoinPrivateGameClick: function() {
                this.showJoinPrivateGamePopup(vueData.home.joinPrivateGamePopup.code);
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            showJoinPrivateGamePopup: function(showCode, urlRequest) {
                // The popup must be active before it will update; set code after showing

                this.joinUrlRequest = hasValue(urlRequest);
                this.$refs.joinPrivateGamePopup.show();
                this.$refs.createPrivateGame.onKeyDownMapSelect();

                vueData.home.joinPrivateGamePopup.code = showCode;
            },

            onJoinConfirmed: function() {
                if (!hasValue(this.playerName)) {
                    this.hasValidPlayerNameCheck();
                    return;
                }

                let code = vueData.home.joinPrivateGamePopup.code;
                let newCode = extern.parseJoinGameCode(code);

                vueData.home.joinPrivateGamePopup.code = newCode;

                this.$refs.joinPrivateGamePopup.hide();

                // checking if the invite code is being used since, we are only trying to determine
                extern.onJoinGameClick = true;
                vueApp.externPlayObject(vueData.playTypes.joinPrivate, &#39;&#39;, this.playerName, &#39;&#39;, newCode);
            },
            kotcAttachSetup() {
                const typePostion = this.typeSelect.getBoundingClientRect();
                const kotcPrompt = this.kotcPrompt.getBoundingClientRect();

                this.kotcPrompt.style.top = typePostion.top + &#39;px&#39;;
                this.kotcPrompt.style.left = typePostion.right + 16 + &#39;px&#39;;
            },

            anchorKotcPrompt() {
                this.$nextTick(() =&gt; this.kotcAttachSetup());
            },
            onGameTypeClick() {
                if (this.isPromptOpen) {
                    this.isPromptOpen = false;
                } else {
                    this.isPromptOpen = true;
                }
                // this.$refs.showGameModePopup.show();
            },
            onGameModePopupConfirm() {
                this.$refs.showGameModePopup.hide();
            },

            onJoinGameFocus() {
                this.$refs.createPrivateGame.removeKeydown();
            },
            onChangedClass() {
                vueApp.$refs.equipScreen.onChangedClass();
            }
        },

        computed: {
            regionLocKey: function() {
                if (!hasValue(this.regionList) || this.regionList.length === 0) {
                    return &#39;&#39;;
                }

                var region = this.regionList.find(r =&gt; {
                    return r.id == vueData.currentRegionId;
                });

                return hasValue(region) ? &#39;server_&#39; + region.id : &#39;&#39;;
            },
            regionName: function() {
                if (!hasValue(this.regionList) || this.regionList.length === 0) {
                    return &#39;N/A&#39;;
                }

                var region = this.regionList.find(r =&gt; {
                    return r.id == vueData.currentRegionId;
                });

                if (!region) return &#39;N/A&#39;;

                return this.loc[region.locKey] || region.id;
            },

            selectedGameType() {
                return this.loc[this.gameTypes.filter(el =&gt; el.value === this.pickedGameType)[0][&#39;locKey&#39;]];
            },
            gameTypeTxt() {
                return {
                    title: this.loc.stat_game_mode,
                    subTitle: this.loc[this.gameTypes.filter(el =&gt; el.value === this.pickedGameType)[0][&#39;locKey&#39;]]
                }
            },
            serverText() {
                return {
                    title: this.loc.p_servers_title,
                    subTitle: this.currentRegionId ? this.loc[`server_${this.currentRegionId}`] : &#39;&#39;,
                }
            },
            playBtn() {

                if (this.languageCode == &#39;de&#39; || this.languageCode == &#39;es&#39; || this.languageCode == &#39;pt&#39; || this.languageCode == &#39;nl&#39;) {
                    return `&lt;i class=&#34;fa fa-play fa-sm&#34;&gt;&lt;/i&gt; &lt;span&gt;${this.loc.home_play}&lt;/span&gt;`
                }
                return `&lt;i class=&#34;fa fa-play fa-sm&#34;&gt;&lt;/i&gt; ${this.loc.home_play}`;
            },
            joinOnlyCls() {
                return this.joinUrlRequest ? &#39;join-request-only&#39; : &#39;&#39;;
            }

        },
        watch: {
            currentGameType: function(val) {
                this.pickedGameType = val;
            },
            isGameReady(val) {
                this.isButtonDisabled = val ? false : true;
                if (this.gameClickedBeforeReady &amp;&amp; val) {
                    this.onPlayTypeWhenSignInComplete()
                }
            }
        }
    };
    </script>
    <script id="newsfeed-panel-template" type="text/x-template">
      &lt;section class=&#34;news-panel&#34;&gt;
		&lt;article v-if=&#34;items&#34; v-for=&#34;item in activeItems&#34; :key=&#34;item.id&#34; @click=&#34;onItemThatIsClicked(item)&#34; class=&#34;media-item news_item clickme&#34;&gt;
			&lt;img :src=&#34;imageSrc(item)&#34; class=&#34;news_img roundme_sm&#34;&gt;
			&lt;p&gt;{{ item.content }}&lt;/p&gt;
		&lt;/article&gt;
	&lt;/section&gt;
    </script>
    <script>
      var comp_newsfeed_panel = {
	template: &#39;#newsfeed-panel-template&#39;,
	props: [&#39;items&#39;],

	data: function () {
		return vueData;
	},

	// mounted: function () {
	// 	// this.fetchWebData();
	// 	this.checklocalForNewsData();
	// },

	methods: {
		imageSrc(item) {
			return dynamicContentPrefix + &#39;data/img/newsItems/&#39; + item.id + item.imageExt;
		},
		onItemThatIsClicked(item) {
			console.log(item);
			extern.clickedWebFeedItem(item);
			BAWK.play(&#39;ui_click&#39;);
		},
	},
	computed: {
		activeItems() {
			return this.items.filter(item =&gt; item.active);
		}
	}
};
    </script>
    <script id="chicken-panel-template" type="text/x-template">
      &lt;div id=&#34;showBuyPassDialogButton&#34; class=&#34;new&#34;&gt;
		&lt;div class=&#34;chicken-panel--upgraded&#34; v-show=&#34;doUpgraded &amp;&amp; !isSubscriber&#34;&gt;
			&lt;div class=&#34;tool-tip tool-tip--right&#34;&gt;
				&lt;span v-if=&#34;nugCounter&#34; id=&#34;nugget-countdown&#34;&gt;{{nugCounter}} Minutes remaining.&lt;/span&gt;
				&lt;img class=&#34;upgraded-nugget&#34; src=&#34;img/chicken-nugget/goldenNugget_static.webp&#34;&gt;
				&lt;!-- &lt;div id=&#34;nugget-timer&#34; class=&#34;nugget-timer--wrapper&#34;&gt;
					&lt;div class=&#34;timer-background&#34;&gt;&lt;/div&gt;
					&lt;div class=&#34;timer spinner&#34;&gt;&lt;/div&gt;
					&lt;div class=&#34;timer filler&#34;&gt;&lt;/div&gt;
					&lt;div class=&#34;mask&#34;&gt;&lt;/div&gt;
				&lt;/div&gt; --&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		
		&lt;div class=&#34;chicken-panel--no-upgraded&#34; v-show=&#34;!doUpgraded&#34;&gt;
			&lt;img src=&#34;img/chicken-nugget/starburst.webp&#34; @click=&#34;onChickenClick&#34; class=&#34;clickme starburst&#34;&gt;
			&lt;img src=&#34;img/chicken-nugget/goldenNuggetGIFWIP.gif&#34; @click=&#34;onChickenClick&#34; class=&#34;clickme nugget-chick&#34;&gt;
		
			&lt;div id=&#34;buyPassChickenSpeech&#34;&gt;
				&lt;img src=&#34;img/speechtail.webp&#34; class=&#34;buyPassChickenSpeechTail&#34;&gt;
				&lt;span v-html=&#34;loc.chicken_cta&#34;&gt;&lt;/span&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_chicken_panel = {
	template: &#39;#chicken-panel-template&#39;,
	props: [&#39;local&#39;, &#39;doUpgraded&#39;],
	data: function () {
		return vueData;
    },
	methods: {
		onChickenClick: function () {
			BAWK.play(&#39;ui_chicken&#39;);
			vueApp.showGoldChickenPopup();
			ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.purchases, &#39;Golden Chicken Click&#39;);
		},
	},
};
    </script>
    <script id="footer-links-panel-template" type="text/x-template">
      &lt;footer class=&#34;main-footer&#34;&gt;
		&lt;!-- &lt;section class=&#34;social-icons&#34;&gt;
			&lt;social-panel id=&#34;social_panel&#34; :loc=&#34;loc&#34; :is-poki=&#34;isPoki&#34; :use-social=&#34;selectedSocial&#34; :social-media=&#34;socialMedia&#34;&gt;&lt;/social-panel&gt;
		&lt;/section&gt; --&gt;
		&lt;section class=&#34;centered&#34;&gt;
			&lt;nav class=&#34;footer-nav text-center&#34;&gt;
				&lt;button @click=&#34;onChangelogClicked&#34; class=&#34;clickme ss_button_as_text&#34;&gt;{{ version }}&lt;/button&gt; | 
				&lt;!-- &lt;a href=&#34;https://shell-shockers.myshopify.com/collections/all&#34; target=&#34;_blank&#34; @click=&#34;BAWK.play(&#39;ui_click&#39;)&#34;&gt;{{ loc.footer_merchandise }}&lt;/a&gt; |  --&gt;
				&lt;button class=&#34;ss_button_as_text&#34; target=&#34;_blank&#34; @click=&#34;openInNewTab(&#39;https://www.bluewizard.com/privacypolicy&#39;)&#34;&gt;{{ loc.footer_privacypolicy }}&lt;/button&gt; | 
				&lt;button class=&#34;ss_button_as_text&#34; target=&#34;_blank&#34; @click=&#34;openInNewTab(&#39;https://bluewizard.com/terms/&#39;)&#34;&gt;{{ loc.footer_termsofservice }}&lt;/button&gt; | 
				&lt;button class=&#34;ss_button_as_text&#34; @click=&#34;onHelpClick&#34;&gt;{{ loc[&#39;account_title_faq&#39;] }}&lt;/button&gt; | 
				&lt;button class=&#34;ss_button_as_text&#34; target=&#34;_blank&#34; @click=&#34;openInNewTab(&#39;https://www.bluewizard.com&#39;)&#34;&gt;&amp;copy; 2026 &lt;img class=&#34;main-footer--logo-blue-wiz-mini&#34; src=&#34;img/blue-wizard-logo-tiny-min.webp&#34; :alt=&#34;loc.footer_bluewizard + &#39; logo&#39;&#34;&gt;&lt;span class=&#34;hideme&#34;&gt;{{ loc.footer_bluewizard }}&lt;/span&gt;&lt;/button&gt;
			&lt;/nav&gt;
		&lt;/section&gt;
	&lt;/footer&gt;
    </script>
    <script>
      var comp_footer_links_panel = {
	template: &#39;#footer-links-panel-template&#39;,
	props: [&#39;loc&#39;, &#39;version&#39;, &#39;isPoki&#39;, &#39;socialMedia&#39;, &#39;selectedSocial&#39;],

	methods: {
		onChangelogClicked: function () {
			vueApp.showChangelogPopup();
			BAWK.play(&#39;ui_popupopen&#39;);
		},
		playSound() {
			BAWK.play(&#39;ui_click&#39;);
		},
		onHelpClick() {
			vueApp.showHelpPopup();
			// this.gaSend(&#39;openHelp&#39;);
			BAWK.play(&#39;ui_popupopen&#39;);
		},
		openInNewTab(url) {
			window.open(url, &#39;_blank&#39;).focus();
			this.playSound();
		}
	}
};
    </script>
    <template id="comp-vip-cta">
      <transition name="fade">
        <div v-if="!playClicked" class="house-ad-wrapper">
          <div class="vip-club-cta" v-show="isVisible">
            <button v-if="!isSubscriber &amp;&amp; hasMobileReward &amp;&amp; showVip" class="vip-club-cta-pos ss_button btn_sm btn_pink bevel_pink" @click="onClicked">
              {{ loc.ui_game_playeractions_join_vip }}
            </button>
            <h4 v-if="isSubscriber &amp;&amp; showVip" class="sub-name">
              {{loc[subName]}}
            </h4>
            <img class="house-ad-img" :class="imgCls" :src="imgSrc" :alt="altText" @click="adOnClick" />
          </div>
          <div v-if="!isCrazyGames" class="ss_margintop box_relative">
            <a href="https://freegames.io/tag/bluewizard?utm_source=shellshockershomepage&amp;utm_medium=referral" target="_blank" title="Play Free Games on... well, freegames.io">            <img v-lazyload="" :data-src="portalImage" :alt="portalAltText" class="display-block center_h free-games-logo lazy-load" />
</a>
          </div>
        </div>
      </transition>
    </template>
    <script>
      const CompHouseAd = {
        template: &#39;#comp-vip-cta&#39;,
        props: [&#39;loc&#39;, &#39;upgradeName&#39;, &#39;isUpgraded&#39;, &#39;isSubscriber&#39;, &#39;hasMobileReward&#39;, &#39;isPoki&#39;, &#39;chwCount&#39;, &#39;chwReady&#39;, &#39;chwLimitReached&#39;, &#39;ad&#39;, &#39;crazyGamesActive&#39;, &#39;inGame&#39;, &#39;playClicked&#39;],
		data: function () {
            return {
				isVisible: true,
				portalImage: &#39;img/free-games-io2.webp&#39;,
				portalAltText: &#39;Free Games .io logo&#39;
			}
		},
		created() {
			crazyGamesHouseAdCheck = this;
		},
        methods: {
			adOnClick() {
				extern.clickedHouseLink(this.ad);
			},
        },
		computed: {
			imgSrc() {
				if (this.ad === null) {
					return;
				}
				return dynamicContentPrefix + &#39;data/img/art/&#39; + this.ad.id + this.ad.imageExt;
			},

			altText() {
				if (this.ad === null) {
					return;
				}
				return this.ad.id.label;
			},

			getImgSrcAlt() {
				if (this.useEventData) {
					return this.eventData.event[this.useEventData].alt;
				} else {
					if (!this.isPoki) {
							if (this.hasMobileReward) {
								return this.eventData.event.vipImgSrc.alt;
							} else {
								return this.eventData.event.mobile.alt;
							}
						}
				}
			},
			showVip() {
				return false;
				if (!this.hasPlayedKotc || !this.hasMobileReward || this.isBlackFryday) {
					return false;
				} else {
					return true;
				}
			},
			imgCls() {
				if (this.ad === null) {
					return;
				}
				return `${this.ad.label.replace(/\s+/g, &#39;-&#39;).toLowerCase()}-img`;
			},
			isCrazyGames() {
				return crazyGamesActive;
			}
		},
        watch: {
            upgradeName(val) {
                if (!hasValue(val)) {
                    return;
                }
                this.subName = `s-${val.replace(&#39; &#39;, &#39;-&#39;).toLowerCase().replace(&#39; &#39;, &#39;-&#39;)}-title`;
            },
			inGame(val) {
				if (val &amp;&amp; this.ad &amp;&amp; this.ad.linksTo === &#39;linksToCreateGame&#39;) {
					this.isVisible = false;
				} else {
					this.isVisible = true;
				}
			},
        }
    };
    </script>
    <script id="media-tabs-template" type="text/x-template">
      &lt;div&gt;		
		&lt;div class=&#34;media-tabs-wrapper box_relative border-blue5 roundme_sm bg_blue6 common-box-shadow ss_margintop_sm&#34;&gt;
			&lt;div class=&#34;media-tab-container display-grid align-items-center gap-sm bg_blue3&#34;&gt;
				&lt;h4 class=&#34;common-box-shadow text-shadow-black-40 text_white dynamic-text&#34;&gt;
					&lt;div class=&#34;dynamic-text&#34; style=&#34;width: 8em;&#34;&gt;&lt;div class=&#34;dynamic-text&#34;&gt;{{ tabName }}&lt;/div&gt;&lt;/div&gt;
					&lt;span v-if=&#34;currentTab === &#39;challenges-tab&#39;&#34;&gt;
						&lt;span v-if=&#34;hasChlgs&#34; class=&#34;text_yellow_bright font-nunito font-800 justify-self-end nospace&#34;&gt;&lt;span v-show=&#34;challengeDailyData.days&#34;&gt;D: {{ challengeDailyData.days }}&lt;/span&gt; &lt;span&gt;{{ challengeDailyData.hours }}&lt;/span&gt;:&lt;span&gt;{{ challengeDailyData.minutes }}&lt;/span&gt;:&lt;span&gt;{{ challengeDailyData.seconds }}&lt;/span&gt;&lt;/span&gt;
					&lt;/span&gt;
				&lt;/h4&gt;
				&lt;div class=&#34;display-grid grid-auto-flow-column gap-sm&#34;&gt;
					&lt;button v-for=&#34;(tab, idx) in mediaTabs&#34; :key=&#34;idx&#34; :id=&#34;tab.id&#34; @click=&#34;onTabClicked(tab.id)&#34; class=&#34;media-tab ss_smtab roundme_sm nospace&#34; :class=&#34;(currentTab === tab.id ? &#39;selected&#39; : &#39;&#39;)&#34;&gt;&lt;i :class=&#34;tab.icon&#34;&gt;&lt;/i&gt;&lt;/button&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class=&#34;media-tabs-content f_col&#34; :class=&#34;(currentTab === &#39;news-tab&#39; ? &#39;tab-news-active&#39; : &#39;&#39;)&#34;&gt;
				&lt;div class=&#34;tab-content&#34; :class=&#34;tabContentStyle&#34;&gt;
					&lt;div ref=&#34;newsContainer&#34; class=&#34;news-container f_row&#34; :class=&#34;newsContainerStyle&#34;&gt;
						&lt;player-challenge-list v-show=&#34;currentTab === &#39;challenges-tab&#39;&#34; :loc=&#34;loc&#34; :challenges=&#34;challenges&#34; :challenge-data=&#34;challengeDailyData&#34; :in-game=&#34;false&#34; @chlgReroll=&#34;challengeReroll&#34;&gt;&lt;/player-challenge-list&gt;
						&lt;!-- &lt;newsfeed-panel v-show=&#34;currentTab === &#39;news-tab&#39;&#34; id=&#34;news_scroll&#34; class=&#34;media-tab-scroll&#34; ref=&#34;newsScroll&#34; :items=&#34;newsItems	&#34;&gt;&lt;/newsfeed-panel&gt; --&gt;
						&lt;media-panel v-show=&#34;currentTab === &#39;news-tab&#39;&#34; id=&#34;news_scroll&#34; class=&#34;media-tab-scroll&#34; :items=&#34;news&#34; type=&#34;news&#34; :loc=&#34;loc&#34;&gt;&lt;/media-panel&gt;
						&lt;media-panel v-show=&#34;currentTab === &#39;twitch-tab&#39;&#34; id=&#34;news_scroll&#34; class=&#34;media-tab-scroll&#34; :items=&#34;twitch&#34; type=&#34;twitch&#34; :loc=&#34;loc&#34;&gt;&lt;/media-panel&gt;
						&lt;media-panel v-show=&#34;currentTab === &#39;video-tab&#39;&#34; id=&#34;news_scroll&#34; class=&#34;media-tab-scroll&#34; :items=&#34;youTube&#34; type=&#34;youtube&#34; :loc=&#34;loc&#34;&gt;&lt;/media-panel&gt;
						&lt;!-- &lt;streamer-panel v-show=&#34;currentTab === &#39;twitch-tab&#39;&#34; id=&#34;twitch_panel&#34; :loc=&#34;loc&#34; :streams=&#34;twitchStreams&#34; :title=&#34;loc.twitch_title&#34; :viewers=&#34;loc.twitch_viewers&#34; icon=&#34;ico_twitch&#34;&gt;&lt;/streamer-panel&gt; --&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;!-- #news-tab --&gt;
			&lt;/div&gt;
		&lt;!-- .media-tabs-content --&gt;
		&lt;/div&gt;
	  &lt;!-- .media-tabs-container --&gt;
	&lt;/div&gt;
    </script>
    <template id="player_challenge_list">
      <div class="player-challenges-aside box_relative bg_blue6" :class="wrapStyle">
        <div v-if="inGame" class="media-tab-container media-tab-challenges display-grid align-items-center gap-sm bg_blue3">
          <div class="dynamic-text" style="width: 12.5em;">
            <h4 class="common-box-shadow text-shadow-black-40 text_white dynamic-text">
              {{ loc.challenges }}
            </h4>
          </div>
          <p class="text_yellow_bright font-nunito font-800 justify-self-end text-shadow-black-40 nospace">
            <i v-show="hasChlgs" class="far fa-clock"></i>
            <span v-show="!hasChlgs" class="font-size-md">            No challenges!
</span>
            <span v-if="hasChlgs">            {{ challengeData.hours }}:{{ challengeData.minutes }}:{{ challengeData.seconds }}
</span>
          </p>
        </div>
        <div class="news-container f_row">
          <section class="player-challenges-container overflow-hidden">
            <player-challenge v-for="challenge in challenges" :key="challenge.challengeId" :loc="loc" :data="challenge" :timers="timers" @chlg-reroll="challengeReroll">
            </player-challenge>
          </section>
        </div>
      </div>
    </template>
    <script id="player_challenge" type="text/x-template">
      &lt;div class=&#34;player-challenge-single box_relative display-flex align-items-center f_row&#34;&gt;
		&lt;div v-if=&#34;completed&#34; class=&#34;checkmark-wrap&#34;&gt;
			&lt;icon name=&#34;ico-checkmark&#34;&gt;&lt;/icon&gt;
		&lt;/div&gt;
		&lt;div class=&#34;player-chal lenge-single-wrap ss_paddingright ss_paddingleft display-grid grid-column-1-2 align-items-center gap-sm fullwidth&#34;&gt;
			&lt;div ref=&#34;content&#34; class=&#34;player-challenge-single-content&#34;&gt;
				&lt;header&gt;
					&lt;div ref=&#34;title&#34; class=&#34;nospace dynamic-title&#34; style=&#34;width: 100%; height: 1em&#34;&gt;
						&lt;h4 class=&#34;player-challenge-single-name font-size-lg nospace text_blue5 line-height-1 dynamic-text&#34;&gt;{{ title }}&lt;/h4&gt;
					&lt;/div&gt;
					&lt;div ref=&#34;desc&#34; class=&#34;nospace dynamic-title&#34; style=&#34;width: 100%; height: 1em&#34;&gt;
						&lt;p class=&#34;nospace text_yellow_bright font-size-lg font-nunito dynamic-text&#34;&gt;{{ desc }}&lt;/p&gt;
					&lt;/div&gt;
				&lt;/header&gt;
				&lt;div v-show=&#34;!data.claimed&#34; class=&#34;player-challenge-single-progress display-grid grid-column-2-1 align-items-center&#34;&gt;
					&lt;div class=&#34;player-challenge-single-progress-wrap roundme_md bg_blue5&#34;&gt;
						&lt;div class=&#34;player-challenge-single-progress-bar bg_yellow roundme_md&#34; :style=&#34;{ width: progress + &#39;%&#39; }&#34;&gt;&lt;/div&gt;
						&lt;!-- &lt;div class=&#34;player-challenge-single-progress-bar bg_yellow roundme_md&#34; style=&#34;width: 10%&#34;&gt;&lt;/div&gt; --&gt;
					&lt;/div&gt;
					&lt;div class=&#34;font-size-md ss_marginleft_sm text_blue5 font-800&#34;&gt;
						{{ trueProgress }}/{{ getGoal }}
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;div class=&#34;display-grid grid-column-2-eq align-items-center&#34;&gt;
					&lt;div class=&#34;player-challenge-single-reward text-shadow-black-40 display-grid align-items-center grid-column-auto-1 gap-sm&#34;&gt;
						&lt;img src=&#34;img/svg/ico_goldenEgg.svg&#34;&gt; {{ reward }}
					&lt;/div&gt;
					&lt;div class=&#34;player-challenge-single-action justify-self-end margin-0 box_relative&#34; :class=&#34;actionState&#34;&gt;
						&lt;div v-show=&#34;showActionBtn&#34; class=&#34;player-challenge-tool-tip box_relative&#34;&gt;
							&lt;div class=&#34;tool-tip&#34;&gt;
								&lt;button class=&#34;ss_button pause-screen-ui margin-0 player-challenge-single-action-btn&#34; :disabled=&#34;onRerollClicked&#34; :class=&#34;actionBtnStyle&#34; @click=&#34;onActionBtnClick&#34;&gt;&lt;i v-show=&#34;!data.reset &amp;&amp; !completed&#34; class=&#34;fas fa-sync-alt&#34;&gt;&lt;/i&gt; &lt;span&gt;{{ actionBtnContent }}&lt;/span&gt;&lt;/button&gt;
								&lt;span v-if=&#34;!completed&#34; class=&#34;tool-tip-text&#34;&gt;{{ loc.challenges_reroll }}&lt;/span&gt;
							&lt;/div&gt;
						&lt;/div&gt;
						&lt;div v-show=&#34;actionContentShow&#34;&gt;
							&lt;p class=&#34;nospace text_blue3 player-challenge-claimed&#34;&gt;{{ actionBtnContent }}&lt;/p&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;figure class=&#34;player-challenge-single-icon nospace f_row align-items-center&#34;&gt;
				&lt;img :src=&#34;imgSrc&#34; class=&#34;display-block center_h&#34; alt=&#34;&#34;&gt;
			&lt;/figure&gt;
			&lt;!-- &lt;div&gt;Completion indicatior&lt;/div&gt; --&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      const CompPlayerChallengeSingle = {
    template: &#39;#player_challenge&#39;,
	props: [&#39;loc&#39;, &#39;data&#39;, &#39;timers&#39;],
    data () {
        return {
			now: 0,
			diff: 0,
			end: 0,
			minutes: 0,
			seconds: 0,
			hours: 0,
			days: 0,
			gap: 0,
			timerDisplay: &#39;&#39;,
			reward: 0,
			reset: 0,
			goal: 0,
			period: 0,
			locRef: &#39;&#39;,
			type: &#39;&#39;,
			subType: &#39;&#39;,
			challengeData: &#39;&#39;,
			onClaimClicked: false,
			onRerollClicked: false,
			conditional: &#39;&#39;,
			value: null,
			valueTwo: null,
        }
    },

	mounted() {
		this.now = Math.trunc((Date.now()/1000));
		this.end = this.now + this.data.period;
		const dbData = extern.Challenges.filter(chlg =&gt; chlg.id === this.data.challengeId)[0];

		this.reward = dbData.reward;
		this.goal = dbData.goal;
		this.period = dbData.period;
		this.locRef = dbData.loc_ref;
		this.value = dbData.value;
		this.valueTwo = dbData.valueTwo;

		if (dbData.conditional !== null) {
			this.conditional = ChallengeConditions[dbData.conditional];
		}

		this.type = ChallengeType[dbData.type];
		this.subType = ChallengeSubType[dbData.subType];
		setInterval(this.timer, 1000);

	},

    methods: {
		onActionBtnClick(e) {
			if (!this.data.reset &amp;&amp; !this.completed) {
				if (!this.onRerollClicked) {
					this.onRerollClicked = true;
					BAWK.play(&#39;ui_reset&#39;);
					this.$emit(&#39;chlg-reroll&#39;, this.data.challengeId);
					// this.$emit(&#39;chlgReroll&#39;, this.data.challengeId);
				}
			} else {
				if (!this.onClaimClicked) {				
					this.onClaimClicked = true;
					BAWK.play(&#39;pickup&#39;);
					extern.playerChallenges.claim(this.data.challengeId);
				}
			}
		},

		timer() {
			this.gap = Math.floor(this.end - (Math.trunc(Date.now()/1000)));

			if (this.gap &lt; 0) {
				this.gap = 0;
				this.progress = 100;
			}

			let hoursLeft = 0;
			let minutesLeft = 0;

			this.days = Math.floor(this.gap/24/60/60);
			hoursLeft = Math.floor((this.gap) - (this.days*86400));
			this.hours = this.timeFormat(Math.floor(hoursLeft/3600));
			minutesLeft = Math.floor((hoursLeft) - (this.hours*3600));
			this.minutes = this.timeFormat(Math.floor(minutesLeft/60));
			this.seconds = this.timeFormat(this.gap % 60);

		},
		timeFormat(time) {
			return time &lt; 10 ? &#39;0&#39; + time : time;
		},
		resizeTextToFit(container, maxFontSize) {
			const text = container.querySelector(&#39;.dynamic-text&#39;);
			const containerWidth = container.clientWidth;
			const containerHeight = container.clientHeight;

			let fontSize = maxFontSize; // Start with a base font size in em
			text.style.fontSize = fontSize + &#39;em&#39;;

			// Increase font size until it overflows
			while (text.scrollWidth &lt;= containerWidth &amp;&amp; text.scrollHeight &lt;= containerHeight) {

				fontSize += 0.1;
				if (fontSize &gt;= maxFontSize) {
					fontSize -= 0.1;
					break;
				}
					text.style.fontSize = fontSize + &#39;em&#39;;
			}

			// Step back to last valid font size
			fontSize -= 0.1;

			text.style.fontSize = fontSize + &#39;em&#39;;

			// Fine-tune decrease to avoid overflow
			while (text.scrollWidth &gt; containerWidth || text.scrollHeight &gt; containerHeight) {
				fontSize -= 0.01;
				text.style.fontSize = fontSize + &#39;em&#39;;
				if (fontSize &lt; 0.5) break; // Prevent the font size from becoming too small
			}
		},
		dynamicChallengeText() {
			setTimeout(() =&gt; {
				this.resizeTextToFit(this.$refs.title, .9);
				this.resizeTextToFit(this.$refs.desc, .75);
			}, 100);
		}
    },

    computed: {
		title() {
			this.dynamicChallengeText();
			return this.loc[this.locRef + &#39;_title&#39;];
		},
		desc() {
			return this.loc[this.locRef + &#39;_desc&#39;];
		},

		imgSrc() {
			return extern.playerChallenges.iconSrc(this.locRef);
		},

		progress() {
			const p = Math.floor((this.data.progress/this.data.goal)*100);
			return p &gt; 100 ? 100 : p;
		},
		completed() {
			return this.data.progress &gt;= this.data.goal || this.data.completed;
			// return true;
		},
		showActionBtn() {
			if (this.data.claimed || (this.data.reset &amp;&amp; this.completed &amp;&amp; this.data.claimed) || (this.data.reset &amp;&amp; !this.completed)) {
				return false;
			} else {
				return true;
			}
		},
		actionBtnStyle() {
			if (!this.completed &amp;&amp; !this.data.claimed) {
				return &#39;btn_blue bevel_blue box_relative text-shadow-none text_blue1 btn_sm&#39;;
			} else if (this.completed &amp;&amp; !this.data.claimed) {
				return &#39;btn_pink bevel_pink box_relative text-shadow-none text_white btn_sm&#39;;
			}
		},
		actionContentShow() {
			return this.data.reset &amp;&amp; !this.completed || this.data.claimed &amp;&amp; this.completed;
		},
		actionBtnContent() {
			if (this.completed &amp;&amp; !this.data.claimed) {
				return this.loc.claim;
			} else if (this.completed &amp;&amp; this.data.claimed) {
				return this.loc.claimed;
			} else if (!this.completed &amp;&amp; !this.data.claimed &amp;&amp; this.data.reset) {
				return &#39;&#39;;
			}
		},
		trueProgress() {
			let p, gc_mem_caches;
			if (this.subType === &#39;timePlayed&#39; &amp;&amp; this.type !== &#39;kills&#39;) {
				p = Math.floor(this.data.progress / 60);
				g = Math.floor(this.data.goal / 60);
			} else {
				p = this.data.progress;
				g = this.data.goal;
			}
			return p &gt;= g ? g : p;
		},
		actionState() {
			if (this.data.claimed) {
				return &#39;player-challenge-single-action-claimed&#39;;
			} else if (this.data.reset &amp;&amp; this.completed) {
				return &#39;player-challenge-single-action-completed&#39;;
			}
		},
		timerData() {
			if (this.subType === &#39;timePlayed&#39;) {
				return this.timers.played;
			} else if (this.subType === &#39;timeAlive&#39;) {
				return this.timers.alive;
			}
		},
		getGoal () {
			if (this.subType === &#39;timePlayed&#39; &amp;&amp; this.type !== &#39;kills&#39;) {
				return  Math.floor(this.data.goal / 60) + &#39;m&#39;;
			} else {
				return this.data.goal;
			}
		}
	},
};
    </script>
    <script>
      const CompPlayerChallengeList = {
    template: &#39;#player_challenge_list&#39;,
	components: {
            &#39;player-challenge&#39;: CompPlayerChallengeSingle,
        },
	props: [&#39;loc&#39;, &#39;challenges&#39;, &#39;challengeData&#39;, &#39;timers&#39;, &#39;inGame&#39;],
    data () {
        return {
			chlgsBeforeReroll: [],
			chlgRerollID: null,
        }
    },

	mounted() {
	},

    methods: {
		challengeReroll(challengeId) {
			this.chlgRerolled = challengeId;
			this.chlgsBeforeReroll = this.challenges;
			extern.playerChallenges.reroll(challengeId);
		},
		
    },

    computed: {
		hasChlgs() {
			return Array.isArray(this.challenges) &amp;&amp; this.challenges.length &gt; 0 ? true : false;
		},
		wrapStyle() {
			if (this.inGame) {
				return &#39;border-blue5 roundme_sm common-box-shadow&#39;;
			} else {
				return &#39;home-screen&#39;;
			}
		}
	},
	watched: {
        challenges(newChallenges) {
            if (this.chlgRerolled &amp;&amp; this.chlgsBeforeReroll.length &gt; 0 &amp;&amp; this.chlgRerollID !== null) {
                const oldChallenges = this.chlgsBeforeReroll;

                // Find the new challenge that is not in the old challenges
                const newChallenge = newChallenges.find(newChlg =&gt; 
                    !oldChallenges.some(oldChlg =&gt; oldChlg.id === newChlg.id)
                );

                if (newChallenge) {
                    // Find the index of the missing challenge in the old data using chlgRerollID
                    const missingChallengeIndex = oldChallenges.findIndex(oldChlg =&gt; oldChlg.id === this.chlgRerollID);

                    if (missingChallengeIndex !== -1) {
                        // Create a new array maintaining the original order
                        const updatedChallenges = [...oldChallenges];
                        updatedChallenges.splice(missingChallengeIndex, 1, newChallenge);
                        this.challenges = updatedChallenges;
                    }
                }

				this.chlgsBeforeReroll = [];
				this.chlgRerollID = null;		
            } else {
				this.challenges = newChallenges;
			}
        }
	}
};
    </script>
    <script id="media-panel" type="text/x-template">
      &lt;section class=&#34;media-panel news-panel&#34;&gt;

		&lt;component :is=&#34;type&#34; v-for=&#34;(item, idx) in items&#34; :item=&#34;item&#34; :key=&#34;idx&#34; :loc=&#34;loc&#34;&gt;&lt;/component&gt;

		&lt;div class=&#34;no-stream roundme_sm&#34; v-if=&#34;items.length &lt; 1 &amp;&amp; type === &#39;twitch&#39;&#34;&gt;
			&lt;p v-html=&#34;loc.twitch_no_steam&#34;&gt;&lt;/p&gt;
		&lt;/div&gt;

		&lt;div class=&#34;f_row&#34; v-if=&#34;showNav&#34;&gt;
			&lt;button class=&#34;ss_button btn_sm btn_yolk bevel_yolk btn_media-nav text_blue5&#34; @click=&#34;backItem&#34;&gt;
				&lt;i class=&#34;fas fa-chevron-left&#34;&gt;&lt;/i&gt;
			&lt;/button&gt;
			&lt;button class=&#34;ss_button btn_sm btn_yolk bevel_yolk btn_media-nav text_blue5&#34; @click=&#34;nextItem&#34;&gt;
				&lt;i class=&#34;fas fa-chevron-right&#34;&gt;&lt;/i&gt;
			&lt;/button&gt;
			&lt;span&gt;({{currentSpot}} / {{ maxSpot }})&lt;/span&gt;
		&lt;/div&gt;
	&lt;/section&gt;
    </script>
    <script id="news-content" type="text/x-template">
      &lt;article @click=&#34;onItemThatIsClicked&#34; class=&#34;media-item news_item clickme media-item-border&#34;&gt;
	&lt;img :data-src=&#34;imageSrc&#34; ref=&#34;newsImage&#34; class=&#34;news_img roundme_sm&#34; /&gt;
		&lt;p&gt;{{ item.content }}&lt;/p&gt;
	&lt;/article&gt;
    </script>
    <script>
      var NewsContent = {
	template: &#39;#news-content&#39;,
	props: {
		item: {
			type: Object,
			default: () =&gt; {
				return {
					title: &#39;&#39;,
					content: &#39;&#39;,
					id: &#39;&#39;,
					imageExt: &#39;&#39;,
				}
			}
		},
	},
	mounted() {
		const observer = new IntersectionObserver((entries, observer) =&gt; {
			entries.forEach(entry =&gt; {
				if (entry.isIntersecting) {
					this.loadImage(); // Load image when in view
					observer.unobserve(entry.target); // Stop observing once loaded
				}
			});
		}, {
			rootMargin: &#39;0px 0px 200px 0px&#39;, // Preload slightly before visible
		});

		observer.observe(this.$refs.newsImage); // Observe the image element
	},
	methods: {
		onItemThatIsClicked() {
			console.log(this.item);
			extern.clickedWebFeedItem(this.item);
			BAWK.play(&#39;ui_click&#39;);
		},
		loadImage() {
			const img = this.$refs.newsImage;
			img.src = img.dataset.src;
		},
	},
	computed: {
		imageSrc() {
			return dynamicContentPrefix + &#39;data/img/newsItems/&#39; + this.item.id + this.item.imageExt;
		},
	}
};
    </script>
    <script id="streamer-panel-template" type="text/x-template">
      &lt;div class=&#34;panel_streamer noscroll media-item-border&#34;&gt;
		&lt;div id=&#34;stream_scroll&#34; v-if=&#34;item.name&#34;&gt;
			&lt;div class=&#34;media-item stream_item clickme&#34;&gt;
				&lt;a :href=&#34;item.link&#34; target=&#34;_blank&#34; class=&#34;f_row&#34;&gt;
				&lt;img :data-src=&#34;item.image&#34; ref=&#34;streamerImage&#34; class=&#34;stream_img roundme_sm ss_marginright&#34; /&gt;
					&lt;span&gt;
						&lt;p class=&#34;stream_name&#34;&gt;{{ item.name }}&lt;/p&gt;
						&lt;p v-if=&#34;item.viewers&#34; class=&#34;stream_viewers&#34;&gt;{{ item.viewers }} Viewers&lt;/p&gt;
					&lt;/span&gt;
				&lt;/a&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div class=&#34;no-stream roundme_sm&#34; v-if=&#34;!item.name&#34;&gt;
			&lt;p v-html=&#34;loc.twitch_no_steam&#34;&gt;&lt;/p&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_streamer_panel = {
		template: &#39;#streamer-panel-template&#39;,
		props: {
			item: {
				type: Object,
				default: () =&gt; {
					return {
						name: &#39;&#39;,
						viewers: &#39;&#39;,
						link: &#39;&#39;,
						image: &#39;&#39;,
					}
				}
			},
			loc: {
				type: Object,
				default: () =&gt; {
					return {
						twitch_no_steam: &#39;&#39;,
					}
				}
			}
		},
		mounted() {
			const observer = new IntersectionObserver((entries, observer) =&gt; {
				entries.forEach(entry =&gt; {
					if (entry.isIntersecting) {
						this.loadImage(); // Load the image when in view
						observer.unobserve(entry.target); // Stop observing once loaded
					}
				});
			}, {
				rootMargin: &#39;0px 0px 200px 0px&#39;, // Preload slightly before visible
			});

			observer.observe(this.$refs.streamerImage); // Observe the image element
		},
		methods: {
			playSound (sound) {
				BAWK.play(sound);
			},
			loadImage() {
				const img = this.$refs.streamerImage;
				img.src = img.dataset.src;
			},
		}
	};
    </script>
    <script id="youtube-content-template" type="text/x-template">
      &lt;article @click=&#34;onVideoClick()&#34; class=&#34;media-item ytube-item clickme media-item-border&#34;&gt;
		&lt;div class=&#34;image-wrap news_img roundme_sm&#34;&gt;
			&lt;img :data-src=&#34;imgSrc&#34; alt=&#34;&#34; class=&#34;news_img&#34; ref=&#34;lazyImage&#34; /&gt;
		&lt;/div&gt;
		&lt;div class=&#34;content-wrap f_col f_space_between&#34;&gt;
			&lt;p&gt;{{ item.title }}&lt;/p&gt;
			&lt;p v-if=&#34;item.desc&#34;&gt;{{ item.desc }}&lt;/p&gt;
			&lt;p class=&#34;text-right&#34;&gt;{{ item.author }}&lt;/p&gt;
		&lt;/div&gt;
	&lt;/article&gt;
    </script>
    <script>
      var YoutubeContent = {
	template: &#39;#youtube-content-template&#39;,
	props: {
		item: {
			type: Object,
			default: () =&gt; {
				return {
					title: &#39;&#39;,
					desc: &#39;&#39;,
					author: &#39;&#39;,
					link: &#39;&#39;,
					externalImg: &#39;&#39;,
				}
			}
		},
	},

	data: function () {
		return {
		};
	},
	mounted() {
		const observer = new IntersectionObserver((entries, observer) =&gt; {
			entries.forEach(entry =&gt; {
				if (entry.isIntersecting) {
					this.loadImage(); // Call method to load the image
					observer.unobserve(entry.target); // Stop observing after the image is loaded
				}
			});
		}, {
			rootMargin: &#39;0px 0px 200px 0px&#39;, // Preload the image before it comes fully into view
		});

		observer.observe(this.$refs.lazyImage);
	},
	methods: {
		onVideoClick() {
			ga(&#39;send&#39;, &#39;creator&#39;, &#39;videoClick&#39;, this.item.title);
			window.open(this.item.link, &#39;_window&#39;);
		},
		loadImage() {
			const img = this.$refs.lazyImage;
			img.src = img.dataset.src;
		},
	},
	computed: {
		imgSrc() {
			if (this.item.externalImg.includes(&#39;hqdefault&#39;)) {
				return this.item.externalImg.replace(&#39;hqdefault&#39;, &#39;mqdefault&#39;);
			}
			return this.item.externalImg;
		},
	},
	watch: {
		item: function (newVal, oldVal) {
			console.log(&#39;newVal&#39;, newVal);
			console.log(&#39;oldVal&#39;, oldVal);
		}
	}
};
    </script>
    <script>
      var CompMediaPanel = {
	template: &#39;#media-panel&#39;,
	components: {
		&#39;news&#39;: NewsContent,
		&#39;twitch&#39;: comp_streamer_panel,
		&#39;youtube&#39;: YoutubeContent,
	},
	props: {
		items: {
			type: Array,
			default: () =&gt; []
		},
		type: {
			type: String,
			default: &#39;&#39;
		},
		loc: {
			type: Object,
			default: {}
		},
	},

	data: function () {
		return {
			currentIdx: 0,
			maxIdx: 0,
			showNav: false,
		};
	},
	methods: {
		nextItem() {
			if (this.maxIdx === this.currentIdx) {
				this.currentIdx = 0;
			} else {
				this.currentIdx ++;
			}
		},
		backItem() {
			if (this.currentIdx === 0) {
				this.currentIdx = this.maxIdx;
			} else {
				this.currentIdx --;
			}
		}
	},
	computed: {
		showItem() {
			return this.items[this.currentIdx];
		},
		showNews() {
			return this.type === &#39;news&#39;;
		},
		showTwitch() {
			return this.type === &#39;twitch&#39;;
		},
		showYoutube() {
			return this.type === &#39;youtube&#39;;
		},
		currentSpot() {
			return this.currentIdx + 1;
		},
		maxSpot() {
			return this.maxIdx + 1;
		}
	},
	watch: {
		// items: function(val) {
		// 	if (val.length &gt; 0) {
		// 		this.showNav = true;
		// 		this.maxIdx = this.items.length - 1;
		// 	}
		// }
	}
};
    </script>
    <script>
      const MEDIATABS = {
        template: &#39;#media-tabs-template&#39;,
        components: {
            &#39;player-challenge-list&#39;: CompPlayerChallengeList,
			&#39;media-panel&#39;: CompMediaPanel
        },
        props: [&#39;loc&#39;, &#39;newsfeedItems&#39;, &#39;twitchStreams&#39;, &#39;youtubeStreams&#39;, &#39;challenges&#39;, &#39;challengeDailyData&#39;, &#39;firebaseId&#39;],

        mounted() {
			// this.autoRotateTabs();
			const tabs = document.querySelector(&#39;.news-container&#39;);

			tabs.addEventListener(&#39;mouseenter&#39;, (e) =&gt; {
				clearTimeout(this.rotateTimeout);
			});
			this.$nextTick(() =&gt; {
				this.fetchJson();
			});
			this.randomTabSelect();
			this.autoRotateTabs();
        },

        data: function () {
            return {
                mediaTabs: [
					{
						id: &#39;news-tab&#39;,
						name: &#39;News&#39;,
						icon: &#39;fas fa-bullhorn&#39;
					},
					{
						id: &#39;twitch-tab&#39;,
						name: &#39;Twitch&#39;,
						icon: &#39;fab fa-twitch&#39;
					},
					{
						id: &#39;video-tab&#39;,
						name: &#39;YouTube&#39;,
						icon: &#39;fab fa-youtube&#39;
					}
				],
				news: [],
				twitch: [],
				youTube: [],
                delay: 7000,
                rotateTimeout: &#39;&#39;,
                currentTab: &#39;news-tab&#39;,
				challenge: &#39;&#39;,
				chlg: {
					now: 0,
					diff: 0,
					end: 0,
					minutes: 0,
					seconds: 0,
					hours: 0,
					days: 0,
					gap: 0,
					timerDisplay: &#39;&#39;,
					reward: 0,
					reset: 0,
					goal: 0,
					period: 0,
					locRef: &#39;&#39;,
					challengeDailyData: &#39;&#39;,
					newRequest: false,
					timer: null
				}
            }
        },
        
        methods: {
			fetchJson() {
				extern.requestJson(&#39;data/shellNews.json&#39;, (data) =&gt; {
					if (crazyGamesActive) {
						const newNews = data.filter((item, idx) =&gt; {
							if (item.hideOnCrazyGames !== null &amp;&amp; item.hideOnCrazyGames) {
								return false;
							} else {
								return true;
							}
						});

						this.news = newNews;
					}
					this.news = data;

				});
				extern.requestJson(&#39;data/shellYouTube.json&#39;, (data) =&gt; this.youTube = data);
				extern.requestJson(&#39;data/twitchStreams.json&#39;, (streams) =&gt; {
						
						streams.sort((a, b) =&gt; {
							return b.viewers - a.viewers;
						});

						let streamsArray = streams.map(stream =&gt; {
							return {
								name: stream.name,
								viewers: stream.viewers,
								link: &#39;https://twitch.tv/&#39; + stream.name,
								image: dynamicContentPrefix + &#39;data/img/twitchAvatars/&#39; + stream.avatar
							}
						})

						this.twitch =  streamsArray;
				});

			},
            selectTab: function (id, playSound) {
				this.currentTab = id;
				extern.playerChallenges.resizeAllText();
            },
            cancelRotate() {
                clearTimeout(this.rotateTimeout);
				this.autoRotateTabs();
            },
			rotateTab() {
				let currentIdx = this.mediaTabs.findIndex(tab =&gt; tab.id === this.currentTab);
					if (currentIdx + 1 &gt; this.mediaTabs.length - 1) {
					this.selectTab(this.mediaTabs[0].id);
				} else {
					this.selectTab(this.mediaTabs[currentIdx + 1].id);
				}
				// start the countdown again
				this.autoRotateTabs();
			},
            autoRotateTabs() {
				if (this.currentTab === &#34;challenges-tab&#34;) {
					var delay = 14000;
				} else {
					var delay = this.delay;
				}
				this.rotateTimeout = setTimeout(() =&gt; this.rotateTab(), delay);
            },
			onTabClicked(id) {
				this.selectTab(id);
				//click cancels the rotation and restarts it
				this.cancelRotate();
				ga(&#39;send&#39;, &#39;event&#39;, &#39;media-tabs&#39;, &#39;click&#39;, id);
				BAWK.play(&#39;ui_toggletab&#39;);
			},
            randomTabSelect() {
				this.selectTab(this.mediaTabs[Math.floor(Math.random() * this.mediaTabs.length)].id);
            },

			timeFormat(time) {
				return time &lt; 10 ? &#39;0&#39; + time : time;
			},
			timer() {
				this.chlg.gap = Math.floor(this.end - (Math.trunc(Date.now()/1000)));

				if (this.chlg.gap &lt; 0) {
					this.chlg.gap = 0;

					if (!this.newRequest) {
						this.newRequest = true;
						clearInterval(this.chlg.timer);
						this.chlg.timer = null;
						extern.playerChallenges.getNew();
					}
				}

				let hoursLeft = 0;
				let minutesLeft = 0;

				this.chlg.days = Math.floor(this.chlg.gap/24/60/60);
				hoursLeft = Math.floor((this.chlg.gap) - (this.chlg.days*86400));
				this.chlg.hours = this.timeFormat(Math.floor(hoursLeft/3600));
				minutesLeft = Math.floor((hoursLeft) - (this.chlg.hours*3600));
				this.chlg.minutes = this.timeFormat(Math.floor(minutesLeft/60));
				this.chlg.seconds = this.timeFormat(this.chlg.gap % 60);
			},
			challengeReroll(id) {
				extern.playerChallenges.reroll(id);
			},
			// Adds the Challenges tab if it doesn&#39;t exist
			addChallengesTab() {
				const exists = this.mediaTabs.find(tab =&gt; tab.id === &#39;challenges-tab&#39;);
				if (!exists) {
					this.mediaTabs.unshift({
						id: &#39;challenges-tab&#39;,
						name: &#39;Challenges&#39;,
						icon: &#39;fas fa-trophy&#39;
					});
				}
			},

			// Removes the Challenges tab if it exists
			removeChallengesTab() {
				this.mediaTabs = this.mediaTabs.filter(tab =&gt; tab.id !== &#39;challenges-tab&#39;);
			},

        },
		computed: {
			tabName() {
				switch (this.currentTab) {
					case &#39;news-tab&#39;:
						return this.loc.home_latestnews;
						break;
					case &#39;twitch-tab&#39;:
						return &#39;Twitch&#39;
						break;
					case &#39;video-tab&#39;:
						return &#39;YouTube&#39;
						break;
					case &#39;challenges-tab&#39;:
						return this.loc.challenges;
						break;
					default:
						break;
				}
			},

			newsItems() {
				// crazyGamesActive = true;
				if (crazyGamesActive) {
					const newNews = this.newsfeedItems.filter((item, idx) =&gt; {
						if (item.hideOnCrazyGames !== null &amp;&amp; item.hideOnCrazyGames) {
							return false;
						} else {
							return true;
						}
					});

					return newNews;
				}
				return this.newsfeedItems;
			},

			hasChlgs() {
				return Array.isArray(this.challenges) &amp;&amp; this.challenges.length &gt; 0 ? true : false;
			},
			tabContentStyle() {
				if (this.currentTab !== &#39;challenges-tab&#39;) {
					return &#39;ss_paddingright ss_paddingleft&#39;;
				}
			},
			newsContainerStyle() {
				if (this.currentTab === &#39;challenges-tab&#39;) {
					return &#39;overflow-hidden&#39;;
				} else {
					return &#39;v_scroll&#39;;
				}
			}
		},
		watch: {
			firebaseId(val) {
				if (val) {
					this.addChallengesTab();
					this.selectTab(&#39;challenges-tab&#39;);
					this.cancelRotate();
				} else {
					this.removeChallengesTab();
					this.randomTabSelect();
				}
			},

			challenges(val) {
				if (val.length &gt; 0) {
					this.$nextTick(() =&gt; {
						const challengeHeight = this.$refs.newsContainer.querySelector(&#39;.player-challenges-container&#39;);
						
						if (challengeHeight !== null) {
							const computedStyle = window.getComputedStyle(this.$refs.newsContainer);
							const baseFontSize = parseFloat(computedStyle.fontSize);
							const heightInPixels = challengeHeight.clientHeight;
							const heightInEms = heightInPixels / baseFontSize;
							
							this.$refs.newsContainer.style.height = heightInEms + &#39;em&#39;;
						}
					});
				}
			}
		}
    };
    </script>
    <template id="music-widget">
      <div v-if="isMusic" class="music-widget roundme_md" :class="[!show ? hideClass : &#39;&#39;]">
        <div v-if="theAudio" class="music-widget--wrapper flex flex-nowrap">
          <figure class="music-widget--content">
            <header class=" roundme_md">
              <h3 class="music-widget--now-playing">
                {{ loc.musicwidget_now_playing }}
              </h3>
            </header>
            <figcaption class="music-widget--content-wrapper">
              <h4 class="music-widget--album-title">
                {{ serverTracks.artist }}
              </h4>
            </figcaption>
            <figcaption class="music-widget--content-wrapper">
              <p v-if="serverTracks.url" class="music-widget--song-title">
                <a @click="gaSendEvent(&#39;click-track&#39;, getTitleAlbum)" :href="serverTracks.url" :title="theTitleAttr" target="_blank">                {{ getTitleAlbum }}
</a>
              </p>
              <p v-else="" class="music-widget--song-title">
                {{ getTitleAlbum }}
              </p>
            </figcaption>
            <div v-if="volumeSlider" v-for="t in settingsUi.adjusters.music" class="music-widget--volume-control nowrap">
              <slider-component :loc="loc" :loc-key="t.locKey" :control-id="t.id" :control-value="t.value" :min="t.min" :max="t.max" :step="t.step" :multiplier="t.multiplier" @setting-adjusted="volumeControl">
              </slider-component>
            </div>
          </figure>
          <div class="music-widget--cover-image music-widget--cover-controls roundme_md">
            <template v-if="serverTracks.url">
              <a v-if="serverTracks.albumArt" @click="gaSendEvent(&#39;click-albumArt&#39;, getTitleAlbum)" :href="serverTracks.url" :title="theTitleAttr" class="ss-absolute" target="_blank">              <img :src="serverTracks.albumArt" class="roundme_md ss-absolute" :alt="serverTracks.album" />
</a>
            </template>
            <template v-else="">
              <img v-if="serverTracks.albumArt" :src="serverTracks.albumArt" class="ss-absolute roundme_md" alt="Album cover art for" :alt="serverTracks.album" />
            </template>
            <button v-if="playBtn" @click="playAudio">
              <i v-if="playing" class="music-widget--cover-control-icon music-widget--cover-control-pause far fa-pause-circle fa-2x"></i>
              <i v-if="!playing" class="music-widget--cover-control-icon music-widget--cover-control-pause far fa-play-circle fa-2x"></i>
            </button>
          </div>
          <div class="music-widget--sponsor">
            <a @click="gaSendEvent(&#39;click-sponsor&#39;, sponsor.name)" v-if="sponsor" :href="sponsor.link" :title="getSponsorTitleAttr" target="_blank">            <img :src="getSponsorImg" class="music-widget--sponsor-icon" :alt="sponsor.name" />
            <span class="hideme">            {{sponsor.name}}
</span>
</a>
            <button v-if="settings" @click="openSettings" class="music-widget--sponsor--settings-btn">
              <i class="fas fa-cog"></i>
              <span class="hideme">              Music Settings
</span>
            </button>
            <button class="music-widget--sponsor--settings-btn" @click="toggleMusic">
              <i class="fas" aria-hidden="true" :class="togglePlayStopIcon"></i>
              <span class="hideme">              Music
</span>
            </button>
          </div>
        </div>
      </div>
    </template>
    <script>
      const createMusicWidget = templateId =&gt; {

        return {
            template: &#39;#music-widget&#39;,
            props: [&#39;loc&#39;,&#39;volumeSlider&#39;, &#39;playBtn&#39;, &#39;settings&#39;, &#39;settingsUi&#39;, &#39;show&#39;],
            components: {
                &#39;slider-component&#39;: comp_settings_adjuster
            },

            data () {
                return vueData.music;
            },

            mounted () {
                this.theAudio = document.getElementById(&#39;theAudio&#39;);
            },

            methods: {

                loadVolume() {
                    this.$nextTick(() =&gt; {
                        this.theAudio.volume = Number(this.settingsUi.adjusters.music[0].value);
                    });
                },
                getAudioServer() {
                    if (parsedUrl.dom == &#39;localhost&#39; || parsedUrl.dom == &#39;dev&#39; || parsedUrl.dom == &#39;localshelldev&#39;) {
                        var url = &#39;uswest2-music.shellshock.io&#39;;
                    }
                    else {
                        var server = vueApp.regionList.filter(server =&gt; region.locKey === vueApp.currentRegionLocKey)[0];
                        var url = server.subdom.slice(0, -1) + &#39;-music.&#39; + parsedUrl.dom + &#39;.&#39; + parsedUrl.top;
                    }

                    this.musicSrc = &#39;https://&#39; + url + &#39;/shellshock.ogg&#39;;
                },
                setIndex(k) {
                    this.$nextTick(() =&gt; {
                        this.play();
                    })
                    this.currIndex = k;
                },

                play() {
                    if (!this.isMusic) return;
                    this.getAudioServer();
                },

                playMusic() {
                    // var audio = this.theAudio;
                    this.theAudio.src = this.musicSrc;

                    console.log(&#39;Play Music&#39;);

                    clearInterval(this.timer);

                    this.theAudio.play()
                        .then( // Returns a Promise
                            () =&gt; { // Success
                                this.playing = true;
                                this.loadVolume();
                                this.duration = this.theAudio.duration;
                                this.theAudio.addEventListener(&#39;stalled&#39;, () =&gt; this.isMusic = false);
                                
                            },
                            () =&gt; { // Fail
                                // What to do... just try again after a few seconds, I guess?
                                setTimeout(() =&gt; this.play(), 2000);
                            }
                        );
                },

                pause() {
                    this.playing = false;
                    this.theAudio.pause();
                    clearInterval(this.timer);
                },
                /*
                next() {
                    if (this.currIndex &lt; this.tracks.length - 1) {
                        this.currIndex++;
                    } else {
                        this.currIndex = 0;
                    }
                },

                prev() {
                    if (this.currIndex &gt; 0) {
                        this.currIndex--;
                    } else {
                        this.currIndex = this.tracks.length - 1;
                    }
                },
                */
                playOnce() {
                    if (this.playing) return;
                    return this.play();
                },

                playAudio() {
                    if (this.theAudio.paused) {
                        this.play();
                    } else {
                        this.pause();
                    }
                },

                openSettings() {
                    vueApp.showSettingsPopup();
                    vueApp.onSettingsPopupSwitchTabMisc();
                    this.gaSendEvent(&#39;click&#39;, &#39;widgetOpenSettings&#39;);
                },

                volumeControl(id, value) {
                    extern.setMusicVolume(value);
                    vueApp.onSettingsQuickSave();
                },

                hideMe() {
                    return this.$refs.id.classList.addClass(&#39;fade-out-3&#39;);
                },
                showMe() {
                    this.show = true;
                    setTimeout(() =&gt; this.show = false, 2000);
                },
                gaSendEvent(action, label) {
                    action = action || &#39;&#39;;
                    label = label || &#39;&#39;;
                    return ga(&#39;send&#39;, &#39;event&#39;, &#39;music&#39;, action, label);
                },
                toggleMusic() {
                    if (this.playing) {
                        this.theAudio.removeEventListener(&#39;stalled&#39;, () =&gt; this.isMusic = false);
                        this.playing = false;
                        this.pause();
                        this.musicSrc = &#39;&#39;;
                        this.theAudio.removeAttribute(&#39;src&#39;);
                        extern.setMusicStatus(false);
                        this.gaSendEvent(&#39;toggleMusic&#39;, &#39;off&#39;);
                        return;
                    }
                    this.theAudio.src = &#39;&#39;;
                    this.play();
                    extern.setMusicStatus(true);
                    this.gaSendEvent(&#39;toggleMusic&#39;, &#39;on&#39;);
                },
                changeVolume(val) {
                    this.theAudio.volume = val;
                }
            },

            watch: {
                &#39;currIndex&#39;: {
                    handler() {
                        this.$nextTick(() =&gt; {
                            this.play();
                        })
                    }
                },
                serverTracks(val) {
                    let sponsor = this.sponsors.filter(sponsor =&gt; sponsor.id === val.sponsor);
                    this.sponsor = sponsor.length || sponsor.length &gt; 0 ? sponsor[0] : &#39;&#39;;
				},
                musicSrc(val) {
                    if (val) {
                        this.playMusic();
                    }
                },
            },
            computed: {
                theTitleAttr() {
                    return &#39;Read more about &#39; + this.serverTracks.title;
                },
                getTitleAlbum() {
                    return this.serverTracks.title + &#39; - &#39; + this.serverTracks.album;
                },
                getSponsorImg() {
                    if (!this.sponsor) {
                        return;
                    }
                    return &#39;data/img/sponsor/&#39; + this.sponsor.id + this.sponsor.imageExt;
                },
                getSponsorTitleAttr() {
                    return &#39;See more about our sponsor &#39; + this.sponsor.name;
                },
                togglePlayStopIcon() {
                    return this.playing ? &#39;fa-stop-circle&#39; : &#39;fa-play-circle&#39;;
                },
            },
        };
    };
    // Register component globally
    Vue.component(&#39;music-widget&#39;, createMusicWidget(&#39;#music-widget&#39;));
    </script>
    <script id="main-sidebar-template" type="text/x-template">
      &lt;div id=&#34;screens-menu&#34; v-if=&#34;isGamePaused&#34; class=&#34;screens-menu box_relative&#34;&gt;
		&lt;!-- logo --&gt;
		&lt;div id=&#34;logo&#34; class=&#34;box_relative&#34;&gt;
			&lt;a href=&#34;https://www.shellshock.io&#34; @click=&#34;onLogoClick&#34;&gt;&lt;img class=&#34;home-screen-logo&#34; :src=&#34;logo&#34; @click=&#34;onLogoClick&#34;&gt;&lt;/a&gt;
			&lt;!-- &lt;img v-if=&#34;eggOrg&#34; class=&#34;egg-org-logo&#34; src=&#34;img/egg-org/logo_EggOrg.svg&#34;&gt; --&gt;
		&lt;/div&gt;
		&lt;transition name=&#34;fade&#34;&gt;
			&lt;div class=&#34;box_relative&#34; v-show=&#34;!playClicked&#34;&gt;
				&lt;button v-if=&#34;inGame &amp;&amp; currentScreen !== screens.game&#34; class=&#34;ss_button btn_md btn_green bevel_green box_relative box_absolute screens-menu-btn-return f_row align-items-center gap-sm justify-content-center text-uppercase&#34; @click=&#34;onBackClick&#34;&gt;{{ loc.p_pause_game_on }} &lt;icon class=&#34;fill-white shadow-filter&#34; name=&#34;ico-backToGame&#34;&gt;&lt;/icon&gt;&lt;/button&gt;
				&lt;player-name v-if=&#34;currentScreen === screens.home&#34; :loc=&#34;loc&#34; :player-name=&#34;playerName&#34; :picked-game-type=&#34;pickedGameType&#34; :current-screen=&#34;currentScreen&#34; :screens=&#34;screens&#34;&gt;&lt;/player-name&gt;
				&lt;!-- main-menu --&gt;
				&lt;div id=&#34;main-menu&#34; class=&#34;main-menu box_relative&#34; :class=&#34;{&#39;is-home-screen&#39; : currentScreen === screens.home}&#34;&gt;
					&lt;menu class=&#34;nospace&#34;&gt;
						&lt;ul class=&#34;nospace text-left list-no-style display-grid gap-sm&#34;&gt;
							&lt;menu-item v-for=&#34;(item, idx) in items&#34; :loc=&#34;loc&#34; :key=&#34;idx&#34; :item=&#34;item&#34; :current-screen=&#34;currentScreen&#34; :screens=&#34;screens&#34; :mode=&#34;mode&#34; :currentMode=&#34;currentMode&#34; :is-paused=&#34;inGame&#34; @previous-screen=&#34;previousScreen&#34;&gt;&lt;/menu-item&gt;
						&lt;/ul&gt;
					&lt;/menu&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/transition&gt;
		&lt;/div&gt;
		&lt;!-- main-sidebar --&gt;
    </script>
    <script id="main-menu-item" type="text/x-template">
      &lt;li v-show=&#34;active&#34; :class=&#34;listCls&#34;&gt;
		&lt;button class=&#34;fullwidth main-menu-button text-left font-sigmar roundme_sm text-uppercase box_relative f_row align-items-center&#34; @click=&#34;onMenuItemClick&#34; :class=&#34;itemCls&#34;&gt;
			&lt;svg class=&#34;centered&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 356.331 71&#34;&gt;&lt;path d=&#34;M293.124 71H4V9h340.08c11.045 0 16.429 13.48 8.42 21.084L321.213 59.79A40.795 40.795 0 0 1 293.123 71Z&#34; style=&#34;fill-rule:evenodd;fill:#1192bc;opacity:.5&#34;/&gt;&lt;path class=&#34;main-nav-item-bg&#34; d=&#34;M289.124 64H2V2h338.08c11.045 0 16.429 13.48 8.42 21.084L317.213 52.79A40.795 40.795 0 0 1 289.123 64Z&#34; style=&#34;stroke-miterlimit:10;stroke-width:4px;fill-rule:evenodd&#34;/&gt;&lt;/svg&gt;
			&lt;icon :name=&#34;getIcon&#34; class=&#34;menu-icon&#34;&gt;&lt;/icon&gt;
			{{ loc[locKey] }}
		&lt;/button&gt;
	&lt;/li&gt;
    </script>
    <script id="chw-bubble-template" type="text/x-template">
      &lt;div ref=&#34;chw-home-timer&#34; v-show=&#34;!isPoki &amp;&amp; firebaseId&#34; class=&#34;chw-home-timer display-grid grid-column-1-2 align-items-center box_absolute gap-1 &#34; :class=&#34;chwHomeTimerCls&#34;&gt;
		&lt;div&gt;
			&lt;img class=&#34;chw-home-timer-chick&#34; :src=&#34;chwChickSrc&#34;&gt;
		&lt;/div&gt;
		&lt;div class=&#34;display-grid align-items-center bg_white chw-circular-timer-container box_relative&#34; :class=&#34;chwClass&#34;&gt;
			&lt;div v-show=&#34;chwShowTimer&#34; class=&#34;chw-home-screen-timer&#34;&gt;&lt;/div&gt;
			&lt;!-- #chw-circular-timer-outer --&gt;
			&lt;div&gt;
				&lt;p class=&#34;chw-circular-timer-countdown nospace&#34;&gt;
					&lt;span class=&#34;chw-pie-remaining text-center chw-msg chw-r-msg&#34;&gt;{{ remainingMsg }}&lt;/span&gt;
					&lt;span v-show=&#34;chwShowTimer&#34; class=&#34;chw-pie-num chw-pie-hours&#34;&gt;&lt;/span&gt;&lt;span v-show=&#34;chwShowTimer&#34; class=&#34;chw-pie-num chw-pie-mins&#34;&gt;&lt;/span&gt;&lt;span v-show=&#34;chwShowTimer&#34; class=&#34;chw-pie-num chw-pie-secs&#34;&gt;&lt;/span&gt;
				&lt;/p&gt;
				&lt;button v-if=&#34;ready &amp;&amp; !hasChwPlayClicked &amp;&amp; !error&#34; class=&#34;ss_button btn_sm btn_yolk bevel_yolk&#34; @click=&#34;playIncentivizedAd&#34;&gt;{{ playAdText }}&lt;/button&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;!-- .chw-home-timer --&gt;
    </script>
    <script>
      var COMPCHWBUBBLE = {
	template: &#39;#chw-bubble-template&#39;,
	components: {
	},

	props: [&#39;loc&#39;, &#39;isPoki&#39;, &#39;firebaseId&#39;, &#39;limitReached&#39;, &#39;ready&#39;, &#39;error&#39;, &#39;counter&#39;, &#39;hasChwPlayClicked&#39;, &#39;imgs&#39;],
	data: function() {
		return {
		}
	},		
	methods: {
		showNuggyPopup() {
			vueApp.showChicknWinnerPopup();
		},
		playIncentivizedAd(e) {
			if (this.showAdBlockerVideoAd) {
				return;
			}
			if (!this.ready || this.hasChwPlayClicked) {
				e.preventDefault();
				return;
			}
			ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, &#39;Free eggs btn&#39;, &#39;click-home&#39;);

			this.hasChwPlayClicked = true;
			vueApp.loadNuggetVideo();
			vueApp.chicknWinnerNotReady();
		},
		// needs emit
		chwShowCycle() {
			this.chwHomeEl = document.querySelector(&#39;.chw-home-timer&#39;);
			if (this.chwHomeEl) {
			this.chwHomeTimer = setInterval(() =&gt; {
				this.chwHomeEl.classList.toggle(&#39;active&#39;);
				}, this.chwActiveTimer);
			}
		},
	},
	computed: {
		playAdText() {
			if (this.ready &amp;&amp; this.counter === 0) {
				return this.loc.chw_btn_free_reward;
			} else {
				return this.loc.chw_btn_free_reward;
			}
		},
		chwClass() {
			if (this.limitReached || this.error) {
				return &#39;grid-column-1-eq&#39;;
			} else {
				if (this.ready) {
					return &#39;grid-column-1-eq&#39;;
				} else {
					return &#39;grid-column-1-2&#39;;
				}
			}
		},
		chwHomeTimerCls() {
			//{&#39;chw-home-screen-max-watched&#39;: limitReached}
			if (this.limitReached) {
				return &#39;chw-home-screen-max-watched&#39;;
			} else {
				if (this.ready) {
					return &#39;is-ready active&#39;;
				} else {
					return &#39;not-ready&#39;;
				}
			}
		},
		chwChickSrc() {
			if (this.limitReached || this.error) {
				return &#39;img/chicken-nugget/chickLoop_daily_limit.svg&#39;;
			} else {
				if (!this.ready) {
					return &#39;img/chicken-nugget/chickLoop_sleep.svg&#39;;
				} else {
					return &#39;img/chicken-nugget/chickLoop_speak.svg&#39;;
				}
			}
		},
		chwShowTimer() {
			if (this.limitReached) {
				// this.chwStopCycle();
				return false;
			} else {
				if (this.ready) {
					this.chwShowCycle();
					return false;
				} else {
					// this.chwStopCycle();
					return true;
				}
			}
		},
		remainingMsg() {
			if (this.error) {
				return this.loc.chw_error_text;
			}
			if (this.limitReached &amp;&amp; this.counter &gt; 0) {
				return this.loc.chw_daily_limit_msg;
			}
			if (this.ready) {
				if (this.counter === 0) {
					return this.loc.chw_ready_msg;
				} else {
					return this.loc.chw_cooldown_msg;
				}
			} else {
				return this.loc.chw_time_until;
			}
		},
		progressBarWrapClass() {
			if (this.ready) {
				return &#39;chw-progress-bar-wrap-complete&#39;;
			}
		},
	},
	watch: {
	}
};
    </script>
    <script>
      const MainMenuItem = {
	template: &#39;#main-menu-item&#39;,
	props: [&#39;loc&#39;, &#39;item&#39;, &#39;currentScreen&#39;, &#39;screens&#39;, &#39;mode&#39;, &#39;currentMode&#39;, &#39;isPaused&#39;],
	data: function() {
		return {
			inGame: false,
		}
	},
	methods: {
		onMenuItemClick() {
			if (this.item.screen === this.currentScreen &amp;&amp; !this.item.mode) {
				return;
			}
			this.$emit(&#39;previous-screen&#39;, this.currentScreen);

			switch (this.item.screen) {
				case this.screens.home:
					if (!extern.inGame) {
						if (this.currentScreen === this.screens.equip) {
							vueApp.onBackClick();
						}
						vueApp.switchToHomeUi();
					} else {
						vueApp.onHomeClicked();
						ga(&#39;send&#39;, &#39;event&#39;,&#39;respawn-popup&#39;, &#39;click&#39;, &#39;quit&#39;);
					}
					break;
				case this.screens.equip:

					// this should only show once a day
					setTimeout(() =&gt; vueApp.showChickenPopup(), 500);

					if (this.item.mode.includes(this.mode.inventory)) {
						ga(&#39;send&#39;, &#39;event&#39;, extern.inGame ? &#39;respawn-popup&#39; : &#39;home&#39;, &#39;click&#39;, &#39;inventory&#39;);
						vueApp.openEquipSwitchTo(this.mode.inventory);
					} else {
						ga(&#39;send&#39;, &#39;event&#39;, extern.inGame ? &#39;respawn-popup&#39; : &#39;home&#39;, &#39;click&#39;, &#39;shop&#39;);

						vueApp.openEquipSwitchTo(this.mode.shop);
					}
					if (extern.inGame) {
						setTimeout(() =&gt; {
							extern.resize();
						}, 200);
					}
					break;
				case this.screens.profile:
					if (this.currentScreen === this.screens.equip) {
						vueApp.onBackClick();
					}
					ga(&#39;send&#39;, &#39;event&#39;, extern.inGame ? &#39;respawn-popup&#39; : &#39;home&#39;, &#39;click&#39;, &#39;profile&#39;);
					vueApp.switchToProfileUi();
					break;
				case this.screens.photoBooth: 
					vueApp.switchToPhotoBoothUi();
					break;
				default:
					break;
			}
		},
		// showOn(item) {
		// 	if (item.locKey === &#39;account_title_home&#39; &amp;&amp; extern.inGame) {
		// 		return false;
		// 	} else {
		// 		return item.showOn.alwasyOn || (!item.showOn.alwasyOn &amp;&amp; item.showOn.screen === this.currentScreen);
		// 	}
		// }
	},
	computed: {
		locKey() {
			if ((this.isPaused) &amp;&amp; this.item.locKey === &#39;account_title_home&#39;) {
				return &#39;p_pause_quit&#39;;
			} else {
				return this.item.locKey;
			}
		},
		iconCls() {
			return `${this.item.icon}`;
		},
		listCls() {
			return `${this.loc[this.item.locKey].toLowerCase().replace(/\s/g, &#39;&#39;) + &#39;-menu-item&#39;}`
		},
		getIcon() {
			return `${this.item.icon}`;
		},
		itemCls() {
			if (this.item.mode.length === 0) {
				if (this.item.screen === this.currentScreen) {
					return &#39;current-screen&#39;;
				}
			} else if (this.item.mode.includes(this.currentMode) &amp;&amp; this.item.screen === this.currentScreen) {
				return &#39;current-screen&#39;;
			}
		},
		active() {
			return true;
		}
	},

	watch: {
		currentScreen() {
			this.inGame = extern.inGame;
		}
	}
};
    </script>
    <script id="player-name-input" type="text/x-template">
      &lt;input id=&#34;player-name&#34; name=&#34;name&#34; :value=&#34;playerName&#34; v-bind:placeholder=&#34;loc.play_enter_name&#34; @change=&#34;onNameChange($event)&#34; v-on:keyup=&#34;onPlayerNameKeyUp($event)&#34; :class=&#34;cls&#34;&gt;
    </script>
    <script>
      const PlayerNameInput = {
	template: &#39;#player-name-input&#39;,
	props: [&#39;loc&#39;, &#39;playerName&#39;, &#39;pickedGameType&#39;, &#39;currentScreen&#39;, &#39;screens&#39;],
	data: function() {
		return {

		}
	},
	methods: {
		onNameChange (event) {
			console.log(&#39;name changed to: &#39; + event.target.value);
			console.log(&#39;play name event handler&#39;);
			vueApp.setPlayerName(event.target.value);
			BAWK.play(&#39;ui_onchange&#39;);
		},
		onPlayerNameKeyUp (event) {
			event.target.value = extern.filterUnicode(event.target.value);
			event.target.value = extern.fixStringWidth(event.target.value);
			event.target.value = event.target.value.substring(0, 128);

			// Send username to server to start the game!
			if (event.code == &#34;Enter&#34; || event.keyCode == 13) {
				if (vueData.playerName.length &gt; 0) {
					if (vueData.playerName.length &gt; 0) {
						vueApp.externPlayObject(vueData.playTypes.joinPublic, this.pickedGameType, this.playerName, -1, &#39;&#39;);
					}
				}
			}
		},
	},
	computed: {
		cls() {
			return this.currentScreen === this.screens.profile ? &#39;font-sigmar text-shadow-black-40 text_white box_relative profile-name&#39; : &#39;box_absolute ss_field font-nunito ss_name&#39;;
		}
	}

};
    </script>
    <script>
      var COMPMAINSIDE = {
        template: &#39;#main-sidebar-template&#39;,
        components: {
            &#39;menu-item&#39;: MainMenuItem,
            &#39;player-name&#39;: PlayerNameInput
        },

        props: [&#39;loc&#39;, &#39;playerName&#39;, &#39;menuItems&#39;, &#39;currentScreen&#39;, &#39;screens&#39;, &#39;mode&#39;, &#39;currentMode&#39;, &#39;inGame&#39;, &#39;isGamePaused&#39;, &#39;pickedGameType&#39;, &#39;firebaseId&#39;, &#39;playClicked&#39;],
        data: function() {
            return {
                itemSelected: 0,
                logo: shellLogo,
            }
        },
        methods: {
            onLogoClick(e) {
                if (extern.inGame || crazyGamesActive) {
                    e.preventDefault();
                    return;
                }
                BAWK.play(&#39;ui_click&#39;)
            },
            onBackClick() {
                if (this.currentScreen === this.screens.equip) {
                    vueApp.onBackClick();
                }
                setTimeout(() =&gt; {
                    extern.resize();
                }, 1);
                vueApp.hideHomeScreenAds();
                vueApp.switchToGameUi();
                vueApp.showGameMenu();
            },
            previousScreen(screen) {
                this.$emit(&#39;previous-screen&#39;, screen);
            }
        },
        computed: {
            items() {
                return this.firebaseId ? this.menuItems : this.menuItems.filter(item =&gt; (item.locKey !== &#39;eq_shop&#39; &amp;&amp; item.locKey !== &#39;p_pause_equipment&#39;));
            }
        }
    };
    </script>
    <script id="profile-screen-template" type="text/x-template">
      &lt;div id=&#34;mainLayout&#34; class=&#34;profile-content-wrap&#34;&gt;
		&lt;section class=&#34;profile-page-content roundme_sm ss_marginright bg_blue6 common-box-shadow&#34;&gt;
			&lt;section class=&#34;display-grid grid-column-2-eq paddings_xl bg_blue3 gap-sm&#34;&gt;
				&lt;header class=&#34;f_row align-items-center&#34;&gt;
					&lt;section&gt;
						&lt;h1 class=&#34;text-shadow-black-40 text_white nospace&#34;&gt;{{ playerName }}&lt;/h1&gt;
                        &lt;p v-if=&#34;playerId&#34; class=&#34;account-create-date nospace text_white opacity-7&#34; @click=&#34;copyPlayerId&#34; style=&#34;cursor: pointer&#34;&gt;Player ID: {{ playerId }} &lt;i class=&#34;far fa-copy&#34;&gt;&lt;/i&gt;&lt;/p&gt;
                        &lt;p v-if=&#34;cgUserHasLinked&#34; class=&#34;account-create-date nospace text_white opacity-7&#34;&gt; Crazy Games: &lt;strong&gt;{{ crazyGamesUser.username }}&lt;/strong&gt;&lt;/p&gt;
						&lt;!-- &lt;player-name :loc=&#34;loc&#34; :player-name=&#34;playerName&#34; :picked-game-type=&#34;currentGameType&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34;&gt;&lt;/player-name&gt; --&gt;
						&lt;!--button v-if=&#34;showTwitchEvent&#34; class=&#34;ss_button btn-twitch bevel_twitch justify-content-center btn_sm box_relative f_row gap-sm align-items-center&#34; @click=&#34;onTwitchDropsClick&#34;&gt;&lt;i aria-hidden=&#34;true&#34; class=&#34;fab fa-twitch&#34;&gt;&lt;/i&gt; {{ isTwitchLinked }}&lt;/button&gt;--&gt;
					&lt;/section&gt;
				&lt;/header&gt;
				&lt;aside class=&#34;justify-self-end text-right&#34;&gt;
					&lt;p class=&#34;account-create-date nospace text_white opacity-7&#34; v-html=&#34;accountStatus&#34;&gt;&lt;/p&gt;
					&lt;button id=&#34;account-button&#34; @click=&#34;onAccountBtnClicked&#34; class=&#34;ss_button btn_md font-800&#34; :class=&#34;accountBtnCls&#34; :disabled=&#34;disableAccountBtn&#34;&gt;{{ accountBtnTxt }}&lt;/button&gt;
				&lt;/aside&gt;
			&lt;/section&gt;
			&lt;section class=&#34;profile-stat-wrap center_h paddings_xl box_relative&#34;&gt;
				&lt;div v-if=&#34;ui.game.stats.loading&#34; class=&#34;stats-loading box_absolute&#34;&gt;
					&lt;strong&gt;&lt;span class=&#34;text_blue5 font-size-md text-uppercase&#34;&gt;Stats loading... &lt;i class=&#34;fas fa-spinner fa-spin&#34;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/strong&gt;
				&lt;/div&gt;
				&lt;stats-content :loc=&#34;loc&#34; :stats-monthly=&#34;statsCurrent&#34; :stats-lifetime=&#34;statsLifetime&#34; :kdrLifetime=&#34;kdrLifetime&#34; :showLifetime=&#34;ui.profile.statTab&#34; :eggs-spent=&#34;eggsSpent&#34; :eggs-spent-monthly=&#34;eggsSpentMonthly&#34; :challenges-claimed=&#34;claimed&#34;&gt;&lt;/stats-content&gt;
			&lt;/section&gt;
		&lt;/section&gt;
	&lt;/div&gt;
	&lt;!-- .main-content --&gt;
    </script>
    <script id="stats-stats-template" type="text/x-template">
      &lt;div class=&#34;stats-box&#34;&gt;
		&lt;div v-if=&#34;renderReady&#34;&gt;
			&lt;header class=&#34;display-grid stats-grid-other stat-grid-main-header stat-wrapper ss_paddingright_lg ss_paddingleft_xl&#34;&gt;
				&lt;div&gt;&lt;h3 class=&#34;text-shadow-black-40 text_white nospace&#34;&gt;Stats&lt;/h3&gt;&lt;/div&gt;
				&lt;div class=&#34;text-center&#34;&gt;&lt;h3 class=&#34;text-shadow-black-40 text_white nospace&#34;&gt;{{ loc.stat_lifetime }}&lt;/h3&gt;&lt;/div&gt;
				&lt;div class=&#34;text-center&#34;&gt;&lt;h3 class=&#34;text-shadow-black-40 text_white nospace&#34;&gt;{{ loc.stat_monthly }}&lt;/h3&gt;&lt;/div&gt;
			&lt;/header&gt;
			&lt;div class=&#34;stats-container box_relative center_h ss_margintop_sm&#34;&gt;
				&lt;div class=&#34;bg_blue2 roundme_lg ss_marginright_sm&#34;&gt;
					&lt;div class=&#34;stat-wrapper paddings_lg&#34;&gt;
						&lt;section v-if=&#34;renderReady&#34; class=&#34;stat-columns&#34;&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;kills&#39;, &#39;lifetime&#39;: statsLifetime.kills.total, &#39;current&#39;: statsMonthly.kills.total }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;deaths&#39;, &#39;lifetime&#39;: statsLifetime.deaths.total, &#39;current&#39;: statsMonthly.deaths.total }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;streak&#39;, &#39;lifetime&#39;: statsLifetime.streak, &#39;current&#39;: statsMonthly.streak }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.total, statsLifetime.deaths.total], &#39;current&#39;: [statsMonthly.kills.total, statsMonthly.deaths.total] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_kotc_wins&#39;, &#39;lifetime&#39;: statsLifetime.gameType.kotc.wins, &#39;current&#39;: statsMonthly.gameType.kotc.wins }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_kotc_captured&#39;, &#39;lifetime&#39;: statsLifetime.gameType.kotc.captured, &#39;current&#39;: statsMonthly.gameType.kotc.captured }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_eggs_spent&#39;, &#39;lifetime&#39;: eggsSpent, &#39;current&#39;: eggsSpentMonthly }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_public_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.mode.public, statsLifetime.deaths.mode.public], &#39;current&#39;: [statsMonthly.kills.mode.public, statsMonthly.deaths.mode.public] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_private_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.mode.private, statsLifetime.deaths.mode.private], &#39;current&#39;: [statsMonthly.kills.mode.private, statsMonthly.deaths.mode.private] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_fa_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.gameType.ffa, statsLifetime.deaths.gameType.ffa], &#39;current&#39;: [statsMonthly.kills.gameType.ffa, statsMonthly.deaths.gameType.ffa] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_teams_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.gameType.team, statsLifetime.deaths.gameType.team], &#39;current&#39;: [statsMonthly.kills.gameType.team, statsMonthly.deaths.gameType.team] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_ctf_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.gameType.spatula, statsLifetime.deaths.gameType.spatula], &#39;current&#39;: [statsMonthly.kills.gameType.spatula, statsMonthly.deaths.gameType.spatula] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_kotc_kdr&#39;, kdr: true, &#39;lifetime&#39;: [statsLifetime.kills.gameType.kotc, statsLifetime.deaths.gameType.kotc], &#39;current&#39;: [statsMonthly.kills.gameType.kotc, statsMonthly.deaths.gameType.kotc] }&#34;&gt;&lt;/stat-item&gt;
						&lt;/section&gt;
					&lt;/div&gt;
		
					&lt;header class=&#34;display-grid stats-grid-other stat-grid-main-header stat-wrapper ss_paddingright_lg ss_paddingleft_xl ss_paddingtop_sm ss_paddingbottom_sm&#34;&gt;
						&lt;div&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.stat_game_mode }}&lt;/h4&gt;&lt;/div&gt;
						&lt;div class=&#34;text-center display-grid grid-auto-flow-column&#34; style=&#34;margin-left: 0.9em;&#34;&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.kills }}&lt;/h4&gt; &lt;h4 class=&#34;nospace&#34;&gt;{{ loc.deaths }}&lt;/h4&gt;&lt;/div&gt;
						&lt;div class=&#34;text-center display-grid grid-auto-flow-column&#34; style=&#34;margin-left: 0.9em;&#34;&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.kills }}&lt;/h4&gt; &lt;h4 class=&#34;nospace&#34;&gt;{{ loc.deaths }}&lt;/h4&gt;&lt;/div&gt;
					&lt;/header&gt;
					&lt;div class=&#34;stat-wrapper paddings_lg&#34;&gt;
						&lt;section v-if=&#34;renderReady&#34; class=&#34;stat-columns&#34;&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_public&#39;, &#39;lifetime&#39;: [statsLifetime.kills.mode.public, statsLifetime.deaths.mode.public], &#39;current&#39;: [statsMonthly.kills.mode.public, statsMonthly.deaths.mode.public] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;stat_private&#39;, &#39;lifetime&#39;: [statsLifetime.kills.mode.private, statsLifetime.deaths.mode.private], &#39;current&#39;: [statsMonthly.kills.mode.private, statsMonthly.deaths.mode.private] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;gametype_ffa&#39;, &#39;lifetime&#39;: [statsLifetime.kills.gameType.ffa, statsLifetime.deaths.gameType.ffa], &#39;current&#39;: [statsMonthly.kills.gameType.ffa, statsMonthly.deaths.gameType.ffa] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;gametype_teams&#39;, &#39;lifetime&#39;: [statsLifetime.kills.gameType.team, statsLifetime.deaths.gameType.team], &#39;current&#39;: [statsMonthly.kills.gameType.team, statsMonthly.deaths.gameType.team] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;gametype_ctf&#39;, &#39;lifetime&#39;: [statsLifetime.kills.gameType.spatula, statsLifetime.deaths.gameType.spatula], &#39;current&#39;: [statsMonthly.kills.gameType.spatula, statsMonthly.deaths.gameType.spatula] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;gametype_king&#39;, &#39;lifetime&#39;: [statsLifetime.kills.gameType.kotc, statsLifetime.deaths.gameType.kotc], &#39;current&#39;: [statsMonthly.kills.gameType.kotc, statsMonthly.deaths.gameType.kotc] }&#34;&gt;&lt;/stat-item&gt;
						&lt;/section&gt;
					&lt;/div&gt;
		
					&lt;header class=&#34;display-grid stats-grid-other stat-grid-main-header stat-wrapper ss_paddingright_lg ss_paddingleft_xl ss_paddingtop_sm ss_paddingbottom_sm&#34;&gt;
						&lt;div&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.stat_weapons }}&lt;/h4&gt;&lt;/div&gt;
						&lt;div class=&#34;text-center display-grid grid-auto-flow-column&#34; style=&#34;margin-left: 0.9em;&#34;&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.kills }}&lt;/h4&gt; &lt;h4 class=&#34;nospace&#34;&gt;{{ loc.deaths }}&lt;/h4&gt;&lt;/div&gt;
						&lt;div class=&#34;text-center display-grid grid-auto-flow-column&#34; style=&#34;margin-left: 0.9em;&#34;&gt;&lt;h4 class=&#34;nospace&#34;&gt;{{ loc.kills }}&lt;/h4&gt; &lt;h4 class=&#34;nospace&#34;&gt;{{ loc.deaths }}&lt;/h4&gt;&lt;/div&gt;
					&lt;/header&gt;
					&lt;div class=&#34;stat-wrapper paddings_lg&#34;&gt;
						&lt;section v-if=&#34;renderReady&#34; class=&#34;stat-columns&#34;&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_0&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.eggk, statsLifetime.deaths.dmgType.eggk], &#39;current&#39;: [statsMonthly.kills.dmgType.eggk, statsMonthly.deaths.dmgType.eggk] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_1&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.scrambler, statsLifetime.deaths.dmgType.scrambler], &#39;current&#39;: [statsMonthly.kills.dmgType.scrambler, statsMonthly.deaths.dmgType.scrambler] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_2&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.ranger, statsLifetime.deaths.dmgType.ranger], &#39;current&#39;: [statsMonthly.kills.dmgType.ranger, statsMonthly.deaths.dmgType.ranger] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_3&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.rpegg, statsLifetime.deaths.dmgType.rpegg], &#39;current&#39;: [statsMonthly.kills.dmgType.rpegg, statsMonthly.deaths.dmgType.rpegg] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_4&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.whipper, statsLifetime.deaths.dmgType.whipper], &#39;current&#39;: [statsMonthly.kills.dmgType.whipper, statsMonthly.deaths.dmgType.whipper] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_5&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.crackshot, statsLifetime.deaths.dmgType.crackshot], &#39;current&#39;: [statsMonthly.kills.dmgType.crackshot, statsMonthly.deaths.dmgType.crackshot] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_3_6&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.trihard, statsLifetime.deaths.dmgType.trihard], &#39;current&#39;: [statsMonthly.kills.dmgType.trihard, statsMonthly.deaths.dmgType.trihard] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;weapon_cluck_9mm&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.pistol, statsLifetime.deaths.dmgType.pistol], &#39;current&#39;: [statsMonthly.kills.dmgType.pistol, statsMonthly.deaths.dmgType.pistol] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_6&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.grenade, statsLifetime.deaths.dmgType.grenade], &#39;current&#39;: [statsMonthly.kills.dmgType.grenade, statsMonthly.deaths.dmgType.grenade] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;item_type_7&#39;, &#39;lifetime&#39;: [statsLifetime.kills.dmgType.melee, statsLifetime.deaths.dmgType.melee], &#39;current&#39;: [statsMonthly.kills.dmgType.melee, statsMonthly.deaths.dmgType.melee] }&#34;&gt;&lt;/stat-item&gt;
							&lt;stat-item :loc=&#34;loc&#34; :stat=&#34;{&#39;name&#39;: &#39;death_by_fall&#39;, &#39;lifetime&#39;: [&#39;N/A&#39;, statsLifetime.deaths.dmgType.fall], &#39;current&#39;: [&#39;N/A&#39;, statsMonthly.deaths.dmgType.fall] }&#34;&gt;&lt;/stat-item&gt;
						&lt;/section&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;div class=&#34;bg_blue2 roundme_lg ss_marginright_sm ss_margintop_sm&#34;&gt;
					&lt;div class=&#34;stat-wrapper paddings_lg&#34;&gt;
						&lt;h3 class=&#34;text-shadow-black-40 text_white nospace&#34;&gt;{{ loc.challenges_completed }}&lt;/h3&gt;
						&lt;div class=&#34;stat font-600&#34;&gt;
							&lt;div class=&#34;roundme_sm ss_paddingleft ss_paddingtop_micro ss_marginbottom_sm&#34;&gt;
								&lt;p class=&#34;nospace text_white&#34;&gt;{{ loc.total }}: {{ challengesClaimed.total }}&lt;/p&gt;
							&lt;/div&gt;
						&lt;/div&gt;
						&lt;div class=&#34;stat font-600&#34;&gt;
						&lt;div class=&#34;roundme_sm ss_paddingleft ss_paddingtop_micro ss_marginbottom_sm&#34;&gt;
							&lt;p class=&#34;nospace text_white&#34;&gt;{{ loc.unique }}: {{ challengesClaimed.unique }}&lt;/p&gt;
						&lt;/div&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script id="the-stat-template" type="text/x-template">
      &lt;section class=&#34;stat display-grid font-600&#34; :class=&#34;statWrapper&#34;&gt;
		&lt;div class=&#34;text_white roundme_sm_top-bottom_right ss_paddingleft ss_paddingtop_micro ss_marginbottom_sm&#34;&gt;&lt;p&gt;{{ statTitle }}&lt;/p&gt;&lt;/div&gt;
		&lt;div class=&#34;text-center text_white roundme_sm_top-bottom_left ss_paddingleft ss_paddingtop_micro ss_marginbottom_sm ss_marginright_sm&#34; :class=&#34;lifetimeCls&#34; v-html=&#34;statLifetime&#34;&gt;&lt;/div&gt;
		&lt;div class=&#34;text-center text_white roundme_sm ss_paddingleft ss_paddingtop_micro ss_marginbottom_sm&#34; :class=&#34;currentCls&#34; v-html=&#34;statMonthly&#34;&gt;&lt;/div&gt;
	&lt;/section&gt;
    </script>
    <script>
      var StatTemplate = {
    template: &#39;#the-stat-template&#39;,
    props: [&#39;loc&#39;, &#39;stat&#39;],
    data: function () {
        return {
			lifetimeCls: &#39;&#39;,
			currentCls: &#39;&#39;,
		}
    },
    methods: {
		statName(key) {
			if (key=== &#39;eggk&#39;) {
				key= &#39;eggK-47&#39;;
			}
			return key.toUpperCase();
		},
		kdr(kills, deaths) {
			return Math.floor((kills / Math.max(deaths, 1)) * 100) / 100;
		},
		setupStat(stat) {
			if (this.stat.kdr !== undefined &amp;&amp; stat.length !== undefined) {
				return this.kdr(stat[0], stat[1]);
			} else if (stat &amp;&amp; stat.length !== undefined) {
				return `&lt;div&gt;${stat[0]}&lt;/div&gt; &lt;div&gt;${stat[1]}&lt;/div&gt;`;
			} else {
				return stat;
			}
		}
    },
	computed: {
		statTitle() {
			// if (this.stat.name === &#39;eggk&#39;) {
			// 	return &#39;eggK-47&#39;;
			// }
			return this.loc[this.stat.name];
			// return this.stat.name;
		},
		statMonthly() {
			if (this.stat.current &amp;&amp; this.stat.current.length !== undefined &amp;&amp; this.stat.kdr === undefined) {
				this.currentCls = &#39;display-grid grid-column-2-eq&#39;;
			}
			return this.setupStat(this.stat.current);
		},
		statLifetime() {
			if (hasValue(this.stat.lifetime) &amp;&amp; this.stat.lifetime.length !== undefined &amp;&amp; this.stat.kdr === undefined) {
				this.lifetimeCls = &#39;display-grid grid-column-2-eq&#39;;
			}
			return this.setupStat(this.stat.lifetime);
		},
		statWrapper() {
			// return this.stat.lifetime.length !== undefined &amp;&amp; this.stat.kdr === undefined ? &#39;stats-grid-other&#39; : &#39;stats-grid&#39;;
			return &#39;stats-grid-other&#39;;
		},
	},
};
    </script>
    <script>
      var STATSPOPUP = {
    template: &#39;#stats-stats-template&#39;,
    props: [&#39;loc&#39;, &#39;statsMonthly&#39;, &#39;statsLifetime&#39;, &#39;kdrLifetime&#39;, &#39;showLifetime&#39;, &#39;eggsSpent&#39;, &#39;eggsSpentMonthly&#39;, &#39;challengesClaimed&#39;],
	components: {
		&#39;stat-item&#39;: StatTemplate
	},
    methods: {
		statName(key) {
			if (key === &#39;eggk&#39;) {
				key = &#39;eggK-47&#39;;
			}
			return key.toUpperCase();
		},
		kdr(kills, deaths) {
			return Math.floor((kills / Math.max(deaths, 1)) * 100) / 100;
		}
    },
	computed: {
		// VUE is taking it&#39;s time passing these props, so we need to wait for them to be ready
		renderReady() {
			return Object.keys(this.statsLifetime).length &gt; 0 &amp;&amp; Object.keys(this.statsMonthly).length &gt; 0;
		}
	}
};
    </script>
    <script>
      const ProfileScreen = {
        template: &#39;#profile-screen-template&#39;,
        components: {
            &#39;stats-content&#39;: STATSPOPUP,
            // &#39;player-name&#39;: PlayerNameInput
        },

        props: [&#39;claimed&#39;, &#39;playerId&#39;, &#39;crazyGamesUser&#39;],

        data: function() {
            return vueData;
        },

        methods: {
            showSignIn: function() {
                extern.showSignInDialog();
                vueApp.$refs.firebaseSignInPopup.show();
            },
            onAccountBtnClicked: function() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }

                if (crazyGamesActive &amp;&amp; this.cgUserHasLinked) {
                    return;
                }

                if (extern.inGame) {
                    if (this.isAnonymous &amp;&amp; this.showSignIn) {
                        vueApp.onShowloginPopupWarning();
                    } else {
                        vueApp.onShowlogoutPopupWarning();
                    }
                } else {
                    if (this.isAnonymous &amp;&amp; this.showSignIn) {
                        vueApp.onSignInClicked();
                    } else {
                        vueApp.onSignOutClicked();
                    }
                }
            },

            onQuitAndLoginManage() {
                vueApp.onLeaveGameConfirm();
                setTimeout(() =&gt; {
                    this.$emit(&#39;leave-game-confimed&#39;);
                }, 1000);
            },

            onTwitchDropsClick() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }

                ga(&#39;send&#39;, &#39;event&#39;, &#39;profilePage&#39;, &#39;click&#39;, &#39;twitch_drops&#39;);
                window.open(dynamicContentPrefix + &#39;twitch&#39;);
            },
            selectTab(val) {
                if (this.ui.profile.statTab === val) {
                    return;
                }
                this.ui.profile.statTabClicked = true;
                setTimeout(() =&gt; this.ui.profile.statTabClicked = false, 500);
                BAWK.play(&#39;ui_toggletab&#39;);
                this.ui.profile.statTab = val;
            },
            copyPlayerId() {
                if (!this.playerId) return;
                navigator.clipboard.writeText(this.playerId)
                    .then(() =&gt; {
                        vueApp.showGenericPopup(&#39;p_sharelink_copied&#39;, &#39;player_id_copied&#39;, &#39;ok&#39;);
                    })
                    .catch(err =&gt; {
                        console.error(&#39;Copy failed:&#39;, err);
                    });
            },
        },
        computed: {
            isEggStoreSaleItem() {
                return this.eggStoreItems.some(item =&gt; item[&#39;salePrice&#39;] !== &#39;&#39;);
            },
            showTwitchEvent() {
                return this.ui.events.twitch;
            },
            isTwitchLinked() {
                return this.twitchLinked ? this.loc.account_linked_to_twitch : this.loc.account_link_to_twitch;
            },
            accountStatus() {
                if (this.accountCreated) {
                    return `${this.loc.account_created}: &lt;strong&gt;${this.accountCreated}&lt;/strong&gt;`;
                }
                return this.loc.account_profile_login_desc;
            },
            accountBtnCls() {
                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    return &#39;btn_green bevel_green&#39;;
                }
                return &#39;btn_yolk bevel_yolk&#39;;

            },
            accountBtnTxt() {
                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    return this.loc.sign_in;
                }

                if (crazyGamesActive &amp;&amp; this.cgUserHasLinked) {
                    return this.loc.crazygames_logout_text;
                }

                return this.loc.sign_out;
            },

            disableAccountBtn() {
                if (crazyGamesActive &amp;&amp; this.cgUserHasLinked) {
                    return true;
                }

                return false;
            },
            cgUserHasLinked() {
                return this.crazyGamesUser?.hasLinked;
            }
        }
    };
    </script>
    <!-- Faction Score Meter Template -->
    <script id="faction-meter-template" type="text/x-template">
      &lt;div id=&#34;gauge-meter&#34; class=&#34;gauge-meter centered_x&#34; @click=&#34;handleMeterClick&#34; v-show=&#34;show&#34;&gt;
		&lt;div id=&#34;faction-meter&#34; class=&#34;faction-meter centered_x&#34; @click=&#34;onFactionMeterClick&#34;&gt;
			&lt;!-- Faction glow areas --&gt;
			&lt;div class=&#34;faction-area faction-0-area-glow box_absolute&#34; :style=&#34;getFactionStyle(0)&#34;&gt;&lt;/div&gt;
			&lt;div class=&#34;faction-area faction-1-area-glow box_absolute&#34; :style=&#34;getFactionStyle(1)&#34;&gt;&lt;/div&gt;
			
			&lt;!-- The meter bar itself --&gt;
			&lt;div class=&#34;faction-meter-shell ss-shell-meter centered_x&#34;&gt;
				&lt;div id=&#34;ss-shell-gauge&#34; class=&#34;gauge&#34;&gt;
					&lt;img src=&#34;img/gauge-bar/shadows-meter.png&#34; class=&#34;centered_x meter-gauge&#34;&gt;
					&lt;img src=&#34;img/gauge-bar/red-glow.png&#34; class=&#34;glow red&#34; v-if=&#34;leadingFaction === 0&#34;&gt;
					&lt;img src=&#34;img/gauge-bar/blue-glow.png&#34; class=&#34;glow blue&#34; v-if=&#34;leadingFaction === 1&#34;&gt;
					&lt;div ref=&#34;needle&#34; class=&#34;needle&#34;&gt;
						&lt;img src=&#34;img/gauge-bar/meter_marker.png&#34; class=&#34;centered_x&#34;&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;!-- #faction-meter --&gt;
		&lt;!-- Faction labels --&gt;
		&lt;div class=&#34;faction-labels centered_x bottom-0 tool-tip&#34;&gt;
			&lt;span class=&#34;tool-tip-text faction-tooltip&#34;&gt;{{ loc.factions_meter_tip }}&lt;/span&gt;
			&lt;div class=&#34;tool-tip&#34;&gt;
				&lt;div class=&#34;faction-label faction-1-label f_row align-items-center justify-content-center roundme_sm&#34; 
					@mouseenter=&#34;hoverFactionA = true&#34; 
					@mouseleave=&#34;hoverFactionA = false&#34;
					:class=&#34;{ &#39;faction-hover&#39;: hoverFactionA }&#34;&gt;
					&lt;img src=&#34;img/gauge-bar/ico_crossbones.svg&#34; alt=&#34;&#34;&gt; 
					&lt;span&gt;{{ hoverFactionA ? factionAHoverValue : factionATotals }}&lt;/span&gt;
				&lt;/div&gt;
				&lt;div class=&#34;text-center faction-label-txt text-uppercase font-800 faction-txt-red&#34;&gt;{{ loc.faction_a_title }}&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class=&#34;tool-tip&#34;&gt;
				&lt;div class=&#34;faction-label faction-0-label f_row align-items-center justify-content-center roundme_sm&#34;
					@mouseenter=&#34;hoverFactionB = true&#34; 
					@mouseleave=&#34;hoverFactionB = false&#34;
					:class=&#34;{ &#39;faction-hover&#39;: hoverFactionB }&#34;&gt;
					&lt;img src=&#34;img/gauge-bar/ico_crossbones.svg&#34; alt=&#34;&#34;&gt; 
					&lt;span&gt;{{ hoverFactionB ? factionBHoverValue : factionBTotals }}&lt;/span&gt;
				&lt;/div&gt;
				&lt;div class=&#34;text-center faction-label-txt  text-uppercase font-800 faction-txt-blue&#34;&gt;{{ loc.faction_b_title }}&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;!-- .faction-labels --&gt;
	&lt;/div&gt;
    </script>
    <script>
      // :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34; :play-clicked=&#34;playClicked&#34;
var FactionMeter = {
  template: &#39;#faction-meter-template&#39;,
  props: {
    // Ensuring a new object instance for each component
    factionData: {
      type: Object,
      default: () =&gt; ({ 0: 0, 1: 0 })
    },
	currentScreen: {
		type: Number,
		default: 0
	},
	screens: {
		type: Object,
		default: () =&gt; {}
	},
	playClicked: {
		type: Boolean,
		default: false
	},
	loc: {
		type: Object,
		default: () =&gt; {}
	}
  },
  data() {
    return {
      current: 180, // Center position (neutral)
      min: 160,     // Furthest left faction dominance
      max: 200,     // Furthest right faction dominance
      factionTotals: { ...this.factionData }, // Initialize directly
      leadingFaction: null,
      rotateAnimation: &#39;hvsm-animation&#39;,
      pauseAnimation: &#39;hvsm-paused&#39;,
	  factionA: &#39;EggSassins&#39;,
	  factionB: &#39;Masters&#39;,
      hoverFactionA: false,
      hoverFactionB: false,
    };
  },

  computed: {
	factionATotals() {
		return this.factionData[0] ? formatLargeNumbers(this.factionData[0]) : 0;
	},
	factionBTotals() {
		return this.factionData[1] ? formatLargeNumbers(this.factionData[1]) : 0;
	},
	factionAHoverValue() {
		// You can customize this value to show different information on hover
		return this.factionData[0] ? this.formatLargeNumbersWithCommas(this.factionData[0]) : 0;
	},
	factionBHoverValue() {
		// You can customize this value to show different information on hover
		return this.factionData[1] ? this.formatLargeNumbersWithCommas(this.factionData[1]) : 0;
	},
	show() {
		return (this.currentScreen === this.screens.home || this.currentScreen === this.screens.game) &amp;&amp; !this.playClicked;
	}
  },

  watch: {
    // Watch for changes in factionData and update accordingly
    factionData: {
      handler(newData) {
        this.factionTotals = { ...newData };
        this.calculateMeterPosition();
      },
      deep: true // Ensures reactivity for nested changes
    }
  },

  methods: {
	handleMeterClick() {
		vueApp.showFactionActivatedPopup();
	},
    updateFactionTotals(totals) {
      this.factionTotals = { ...totals };
      this.calculateMeterPosition();
    },

    formatLargeNumbersWithCommas(num) {
      return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, &#34;,&#34;);
    },

    calculateMeterPosition() {

		const faction0Points = Number(this.factionTotals[0]) || 0;
		const faction1Points = Number(this.factionTotals[1]) || 0;

		if (faction0Points === 0 &amp;&amp; faction1Points === 0) {
		this.animateToPosition(180);
		return;
		}

		// Calculate the difference between factions
		const pointDifference = faction1Points - faction0Points;

		// Define a logarithmic scale for more granular movement with small differences
		// and more significant movement with larger differences
		const baseMovement = 5; // Minimal movement for small differences
		const scaleFactor = 5;  // How quickly the needle moves as difference increases

		let newPosition;

		if (pointDifference === 0) {
			// Equal points, stay at neutral
			newPosition = 180;
			this.leadingFaction = null;
		} else if (pointDifference &gt; 0) {
			// Faction 1 (monsters) is leading
			const movement = baseMovement + scaleFactor * Math.log10(1 + pointDifference);
			// Cap the maximum movement
			const maxMovement = this.max - 180;
			newPosition = 180 + Math.min(movement, maxMovement);
			this.leadingFaction = 1;
		} else {
			// Faction 0 (heroes) is leading
			const movement = baseMovement + scaleFactor * Math.log10(1 + Math.abs(pointDifference));
			// Cap the maximum movement
			const maxMovement = 180 - this.min;
			newPosition = 180 - Math.min(movement, maxMovement);
			this.leadingFaction = 0;
			}

		this.animateToPosition(newPosition);
	},

    animateToPosition(newPosition) {
      const needle = this.$refs.needle;
      if (!needle) {
        console.warn(&#39;Needle reference not found&#39;);
        return;
      }

      requestAnimationFrame(() =&gt; {
        needle.classList.remove(this.pauseAnimation, this.rotateAnimation);
        this.setAnimationTimer(Math.min(Math.abs(newPosition - this.current) * 20, 2000));
        this.setAnimationStart(this.current);
        this.setGaugeValue(newPosition);
        needle.classList.add(this.rotateAnimation);
        this.current = newPosition;
      });
    },

    getFactionOpacity(factionId) {
      factionId = Number(factionId);
      if (factionId === 0) {
        return this.current &gt;= 180 ? 0.1 : 0.1 + ((180 - this.current) / (180 - this.min)) * 0.9;
      } else if (factionId === 1) {
        return this.current &lt;= 180 ? 0.1 : 0.1 + ((this.current - 180) / (this.max - 180)) * 0.9;
      }
      return 0.1;
    },

    getFactionStyle(factionId) {
      return {
        opacity: this.getFactionOpacity(factionId)
      };
    },

    onFactionMeterClick() {
      this.$emit(&#39;faction-meter-click&#39;, {
        leadingFaction: this.leadingFaction,
        position: this.current
      });
    },

	setAnimationTimer(val) {
  if (this.$refs.needle) {
    this.$refs.needle.style.setProperty(&#39;--gauge-timer-sec&#39;, `${val / 1000}s`);
  }
},

setAnimationStart(val) {
  if (this.$refs.needle) {
    this.$refs.needle.style.setProperty(&#39;--gauge-value-start&#39;, `${val}deg`);
  }
},

setGaugeValue(val) {
  if (this.$refs.needle) {
    this.$refs.needle.style.setProperty(&#39;--gauge-value&#39;, `${val}deg`);
  }
}
  },

  mounted() {
    this.setGaugeValue(180);
    if (Object.values(this.factionTotals).some(val =&gt; val &gt; 0)) {
      this.calculateMeterPosition();
    }
  }
};
    </script>
    <template id="vue-progress-outer">
      <transition name="fade">
        <div v-show="isShowing" class="loading-progress-outer centered_x">
          <div class="loading-progress">
            <span class="loading-progress-bar" :style="{
            width: progress + &#39;%&#39;,
            transition: progress === 100 ? &#39;width 100ms ease-in-out&#39; : &#39;width 2000ms ease-in-out&#39;
          }"></span>
          </div>
        </div>
      </transition>
    </template>
    <script>
      var comp_progress_bar = {
  template: &#34;#vue-progress-outer&#34;,
  props: {
    isShowing: Boolean,
    progress: {
      type: Number,
      required: true,
      validator: (value) =&gt; value &gt;= 0 &amp;&amp; value &lt;= 100,
    },
  },
};
    </script>
    <style scoped="">
      .loading-progress-outer {
  background: #643219;
  border-radius: 2em;
  height: 3.3em;
  width: 24em;
  margin-top: 2em;
  overflow: hidden;
  bottom: 8em;
}

.loading-progress {
  margin-top: 1em;
  width: 23em;
  height: 2.2em;
  background: white;
  padding: 0.5em;
  border-radius: 2em;
  margin: 0.3em 0.5em 0;
  position: relative;
}

.loading-progress-bar {
  display: block;
  height: 100%;
  background: orange;
  border-radius: 2em;
}
    </style>
    <script id="shell-tips" type="text/x-template">
      &lt;transition name=&#34;fade&#34;&gt;
	&lt;div class=&#34;spinner-tips display-grid centered_x&#34; :class=&#34;stylesWrapper&#34; v-show=&#34;isShowing&#34;&gt;
		&lt;p v-show=&#34;tip&#34; :class=&#34;styleMsg&#34; v-html=&#34;loc[tip]&#34;&gt;&lt;/p&gt;
	&lt;/div&gt;
	&lt;/transition&gt;
    </script>
    <script>
      var comp_shell_tips = {
  template: &#34;#shell-tips&#34;,
  props: {
    loc: Object,
    isShowing: Boolean,
	objRef: String,
	objRefAlt: String,
	timerDuration: Number,
  },

  data() {
    return {
      tip: &#34;&#34;,
      tips: [],
      tipKey: null,
      goodBrowser: true,
      browserTipShown: false,
      shownTips: [],
      timer: null,
      interval: null,
	  countDown: null,
    };
  },

  mounted() {
    this.checkBrowser();
    this.getTip();
  },

  methods: {
    getTipKey() {
      if (!this.accountDate) {
        this.tipKey = &#34;tipNew_&#34;;
      } else {
        if (!this.accountDays) {
          this.accountDays = Math.ceil(
            (Date.now() - new Date(this.accountDate).getTime()) / (1000 * 3600 * 24)
          );
        }
        this.tipKey = this.accountDays &lt;= 14 ? &#34;tipNew_&#34; : &#34;tip_&#34;;
      }
      this.loadTips();
    },

    getTip() {
		if (!this.objRefAlt) {
			this.tipKey = this.objRef;
			this.randomTip();
			return;
		}

      if (!this.accountDate) {
        this.tipKey = &#34;LoadingTipsNew&#34;;
      } else {
        if (!this.accountDays) {
          this.accountDays = Math.ceil(
            (Date.now() - new Date(this.accountDate).getTime()) / (1000 * 3600 * 24)
          );
        }
        this.tipKey = this.accountDays &lt;= 14 ? this.objRefAlt : this.objRef;
      }
      this.randomTip();
    },

    randomTip() {
      if (!this.goodBrowser &amp;&amp; !this.browserTipShown) {
        this.tip = &#34;tip_ofthe_day_107&#34;;
        this.browserTipShown = true;
        return;
      }

      const tips = extern[this.tipKey]; // Keep extern reference
      if (!tips || tips.length === 0) {
        console.warn(&#34;No tips available.&#34;);
        return;
      }

      // Initialize availableTips if not set or exhausted
      if (!this.availableTips || this.availableTips.length === 0) {
        this.availableTips = Array.from({ length: tips.length }, (_, i) =&gt; i); // Fill with indexes
      }

      // Select a random index from availableTips
      const randomIdx = Math.floor(Math.random() * this.availableTips.length);
      const tipIndex = this.availableTips.splice(randomIdx, 1)[0]; // Remove from pool

		if (!this.timerDuration) {
			// random timer duration between 3 and 10 seconds
			this.countDown = Math.floor(Math.random() * 4000) + 1500;
		} else {
			this.countDown = this.timerDuration;
		}

    	this.tip = tips[tipIndex]; // Assign selected tip
    },

    async checkBrowser() {
      if (navigator.userAgentData) {
        const brands = navigator.userAgentData.brands || [];
        this.goodBrowser = brands.some((brand) =&gt; brand.brand === &#34;Google Chrome&#34;);
      } else {
        this.goodBrowser = this.isNotChromeFallback();
      }
    },

    isNotChromeFallback() {
      const ua = navigator.userAgent;
      return !(ua.includes(&#34;Chrome&#34;) &amp;&amp; !ua.includes(&#34;Edg&#34;) &amp;&amp; !ua.includes(&#34;OPR&#34;));
    }
  },

  computed: {
	stylesWrapper() {
		return &#39;spinner-tips display-grid centered_x &#39; + this.objRef;
	},
	styleMsg() {
		let common = &#39;load_message tips text-center&#39;;
		if (!this.objRefAlt) {
			common += &#39; h6&#39;;
		}

		return common;
	}
  },

  watch: {
		isShowing(val) {
			clearTimeout(this.timer);
			clearInterval(this.interval);

			if (val) {
				this.timer = setTimeout(() =&gt; {
					this.interval = setInterval(this.randomTip, this.countDown);
				}, this.countDown);
			} else {
				this.randomTip();
			}
		}
	}
};
    </script>
    <script>
      var comp_home_screen = {
        template: &#39;#home-screen-template&#39;,
        components: {
            &#39;play-panel&#39;: comp_play_panel,
            &#39;house-ad-big&#39;: comp_house_ad_big,
            &#39;house-ad-small&#39;: comp_house_ad_small,
            &#39;account-panel&#39;: comp_account_panel,
            &#39;chicken-panel&#39;: comp_chicken_panel,
            &#39;footer-links-panel&#39;: comp_footer_links_panel,
            &#39;event-panel&#39;: comp_events,
            &#39;media-tabs&#39;: MEDIATABS,
            &#39;profile-screen&#39;: ProfileScreen,
            // &#39;gauge-meter&#39;: CompGauge,
            // &#39;faction-meter&#39;: FactionMeter,
            &#39;item&#39;: comp_item,
            &#39;progress-bar&#39;: comp_progress_bar,
            &#39;shell-tips&#39;: comp_shell_tips
            // &#39;pwa-button&#39;: comp_pwa_btn,
        },

        data: function() {
            return vueData;
        },

        methods: {
            onHvsmPopupOpen() {
                this.getHvsmItems();
            },
            onHvsmPopupClose() {},
            onHvsmClicked(item) {
                let tag;
                if (typeof item === &#39;object&#39;) {
                    tag = item.item_data.tags.includes(&#39;Monsters&#39;) ? &#39;Monsters&#39; : &#39;Heroes&#39;;
                } else {
                    tag = item;
                }
                vueApp.showTaggedItemsOnEquipScreen(tag);
                // this.$refs.hvsmPopup.close();
            },
            playSound(sound) {
                BAWK.play(sound);
            },
            onEquipClicked: function() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }
                vueApp.openEquipSwitchTo();
                BAWK.play(&#39;ui_equip&#39;);
            },
            showSignIn: function() {
                extern.showSignInDialog();
                vueApp.$refs.firebaseSignInPopup.show();
            },
            onSignInClicked: function() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }
                this.showSignIn();
            },
            onSignOutClicked: function() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }
                extern.signOut();
            },
            leaveGameConfirmed() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }

                if (this.isAnonymous &amp;&amp; this.showSignIn) {
                    this.onSignInClicked();
                } else {
                    extern.signOut();
                }
            },
            onResendEmailClicked: function() {
                extern.sendFirebaseVerificationEmail();
                // vueApp.showGenericPopup(&#39;verify_email_sent&#39;, &#39;verify_email_instr&#39;, &#39;ok&#39;);
                this.$refs.resendEmailConfirm.show();
            },
            onHideResendEmail() {
                extern.accountCreationNotification();
                // setTimeout(()=&gt; vueApp.setDarkOverlay(true), 100);
            },
            onBigHouseAdClosed: function() {
                console.log(&#39;big house ad closed event received&#39;);
                this.ui.houseAds.big = null;
                this.urlParamSet = this.urlParams ? true : null;
                vueApp.showTitleScreenAd();
                vueApp.shellShockUrlParamaterEvents();
            },
            onPlayerNameChanged: function(newName) {
                console.log(&#39;play name event handler&#39;);
                vueApp.setPlayerName(newName);
                BAWK.play(&#39;ui_onchange&#39;);
            },
            onEggPlayClick() {
                play: &#39;play game&#39;,
                ga(&#39;send&#39;, &#39;event&#39;, vueData.googleAnalytics.cat.play, vueData.googleAnalytics.action.eggDollClick);
                vueApp.$refs.homeScreen.$refs.playPanel.onPlayButtonClick();
            },
            api_incentivizedVideoRewardRequest() {
                extern.api_incentivizedVideoRewardRequested();
            },
            onTwitchDropsClick() {
                if (this.showAdBlockerVideoAd) {
                    return;
                }
                window.open(dynamicContentPrefix + &#39;twitch&#39;);
            },
            chwStopCycle() {
                if (this.chwHomeTimer) {
                    clearInterval(this.chwHomeTimer);
                    this.chwHomeTimer = &#39;&#39;;
                    this.chwHomeEl.classList.remove(&#39;.active&#39;);
                }
            },
            onGameTypeChanged(val) {
                vueApp.onGameTypeChanged(val);
            },
            // onGaugeMeterClick() {
            // 	this.$refs.hvsmPopup.show();
            // },

            getHvsmItems() {
                this.hvsm.hero.items = extern.getTaggedItems(this.hvsm.hero.name).filter(item =&gt; item.is_available);
                this.hvsm.monster.items = extern.getTaggedItems(this.hvsm.monster.name).filter(item =&gt; item.is_available);
            },

            challengeReroll(id) {
                // TODO: update challenge slot and add to player Account functionality
                // Add to limiter if reroll is consistently requested
                extern.playerChallenges.reroll(id);
            },
        },
        computed: {
            isEggStoreSaleItem() {
                return this.eggStoreItems.some(item =&gt; item[&#39;salePrice&#39;] !== &#39;&#39;);
            },
            twitchDropsBtnImgSrs() {
                if (this.twitchLinked) {
                    return &#39;../img/events/twitch-drops-btn-linked.webp&#39;;
                }
                return &#39;../img/events/twitch-drops-btn-link-now.webp&#39;;
            },
            isTwitchLinked() {
                if (this.twitchLinked) return &#39;&lt;i class=&#34;fas fa-check-circle text_twitch_yellow&#34;&gt;&lt;/i&gt;&#39;;
                return &#39;&lt;i class=&#34;fas fa-times-circle text_grey&#34;&gt;&lt;/i&gt;&#39;;
            }
        }
    };
    </script>
    <script id="gold-chicken-template" type="text/x-template">
      &lt;div&gt;
		&lt;img v-lazyload :data-src=&#34;ui.lazyImages.chwPopup&#34; class=&#34;lazy-load chw-popup-img&#34; alt=&#34;Play chicken winner!&#34;&gt;
		&lt;h2 class=&#34;centered_x bottom-2 text_vip_yellow chw-popup-title fullwidth text-center&#34;&gt;{{ loc.chw_popup_play }}&lt;/h2&gt;
		&lt;div id=&#34;btn_horizontal&#34; class=&#34;centered_x bottom-2&#34;&gt;
			&lt;button @click=&#34;onCloseClick()&#34; class=&#34;ss_button btn_red bevel_red&#34;&gt;{{ loc.no_thanks }}&lt;/button&gt;
            &lt;button class=&#34;ss_button btn_green bevel_green&#34; @click=&#34;onChickenClick&#34;&gt;{{ loc.play_now }}&lt;/button&gt;
    	&lt;/div&gt;
    &lt;/div&gt;
    </script>
    <script>
      var comp_gold_chicken_popup = {
    template: &#39;#gold-chicken-template&#39;,
	data: function () {
		return vueData;
    },
    props: [],
    methods: {
		onCloseClick: function () {
			this.$emit(&#39;close-chw-popup&#39;);
		},
		onChickenClick: function () {
			this.$emit(&#39;open-chw-game&#39;);
		}
    }
};
    </script>
    <script id="equip-screen-template" type="text/x-template">
      &lt;div id=&#34;#equip_wrapper&#34; :class=&#34;screenCls&#34; data-html2canvas-ignore&gt;
		&lt;div id=&#34;display-ad-header-equip&#34; ref=&#34;displayAdHeader&#34;&gt;&lt;/div&gt;
		&lt;div class=&#34;home-main-wrapper display-grid box_absolute height-100vh&#34;&gt;
			&lt;section id=&#34;equip_panel_middle&#34; class=&#34;equip_panel middle_panel box_relative align-items-center&#34;&gt;
				&lt;div v-if=&#34;showShopUi&#34; class=&#34;panel_tabs display-grid grid-column-3-eq gap-sm&#34;&gt;
					&lt;button class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar equip-tab-shop&#34; :class=&#34;getButtonToggleClass(equipMode.shop)&#34; @click=&#34;switchTo(equipMode.shop)&#34;&gt;{{ loc.eq_shop }}&lt;/button&gt;
					&lt;button class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar equip-tab-featured&#34; :disabled=&#34;!accountSettled&#34; :class=&#34;getButtonToggleClass(equipMode.featured)&#34; @click=&#34;switchTo(equipMode.featured)&#34;&gt;{{ loc.eq_featured }}&lt;/i&gt;&lt;/button&gt;
					&lt;button class=&#34;ss_bigtab bevel_blue roundme_md font-sigmar equip-tab-skins&#34; :disabled=&#34;!accountSettled&#34; :class=&#34;getButtonToggleClass(equipMode.skins)&#34; @click=&#34;switchTo(equipMode.skins)&#34;&gt;{{ loc.eq_skins }}&lt;/i&gt;&lt;/button&gt;
				&lt;/div&gt;
				&lt;div v-show=&#34;isOnShopInventoryLimited&#34; id=&#34;equip_purchase_top&#34; class=&#34;equip_purchase_top&#34;&gt;
					&lt;physical-tag id=&#34;physical-tag&#34; class=&#34;ss_marginright&#34; v-if=&#34;equip.physicalUnlockPopup.item&#34; ref=&#34;physical-tag&#34; :loc=&#34;loc&#34; :item=&#34;equip.physicalUnlockPopup.item&#34; @buy-item-clicked=&#34;onBuyItemClicked&#34;&gt;&lt;/physical-tag&gt;
				&lt;/div&gt;

				&lt;div v-if=&#34;isSubscriber&#34; v-show=&#34;equip.selectedItemType == 2&#34; id=&#34;stamp-controls&#34;&gt;
					&lt;div class=&#34;row&#34;&gt;
						&lt;button class=&#34;button&#34; @click=&#34;moveStampClick(0, 1)&#34;&gt;
							&lt;svg class=&#34;arrow up&#34;&gt;
								&lt;use xlink:href=&#34;#ico_stampArrow&#34;&gt;&lt;/use&gt;
							&lt;/svg&gt;
						&lt;/button&gt;
					&lt;/div&gt;
					&lt;div class=&#34;row&#34;&gt;
						&lt;button class=&#34;button&#34; @click=&#34;moveStampClick(-1, 0)&#34;&gt;
							&lt;svg class=&#34;arrow left&#34;&gt;
								&lt;use xlink:href=&#34;#ico_stampArrow&#34;&gt;&lt;/use&gt;
							&lt;/svg&gt;
						&lt;/button&gt;
						&lt;div class=&#34;preview&#34; @click=&#34;resetStampPosition()&#34;&gt;
							&lt;canvas class=&#34;canvas&#34; ref=&#34;stampCanvas&#34; width=&#34;250&#34; height=&#34;250&#34;&gt;&lt;/canvas&gt;
						&lt;/div&gt;
						&lt;button class=&#34;button&#34; @click=&#34;moveStampClick(1, 0)&#34;&gt;
							&lt;svg class=&#34;arrow right&#34;&gt;
								&lt;use xlink:href=&#34;#ico_stampArrow&#34;&gt;&lt;/use&gt;
							&lt;/svg&gt;
						&lt;/button&gt;
					&lt;/div&gt;
					&lt;div class=&#34;row&#34;&gt;
						&lt;button class=&#34;button&#34; @click=&#34;moveStampClick(0, -1)&#34;&gt;
							&lt;svg class=&#34;arrow down&#34;&gt;
								&lt;use xlink:href=&#34;#ico_stampArrow&#34;&gt;&lt;/use&gt;
							&lt;/svg&gt;
						&lt;/button&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;div v-show=&#34;isEquipModeInventory || isOnEquipModeSkins&#34; id=&#34;equip_weapon_panel&#34;&gt;
					&lt;weapon-select-panel id=&#34;weapon_select&#34; ref=&#34;weapon_select&#34; :loc=&#34;loc&#34; :account-settled=&#34;accountSettled&#34; :play-clicked=&#34;playClicked&#34; :current-class=&#34;classIdx&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34; :hide-desc=&#34;!ui.showHomeEquipUi&#34; @changed-class=&#34;onChangedClass&#34;&gt;&lt;/weapon-select-panel&gt;
				&lt;/div&gt;
				&lt;color-select v-if=&#34;isEquipModeInventory || isOnEquipModeSkins&#34; id=&#34;equip.equipped_slots&#34; ref=&#34;colorSelect&#34; :loc=&#34;loc&#34; :is-upgrade=&#34;isUpgraded&#34; :color-idx=&#34;equip.colorIdx&#34; :extra-colors-locked=&#34;equip.extraColorsLocked&#34; @color-changed=&#34;onColorChanged&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34;&gt;&lt;/color-select&gt;
				&lt;div id=&#34;limited-un-vaulted&#34; v-show=&#34;isOnEquipModeFeatured || isEquipModeShop&#34; class=&#34;limited-un-vaulted centered_x bottom-1 bg_blue2 roundme_lg paddings_lg&#34;&gt;
				&lt;item-grid id=&#34;item_grid&#34; ref=&#34;itemGridVaulted&#34; :loc=&#34;loc&#34; :items=&#34;equip.showUnVaultedItems&#34; :has-buy-btn=&#34;false&#34; :selectedItem=&#34;equip.selectedItem&#34; @item-selected=&#34;onItemSelected&#34; :in-shop=&#34;isInShop&#34; :in-inventory=&#34;showShopCart&#34;&gt;&lt;/item-grid&gt;
					&lt;h4 class=&#34;text-center text-uppercase nospace text_blue5&#34;&gt;{{ loc.eq_unvaulted_limited_msg }}&lt;/h4&gt;
					&lt;div class=&#34;price-tag-wrap&#34;&gt;
						&lt;price-tag id=&#34;price_tag&#34; v-if=&#34;equip.selectedItem &amp;&amp; isSelectedInUnVaulted&#34; ref=&#34;price_tag&#34; :loc=&#34;loc&#34; :item=&#34;equip.selectedItem&#34; :hide-get-more-eggs=&#34;true&#34; :egg-total=&#34;eggs&#34; @buy-item-clicked=&#34;onBuyItemClicked&#34; :chw-ready=&#34;chw.ready&#34; :from-vaulted=&#34;true&#34;&gt;&lt;/price-tag&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/section&gt;
			&lt;!-- end .middle_panel --&gt;
			&lt;section id=&#34;equip_panel_right&#34; class=&#34;equip_panel right_panel&#34;&gt;
				&lt;h3 v-if=&#34;!showPurchasesUi&#34; class=&#34;equip-title text-center margins_sm box_relative text_white text-shadow-black-40 nospace&#34;&gt;{{ loc[equip.categoryLocKey] }}&lt;/h3&gt;
				&lt;div v-if=&#34;isOnEquipModeFeatured&#34; class=&#34;limited-msg-wrapper box_relative display-grid align-items-center text-center text_vip_yellow bg-limited roundme_md&#34;&gt;
					&lt;p class=&#34;nospace&#34;&gt;{{ loc.eq_limited_msg }}&lt;/p&gt;
				&lt;/div&gt;
				&lt;item-type-selector v-if=&#34;isOnShopInventory&#34; class=&#34;box_relative&#34; id=&#34;item_type_selector&#34; ref=&#34;item_type_selector&#34; :items=&#34;ui.typeSelectors&#34; :in-limited=&#34;isOnEquipModeFeatured&#34; :selected-item-type=&#34;equip.selectedItemType&#34; :show-special-items=&#34;equip.showSpecialItems&#34; :in-shop=&#34;isInShop&#34; @item-type-changed=&#34;switchItemType&#34;&gt;&lt;/item-type-selector&gt;
				&lt;egg-store v-if=&#34;isEquipModeShop&#34; :loc=&#34;loc&#34; :products=&#34;eggShopSortItems&#34; :sale-event=&#34;isSale&#34; @on-bundle-info-clicked=&#34;openProductBundlePopup&#34; @on-try-prem-item-on=&#34;equipTryPremItemOn&#34;&gt;&lt;/egg-store&gt;
				&lt;div v-show=&#34;!isEquipModeShop&#34; id=&#34;item-search-wrap&#34; class=&#34;item-search-wrap box_relative&#34;&gt;
					&lt;label for=&#34;item-search&#34; class=&#34;centered_y item-search-label&#34;&gt;&lt;i class=&#34;fas fa-search text_blue3&#34; :class=&#34;[equip.itemSearchTerm ? &#39;fa-times-circle text_red&#39; : &#39;fa-search&#39;]&#34; @click=&#34;onItemSearchReset&#34;&gt;&lt;/i&gt;&lt;/label&gt;
					&lt;input ref=&#34;itemSearch&#34; name=&#34;item-search&#34; v-bind:placeholder=&#34;loc.eq_search_items&#34; v-on:keyup=&#34;onItemSearchChange&#34; class=&#34;ss_field font-nunito box_relative fullwidth&#34;&gt;
					&lt;!-- &lt;input ref=&#34;itemSearch&#34; name=&#34;item-search&#34; v-bind:placeholder=&#34;loc.eq_search_items&#34; v-model=&#34;itemSearchVal&#34; v-on:keyup=&#34;onItemSearchChange&#34; class=&#34;ss_field font-nunito box_relative fullwidth&#34;&gt; --&gt;
				&lt;/div&gt;
				&lt;div v-if=&#34;currentEquipMode !== equipMode.shop&#34; id=&#34;equip_sidebox&#34; class=&#34;equip-main-item-grid roundme_md box_relative ss_marginbottom_lg&#34;&gt;
					&lt;div v-show=&#34;ui.showHomeEquipUi&#34; id=&#34;item_mask&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;item-smack-down&#34;&gt;
						&lt;item-grid v-if=&#34;isOnShopInventoryLimited&#34; id=&#34;item_grid&#34; ref=&#34;item_grid&#34; :loc=&#34;loc&#34; :class=&#34;gridCls&#34; :items=&#34;equip.showingItems&#34; :selectedItem=&#34;equip.selectedItem&#34; :category-loc-key=&#34;equip.categoryLocKey&#34; :in-shop=&#34;isInShop&#34; :in-inventory=&#34;showShopCart&#34; :is-searching=&#34;equip.itemSearchTerm&#34; :show-tooltips=&#34;true&#34; @item-selected=&#34;onItemSelected&#34; @switch-to-skins=&#34;onSwitchToSkinsClicked&#34; :items-to-hide=&#34;store.itemIdsToHide&#34;&gt;&lt;/item-grid&gt;
					&lt;/div&gt;
					&lt;!--&lt;house-ad-small id=&#34;banner-ad&#34; v-show=&#34;!isInShop&#34;&gt;&lt;/house-ad-small&gt;--&gt;
				&lt;/div&gt;
				&lt;div v-show=&#34;isEquipModeInventory&#34; class=&#34;ss_paddingright&#34;&gt;
					&lt;button  class=&#34;ss_button btn_blue bevel_blue box_relative fullwidth text-uppercase&#34; :class=&#34;{&#39;visibility-hidden&#39; : !ui.showHomeEquipUi}&#34; @click=&#34;onRedeemClick&#34;&gt;{{ loc.eq_redeem }}&lt;/button&gt;
					&lt;button class=&#34;ss_button box_relative fullwidth text-uppercase btn-open-photo-booth&#34; :class=&#34;photoBoothBtnUi.cls&#34; @click=&#34;onPhotoboothClick&#34; :disabled=&#34;extern.inGame&#34;&gt;{{ photoBoothBtnUi.txt }}&lt;/button&gt;
				&lt;/div&gt;
				&lt;price-tag id=&#34;price_tag&#34; v-if=&#34;showPriceTag&#34; ref=&#34;price_tag&#34; :loc=&#34;loc&#34; :item=&#34;equip.buyingItem&#34; :egg-total=&#34;eggs&#34; @buy-item-clicked=&#34;onBuyItemClicked&#34; :chw-ready=&#34;chw.ready&#34; :chw-watch-count=&#34;chw.winnerCounter&#34;&gt;&lt;/price-tag&gt;
			&lt;/section&gt;
			&lt;!-- .right_panel--&gt;
		&lt;/div&gt;

		&lt;!-- Popup: Buy Item --&gt;
		&lt;small-popup id=&#34;buyItemPopup&#34; ref=&#34;buyItemPopup&#34; @popup-confirm=&#34;onBuyItemConfirm&#34; @popup-closed=&#34;onBuyItemClose&#34; :hideCancel=&#34;abTestInventory.enabled&#34; :hideClose=&#34;abTestInventory.enabled&#34; :overlayClose=&#34;!abTestInventory.enabled&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_buy_item_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div&gt;
					&lt;canvas id=&#34;buyItemCanvas&#34; ref=&#34;buyItemCanvas&#34; width=&#34;250&#34; height=&#34;250&#34;&gt;&lt;/canvas&gt;
				&lt;/div&gt;
				&lt;div class=&#34;f_row f_center&#34;&gt;
					&lt;img v-if=&#34;!isBuyingItemPrem&#34; src=&#34;img/ico_goldenEgg.webp&#34; class=&#34;egg_icon&#34;/&gt;
					&lt;i v-else class=&#34;fas fa-dollar-sign&#34;&gt;&lt;/i&gt;
					&lt;h1&gt;{{ (equip.buyingItem) ? equip.buyingItem.price : &#39;&#39; }}&lt;/h1&gt;
				&lt;/div&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.p_buy_item_cancel }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.p_buy_item_confirm }}&lt;/template&gt;
			&lt;template slot=&#34;footer&#34;&gt;
				&lt;div v-if=&#34;equip.chwRewardBuyItem &amp;&amp; !abTestInventory&#34; class=&#34;fullwidth ss_margintop&#34;&gt;
					&lt;button class=&#34;ss_button btn_yolk bevel_yolk fullwidth&#34; @click=&#34;chwWatchAd&#34;&gt;{{ loc[chwButtonTxt] }} &lt;icon v-show=&#34;chw.ready &amp;&amp; chw.winnerCounter &gt; 0&#34; name=&#34;ico_watchAd&#34; class=&#34;chw-icon-watch-ads&#34;&gt;&lt;/icon&gt;&lt;/button&gt;
				&lt;/div&gt;
			&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;!-- Popup: Redeem Code --&gt;
		&lt;small-popup id=&#34;redeemCodePopup&#34; ref=&#34;redeemCodePopup&#34; :popup-model=&#34;equip.redeemCodePopup&#34; @popup-confirm=&#34;onRedeemCodeConfirm&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_redeem_code_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div class=&#34;error_text shadow_red&#34; v-show=&#34;equip.redeemCodePopup.showInvalidCodeMsg&#34;&gt;{{ loc.p_redeem_code_no_code }}&lt;/div&gt;
				&lt;p&gt;&lt;input type=&#34;text&#34; class=&#34;ss_field ss_margintop ss_marginbottom text-center width_lg&#34; v-model=&#34;equip.redeemCodePopup.code&#34; v-bind:placeholder=&#34;loc.p_redeem_code_enter&#34;&gt;&lt;/p&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.confirm }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;!-- Popup: Physical Unlock --&gt;
		&lt;small-popup id=&#34;physicalUnlockPopup&#34; ref=&#34;physicalUnlockPopup&#34; :popup-model=&#34;equip.physicalUnlockPopup&#34; @popup-confirm=&#34;onPhysicalUnlockConfirm&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_physical_unlock_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div v-if=&#34;(equip.physicalUnlockPopup.item !== null)&#34;&gt;
					&lt;div&gt;
						&lt;item :loc=&#34;loc&#34; :item=&#34;equip.physicalUnlockPopup.item&#34; :isSelected=&#34;false&#34; :show-item-only=&#34;true&#34;&gt;&lt;/item&gt;
						&lt;div class=&#34;f_row f_center&#34;&gt;
							&lt;img src=&#34;img/ico_goldenEgg.webp&#34; class=&#34;egg_icon&#34;/&gt;
							&lt;h1&gt;{{ loc.p_buy_special_price }}&lt;/h1&gt;
						&lt;/div&gt;
					&lt;/div&gt;
					&lt;div class=&#34;popup_sm__item_desc&#34;&gt;
						{{ loc[equip.physicalUnlockPopup.item.item_data.physicalUnlockLocKey] }}
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.confirm }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;small-popup id=&#34;bundlePopup&#34; ref=&#34;bundlePopup&#34; @popup-close=&#34;onBundlePopupClose&#34; @popup-confirm=&#34;onBundlePopupConfirm&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc[equip.bundle.name] }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;img v-if=&#34;equip.bundle.img&#34; :src=&#34;equip.bundle.img&#34; class=&#34;bundle-popup-img centered_y&#34;/&gt;
				&lt;item-grid id=&#34;bundleGrid&#34; ref=&#34;bundleGrid&#34; :loc=&#34;loc&#34; :items=&#34;equip.bundle.items&#34; :has-buy-btn=&#34;false&#34; :selectedItem=&#34;null&#34; @item-selected=&#34;onItemSelected&#34;  :in-inventory=&#34;false&#34; :hide-price=&#34;true&#34; :show-tooltips=&#34;true&#34;&gt;&lt;/item-grid&gt;
				&lt;h2 v-if=&#34;!equip.bundle.owned&#34; class=&#34;bundle-popup-price text_yellow&#34;&gt;&lt;sup&gt;$&lt;/sup&gt;{{ equip.bundle.price }} USD&lt;/h2&gt;
				&lt;p v-if=&#34;equip.bundle.owned&#34;&gt;{{ loc.product_bundles_items_owned }}&lt;/p&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ bundlePopupConfirmTxt }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;!-- &lt;large-popup id=&#34;hvsmPopup&#34; ref=&#34;hvsmPopup&#34; @popup-closed=&#34;onHvsmPopupClose&#34; @popup-opened=&#34;onHvsmPopupOpen&#34; @popup-x=&#34;onHvsmPopupClose&#34; :overlayType=&#34;ui.overlayType.none&#34;&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div id=&#34;hvsm-popup-item-grid-wrap&#34; v-show=&#34;isOnEquipModeFeatured || isEquipModeShop&#34; class=&#34;hvsm-popup-item-grid-wrap paddings_lg display-grid  grid-auto-flow-column align-items-center justify-content-center&#34;&gt;
					&lt;div class=&#34;hvsm-popup-item-grid&#34;&gt;
						&lt;header&gt;
							&lt;img class=&#34;display-block center_h&#34; src=&#34;img/gauge-bar/shell_E&amp;E_good_popup.webp&#34; alt=&#34;Heroes logo&#34;&gt;
							&lt;h4 class=&#34;text-center text-uppercase nospace text_blue5&#34;&gt;Heroes&lt;/h4&gt;
						&lt;/header&gt;
						&lt;item-grid id=&#34;hvsmHeroesItemGrid&#34; ref=&#34;hvsmHeroesItemGrid&#34; :loc=&#34;loc&#34; :items=&#34;equip.hvsmHeroItems&#34; :has-buy-btn=&#34;false&#34; :selectedItem=&#34;equip.selectedItem&#34; @item-selected=&#34;onItemSelected&#34; :in-shop=&#34;isInShop&#34; :in-inventory=&#34;isEquipModeInventory&#34;&gt;&lt;/item-grid&gt;
						&lt;div class=&#34;price-tag-wrap&#34;&gt;
							&lt;price-tag id=&#34;price_tag&#34; v-if=&#34;onHsvmItemSelected(equip.hvsmHeroItems)&#34; ref=&#34;price_tag&#34; :loc=&#34;loc&#34; :item=&#34;equip.selectedItem&#34; :hide-get-more-eggs=&#34;true&#34; :egg-total=&#34;eggs&#34; @buy-item-clicked=&#34;onBuyItemClicked&#34;&gt;&lt;/price-tag&gt;
						&lt;/div&gt;
					&lt;/div&gt;
					&lt;div class=&#34;hvsm-popup-desc&#34;&gt;
						&lt;header&gt;
							&lt;h2 class=&#34;nospace text_white text-shadow-black-40 text-center&#34;&gt;Egg Org &amp; Eggventure&lt;/h2&gt;	
						&lt;/header&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							You should never have opened that chest &amp; rolled the ancient arcane dice within‚Ä¶
							Welcome brave Eggventurers, to a tale of mystery, magic, &amp; mayhem!
						&lt;/p&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Here on the Outer Reach, Heroes &amp; Monsters clash in epic battles, &amp; danger lurks in the forest. Will the mighty Warriors, skilled Sorcerers, &amp; cunning Rogues defeat the Beholders, Owlbears and Gelatinous Mounds?!
						&lt;/p&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Equip your skins of choice to choose your side. Each kill with the equipped Monsters or Heroes items will bring your side closer to victory! Who will win? You decide. Either way you need to survive to get out of here!
						&lt;/p&gt;
						&lt;p class=&#34;text_blue5&#34;&gt;
							Grab your swords &amp; prepare yourshellves, for the eggventure of a lifetime awaits!
						&lt;/p&gt;
					&lt;/div&gt;
					&lt;div class=&#34;hvsm-popup-item-grid&#34;&gt;
						&lt;header&gt;
							&lt;img class=&#34;display-block center_h&#34; src=&#34;img/gauge-bar/shell_E&amp;E_evil_popup.webp&#34; alt=&#34;Monsters logo&#34;&gt;
							&lt;h4 class=&#34;text-center text-uppercase nospace text_blue5&#34;&gt;Monsters&lt;/h4&gt;
						&lt;/header&gt;
						&lt;item-grid id=&#34;hvsmMonsterItemGrid&#34; ref=&#34;hvsmMonsterItemGrid&#34; :loc=&#34;loc&#34; :items=&#34;equip.hvsmMonsterItems&#34; :has-buy-btn=&#34;false&#34; :selectedItem=&#34;equip.selectedItem&#34; @item-selected=&#34;onItemSelected&#34; :in-shop=&#34;isInShop&#34; :in-inventory=&#34;isEquipModeInventory&#34;&gt;&lt;/item-grid&gt;
						&lt;div class=&#34;price-tag-wrap&#34;&gt;
							&lt;price-tag id=&#34;price_tag&#34; v-if=&#34;onHsvmItemSelected(equip.hvsmHeroItems)&#34; ref=&#34;price_tag&#34; :loc=&#34;loc&#34; :item=&#34;equip.selectedItem&#34; :hide-get-more-eggs=&#34;true&#34; :egg-total=&#34;eggs&#34; @buy-item-clicked=&#34;onBuyItemClicked&#34;&gt;&lt;/price-tag&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/template&gt;
		&lt;/large-popup&gt; --&gt;
	&lt;/div&gt;
    </script>
    <script id="equipped-slots-template" type="text/x-template">
      &lt;div&gt;
		&lt;h3 class=&#34;margins_sm&#34;&gt;{{ loc.eq_equipped }}&lt;/h3&gt;
		&lt;div id=&#34;equip_equippedslots&#34;&gt;
			&lt;div class=&#34;equip_item roundme_lg clickme f_row f_center&#34; @click=&#34;onClick(itemType.Primary)&#34;&gt;
				&lt;item :loc=&#34;loc&#34; id=&#34;primary_item&#34; ref=&#34;primary_item&#34; v-if=&#34;primaryItem&#34; :item=&#34;primaryItem&#34; class=&#34;equip_icon&#34; :equippedSlot=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;div v-if=&#34;!primaryItem&#34; class=&#34;equip_icon equip_icon_hat equip_icon_no_item&#34;&gt;&lt;img src=&#34;img/inventory-icons/ico_weaponPrimary.svg&#34; alt=&#34;Primary equip slot&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;

			&lt;div class=&#34;equip_item roundme_lg clickme f_row f_center&#34; @click=&#34;onClick(itemType.Secondary)&#34;&gt;
				&lt;item :loc=&#34;loc&#34; id=&#34;secondary_item&#34; ref=&#34;secondary_item&#34; v-if=&#34;secondaryItem&#34; :item=&#34;secondaryItem&#34; class=&#34;equip_icon&#34; :equippedSlot=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;div v-if=&#34;!secondaryItem&#34; class=&#34;equip_icon equip_icon_hat equip_icon_no_item&#34;&gt;&lt;img src=&#34;img/inventory-icons/ico_weaponSecondary.svg&#34; alt=&#34;Secondary equip slot&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;

			&lt;div class=&#34;equip_item roundme_lg clickme f_row f_center&#34; @click=&#34;onClick(itemType.Grenade)&#34;&gt;
				&lt;item :loc=&#34;loc&#34; id=&#34;grenade_item&#34; ref=&#34;grenade_item&#34; v-if=&#34;grenadeItem&#34; :item=&#34;grenadeItem&#34; class=&#34;equip_icon&#34; :equippedSlot=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;div v-if=&#34;!grenadeItem&#34; class=&#34;equip_icon equip_icon_hat equip_icon_no_item&#34;&gt;&lt;img src=&#34;img/inventory-icons/ico_grenade.svg&#34; alt=&#34;Grenade equip slot&#34;&gt;&lt;/div&gt;

			&lt;/div&gt;
			
			&lt;div class=&#34;equip_item roundme_lg clickme f_row f_center&#34; @click=&#34;onClick(itemType.Hat)&#34;&gt;
				&lt;item :loc=&#34;loc&#34; id=&#34;hat_item&#34; ref=&#34;hat_item&#34; v-if=&#34;hatItem&#34; :item=&#34;hatItem&#34; :equippedSlot=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;div v-if=&#34;!hatItem&#34; class=&#34;equip_icon equip_icon_hat equip_icon_no_item&#34;&gt;&lt;img src=&#34;img/inventory-icons/ico_hat.svg&#34; alt=&#34;Hat item slot&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;
			
			&lt;div class=&#34;equip_item roundme_lg clickme f_row f_center&#34; @click=&#34;onClick(itemType.Stamp)&#34;&gt;
				&lt;item :loc=&#34;loc&#34; id=&#34;stamp_item&#34; ref=&#34;stamp_item&#34; v-if=&#34;stampItem&#34; :item=&#34;stampItem&#34; :equippedSlot=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;div v-if=&#34;!stampItem&#34; class=&#34;equip_icon equip_icon_stamp equip_icon_no_item&#34;&gt;&lt;img src=&#34;img/inventory-icons/ico_stamp.svg&#34; alt=&#34;Stamp item slot&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_equipped_slots = {
	template: &#39;#equipped-slots-template&#39;,
	components: { &#39;item&#39;: comp_item },
	props: [&#39;loc&#39;, &#39;primaryItem&#39;, &#39;secondaryItem&#39;, &#39;hatItem&#39;, &#39;stampItem&#39;, &#39;grenadeItem&#39;],

	data: function () {
		return {
			itemType: ItemType
		}
	},

	methods: {
		onClick: function (itemType) {
			this.$emit(&#39;equipped-type-selected&#39;, itemType);
		}
	},

	computed: {
		emptyHatClass: function () {
			return (this.hatItem === null) ? &#39;equip_icon_hat&#39; : &#39;&#39;;
		},

		emptyStampClass: function () {
			return (this.stampItem === null) ? &#39;equip_icon_stamp&#39; : &#39;&#39;;
		}
	}
};
    </script>
    <script id="color-select-template" type="text/x-template">
      &lt;div class=&#34;text-center egg-color-select roundme_sm common-box-shadow&#34;&gt;
		&lt;!-- &lt;h3 class=&#34;margins_sm&#34;&gt;{{ loc.eq_color }}&lt;/h3&gt; --&gt;
		&lt;div id=&#34;equip_free_colors&#34; class=&#34;display-grid text-center grid-auto-flow-column align-items-center &#34;&gt;
			&lt;!-- &lt;svg v-for=&#34;(c, index) in freeColors&#34; class=&#34;eggIcon equip_color&#34; :style=&#34;{ color: c }&#34; :class=&#34;isSelectedClass(index)&#34; @click=&#34;onClick(index)&#34;&gt;&lt;use xlink:href=&#34;#icon-egg&#34;&gt;&lt;/use&gt;&lt;/svg&gt; --&gt;
			&lt;span v-for=&#34;(c, index) in freeColors&#34; class=&#34;box_relative roundme_sm egg-color-icon &#34; @click=&#34;onClick(index)&#34;&gt;
				&lt;img v-if=&#34;index === colorIdx&#34; class=&#34;centered_x color-select-arrow&#34; src=&#34;img/svg/ico-arrow-colorPicker.svg&#34;/&gt;
				&lt;i  class=&#34;fas fa-egg&#34; :style=&#34;{ color: c }&#34; :class=&#34;isSelectedClass(index)&#34;&gt;&lt;/i&gt;
			&lt;/span&gt;
		&lt;!-- &lt;/div&gt;
		&lt;div id=&#34;equip_paid_colors&#34; class=&#34;display-grid text-center grid-auto-flow-column align-items-center &#34;&gt; --&gt;

			&lt;!-- &lt;svg v-for=&#34;(c, index) in paidColors&#34; class=&#34;eggIcon equip_color&#34; :style=&#34;{ color: c }&#34; :class=&#34;isSelectedClass(index + freeColors.length)&#34; @click=&#34;onClick(index + freeColors.length)&#34;&gt;&lt;use :xlink:href=&#34;getExtraColorEggIcon&#34;&gt;&lt;/use&gt;&lt;/svg&gt; --&gt;
			&lt;span v-for=&#34;(c, index) in paidColors&#34; class=&#34;box_relative roundme_sm egg-color-icon&#34; @click=&#34;onClick(index + freeColors.length)&#34;&gt;
				&lt;img v-if=&#34;colorIdx === (index + freeColors.length)&#34; class=&#34;centered_x color-select-arrow&#34; src=&#34;img/svg/ico-arrow-colorPicker.svg&#34;/&gt;
				&lt;span class=&#34;fa-stack roundme_sm&#34; :class=&#34;isSelectedClass(index + freeColors.length)&#34;&gt;
					&lt;i class=&#34;fas fa-egg fa-stack-1x&#34; :style=&#34;{ color: c }&#34;&gt;&lt;/i&gt;
					&lt;i v-if=&#34;!isUpgrade&#34; class=&#34;fas fa-lock fa-stack-1x text_white&#34;&gt;&lt;/i&gt;
				&lt;/span&gt;
			&lt;/span&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_color_select = {
	template: &#39;#color-select-template&#39;,
	props: [&#39;loc&#39;, &#39;colorIdx&#39;, &#39;extraColorsLocked&#39;, &#39;isUpgrade&#39;],
	
	data: function () {
		return {
			freeColors: freeColors,
			paidColors: paidColors
		}
	},

	methods: {
		isSelectedClass: function (idx) {
			return (idx === this.colorIdx) ? &#39;selected&#39; : &#39;&#39;
		},

		onClick: function (idx) {
			if (idx &gt;= freeColors.length &amp;&amp; this.extraColorsLocked === true) {
				vueApp.showSubStorePopup();
				// BAWK.play(&#39;ui_chicken&#39;);
				return;
			}

			this.$emit(&#39;color-changed&#39;, idx);
		},
	},

	computed: {
		getExtraColorEggIcon() {
			return (this.extraColorsLocked === true &amp;&amp; !this.isUpgrade) ? &#39;#icon-egg-locked&#39; : &#39;#icon-egg&#39;;
		},
	}
};
    </script>
    <script id="item-timer-template" type="text/x-template">
      &lt;div&gt;
		&lt;div id=&#34;equip_timerem&#34; class=&#34;box_blue3 roundme_sm shadow_blue4&#34;&gt;
			&lt;i class=&#34;fas fa-hourglass-start&#34;&gt;&lt;/i&gt; 9{{ loc.eq_day }}&lt;span class=&#34;blink&#34;&gt;:&lt;/span&gt;12{{ loc.eq_hour }}
			&lt;br&gt;{{ loc.eq_remaining }}
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_item_timer = {
	template: &#39;#item-timer-template&#39;,
	props: [&#39;loc&#39;]
};
    </script>
    <script id="price-tag-template" type="text/x-template">
      &lt;div id=&#34;equip_purchase_items&#34; v-if=&#34;isNoPrice&#34; class=&#34;equip_purchase_items box_relative&#34;&gt;

		&lt;button v-if=&#34;!playerNeedsMoreEggs &amp;&amp; !isItemOwned&#34; class=&#34;ss_button btn_green bevel_green btn_md btn_buy_item display-grid fullwidth font-nunito f_row align-items-center justify-content-center box_relative&#34; @click=&#34;onBuyClick&#34;&gt;
			{{priceTagText}}
			&lt;img v-if=&#34;!isPremium&#34; src=&#34;img/ico_goldenEgg.webp&#34; class=&#34;ss_marginright_sm ss_marginleft&#34;&gt;
			&lt;i v-else class=&#34;fas fa-dollar-sign ss_marginleft&#34;&gt;&lt;/i&gt;
			{{ item.price }}
		&lt;/button&gt;

		&lt;button v-show=&#34;playerNeedsMoreEggs &amp;&amp; !isItemOwned&#34; class=&#34;ss_button btn_yolk bevel_yolk text-shadow-black-40 fullwidth text-center&#34; @click=&#34;onWatchAdsClick&#34;&gt;{{ watchAdsTxt }}! &lt;icon v-show=&#34;showChwVideoIcon&#34; name=&#34;ico_watchAd&#34; class=&#34;chw-icon-watch-ads&#34;&gt;&lt;/icon&gt;&lt;/button&gt;
		&lt;button v-show=&#34;!hideGetMoreEggs &amp;&amp; !isItemOwned&#34; class=&#34;ss_button btn_blue bevel_blue text-shadow-black-40 fullwidth text-center&#34; @click=&#34;onGetMoreEggsClick&#34;&gt;{{ loc.account_title_eggshop }}&lt;/button&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_price_tag = {
        template: &#39;#price-tag-template&#39;,
        props: [&#39;loc&#39;, &#39;item&#39;, &#39;eggTotal&#39;, &#39;chwReady&#39;, &#39;hideGetMoreEggs&#39;, &#39;chwWatchCount&#39;, &#39;fromVaulted&#39;],
        data() {
            return {};
        },

        methods: {
            onBuyClick: function() {
                console.log(&#39;onBuyClick&#39;, this.fromVaulted);
                if (this.isPremium) {
                    if (this.fromVaulted) {
                        return extern.buyProductForMoneyFromVaulted(this.item.sku[0]);
                    }
                    return extern.buyProductForMoney(this.item.sku[0]);
                }
                this.$emit(&#39;buy-item-clicked&#39;, this.item);
            },
            onWatchAdsClick() {
                if (this.chwReady) ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, `btnClick${extern.inGame ? &#39;InGame&#39; : &#39;Home&#39;}`, &#39;watchToWinEggs&#39;);
                vueApp.showNuggyPopup();
            },
            onGetMoreEggsClick() {
                vueApp.openEquipSwitchTo(vueApp.equipMode.shop)
            }
        },
        computed: {
            isPremium() {
                return this.item.unlock === &#39;premium&#39;;
            },
            isNoPrice() {
                return this.item.price &lt; 1000000000;
            },
            playerNeedsMoreEggs() {
                if (this.isPremium) {
                    return false;
                } else {
                    return this.item.price &gt; this.eggTotal;
                }
            },
            priceTagText() {
                if (!this.playerNeedsMoreEggs) {
                    return this.loc.eq_buy;
                }
                return;
            },
            priceTagTextCls() {
                if (!this.playerNeedsMoreEggs) {
                    return &#39;text_blue5&#39;;
                } else {
                    return &#39;text_red&#39;;
                }
            },
            watchAdsTxt() {
                if (this.chwReady) {
                    return this.loc.chw_btn_watch_ad;
                } else {
                    return &#39;Wait for more eggs&#39;;
                }
            },
            isItemOwned() {
                return extern.isItemOwned(this.item)
            },
            showChwVideoIcon() {
                return this.chwReady &amp;&amp; this.chwWatchCount &gt; 0;
            }
        }
    };
    </script>
    <script id="physical-tag-template" type="text/x-template">
      &lt;div id=&#34;equip_get_physical_item&#34; class=&#34;equip_purchase_items&#34;&gt;
		&lt;div id=&#34;equip_pricetag&#34; class=&#34;equip_pricetag shadow_blue2&#34;&gt;
			&lt;img src=&#34;img/pricetag_left.webp&#34;&gt;
			&lt;div class=&#34;equip_pricetag__tag equip_pricetag__is_special_tag&#34;&gt;
				&lt;img src=&#34;img/ico_goldenEgg.webp&#34; class=&#34;ss_marginright&#34;&gt;{{ loc.p_buy_special_price }}
			&lt;/div&gt;
			&lt;img src=&#34;img/pricetag_right.webp&#34;&gt;
		&lt;/div&gt;
		&lt;button class=&#34;ss_button btn_yolk bevel_yolk is_special_get_btn&#34; @click=&#34;onBuyClick&#34;&gt;{{ loc.p_chicken_goldbutton }}&lt;/button&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_physical_tag = {
	template: &#39;#physical-tag-template&#39;,
	props: [&#39;loc&#39;, &#39;item&#39;],

	methods: {
		onBuyClick: function () {
			this.$emit(&#39;buy-item-clicked&#39;, this.item);
		}
	}
};
    </script>
    <script id="item-type-selector-template" type="text/x-template">
      &lt;div class=&#34;ss_marginbottom_sm&#34;&gt;
		&lt;div id=&#34;equip_itemtype&#34; class=&#34;equip_panelhead display-grid grid-auto-flow-column align-items-center f_space_between&#34;&gt;
			&lt;div v-for=&#34;item in items&#34; class=&#34;ico_itemtype clickme roundme_lg f_row align-items-center&#34; :class=&#34;[getSelected(item), getTabStyle(item)]&#34; @click=&#34;onItemTypeClick(item.type)&#34;&gt;
				&lt;svg&gt;
					&lt;use :xlink:href=&#34;item.img&#34;&gt;&lt;/use&gt;
				&lt;/svg&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_item_type_selector = {
	template: &#39;#item-type-selector-template&#39;,
	props: [&#39;items&#39;, &#39;showSpecialItems&#39;, &#39;selectedItemType&#39;, &#39;inShop&#39;, &#39;inLimited&#39;],

	data: function () {
		return {
			showingTagged: false,
			selected: null
		}
	},

	methods: {
		onItemTypeClick: function (itemType) {
			this.selected = itemType;
			this.$emit(&#39;item-type-changed&#39;, itemType);
		},
		getTabStyle(item) {
			return &#39;type-selector-&#39; + getKeyByValue(ItemType, item.type).toLowerCase();
		},
		getSelected(item) {
			return item.type === this.selectedItemType ? &#39;selected&#39; : &#39;&#39;;
		}
	}
};
    </script>
    <script id="item-grid-template" type="text/x-template">
      &lt;div&gt;
		&lt;div v-if=&#34;accountSettled&#34; id=&#34;equip_grid&#34; :class=&#34;gridCls&#34; class=&#34;display-grid&#34;&gt;
			&lt;item v-for=&#34;i in itemsSorted&#34; :loc=&#34;loc&#34; :item=&#34;i&#34; :key=&#34;i.id&#34; :isSelected=&#34;isSelected(i)&#34; :has-buy-btn=&#34;hasBuyBtn&#34; @item-selected=&#34;onItemSelected&#34; :is-shop=&#34;inShop&#34; :hide-price=&#34;hidePrice&#34; :show-tooltip=&#34;showTooltips&#34; :items-to-hide=&#34;itemsToHide&#34;&gt;&lt;/item&gt;
			&lt;div v-show=&#34;inInventory &amp;&amp; !isSearching&#34; class=&#34;grid-item roundme_lg clickme morestuff box_relative common-box-shadow btn_green bevel_green f_row align-items-center justify-content-center&#34; @click=&#34;onSwitchToSkinsClick&#34;&gt;
				&lt;icon class=&#34;fill-white shadow-filter&#34; name=&#34;ico-nav-shop&#34;&gt;&lt;/icon&gt;
			&lt;/div&gt;
			&lt;div v-show=&#34;(inShop &amp;&amp; !hiddenPremItemCheck) || !itemsSorted.length&#34; class=&#34;grid-item roundme_lg box_absolute centered soldout text-center&#34;&gt;
				&lt;div class=&#34;soldout_head shadow_bluebig5&#34; v-html=&#34;emptyGridMsg.title&#34;&gt;&lt;/div&gt;
				&lt;div class=&#34;soldout_text shadow_bluebig5&#34; v-html=&#34;emptyGridMsg.text&#34;&gt;&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;div id=&#34;items-account-not-loaded&#34; v-show=&#34;!accountSettled&#34; class=&#34;text-center&#34;&gt;
			&lt;h3&gt;{{loc.signin_auth_title}}&lt;/h3&gt;
			&lt;p&gt;{{loc.signin_auth_msg}}&lt;/p&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      var comp_item_grid = {
	template: &#39;#item-grid-template&#39;,
	components: { &#39;item&#39;: comp_item },
	props: [&#39;items&#39;, &#39;selectedItem&#39;, &#39;gridClass&#39;, &#39;categoryLocKey&#39;, &#39;inShop&#39;, &#39;hasBuyBtn&#39;, &#39;inInventory&#39;, &#39;hidePrice&#39;, &#39;showTooltips&#39;, &#39;isSearching&#39;, &#39;itemsToHide&#39;],
	data() {
		return vueData;
	},

	methods: {
		onItemSelected: function (selectedItem) {
			this.$emit(&#39;item-selected&#39;, selectedItem);
		},

		isSelected: function (item) {
			if (!hasValue(this.selectedItem)) {
				return false;
			}

			return (this.selectedItem.id === item.id);
		},

		onSwitchToSkinsClick: function () {
			this.$emit(&#39;switch-to-skins&#39;);
			BAWK.play(&#39;ui_playconfirm&#39;);
		},

		isPremItemInStore() {
			let hasItem = false;
			for (let i = 0; i &lt; this.items.length; i++) {
				const item = this.items[i];
					const isItem = vueApp.premiumShopItems.find(i =&gt; i.isActive &amp;&amp; i.itemId.id === item.id);
					if (hasValue(isItem)) {
						hasItem = true;
						break;
					}
			}
			return hasItem;
		}
	},

	computed: {
		categoryName: function () {
			if (!hasValue(this.selectedItem)) {
				return null;
			}

			return this.loc[&#39;item_type_&#39; + this.selectedItem.item_type_id];
		},

		hiddenPremItemCheck() {
			if (this.items.some(i =&gt; i.unlock === &#39;purchase&#39;) || this.items.length !== 0) return true;
			if (this.items.some(i =&gt; i.unlock === &#39;premium&#39;)) return this.isPremItemInStore();
			return false;
		},

		gridCls() {
			if (this.hasBuyBtn) {
				return &#39;grid-auto-flow-column gap-1&#39;;
			} else {
				return &#39;grid-column-3-eq align-content-start align-content-start gap-sm&#39;;
			}
		},
		itemsSorted() {
			const unlockPriority = [&#39;premium&#39;, &#39;vip&#39;, &#39;physical&#39;, &#39;manual&#39;, &#39;default&#39;, &#39;purchase&#39;];

			return this.items.sort((b, a) =&gt; {
				const aTags = Array.isArray(a.item_data.tags) ? a.item_data.tags : [];
				const bTags = Array.isArray(b.item_data.tags) ? b.item_data.tags : [];

				// Check for &#39;Premium&#39; tag with &#39;purchase&#39; unlock
				const aIsPremiumPurchase = aTags.includes(&#39;Premium&#39;) &amp;&amp; a.unlock === &#39;purchase&#39;;
				const bIsPremiumPurchase = bTags.includes(&#39;Premium&#39;) &amp;&amp; b.unlock === &#39;purchase&#39;;

				if (aIsPremiumPurchase &amp;&amp; !bIsPremiumPurchase) return 1;
				if (!aIsPremiumPurchase &amp;&amp; bIsPremiumPurchase) return -1;

				const aPriority = unlockPriority.indexOf(a.unlock);
				const bPriority = unlockPriority.indexOf(b.unlock);

				return bPriority - aPriority;
			});
		},
		emptyGridMsg() {
			if (this.isSearching) {
				return {
					title: this.loc[&#39;eq_search_out_head&#39;],
					text: this.loc[&#39;eq_search_out_text&#39;]
				}
			} else {
				return {
					title: this.loc[&#39;eq_sold_out_head&#39;],
					text: this.loc[&#39;eq_sold_out_text&#39;]
				}
			}

		}
	}
};
    </script>
    <script id="egg-store-template" type="text/x-template">
      &lt;div class=&#34;f_col&#34;&gt;
		&lt;egg-store-item v-for=&#34;item in products&#34; :key=&#34;item.sku&#34; :item=&#34;item&#34; :loc=&#34;loc&#34; inStore=&#34;true&#34; :account-set=&#34;accountSettled&#34; :isUpgraded=&#34;isUpgraded&#34; :isSaleEvent=&#34;saleEvent&#34; @on-bundle-info-clicked=&#34;openProductBundlePopup&#34; @on-try-prem-item-on=&#34;onTryPremItemOn&#34;&gt;&lt;/egg-store-item&gt;
	&lt;/div&gt;
    </script>
    <template id="comp-store-item">
      <div v-if="showItem" class="single-egg-store-item box_relative align-items-center roundme_md common-box-shadow" :class="[itemCls, {purchased: purchased}]" :style="style">
        <header v-if="productTypeItem || productTypeBundle" class="grid-span-2-start-1">
          <h6 class="single-egg-store-header nospace f_row align-items-center f_space_between text-center">
            <span class="box_relative">            {{ loc[title] }}
</span>
            <icon v-if="productTypeItem" class="egg-store-item-type box_absolute right-0" :name="productIcon">
            </icon>
          </h6>
        </header>
        <div class="display-grid align-items-center text-center" :class="headerGrid">
          <div>
            <img :src="img" class="eggshop_image roundme_md display-block center_h centered_y" :class="imgCls" @click="onTryPremItemOn" />
            <!-- <div v-if="productTypeItem" class="text-center">
					<div class="eggshop_pricebox text_brown" :class="{ slashed: item.salePrice }">
						${{ price }} <span>USD</span>
					</div>
				</div> -->
          </div>
          <div class="single-egg-store-wrapper">
            <header v-if="!productTypeItem &amp;&amp; !productTypeBundle &amp;&amp; !productTypePass">
              <h6 class="eggshop_bigtitle nospace text_blue5">
                {{ loc[title] }}
              </h6>
            </header>
            <div class="display-grid">
              <p v-if="showSubtitle" class="eggshop_subtitle font-sigmar" :class="subTitleCls" v-html="loc[description]">
              </p>
            </div>
            <div class="single-egg-store-price box_relative z-index-2">
              <img src="img/store/passes/pass_welcome_title.png" v-if="productTypePass" class="pass-title-img" />
              <div class="single-egg-store-info f_row align-items-center gap-micro">
                <p v-if="!productTypePass" class="eggshop_pricebox nospace display-inline" :class="priceCls">
                  <span class="eggshop-dollar-sign">                  $
</span>
                  {{ item.price }}
                  <span class="eggshop-currency-type">                  USD
</span>
                </p>
                <button v-if="productTypeBundle || productTypePass || productTypeItem" class="btn_store ss_button btn_yolk bevel_yolk btn_sm f_row align-items-center" :class="secondaryBtnStyle" @click="onPremSecondaryBtnClicked">
                  {{ premItemBtnText }}
                  <icon v-if="productTypeItem" name="ico-vip" class="equip-vip-icon">
                  </icon>
                </button>
                <button class="btn_store ss_button btn_sm" :class="buyNowBtnStyles" @click="onItemClicked()" :disabled="purchased &amp;&amp; productTypeBundle">
                  {{ buyBtnText }}
                </button>
              </div>
            </div>
            <!-- <button v-if="productTypeItem && !purchased && inStore" class="ss_button btn_yolk bevel_yolk btn_sm center_h vip-get-btn f_row align-items-center" @click="onVipClick"><span v-html="loc.p_egg_shop_free_with_vip"></span><icon class="egg-store-item-type shadow-filter" name="ico-vip"></icon></button> -->
          </div>
        </div>
        <!-- <div v-if="item.salePrice" class="sale-desc box_absolute bottom-0">{{ loc.egg_pack_special_msg }}</div> -->
      </div>
    </template>
    <script>
      const comp_store_item = {
        template: &#39;#comp-store-item&#39;,
        props: [&#39;loc&#39;, &#39;item&#39;, &#39;inStore&#39;, &#39;accountSet&#39;, &#39;isUpgraded&#39;, &#39;isSaleEvent&#39;],
        data() {
            return {
                purchased: false,
                attempt: 0,
                productItems: [],
                productIcon: &#39;&#39;,
                bundleInfo: {
                    items: [],
                    isOwned: false,
                    price: 0,
                    img: &#39;&#39;,
                    name: &#39;&#39;,
                },
            };
        },
        mounted() {
            this.setupProduct();
        },
        methods: {

            onTryPremItemOn() {
                if (this.productTypeItem) {
                    this.$emit(&#39;on-try-prem-item-on&#39;, this.productItems[0]);
                }
            },

            onItemClicked() {
                const {
                    sku,
                    itemIds
                } = this.item;

                if (this.purchased &amp;&amp; this.productTypeItem) {
                    if (Array.isArray(itemIds) &amp;&amp; itemIds.length) {
                        const item = extern.catalog.findItemById(itemIds[0]);
                        if (item) vueApp.showItemOnEquipScreen(item);
                    }
                    return;
                }

                extern.buyProductForMoney(sku);
                ga(&#39;send&#39;, &#39;event&#39;, vueApp.googleAnalytics.cat.purchases, vueApp.googleAnalytics.action.eggShackProductClick, sku);
            },
            onPremSecondaryBtnClicked() {

                if (this.productTypeItem) {
                    this.onVipClick();
                    return;
                }

                if (this.productTypePass) {
                    vueApp.welcomeBundleInfoRequested = true;
                    vueApp.onWelcomeBundlePopupShow();
                    return;
                }

                if (this.bundleInfo.items.length === 0) {
                    this.productItems.forEach(item =&gt; {
                        this.bundleInfo.items.push(item);
                    });
                    this.bundleInfo.isOwned = this.purchased;
                    this.bundleInfo.price = this.price;
                    this.bundleInfo.img = this.img;
                    this.bundleInfo.name = this.description;
                }

                this.$emit(&#39;on-bundle-info-clicked&#39;, this.bundleInfo);
            },
            onVipClick() {
                // this.$parent.$parent.hide();
                vueApp.showSubStorePopup();
            },
            getItemType() {
                const item = extern.catalog.findItemById(this.item.itemIds[0]);
                const obj = {};

                if (item.exclusive_for_class !== null) {
                    obj.name = getKeyByValue(CharClass, item.exclusive_for_class).toLowerCase();
                    obj.isClass = true;
                } else {
                    obj.name = getKeyByValue(ItemType, item.item_type_id).toLowerCase();
                    obj.isClass = false;
                }

                return obj;
            },
            setupProduct() {

                switch (this.item.type) {
                    case &#39;item&#39;:
                        this.productItems = [extern.catalog.findItemById(this.item.itemIds[0])];
                        this.purchased = extern.isItemOwned(this.productItems[0]);
                        this.getIcon();
                        break;
                    case &#39;bundle&#39;:
                    case &#39;pass&#39;:
                        let owned = [];
                        if (!this.item.itemIds || this.item.itemIds.length === 0) {
                            console.log(&#39;bundle or pass no item ids&#39;);
                            this.productItems = [];
                            this.purchased = false;
                            return;
                        }
                        this.productItems = extern.catalog.findItemsByIds(this.item.itemIds);
                        this.productItems.forEach(item =&gt; {
                            if (extern.isItemOwned(item)) {
                                owned.push(item.id)
                            }
                        });
                        this.purchased = owned.length === this.productItems.length;
                        break;

                    default:
                        break;
                }
            },
            getIcon() {
                if (this.productItems[0].exclusive_for_class !== null) {
                    this.productIcon = `ico-weapon-${getKeyByValue(CharClass, this.productItems[0].exclusive_for_class).toLowerCase()}`;
                } else {
                    this.productIcon = `ico-${getKeyByValue(ItemType, this.productItems[0].item_type_id).toLowerCase()}`;
                }
            }
        },
        computed: {
            headerGrid() {
                return !this.productTypePass ? &#39;grid-column-1-2&#39; : &#39;&#39;
            },
            productTypeItem() {
                return this.item.type === &#39;item&#39;
            },
            productTypeBundle() {
                return this.item.type === &#39;bundle&#39;
            },
            productTypeCurrency() {
                return this.item.type === &#39;currency&#39;
            },
            productTypePass() {
                return this.item.type === &#39;pass&#39;
            },
            title() {
                if (this.productTypeBundle) {
                    return `product_bundles_title`;
                }
                return `${this.item.sku}_title`;
            },
            imgCls() {
                if (this.item.type === &#39;pass&#39; || this.item.type === &#39;pass&#39;) {
                    return &#39;box_absolute centered_y z-index-1&#39;;
                }
            },
            priceCls() {
                return this.productTypeBundle || this.productTypeItem ? &#39;text_yellow&#39; : &#39;text_blue5&#39;;
            },
            description() {
                if (this.productTypeBundle) {
                    return `${this.item.sku}_title`;
                }
                return `${this.item.sku}_desc`;
            },
            saleDesc() {
                if (this.item.salePrice) {
                    return `${this.item.sku}_sale_desc`;
                }
            },
            style() {
                return this.productTypePass ? `background-image: url(img/store/passes/${this.item.sku}_bg.png); background-size: cover;` : &#39;&#39;;
            },
            img() {
                switch (this.item.type) {
                    case &#39;item&#39;:
                        return `img/store/items/${this.item.sku}.webp`;
                        break;
                    case &#39;bundle&#39;:
                        return `img/store/bundles/${this.item.sku}.webp`;
                        break;
                    case &#39;pass&#39;:
                        return `img/store/passes/${this.item.sku}.png`;
                        break;
                    default:
                        return `img/${!this.isSaleEvent ? &#39;&#39; : &#39;store-black-friday/&#39;}${this.item.sku}.webp`;
                        break;
                }
            },
            itemType() {
                return &#39;single-egg-store-item-is-&#39; + this.item.type;
            },
            itemCls() {
                return `${this.itemType} ${this.item.sku} ${this.item.type === &#39;currency&#39; ? &#39;&#39; : &#39;&#39;}`;
            },
            buyBtnText() {
                if (this.purchased &amp;&amp; this.productTypeItem) {
                    return this.loc.p_egg_shop_see_item;
                } else if ((this.productTypeBundle &amp;&amp; this.purchased) || this.productTypePass &amp;&amp; this.purchased) {
                    return this.loc.eq_owned;
                }
                return this.loc.p_buy_item_confirm;
            },
            showItem() {
                if (this.inStore) return this.item.inStore;
                return true;
            },
            flagTxt() {
                if (this.item.salePrice) {
                    return &#39;fa-tag&#39;;
                }
                return &#39;fa-gem&#39;
            },
            showSubtitle() {
                if (this.productTypeItem) return true;
                if (this.isSaleEvent) {
                    return false;
                }
                return true;
            },
            price() {
                if (this.item.salePrice) {
                    return this.item.salePrice;
                } else {
                    return this.item.price;
                }
            },
            subTitleCls() {
                switch (this.item.type) {
                    case &#39;item&#39;:
                    case &#39;bundle&#39;:
                        return &#39;text_white text-shadow-black-40&#39;;
                        break;

                    default:
                        return &#39;text_blue5 nospace&#39;;
                        break;
                }
            },
            buyNowBtnStyles() {
                return !this.productTypePass ? &#39;btn_green bevel_green&#39; : &#39;btn_pink bevel_pink&#39;;
            },
            premItemBtnText() {
                if (this.productTypeBundle || this.productTypePass) {
                    return this.loc.missing_moreinfo;
                } else {
                    return this.loc.p_egg_shop_free_with_vip;
                }
            },
            secondaryBtnStyle() {
                return this.productTypeItem ? &#39;is_item_btn&#39; : &#39;&#39;;
            }
        },
    };
    </script>
    <script>
      var comp_egg_store = {
    template: &#39;#egg-store-template&#39;,
    components: {
        &#39;egg-store-item&#39;: comp_store_item,
    },
    data() {
        return vueData;
    },
    props: [&#39;products&#39;, &#39;saleEvent&#39;],
    
    methods: {
        onItemClicked: function (sku) {
            if (!this.accountSettled) {
                console.log(this.$parent.hide());
                setTimeout(() =&gt; {
                    this.onItemClicked(sku[0])
                }, 300);
                vueApp.pleaseWaitPopup();
                return;
            }
            if (vueApp.$refs.genericPopup.isShowing === true) vueApp.$refs.genericPopup.close();
            this.$parent.hide();
            extern.buyProductForMoney(sku[0]);
            ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.purchases, this.googleAnalytics.action.eggShackProductClick, sku);
        },
		openProductBundlePopup(items) {
			this.$emit(&#39;on-bundle-info-clicked&#39;, items);
		},
		onTryPremItemOn(item) {
			this.$emit(&#39;on-try-prem-item-on&#39;, item);
		},
    },
};
    </script>
    <script>
      var comp_equip_screen = {
        template: &#39;#equip-screen-template&#39;,
        components: {
            &#39;equipped-slots&#39;: comp_equipped_slots,
            &#39;color-select&#39;: comp_color_select,
            &#39;item-timer&#39;: comp_item_timer,
            &#39;price-tag&#39;: comp_price_tag,
            &#39;physical-tag&#39;: comp_physical_tag,
            &#39;item-type-selector&#39;: comp_item_type_selector,
            &#39;item-grid&#39;: comp_item_grid,
            &#39;house-ad-small&#39;: comp_house_ad_small,
            &#39;weapon-select-panel&#39;: comp_weapon_select_panel,
            &#39;item&#39;: comp_item,
            // &#39;account-panel&#39;: comp_account_panel,
            &#39;house-ad-small&#39;: comp_house_ad_small,
            &#39;egg-store&#39;: comp_egg_store,
            &#39;settings-control-binder&#39;: comp_settings_control_binder,
            &#39;settings-gamepad-binder&#39;: comp_settings_gamepad_binder,
            &#39;language-selector&#39;: comp_language_selector,
            &#39;settings-adjuster&#39;: comp_settings_adjuster,
            &#39;settings-toggler&#39;: comp_settings_toggler
        },

        created() {
            this.debouncedSearch = debounce((newValue, oldValue) =&gt; this.onItemSearch(newValue, oldValue), 500);
        },

        data: function() {
            return vueData;
        },

        equippedItems: {},

        methods: {

            onItemSearchChange() {
                this.itemSearchVal = this.$refs.itemSearch.value;
            },

            setupItemGridMain() {
                if (this.isOnEquipModeFeatured) {
                    this.populateItemGridWithTagged(this.equip.specialItemsTag);
                } else {
                    this.populateItemGridWithType(this.equip.selectedItemType);
                }
            },

            setup: function(itemType, wasFeatured) {
                if (!itemType) {
                    itemType = ItemType.Primary;
                }

                this.updateEquippedItems();

                this.equip.posingStampPositionX = extern.account.stampPositionX || 0;
                this.equip.posingStampPositionY = extern.account.stampPositionY || 0;

                this.poseEquippedItems();

                if (itemType === &#39;tagged&#39; || wasFeatured) {
                    this.populateItemGridWithTagged(this.equip.specialItemsTag);
                } else {
                    this.populateItemGridWithType(itemType);
                }

                this.selectEquippedItemForType();
            },

            itemAvailForPurchase(i) {
                return i.is_available &amp;&amp; i.unlock === &#39;purchase&#39;;
            },

            onPopupOpened() {
                if (this.equip.selectedItemType == ItemType.Stamp) {
                    this.removeKeyboardStampPositionHandlers();
                }
            },

            onPopupClosed() {
                if (this.equip.selectedItemType == ItemType.Stamp &amp;&amp; this.currentEquipMode == this.equipMode.inventory) {
                    this.addKeyboardStampPositionHandlers();
                }
            },

            onHvsmPopupOpen() {
                this.setup(&#39;tagged&#39;);
                this.equip.hvsmHeroItems = extern.getTaggedItems(&#39;premFeatOne&#39;).filter(i =&gt; this.itemAvailForPurchase(i));
                this.equip.hvsmMonsterItems = extern.getTaggedItems(&#39;premFeatOne&#39;).filter(i =&gt; this.itemAvailForPurchase(i));
            },
            onHvsmPopupClose() {
                vueApp.switchToHomeUi();
            },
            // onHsvmItemSelected(items) {
            // 	return this.equip.selectedItem !== undefined ? items.some(i =&gt; i.id === this.equip.selectedItem.id) : false;
            // },

            updateEquippedItems: function() {
                this.equipped = extern.getEquippedItems();
                this.equip.posingStampPositionX = extern.account.stampPositionX;
                this.equip.posingStampPositionY = extern.account.stampPositionY;
            },

            clamp: function(value, min, max) {
                return Math.min(Math.max(value, min), max);
            },

            moveStampClick: function(x, y) {
                BAWK.play(&#39;ui_onchange&#39;);
                this.moveStamp(x, y);
            },

            moveStamp: function(x, y) {
                if (this.isSubscriber) {
                    x = this.clamp(this.equip.posingStampPositionX + x, -12, 12);
                    y = this.clamp(this.equip.posingStampPositionY + y, -15, 17);
                    this.equip.posingStampPositionX = x;
                    this.equip.posingStampPositionY = y;
                    if (this.currentEquipMode == this.equipMode.inventory) {
                        extern.account.stampPositionX = x;
                        extern.account.stampPositionY = y;
                    }
                    extern.setStampPosition(x, y);
                }
            },

            resetStampPosition: function() {
                BAWK.play(&#39;ui_onchange&#39;);

                this.equip.posingStampPositionX = 0;
                this.equip.posingStampPositionY = 0;
                extern.setStampPosition(0, 0);
            },

            poseEquippedItems: function() {
                let items = {
                    [ItemType.Hat]: this.equipped[ItemType.Hat],
                    [ItemType.Stamp]: this.equipped[ItemType.Stamp],
                    [ItemType.Primary]: this.equipped[ItemType.Primary],
                    [ItemType.Secondary]: this.equipped[ItemType.Secondary],
                    [ItemType.Grenade]: this.equipped[ItemType.Grenade],
                    [ItemType.Melee]: this.equipped[ItemType.Melee]
                }

                if (this.ui.showHomeEquipUi === false) {
                    Object.keys(items).forEach(key =&gt; {
                        key = parseInt(key, 10);
                        if (key !== this.equip.selectedItemType) {
                            delete items[key];
                        }
                    });
                } else {
                    switch (this.equip.showingWeaponType) {
                        case ItemType.Primary:
                            items[ItemType.Melee] = null;
                            items[ItemType.Grenade] = null;
                            break;
                        case ItemType.Secondary:
                            items[ItemType.Melee] = null;
                            items[ItemType.Grenade] = null;
                            break;
                        case ItemType.Melee:
                            items[ItemType.Primary] = null;
                            items[ItemType.Grenade] = null;
                            break;
                        case ItemType.Grenade:
                            items[ItemType.Secondary] = null;
                            items[ItemType.Melee] = null;
                            break;
                        default:
                            items[ItemType.Melee] = null;
                            items[ItemType.Grenade] = null;
                            break;
                    }
                }

                var stampPosX = this.equip.posingStampPositionX;
                var stampPosY = this.equip.posingStampPositionY;

                extern.poseWithItems(items, stampPosX, stampPosY);
            },

            selectEquippedItemForType: function() {
                this.equip.selectedItem = this.equipped[this.equip.selectedItemType];
            },

            populateItemGridWithType: function(itemType) {
                this.equip.selectedItemType = itemType;
                var items = extern.getItemsOfType(itemType);
                this.populateItemGrid(items);

                this.equip.categoryLocKey = &#39;item_type_{0}{1}&#39;.format(itemType, ((itemType === ItemType.Primary) ? &#39;_&#39; + this.classIdx : &#39;&#39;));
            },

            populateItemGridWithTagged: function(tag, itemType) {
                tag = tag || &#39;tagged&#39;; // sometimes its empty buy why would we want show an empty grid so lets default to the special tag
                var items = extern.getTaggedItems(tag, itemType);
                this.populateItemGrid(items);
                this.equip.categoryLocKey = &#39;item_type_5&#39;;
            },

            populateItemGrid: function(items) {
                if (this.currentEquipMode === vueData.equipMode.inventory) {
                    items = items.filter(i =&gt; extern.isItemOwned(i) || (i.is_available &amp;&amp; i.unlock === &#34;default&#34;));
                } else {
                    items = items.filter(i =&gt; i.is_available &amp;&amp; !extern.isItemOwned(i) &amp;&amp; (i.unlock === &#39;purchase&#39; || (i.unlock === &#39;premium&#39; &amp;&amp; i.sku &amp;&amp; i.activeProduct)));
                }

                this.equip.showingItems = items;
            },

            onBackClick: function() {
                vueApp.showSpinner();

                if (!this.isInShop) {
                    extern.account.stampPositionX = this.equip.posingStampPositionX;
                    extern.account.stampPositionY = this.equip.posingStampPositionY;
                }

                extern.saveEquipment(() =&gt; {
                    if (extern.inGame) {
                        // vueApp.showRespawnDisplayAd();
                        extern.closeEquipInGame();
                    }
                    vueApp.hideSpinner();
                    this.equip.showingWeaponType = ItemType.Primary;
                });
            },

            stampPositionKeyboardHandler(e) {
                var keybinds = this.settingsUi.controls.keyboard.game;
                if (e.key.toUpperCase() == keybinds[keybinds.findIndex(item =&gt; item.id === &#34;up&#34;)].value) {
                    this.moveStamp(0, 1);
                } else if (e.key.toUpperCase() == keybinds[keybinds.findIndex(item =&gt; item.id === &#34;down&#34;)].value) {
                    this.moveStamp(0, -1);
                } else if (e.key.toUpperCase() == keybinds[keybinds.findIndex(item =&gt; item.id === &#34;left&#34;)].value) {
                    this.moveStamp(-1, 0);
                } else if (e.key.toUpperCase() == keybinds[keybinds.findIndex(item =&gt; item.id === &#34;right&#34;)].value) {
                    this.moveStamp(1, 0);
                }
            },

            addKeyboardStampPositionHandlers: function() {
                document.addEventListener(&#34;keydown&#34;, this.stampPositionKeyboardHandler, false);
            },

            removeKeyboardStampPositionHandlers: function() {
                document.removeEventListener(&#34;keydown&#34;, this.stampPositionKeyboardHandler);
            },

            switchItemType: function(itemType) {
                if (itemType !== this.equip.selectedItemType) {

                    // skins should only show the selected primary/secondary weapon if it&#39;s on the primary/secondary tab
                    if (this.currentEquipMode === this.equipMode.skins) {
                        this.equipped[ItemType.Primary] = extern.account.getPrimaryWeapon();
                        this.equipped[ItemType.Secondary] = extern.account.getSecondaryWeapon();
                    }

                    if (itemType === ItemType.Primary || itemType === ItemType.Secondary || itemType == ItemType.Grenade || itemType == ItemType.Melee) {
                        this.equip.showingWeaponType = itemType;
                    } else {
                        this.equip.showingWeaponType = null;
                    }

                    this.equip.selectedItemType = itemType;

                    if (!this.ui.showHomeEquipUi) this.$emit(&#39;photo-booth-type-id&#39;);

                    this.poseEquippedItems();
                    if (itemType === ItemType.Stamp &amp;&amp; this.currentEquipMode == this.equipMode.inventory) {
                        this.addKeyboardStampPositionHandlers();
                        setTimeout(() =&gt; this.renderStamp(), 0);
                    } else {
                        this.removeKeyboardStampPositionHandlers();
                    }
                    this.populateItemGridWithType(itemType);

                    if (this.equip.itemSearchTerm) {
                        this.itemSearch();
                    }

                    if (this.isEquipModeInventory) {
                        this.selectEquippedItemForType();
                    } else {
                        this.selectFirstItemInShop();
                    }

                }
                if (!this.isInShop) {

                    this.hideItemForSale();
                    this.hideItemForSpecial();

                }

                BAWK.play(&#39;ui_click&#39;);
            },

            itemSearch() {
                const SearchItems = new Fuse(this.equip.showingItems, extern.fuseOptions).search(this.equip.itemSearchTerm);

                if (SearchItems.length &gt; 0) {
                    console.log(&#39;ItemSearch result start&#39;);
                    console.log(&#39;ItemSearch Term&#39;, this.equip.itemSearchTerm);
                    console.log(&#39;ItemSearch Items array&#39;);
                    console.log(&#39;ItemSearch SearchItems&#39;, SearchItems);
                    this.equip.showingItems.length = 0;
                    SearchItems.forEach(i =&gt; {

                        console.log(&#39;ItemSearch item: &#39;, i.item.name, &#39;tags: &#39;, i.item.hasOwnProperty(&#39;item_data&#39;) &amp;&amp; i.item.item_data.hasOwnProperty(&#39;tags&#39;) ? JSON.stringify(i.item.item_data.tags) : &#39;&#39;, &#39;meshName: &#39;, i.item.hasOwnProperty(&#39;item_data&#39;) &amp;&amp; i.item.item_data.hasOwnProperty(&#39;meshName&#39;) ? i.item.item_data.meshName : &#39;None, i am a stamp&#39;, &#39;unlock: &#39;, i.item.unlock)
                        this.equip.showingItems.push(i.item)
                    });
                    console.log(&#39;ItemSearch result end&#39;);

                } else {
                    this.equip.showingItems.length = 0;
                }
            },

            onItemSearch(newVal, oldVal) {
                // reset the grid if the search term shortens so we search the full list again
                if (newVal !== oldVal) {
                    this.setupItemGridMain();
                }

                if (newVal.length &gt;= 1) {
                    this.equip.itemSearchTerm = newVal.toLowerCase().replace(/\s/g, &#39;&#39;);
                    this.itemSearch();
                } else if (!newVal.length) {
                    this.onItemSearchReset();
                }
            },

            onItemSearchReset() {
                this.itemSearchVal = &#39;&#39;;
                this.equip.itemSearchTerm = &#39;&#39;;
                this.$refs.itemSearch.value = &#39;&#39;;
                this.setupItemGridMain();
            },

            onTaggedItemsClicked: function() {
                if (this.equip.selectedItemType === &#39;tagged&#39;) {
                    return;
                }
                this.showTaggedItems(this.equip.specialItemsTag);
                this.selectFirstItemInShop();
            },

            onTaggedResetItems() {
                this.showTaggedItems(this.equip.specialItemsTag);
                this.selectFirstItemInShop();
            },

            onPremiumItemsClicked() {
                if (this.equip.selectedItemType === &#39;premium&#39;) {
                    return;
                }
                this.showPremiumItems();
                this.selectFirstItemInShop();
            },

            showPremiumItems() {
                this.equip.selectedItemType = &#39;premium&#39;;
                var items = extern.getPremiumItems();
                this.populateItemGrid(items);
                this.equip.categoryLocKey = &#39;item_type_7&#39;;
            },

            showTaggedItems: function(tag, itemType) {
                this.equip.selectedItemType = &#39;tagged&#39;;

                if ((this.isEquipModeInventory &amp;&amp; !this.ownsTaggedItems(this.equip.specialItemsTag)) || extern.openShopOnly) {
                    this.currentEquipMode = this.equipMode.shop;
                    vueApp.conditionalAnonWarningCall();
                    extern.openShopOnly = false;

                }

                this.populateItemGridWithTagged(tag);
            },

            showSelectedTagItems(tag) {
                this.equip.selectedItemType = &#39;tagged&#39;;
                // if (this.equip.mode === this.equip.equipMode.inventory) {
                // 	this.equip.mode = this.equip.equipMode.shop;
                // }
                this.populateItemGridWithTagged(tag);
            },

            ownsTaggedItems: function(tag) {
                return extern.getTaggedItems(tag).filter(i =&gt; {
                    return extern.isItemOwned(i);
                }).length &gt; 0;
            },

            selectFirstItemInShop: function() {
                if (this.isInShop &amp;&amp; this.equip.showingItems.length &gt; 0) {
                    this.selectItem(this.equip.showingItems[0]);
                }
            },

            switchTo: function(mode, useItemType) {
                this.equip.showingItems = [];
                if (!useItemType) this.equip.showingWeaponType = ItemType.Primary;

                if (useItemType) this.switchItemType(useItemType);

                this.$refs.itemSearch.value = &#39;&#39;;
                this.equip.itemSearchTerm = &#39;&#39;;

                switch (mode) {
                    case this.equipMode.shop:
                        this.currentEquipMode = this.equipMode.shop;
                        this.getVaultedItemsForGrid(true);
                        this.updateEquippedItems();
                        this.poseEquippedItems();
                        this.removeKeyboardStampPositionHandlers();
                        vueApp.conditionalAnonWarningCall();
                        break;

                    case this.equipMode.inventory:
                        if (this.equip.selectedItemType === &#39;tagged&#39; &amp;&amp; this.isOnEquipModeSkins || this.equip.selectedItemType === &#39;tagged&#39; &amp;&amp; this.isOnEquipModeFeatured) {
                            if (!this.ownsTaggedItems(this.equip.specialItemsTag)) {
                                this.switchItemType(ItemType.Primary);
                            }
                        }
                        this.currentEquipMode = this.equipMode.inventory;
                        this.equip.stampPositionX = extern.account.stampPositionX;
                        this.equip.stampPositionY = extern.account.stampPositionY;
                        extern.setStampPosition(this.equip.stampPositionX, this.equip.stampPositionY);
                        this.hideItemForSale();
                        this.hideItemForSpecial();
                        this.poseEquippedItems();
                        this.showItemsAfterEquipModeSwitch();
                        this.selectEquippedItemForType();
                        if (this.equip.selectedItemType == ItemType.Stamp) {
                            this.addKeyboardStampPositionHandlers();
                        }
                        break;

                    case this.equipMode.featured:
                        this.updateEquippedItems();
                        this.poseEquippedItems();
                        this.showTaggedItems(this.equip.specialItemsTag)
                        this.onTaggedItemsClicked();
                        this.getVaultedItemsForGrid(true);
                        this.removeKeyboardStampPositionHandlers();
                        this.currentEquipMode = this.equipMode.featured;
                        vueApp.conditionalAnonWarningCall();
                        break;

                    case this.equipMode.skins:
                        this.setup(useItemType);
                        this.currentEquipMode = this.equipMode.skins;
                        this.showItemsAfterEquipModeSwitch();
                        this.removeKeyboardStampPositionHandlers();
                        if (useItemType === ItemType.Stamp) {
                            setTimeout(() =&gt; this.renderItem(), 0);
                        }
                        vueApp.conditionalAnonWarningCall();
                        break;

                    default:
                        break;
                }

                // stop the ad from manually refreshing on every tab switch and inventory 

                if (this.equip.displayAdHeaderRefresh) {
                    vueApp.showHeaderAd();
                    this.equip.displayAdHeaderRefresh = false;
                }

                this.selectFirstItemInShop();

                BAWK.play(&#39;ui_toggletab&#39;);
                // vueApp.histPushState({game: this.screens.equip}, &#39;Shellshockers equipment shop&#39;, &#39;?equip=shop&#39;);
            },

            showItemsAfterEquipModeSwitch: function() {
                if (this.equip.selectedItemType === &#39;tagged&#39;) {
                    this.showTaggedItems(this.equip.specialItemsTag)
                } else if (this.equip.selectedItemType === &#39;premium&#39;) {
                    this.showPremiumItems();
                } else {
                    this.populateItemGridWithType(this.equip.selectedItemType);
                }
            },

            onEquippedTypeSelected: function(itemType) {
                this.equip.selectedItemType = itemType;
                if ([ItemType.Primary, ItemType.Secondary, ItemType.Grenade, ItemType.Melee].includes(this.equip.selectedItemType)) {
                    this.equip.showingWeaponType = itemType;
                } else {
                    this.equip.showingWeaponType = null;
                }
                this.switchTo(this.equipMode.inventory);
            },

            onChangedClass: function() {

                this.hideItemForSale();
                this.hideItemForSpecial();
                this.updateEquippedItems();

                if (this.equip.selectedItemType !== ItemType.Primary) {
                    this.onEquippedTypeSelected(ItemType.Primary);
                }

                this.populateItemGridWithType(this.equip.selectedItemType);

                if (this.equip.itemSearchTerm) {
                    this.itemSearch();
                }

                if (extern.inGame &amp;&amp; this.showScreen !== this.screens.equip) {
                    this.equip.showingWeaponType = ItemType.Primary;
                    extern.closeEquipInGame(true);
                }
                if (!this.ui.showHomeEquipUi) this.$emit(&#39;photo-booth-type-id&#39;);
                this.poseEquippedItems();
            },

            autoSelectItem: function(item) {

                if (this.showScreen !== this.screens.equip) {
                    this.showScreen = this.screens.equip;
                }

                if (extern.isItemOwned(item)) {
                    this.switchTo(this.equipMode.inventory);
                } else {
                    this.switchItemType(item.item_type_id);
                }

                if (item.exclusive_for_class !== null) {
                    extern.changeClass(item.exclusive_for_class);
                    this.onChangedClass();
                }

                this.selectItem(item);
            },

            selectItemClickSound(selectedItem) {
                let selectSound;
                if (![ItemType.Hat, ItemType.Stamp].includes(selectedItem.item_type_id) &amp;&amp; selectedItem.unlock !== &#39;default&#39;) {
                    switch (selectedItem.item_type_id) {
                        case ItemType.Grenade:
                            selectSound = selectedItem.item_data.sound;
                            break;
                        case ItemType.Melee:
                            const sounds = Object.keys(BAWK.sounds).filter(s =&gt; s.startsWith(selectedItem.item_data.meshName));
                            selectSound = sounds[Math.floor(Math.random() * sounds.length)];
                            break;
                        default:
                            selectSound = selectedItem.item_data.meshName + &#39;_fire&#39;;
                            break;
                    }
                }
                BAWK.play(selectSound, &#39;&#39;, &#39;ui_click&#39;);
            },

            onItemSelected: function(item) {
                if (this.$refs.buyItemPopup.isShowing) return;
                this.selectItem(item);
            },

            isPremItemInStore(item) {
                let hasItem = false;
                const isItem = this.premiumShopItems.find(i =&gt; i.isActive &amp;&amp; i.itemId.id === item.id);
                if (hasValue(isItem)) {
                    hasItem = true;
                }
                return hasItem;
            },

            selectItem: function(item) {

                if (!hasValue(item)) return;
                var selectingSame = hasValue(this.equip.selectedItem) &amp;&amp; this.equip.selectedItem.id === item.id;
                var selectedId = selectingSame ? this.equip.selectedItem.id : null;
                var isWeapon = (item.item_type_id === ItemType.Primary || item.item_type_id === ItemType.Secondary || item.item_type_id === ItemType.Grenade || item.item_type_id === ItemType.Melee);
                var typeId = item.item_type_id;

                if (selectingSame) {
                    if (this.isInShop) {
                        this.hideItemForSale();
                    } else {
                        if (!isWeapon) {
                            this.equipped[typeId] = null;
                            extern.tryEquipItem(null, typeId)
                        }
                    }

                    this.equip.selectedItem = null;
                    this.updateEquippedItems();
                    this.poseEquippedItems();
                    this.renderStamp();
                    return;
                }

                this.equipped[typeId] = item;

                if (item) {
                    this.equip.selectedItem = item;

                    if (this.currentEquipMode === this.equipMode.featured || this.currentEquipMode === this.equipMode.shop) {
                        this.equip.selectedItemType = typeId;
                        if (isWeapon) {
                            this.equip.showingWeaponType = typeId
                        } else {
                            this.equip.showingWeaponType = null;
                        }
                    }

                    // this.equip.selectedItemType = null;
                    if (!this.ui.showHomeEquipUi) this.$emit(&#39;photo-booth-type-id&#39;);
                }

                if (!this.isInShop) extern.tryEquipItem(item, typeId);

                if (hasValue(item)) {
                    if (this.isInShop) {
                        switch (item.unlock) {
                            case &#34;purchase&#34;:
                            case &#34;premium&#34;:
                                this.offerItemForSale(item);
                                this.hideItemForSpecial();
                                break;
                        }
                    }
                } else {
                    this.hideItemForSale();
                    this.hideItemForSpecial();

                }

                this.selectItemClickSound(item);
                this.poseEquippedItems();

                if (item.item_type_id == ItemType.Stamp) {
                    this.renderStamp();
                }
            },
            getButtonToggleClass: function(equipMode) {
                return (equipMode === this.currentEquipMode) ? &#39;btn_toggleon&#39; : &#39;btn_toggleoff&#39;;
            },

            offerItemForSpecial: function(item) {
                return this.equip.physicalUnlockPopup.item = item;
            },

            hideItemForSpecial: function() {
                this.equip.physicalUnlockPopup.item = null;
            },

            offerItemForSale: function(item) {
                this.equip.buyingItem = item;
            },

            hideItemForSale: function() {
                this.equip.buyingItem = null;
                // this.equip.physicalUnlockPopup.item = null
            },

            onBuyItemClicked: function() {
                // If item is buying item show buyItemPopup or show physicalUnlockPopup
                if (this.equip.selectedItem &amp;&amp; (this.isEquipModeShop || this.isOnEquipModeFeatured)) {
                    this.equip.buyingItem = this.equip.selectedItem;
                }
                if (this.equip.buyingItem) {
                    if (this.chwRewardIds.includes(this.equip.buyingItem.id)) {
                        this.equip.chwRewardBuyItem = true;
                    }
                    this.$refs.buyItemPopup.toggle();
                    extern.renderItemToCanvas(this.equip.buyingItem, this.$refs.buyItemCanvas)
                } else {
                    this.$refs.physicalUnlockPopup.toggle()
                }
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onBuyItemConfirm: function() {
                this.equip.buyingItem.unlock === &#39;premium&#39; ? extern.buyProductForMoney(this.equip.buyingItem.sku[0]) : extern.api_buy(this.equip.buyingItem, this.boughtItemSuccess, this.boughtItemFailed);
                BAWK.play(&#39;ui_playconfirm&#39;);
            },

            onBuyItemClose() {
                if (this.equip.chwRewardBuyItem) this.equip.chwRewardBuyItem = false;
            },

            boughtItemSuccess: function() {
                this.equip.selectedItem = this.equip.buyingItem;
                ga(&#39;send&#39;, &#39;event&#39;, {
                    eventCategory: this.googleAnalytics.cat.itemShop,
                    eventAction: this.googleAnalytics.action.shopItemPopupBuy,
                    eventLabel: this.equip.buyingItem.name,
                    eventValue: this.equip.selectedItem.price
                });
                var itemType = this.equip.selectedItem.item_type_id;
                if (itemType === ItemType.Primary || itemType === ItemType.Secondary || itemType == ItemType.Grenade || itemType == ItemType.Melee) {
                    this.equip.showingWeaponType = itemType;
                } else {
                    this.equip.showingWeaponType = null;
                }
                this.hideItemForSale();

                this.setup(itemType, this.isOnEquipModeFeatured);

                if (this.isEquipModeShop) {
                    this.equip.showUnVaultedItems = [];
                    setTimeout(() =&gt; this.equip.showUnVaultedItems = extern.getTaggedItems(this.ui.premiumFeaturedTag), 1);
                }
            },

            boughtItemFailed: function() {
                vueApp.showGenericPopup(&#39;p_buy_error_title&#39;, &#39;error&#39;, &#39;reload&#39;, true);
                BAWK.play(&#39;ui_reset&#39;);
            },

            onRedeemClick: function() {
                this.$refs.redeemCodePopup.code = &#39;&#39;;
                this.$refs.redeemCodePopup.toggle();
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onRedeemCodeConfirm: function() {
                if (this.equip.redeemCodePopup.code.toUpperCase() === &#39;D3LL0RKC1R&#39;) {
                    this.giveStuffPopup.eggOrg = false;
                    this.giveStuffPopup.rickroll = true;
                    vueApp.showGiveStuffPopup(&#39;p_give_stuff_title&#39;);
                } else {
                    this.giveStuffPopup.rickroll = false;
                    this.giveStuffPopup.eggOrg = false;
                    extern.api_redeem(this.equip.redeemCodePopup.code, this.redeemCodeSuccess, this.redeemCodeFailed);
                }
                BAWK.play(&#39;ui_playconfirm&#39;);
            },

            redeemCodeSuccess: function(eggs, items) {
                this.populateItemGridWithType(this.equip.selectedItemType);

                this.giveStuffPopup.eggs = eggs;
                this.giveStuffPopup.items = items;
                vueApp.showGiveStuffPopup(&#39;p_give_stuff_title&#39;, eggs, items);

                let itemString = &#39;&#39;;
                this.giveStuffPopup.items.forEach(item =&gt; itemString += item.name);

                ga(&#39;send&#39;, &#39;event&#39;, {
                    eventCategory: this.googleAnalytics.cat.redeem,
                    eventAction: this.googleAnalytics.action.redeemed,
                    eventLabel: `${itemString ? itemString : &#39;&#39;} ${this.giveStuffPopup.eggs ? this.giveStuffPopup.eggs + &#39;eggs&#39; : &#39;&#39;}`
                });
            },

            redeemCodeFailed: function() {
                vueApp.showGenericPopup(&#39;p_redeem_error_title&#39;, &#39;error&#39;, &#39;reload&#39;, true);
                BAWK.play(&#39;ui_reset&#39;);
            },

            onPhysicalUnlockConfirm: function() {
                window.open(this.equip.physicalUnlockPopup.item.item_data.physicalItemStoreURL, &#39;_blank&#39;);
            },

            onColorChanged: function(colorIdx) {
                this.equip.colorIdx = colorIdx;
                extern.setShellColor(this.equip.colorIdx);
                BAWK.play(&#39;ui_onchange&#39;);
            },

            onSwitchToSkinsClicked: function() {
                this.switchTo(this.equipMode.skins, this.equip.selectedItemType);
            },

            getVaultedItemsForGrid(selectFirstItem) {
                this.equip.showUnVaultedItems.splice(0, this.equip.showUnVaultedItems.length)
                this.$nextTick().then(() =&gt; {
                    this.equip.showUnVaultedItems = extern.getTaggedItems(this.ui.premiumFeaturedTag);
                    if (selectFirstItem) {
                        this.equip.selectedItem = this.equip.showUnVaultedItems[0];
                    }
                });
            },
            onPhotoboothClick: function() {
                if (extern.inGame) {
                    return;
                }
                vueApp.switchToPhotoBoothUi();
                BAWK.play(&#39;ui_popupopen&#39;);
            },
            openProductBundlePopup(bundle) {
                if (this.equip.bundle.items.length === 0) {
                    this.equip.bundle.items.length = 0;
                    this.equip.bundle.items = bundle.items;
                    this.equip.bundle.owned = bundle.isOwned;
                    this.equip.bundle.price = bundle.price;
                    this.equip.bundle.img = bundle.img;
                    this.equip.bundle.name = bundle.name;
                }

                this.$refs.bundlePopup.toggle();
            },
            onBundlePopupConfirm() {
                if (this.equip.bundle.owned) {
                    return this.equipAllItemsInbundle();
                }
                const activeBundle = extern.getActiveBundles();
                extern.buyProductForMoney(activeBundle[0].sku);
            },
            onBundlePopupClose() {
                this.equip.bundle.owned = false;
                this.equip.bundle.items.length = 0;
            },

            equipTryPremItemOn(item) {
                BAWK.play(&#39;ui_click&#39;);
                this.selectItem(item);
                extern.tryEquipItem(item)
            },

            equipAllItemsInbundle() {
                this.equip.bundle.items.forEach(item =&gt; {
                    this.selectItem(item);
                    extern.tryEquipItem(item)
                });
            },

            chwWatchAd() {
                this.$refs.buyItemPopup.toggle();
                vueApp.chwDoIncentivized();
            },

            renderStamp() {
                if (this.$refs.stampCanvas === undefined) return;

                var item = this.equip.selectedItem;

                if (this.currentEquipMode !== this.equipMode.inventory) {
                    item = this.equipped[ItemType.Stamp]
                }

                extern.renderItemToCanvas(item, this.$refs.stampCanvas);
            },
        },

        computed: {
            showShop() {
                return this.showScreen === this.screens.equip;
            },

            isOnEquipModeSkins() {
                return this.currentEquipMode === this.equipMode.skins;
            },

            isOnEquipModeFeatured() {
                return this.currentEquipMode === this.equipMode.featured;
            },

            isEquipModeInventory() {
                return this.currentEquipMode === this.equipMode.inventory;
            },

            isEquipModeShop() {
                return this.currentEquipMode === this.equipMode.shop;
            },

            isInShop: function() {
                return (this.isOnEquipModeSkins || this.isOnEquipModeFeatured || this.isEquipModeShop);
            },

            isOnShopInventoryLimited() {
                return (this.isOnEquipModeSkins || this.isEquipModeInventory || this.isOnEquipModeFeatured)
            },

            isOnShopInventory() {
                return (this.isOnEquipModeSkins || this.isEquipModeInventory)
            },

            getGridClass: function() {
                if (this.equip.selectedItemType !== &#39;tagged&#39;) {
                    return `item-grid-${getKeyByValue(ItemType, this.equip.selectedItemType).toLowerCase()}`;
                }
            },

            gridCls() {
                return &#39;box_relative center_h overflow-x-hidden&#39;;
            },

            isEggStoreSaleItem() {
                return this.eggStoreItems.some(item =&gt; item[&#39;salePrice&#39;] !== &#39;&#39;);
            },
            isBuyingItemPrem() {
                if (!this.equip.buyingItem) {
                    return;
                }
                return this.equip.buyingItem.unlock === &#39;premium&#39;;
            },
            showPurchasesUi() {
                return this.showShop &amp;&amp; this.isEquipModeShop;
            },
            showShopUi() {
                return this.showShop &amp;&amp; (this.isOnEquipModeSkins || this.isOnEquipModeFeatured || this.isEquipModeShop);
            },
            screenCls() {
                return `screen-${getKeyByValue(this.equipMode, this.currentEquipMode)}`;
            },
            isSelectedInUnVaulted() {
                return this.equip.showUnVaultedItems.some(item =&gt; item.id === this.equip.selectedItem.id);
            },
            showPriceTag() {
                return this.equip.buyingItem &amp;&amp; (this.isOnEquipModeFeatured || this.isOnEquipModeSkins) &amp;&amp; this.equip.showingItems.length &gt; 0
            },
            showShopCart() {
                return this.isEquipModeInventory &amp;&amp; this.ui.showHomeEquipUi;
            },
            photoBoothBtnTxt() {
                return this.ui.showHomeEquipUi ? this.loc.screen_photo_booth_menu : this.loc.screen_photo_booth_menu_close;
            },
            eggShopSortItems() {
                return this.eggStoreItems.sort((b, a) =&gt; {
                    if (a.type === &#39;item&#39; &amp;&amp; b.type !== &#39;item&#39;) return 1;
                    if (a.type !== &#39;item&#39; &amp;&amp; b.type === &#39;item&#39;) return -1;
                    if (a.type === &#39;bundle&#39; &amp;&amp; b.type !== &#39;bundle&#39;) return 1;
                    if (a.type !== &#39;bundle&#39; &amp;&amp; b.type === &#39;bundle&#39;) return -1;
                    if (a.type === &#39;pass&#39; &amp;&amp; b.type !== &#39;pass&#39;) return 1;
                    if (a.type !== &#39;pass&#39; &amp;&amp; b.type === &#39;pass&#39;) return -1;
                    return 0;
                });
            },
            photoBoothBtnUi() {
                return {
                    icon: this.ui.showHomeEquipUi ? &#39;fa-camera&#39; : &#39;fa-times&#39;,
                    cls: this.ui.showHomeEquipUi ? &#39;btn_blue bevel_blue&#39; : &#39;btn_red bevel_red&#39;,
                    txt: this.ui.showHomeEquipUi ? this.loc.screen_photo_booth_menu : this.loc.screen_photo_booth_menu_close
                }
            },
            chwButtonTxt() {
                if (this.chw.ready) {
                    return &#39;chw_chance_to_win_item&#39;;
                } else {
                    return &#39;chw_wait_msg&#39;;
                }
            },

            bundlePopupConfirmTxt() {
                return this.equip.bundle.owned ? this.loc.product_bundles_popup_owned_text : this.loc.p_buy_item_confirm;
            },
        },
        watch: {
            itemSearchVal(val, old) {
                this.debouncedSearch(val, old);
            },
        }
    };
    </script>
    <script id="game-screen-template" type="text/x-template">
      &lt;div :class=&#34;pauseScreenStateClass&#34;&gt;
		&lt;div ref=&#34;canvasWrap&#34;&gt;&lt;/div&gt;
		&lt;!-- end .pause-screen-header --&gt;

        &lt;div ref=&#34;vipWrapper&#34;&gt;
			&lt;div id=&#34;chickenBadge&#34; ref=&#34;chickenBadge&#34; v-show=&#34;game.isPaused &amp;&amp; isSubscriber &amp;&amp; showScreen === screens.game&#34;&gt;&lt;img v-lazyload :data-src=&#34;upgradeBadgeUrl&#34; class=&#34;lazy-load&#34; /&gt;&lt;/div&gt;
		&lt;/div&gt;

		&lt;div ref=&#34;gameUIWrapper&#34;&gt;
			&lt;div ref=&#34;gameUiInner&#34; class=&#34;paused-game-ui z-index-1 centered_x fullwidth&#34; v-show=&#34;showScreen === screens.game&#34;&gt;
				&lt;!-- &lt;div class=&#34;factions-game-score centered_x&#34;&gt;
					&lt;div class=&#34;faction-label faction-0-label f_row align-items-center justify-content-center roundme_sm box_absolute right-0 tool-tip&#34;&gt;&lt;span class=&#34;tool-tip-text faction-tooltip&#34;&gt;{{ loc.factions_in_game_tip.format(loc.faction_b_title) }}&lt;/span&gt;&lt;img class=&#34;faction-game-logo box_absolute&#34; src=&#34;img/gauge-bar/faction-egg-masters.png&#34; alt=&#34;&#34;&gt;&lt;img src=&#34;img/gauge-bar/ico_crossbones.svg&#34; alt=&#34;&#34;&gt; &lt;i class=&#34;display-block&#34;&gt;{{ factionsBGameScore }}&lt;/i&gt;&lt;/div&gt;
					&lt;div class=&#34;faction-label faction-1-label f_row align-items-center justify-content-center roundme_sm box_absolute left-0 tool-tip&#34;&gt;&lt;span class=&#34;tool-tip-text faction-tooltip&#34;&gt;{{ loc.factions_in_game_tip.format(loc.faction_a_title) }}&lt;/span&gt;&lt;img class=&#34;faction-game-logo box_absolute&#34; src=&#34;img/gauge-bar/faction-egg-assasins.png&#34; alt=&#34;&#34;&gt;&lt;img src=&#34;img/gauge-bar/ico_crossbones.svg&#34; alt=&#34;&#34;&gt; &lt;i class=&#34;display-block&#34;&gt;{{ factionsAGameScore }}&lt;/i&gt;&lt;/div&gt;
				&lt;/div&gt; --&gt;
&lt;!-- 
				&lt;div v-show=&#34;game.pauseScreen.showMenu&#34; class=&#34;centered_x z-index-1 bg_blue3&#34;&gt;
					Egg Org Leaderboard: {{ eggOrgLeaderboard }}
				&lt;/div&gt; --&gt;

				&lt;div ref=&#34;playerListWrapper&#34; class=&#34;player-list-wrapper&#34;&gt;
					&lt;div ref=&#34;playerContainer&#34; class=&#34;player__container&#34; v-show=&#34;showScreen === screens.game&#34;&gt;
						&lt;div id=&#34;playerSlot&#34; class=&#34;playerSlot&#34; style=&#34;display: none&#34;&gt;
							&lt;div&gt;
								&lt;span&gt;&lt;/span&gt; &lt;!-- Name --&gt;
								&lt;span&gt;&lt;/span&gt; &lt;!-- Score --&gt;
							&lt;/div&gt;
							&lt;div style=&#34;display: block;&#34;&gt;&lt;/div&gt; &lt;!-- Icons --&gt;
						&lt;/div&gt;
						&lt;!-- end .playerSlot --&gt;
						&lt;div id=&#34;playerList&#34;&gt;&lt;/div&gt;

						&lt;div v-if=&#34;extern.GameOptions.value.flags &amp; extern.GameFlags.locked&#34; :key=&#34;gameOptionsPopup.options.flags&#34; class=&#34;fa fa-lock fa-2x text_white&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
					&lt;!-- end .player__container --&gt;
				&lt;/div&gt;
				&lt;!-- end .player_list_wrapper --&gt;

				&lt;!-- Scope --&gt;
				&lt;div id=&#34;scopeBorder&#34;&gt;
					&lt;div id=&#34;maskleft&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;maskmiddle&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;maskright&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;
				
				&lt;!-- Best Streak --&gt;
				&lt;div id=&#34;shellStreakContainer&#34; class=&#34;display-grid grid-column-1-auto align-items-center gap-sm&#34;&gt;
					&lt;span ref=&#34;shellStreakCap&#34; id=&#34;shellStreakCaptionStreak&#34; class=&#34;h1 text_yellow&#34;&gt;&lt;span&gt;x&lt;/span&gt;{{game.bestStreak.count}}&lt;/span&gt;
					&lt;div class=&#34;shellStreakCaptionWrap&#34;&gt;
						&lt;h1 id=&#34;shellStreakCaption&#34;&gt;Best &lt;br&gt;Streak&lt;/h1&gt;
							&lt;!-- &lt;p id=&#34;shellStreakMessage&#34; v-show=&#34;game.streakMsg.msg&#34; class=&#34;text_yellow&#34;&gt;{{ game.streakMsg.msg }}&lt;/p&gt; --&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;!-- Challenge --&gt;
				&lt;div id=&#34;playerChallengeComplete&#34; v-show=&#34;game.challengeMsg.showing&#34; class=&#34;centered_x in-game-notification&#34;&gt;
					&lt;img id=&#34;playerChallengeImg&#34; :src=&#34;game.challengeMsg.icon&#34; alt=&#34;&#34;&gt;
					&lt;h2 id=&#34;playerChallengetitle&#34; class=&#34;text_white nospace&#34;&gt;{{game.challengeMsg.title}}&lt;/h2&gt;
					&lt;p class=&#34;text_yellow nospace&#34;&gt;{{ loc.complete }}&lt;/p&gt;
				&lt;/div&gt;

				&lt;!-- Team Scores --&gt;
				&lt;div id=&#34;teamScores&#34; class=&#34;centered_x display-grid grid-auto-flow-column align-items-center gap-sm&#34;&gt;
					&lt;div id=&#34;teamScore2&#34; class=&#34;teamScore red inactive box_relative&#34;&gt;
							&lt;i class=&#34;fas fa-egg&#34;&gt;&lt;/i&gt;
							&lt;p id=&#34;teamScoreNum2&#34; class=&#34;number centered_x&#34;&gt;0&lt;/p&gt;
					&lt;/div&gt;
					&lt;h3 class=&#34;text_white vs&#34;&gt;VS&lt;/h3&gt;
					&lt;div id=&#34;teamScore1&#34; class=&#34;teamScore blue inactive box_relative&#34;&gt;
						&lt;i class=&#34;fas fa-egg&#34;&gt;&lt;/i&gt;
							&lt;p id=&#34;teamScoreNum1&#34; class=&#34;number centered_x&#34;&gt;0&lt;/p&gt;
					&lt;/div&gt;
					&lt;!--&lt;div&gt;
							&lt;img src=&#34;img/spatulaIcon.webp&#34; style=&#34;width: 3em; transform: rotate(60deg)&#34;&gt;
					&lt;/div&gt;--&gt;
				&lt;/div&gt;

				&lt;!-- Capture Icon --&gt;
				&lt;div ref=&#34;captureIconWrap&#34; id=&#34;captureIconWrap&#34;&gt;
					&lt;div ref=&#34;captureIconContainer&#34; id=&#34;captureIconContainer&#34;&gt;
						&lt;div id=&#34;captureInsideContainer&#34;&gt;
							&lt;div id=&#34;captureIconCaption&#34;&gt;20M&lt;/div&gt;
							&lt;div id=&#34;captureRingBackground&#34;&gt;&lt;/div&gt;
							&lt;div id=&#34;captureRingContainer&#34;&gt;
								&lt;div id=&#34;captureRing&#34;&gt;&lt;/div&gt;
							&lt;/div&gt;
		
							&lt;svg id=&#34;captureIcon&#34; viewBox=&#34;0 0 53.6 36&#34;&gt;
								&lt;use href=&#34;img/kotc/crown.svg#crown&#34; /&gt;
							&lt;/svg&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;

				&lt;!-- Hit Markers --&gt;
				&lt;div id=&#34;hitMarkerContainer&#34;&gt;
					&lt;div id=&#34;hitMarker0&#34; class=&#34;hideme&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;hitMarker1&#34; class=&#34;hideme&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;hitMarker2&#34; class=&#34;hideme&#34;&gt;&lt;/div&gt;
					&lt;div id=&#34;hitMarker3&#34; class=&#34;hideme&#34;&gt;&lt;/div&gt;		
				&lt;/div&gt;

				&lt;!-- Reticle --&gt;
				&lt;div id=&#34;reticleDot&#34;&gt;&lt;/div&gt;
				&lt;div id=&#34;reticleContainer&#34; class=&#34;centered&#34;&gt;
					&lt;div id=&#34;redDotReticle&#34;&gt;&lt;/div&gt;
					
					&lt;div id=&#34;crosshairContainer&#34;&gt;
						&lt;div id=&#34;crosshair0&#34; class=&#34;crosshair normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;crosshair1&#34; class=&#34;crosshair normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;crosshair2&#34; class=&#34;crosshair normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;crosshair3&#34; class=&#34;crosshair normal&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
	
					&lt;div id=&#34;shotReticleContainer&#34;&gt;
						&lt;div id=&#34;shotBracket0&#34; class=&#34;shotReticle border normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;shotBracket1&#34; class=&#34;shotReticle border normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;shotBracket2&#34; class=&#34;shotReticle fill normal&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;shotBracket3&#34; class=&#34;shotReticle fill normal&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
	
					&lt;div id=&#34;readyBrackets&#34;&gt;
						&lt;div class=&#34;readyBracket&#34;&gt;&lt;/div&gt;
						&lt;div class=&#34;readyBracket&#34;&gt;&lt;/div&gt;
						&lt;div class=&#34;readyBracket&#34;&gt;&lt;/div&gt;
						&lt;div class=&#34;readyBracket&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
	
				&lt;!-- Capture Zone progress --&gt;
				&lt;div id=&#34;captureContainer&#34;&gt;
					&lt;div class=&#34;captureScoreContainer&#34;&gt;
						&lt;svg class=&#34;captureCrown&#34; viewBox=&#34;0 0 53.6 36&#34;&gt;
							&lt;use href=&#34;img/kotc/crown.svg#crown&#34; fill=&#34;var(--ss-team-red-light)&#34; /&gt;
						&lt;/svg&gt;
	
						&lt;div id=&#34;captureScoreRed&#34; class=&#34;captureScore&#34;&gt;0/5&lt;/div&gt;
					&lt;/div&gt;
	
					&lt;div id=&#34;captureCenter&#34;&gt;
						&lt;div id=&#34;captureBarContainer&#34;&gt;
							&lt;div id=&#34;captureBar&#34;&gt;&lt;/div&gt;
						&lt;/div&gt;
						&lt;div id=&#34;captureBarText&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
	
					&lt;div class=&#34;captureScoreContainer&#34;&gt;
						&lt;svg class=&#34;captureCrown&#34; viewBox=&#34;0 0 53.6 36&#34;&gt;
							&lt;use href=&#34;img/kotc/crown.svg#crown&#34; fill=&#34;var(--ss-team-blue-light)&#34; /&gt;
						&lt;/svg&gt;
						&lt;div id=&#34;captureScoreBlue&#34; class=&#34;captureScore&#34;&gt;0/5&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
	
				&lt;!-- Big Message Bar --&gt;
				&lt;div id=&#34;bigMessageContainer&#34; style=&#34;display: none&#34;&gt;
					&lt;div id=&#34;bigMessageBar&#34;&gt; 
						&lt;div id=&#34;bigMessage&#34;&gt;&lt;/div&gt;
						&lt;div id=&#34;bigMessageCaption&#34;&gt;&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
	
				&lt;!-- Weapon --&gt;
				&lt;div id=&#34;weaponBox&#34;&gt;
					&lt;div id=&#34;grenades&#34;&gt;
						&lt;img id=&#34;grenade3&#34; class=&#34;grenade&#34; src=&#34;img/ico_grenadeEmpty.webp?v=1&#34;/&gt;
						&lt;img id=&#34;grenade2&#34; class=&#34;grenade&#34; src=&#34;img/ico_grenadeEmpty.webp?v=1&#34;/&gt;
						&lt;img id=&#34;grenade1&#34; class=&#34;grenade&#34; src=&#34;img/ico_grenadeEmpty.webp?v=1&#34;/&gt;
					&lt;/div&gt;
					&lt;h2 id=&#34;weaponName&#34;&gt;&lt;/h2&gt;
					&lt;h2 id=&#34;ammo&#34; class=&#34;shadow_grey&#34;&gt;&lt;/h2&gt;
				&lt;/div&gt;
	
				&lt;!-- Health --&gt;
				&lt;div id=&#34;healthContainer&#34; v-show=&#34;!game.isPaused &amp;&amp; !ui.game.spectate&#34;&gt;
					&lt;svg class=&#34;healthSvg&#34;&gt;
						&lt;circle id=&#34;hardBoiled-bar&#34; class=&#34;healthBar-hardBoiled healthBar-area&#34; cx=&#34;50%&#34; cy=&#34;50%&#34; r=&#34;2.85em&#34; /&gt;
						&lt;circle id=&#34;hardBoiled-stroke&#34; class=&#34;healthBar-hardBoiled-stroke healthBar-area&#34; cx=&#34;50%&#34; cy=&#34;50%&#34; r=&#34;2.4em&#34; /&gt;
						&lt;circle id=&#34;healthBar&#34; class=&#34;healthBar healthBar-area&#34; cx=&#34;50%&#34; cy=&#34;50%&#34; r=&#34;2.15em&#34; /&gt;
						&lt;circle class=&#34;healthYolk&#34; cx=&#34;50%&#34; cy=&#34;50%&#34; r=&#34;1.35em&#34; /&gt;
					&lt;/svg&gt;
	
					&lt;div id=&#34;healthHp&#34; class=&#34;centered&#34;&gt;100&lt;/div&gt;
				&lt;/div&gt;
				
				&lt;div id=&#34;egg-breaker-wrap&#34; class=&#34;egg-breaker-wrap display-grid box_absolute font-nunito grid-auto-flow-column gap-1&#34;&gt;
					&lt;shell-streak-msg v-for=&#34;msg in game.shellStreakTimers &#34; :loc=&#34;loc&#34; :msgId=&#34;msg.msgId&#34; :msg=&#34;msg.msg&#34;&gt;&lt;/shell-streak-msg&gt;
				&lt;/div&gt;
				&lt;!-- egg-breaker-wrap end --&gt;
				&lt;icon id=&#34;spatulaPlayer&#34; name=&#34;ico_spatula&#34;&gt;&lt;/icon&gt;
	
				&lt;!-- Grenade throw power --&gt;
				&lt;div id=&#34;grenadeThrowContainer&#34;&gt;
					&lt;div id=&#34;grenadeThrow&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;

				&lt;div id=&#34;kill-death-box&#34; ref=&#34;killDeathBox&#34; v-show=&#34;game.ingameNotification.showing&#34; class=&#34;in-game-notification centered_x&#34;&gt;
					&lt;img v-show=&#34;game.ingameNotification.item.type !== 2&#34; src=&#34;img/ico_streak.webp&#34; alt=&#34;&#34; class=&#34;centered_x kill-death-box-img&#34; /&gt;
					&lt;span v-show=&#34;game.ingameNotification.item.type == 2&#34; class=&#34;h1 text_yellow centered_x&#34;&gt;&lt;span&gt;x&lt;/span&gt;{{game.ingameNotification.item.streak}}&lt;/span&gt;
					&lt;h2 v-show=&#34;game.ingameNotification.item.type == 2&#34; class=&#34;nospace text_white&#34;&gt;{{ loc.ks_shell_streak }}!&lt;/h2&gt;
					&lt;div class=&#34;kill-death-msg&#34; ref=&#34;killMsg&#34; v-show=&#34;game.ingameNotification.item.type !== 2&#34; :class=&#34;game.ingameNotification.item.style&#34; v-html=&#34;game.ingameNotification.item.msg&#34;&gt;&lt;/div&gt;
					&lt;p v-show=&#34;game.ingameNotification.item.type == 2&#34; class=&#34;nospace text_yellow text-uppercase&#34;&gt;{{ game.ingameNotification.item.msg }}&lt;/p&gt;
				&lt;/div&gt;

				&lt;transition name=&#34;fade&#34;&gt;
					&lt;div id=&#34;cts-message&#34; v-show=&#34;game.ctsMsg.showing&#34; :class=&#34;game.ctsMsg.teams[game.ctsMsg.team]&#34; class=&#34;centered_y in-game-notification light-dark display-grid grid-auto-flow-column gap-1 align-items-center&#34;&gt;
						&lt;div&gt;
							&lt;h1 class=&#34;team-title nospace text-right&#34;&gt;{{ game.ctsMsg.teams[game.ctsMsg.team] }}&lt;/h1&gt;
							&lt;p class=&#34;nospace text_white text-right&#34;&gt;{{ loc[game.ctsMsg.msg] }}&lt;/p&gt;
						&lt;/div&gt;
						&lt;icon class=&#34;icon-spatula&#34; name=&#34;ico_spatula&#34;&gt;&lt;/icon&gt;
					&lt;/div&gt;
				&lt;/transition&gt;
	
				&lt;!-- Game messages --&gt;
				&lt;div id=&#34;gameMessage&#34;&gt;&lt;/div&gt;

				&lt;!-- Kill ticker --&gt;
				&lt;div ref=&#34;killTickerWrapper&#34;&gt;
					&lt;div ref=&#34;killTicker&#34; id=&#34;killTicker&#34; class=&#34;chat&#34;&gt;&lt;/div&gt;
				&lt;/div&gt;

				&lt;!-- Spectator controls --&gt;
				&lt;div id=&#34;spectate&#34;&gt;
					&lt;div class=&#34;h4 margins_sm&#34;&gt;{{ loc.ui_game_spectating }}&lt;/div&gt;

					&lt;div v-if=&#34;ui.game.spectatingPlayerName&#34;&gt;
						&lt;div class=&#34;h1 margins_sm&#34;&gt;{{ ui.game.spectatingPlayerName }}&lt;/div&gt;
						&lt;div&gt;
							&lt;span class=&#34;fas fa-arrow-up&#34;&gt;&lt;/span&gt;
							&amp;nbsp;/&amp;nbsp;
							&lt;span class=&#34;fas fa-arrow-down&#34;&gt;&lt;/span&gt;
							&amp;nbsp;{{ loc.ui_game_spectate_select }}
						&lt;/div&gt;
					&lt;/div&gt;

					&lt;div&gt;{{ spectateControls }}&lt;/div&gt;
				&lt;/div&gt;

				&lt;div ref=&#34;spectateWrap&#34; class=&#34;spectate-wrapper&#34;&gt;
					&lt;button ref=&#34;spectateBtn&#34; v-show=&#34;!isRespawning &amp;&amp; game.isPaused &amp;&amp; showScreen === screens.game &amp;&amp; delayTheCracking&#34; @click=&#34;onSpectateClicked()&#34; class=&#34;ss_button btn_blue bevel_blue btn_sm pause-screen-btn-spectate&#34; :disabled=&#34;isRespawning&#34; :title=&#34;loc.p_pause_spectate&#34;&gt;
						&lt;i class=&#34;fas fa-eye fa-2x&#34;&gt;&lt;/i&gt;
					&lt;/button&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
		&lt;!-- ref gameUIWrapper --&gt;

		&lt;div v-show=&#34;!game.showWelcomeBundleCta&#34; id=&#34;chw-game-screen&#34; :class=&#34;{&#39;has-announcement&#39;: announcementMessage}&#34;&gt;
		&lt;/div&gt;
		&lt;div v-show=&#34;game.showWelcomeBundleCta&#34; id=&#34;welcome-bundle-ui&#34; class=&#34;cta-welcome-bundle box_absolute roundme_lg z-index-2&#34;&gt;
			&lt;img v-lazyload :data-src=&#34;ui.lazyImages.welcomePack&#34; class=&#34;lazy-load&#34; alt=&#34;Buy the welcome pack for $1 usd&#34; @click=&#34;onEmitShowWelcomeBundlePopup&#34; /&gt;
		&lt;/div&gt;
		
		&lt;div ref=&#34;chatWrapper&#34; :class=&#34;[{&#39;chat-hidden&#39;: !chatEnabled}]&#34; class=&#34;chat-wrapper pause-ui-element box_absolute roundme_lg&#34;&gt;
			&lt;div ref=&#34;announcementMsg&#34; v-show=&#34;announcementMessage&#34; id=&#34;announcement_message&#34; class=&#34;font-nunito text_white&#34;&gt;&lt;span class=&#34;text_yellow&#34;&gt;Announcement: &lt;/span&gt;{{ announcementMessage }}&lt;/div&gt;
			&lt;div v-show=&#34;!chatEnabled&#34; class=&#34;paddings_md&#34;&gt;
				&lt;h4 class=&#34;text_white nospace&#34;&gt;{{ loc.ingame_chat_hidden }}&lt;/h4&gt;
				&lt;p @click=&#34;onSettingsClicked(true)&#34; class=&#34;nospace text_white&#34;&gt;{{ loc.ingame_chat_open_settings }}&lt;/p&gt;
			&lt;/div&gt;
			&lt;div ref=&#34;chatContainer&#34; v-show=&#34;chatEnabled&#34; class=&#34;chat-container&#34;&gt;
				&lt;div id=&#34;chatOut&#34; class=&#34;chat roundme_sm&#34;&gt;&lt;/div&gt;
				&lt;input id=&#34;chatIn&#34; class=&#34;chat roundme_sm&#34; maxlength=64 tabindex=-1 v-bind:placeholder=&#34;loc.ingame_press_tab_to_exit&#34; onkeydown=&#34;extern.onChatKeyDown(event)&#34; onclick=&#34;extern.startChat(event)&#34; onblur=&#34;extern.stopChat(event)&#34;&gt;&lt;/input&gt;
			&lt;/div&gt;
		&lt;/div&gt;
        &lt;!-- Chat --&gt;

		&lt;!-- Ingame UI Stuff --&gt; 
		&lt;div id=&#34;inGameUI&#34; class=&#34;roundme_lg&#34;&gt;
			&lt;div id =&#34;serverAndMapInfo&#34;&gt;
				&lt;h5 class=&#34;nospace title text-right&#34;&gt;{{ loc.map }}&lt;/h5&gt;
				&lt;p class=&#34;name&#34;&gt;{{ game.mapName }}&lt;/p&gt;
				&lt;h5 class=&#34;nospace title text-right&#34;&gt;{{ loc.server }}&lt;/h5&gt;
				&lt;p class=&#34;name&#34;&gt;{{ serverLoc }}&lt;/p&gt;
			&lt;/div&gt;
			&lt;div id=&#34;readouts&#34;&gt;
               &lt;h5 class=&#34;nospace title&#34;&gt;{{ loc.ui_game_fps }}&lt;/h5&gt;
				&lt;p id=&#34;FPS&#34; class=&#34;name&#34;&gt;&lt;/p&gt;
                &lt;h5 class=&#34;nospace title&#34;&gt;{{ loc.ui_game_ping }}&lt;/h5&gt;
				&lt;p id=&#34;ping&#34; class=&#34;name&#34;&gt;&lt;/p&gt;
			&lt;/div&gt;
		&lt;/div&gt;

        &lt;!-- Popup: Mute/Boot Player --&gt;
        &lt;small-popup id=&#34;playerActionsPopup&#34; ref=&#34;playerActionsPopup&#34; :hide-confirm=&#34;true&#34; @popup-opened=&#34;sharedPopupOpened&#34;&gt;
            &lt;template slot=&#34;header&#34;&gt;{{ playerActionsPopup.playerName }}&lt;/template&gt;
            &lt;template slot=&#34;content&#34;&gt;
                &lt;div v-if=&#34;playerActionsPopup.vipMember&#34; class=&#34;vip-member-wraper display-grid align-items-center grid-column-1-2 ss_marginbottom_xl&#34;&gt;
                    &lt;figure class=&#34;player-action-vip-img center_h&#34;&gt;
						&lt;img v-lazyload :data-src=&#34;ui.lazyImages.vipEmblem&#34; class=&#34;lazy-load center_h&#34; alt=&#34;Shell Shockers VIP&#34;&gt;
                    &lt;/figure&gt;
                    &lt;div&gt;
                        &lt;h6 class=&#34;roundme_sm shadow_blue4 ss_margintop ss_marginbottom&#34;&gt;{{loc.ui_game_playeractions_vip_member}}&lt;/h6&gt;
                        &lt;button v-if=&#34;!isSubscriber&#34; class=&#34;ss_button btn_pink bevel_pink fullwidth&#34; @click=&#34;openVipPopup&#34;&gt;{{loc.ui_game_playeractions_join_vip}}&lt;/button&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
                &lt;!-- .vip-member-wraper --&gt;
                &lt;p&gt;{{ loc.ui_game_playeractions_header }}&lt;/p&gt;
                &lt;button v-if=&#34;playerActionsPopup.social&#34; class=&#34;ss_button btn_medium btn_yolk bevel_yolk fullwidth&#34; @click=&#34;onClickCreator(playerActionsPopup.social.url)&#34;&gt;&lt;i class=&#34;fab&#34; :class=&#34;playerSocial&#34;&gt;&lt;/i&gt; {{loc.ui_game_playeractions_creator}}&lt;/button&gt;
                &lt;h4 class=&#34;ss_button btn_medium btn_blue bevel_blue&#34; v-on:click=&#34;onMuteClicked&#34;&gt;{{ muteButtonLabel }}&lt;/h4&gt;
				&lt;h4 class=&#34;ss_button btn_medium btn_red bevel_red&#34; v-on:click=&#34;onReportActionClicked&#34;&gt;{{ loc.ui_game_playeractions_report }}&lt;/h4&gt;
                &lt;h4 class=&#34;ss_button btn_medium btn_yolk bevel_yolk&#34; v-if=&#34;extern.isGameOwner&#34; v-on:click=&#34;onBootClicked&#34;&gt;{{ loc.ui_game_playeractions_boot }}&lt;/h4&gt;
				&lt;h4 class=&#34;ss_button btn_medium btn_pink bevel_pink&#34; v-if=&#34;extern.adminRoles &amp; 4&#34; v-on:click=&#34;onBanActionClicked&#34;&gt;{{ loc.ui_game_playeractions_ban }}&lt;/h4&gt;
				&lt;h4 class=&#34;ss_button btn_medium btn_green bevel_green&#34; v-if=&#34;extern.adminRoles &amp; 64&#34; v-on:click=&#34;onInfoClicked&#34;&gt;Info&lt;/h4&gt;
            &lt;/template&gt;
            &lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
        &lt;/small-popup&gt;

		&lt;!-- Popup: Ban Player --&gt;
        &lt;small-popup id=&#34;banPlayerPopup&#34; ref=&#34;banPlayerPopup&#34; :hide-confirm=&#34;true&#34; @popup-opened=&#34;sharedPopupOpened&#34; @popup-closed=&#34;sharedPopupClosed&#34;&gt;
            &lt;template slot=&#34;header&#34;&gt;Ban Player&lt;/template&gt;
            &lt;template slot=&#34;content&#34;&gt;
				&lt;h5 class=&#34;text_yellow&#34;&gt;{{ playerActionsPopup.playerName }}&lt;/h5&gt;
                &lt;input ref=&#34;banReason&#34; type=&#34;text&#34; placeholder=&#34;Reason&#34; class=&#34;ss_field ss_margintop ss_marginbottom fullwidth&#34; @focus=&#34;$event.target.select()&#34;&gt;
				&lt;select ref=&#34;banDuration&#34; class=&#34;ss_field&#34;&gt;
					&lt;option v-for=&#34;d in banDurations&#34; v-bind:value=&#34;d.value&#34; v-html=&#34;d.label&#34;&gt;&lt;/option&gt;
				&lt;/select&gt;
				&lt;h4 class=&#34;ss_button btn_medium btn_green bevel_green&#34; v-if=&#34;extern.adminRoles &amp; 4&#34; v-on:click=&#34;onBanClicked&#34;&gt;{{ loc.ui_game_playeractions_ban }}&lt;/h4&gt;
            &lt;/template&gt;
            &lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
        &lt;/small-popup&gt;

		&lt;!-- Popup: Report Player --&gt;
		&lt;small-popup id=&#34;reportPlayerPopup&#34; ref=&#34;reportPlayerPopup&#34; :hide-confirm=&#34;true&#34; @popup-opened=&#34;sharedPopupOpened&#34; @popup-closed=&#34;sharedPopupClosed&#34;&gt;
            &lt;template slot=&#34;header&#34;&gt;{{ loc.report_player_title }}&lt;/template&gt;
            &lt;template slot=&#34;content&#34;&gt;
				&lt;h5 class=&#34;text_yellow&#34;&gt;{{ playerActionsPopup.playerName }}&lt;/h5&gt;
				&lt;p v-for=&#34;(r, i) in reportReasons&#34;&gt;
					&lt;label class=&#34;ss_checkbox label&#34;&gt; {{ loc[r.locKey] }}
						&lt;input type=&#34;checkbox&#34; v-model=&#34;reportPlayerPopup.checked[i]&#34;&gt;
						&lt;span class=&#34;checkmark&#34;&gt;&lt;/span&gt;
					&lt;/label&gt;
				&lt;/p&gt;
				&lt;br&gt;
				&lt;button class=&#34;ss_button btn_medium btn_green bevel_green&#34; :disabled=&#34;!isReportFilled&#34; v-on:click=&#34;onReportClicked&#34;&gt;{{ loc.ui_game_playeractions_report }}&lt;/button&gt;
            &lt;/template&gt;
            &lt;template slot=&#34;cancel&#34;&gt;{{ loc.cancel }}&lt;/template&gt;
        &lt;/small-popup&gt;

		&lt;!-- Popup: Switch Team --&gt;
		&lt;small-popup id=&#34;switchTeamPopup&#34; ref=&#34;switchTeamPopup&#34; :overlay-close=&#34;false&#34; @popup-confirm=&#34;onSwitchTeamConfirm&#34; @popup-opened=&#34;sharedPopupOpened&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_switch_team_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
                &lt;h4 class=&#34;roundme_sm&#34; :class=&#34;newTeamColorCss&#34;&gt;{{ newTeamName }} &lt;i class=&#34;fa fa-flag&#34;&gt;&lt;/i&gt;&lt;/h4&gt;
				&lt;p&gt;{{ loc.p_switch_team_text }}&lt;/p&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.no }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.yes }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;!-- Popup: Share Link --&gt;
		&lt;small-popup id=&#34;shareLinkPopup&#34; ref=&#34;shareLinkPopup&#34; :popup-model=&#34;game.shareLinkPopup&#34; @popup-confirm=&#34;onShareLinkConfirm&#34; @popup-opened=&#34;sharedPopupOpened&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.p_sharelink_title }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;p&gt;{{ loc.p_sharelink_text }}&lt;/p&gt;
				&lt;h1 class=&#34;text_gold shadow_bluebig4&#34;&gt;{{ game.shareLinkPopup.code }}&lt;/h1&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.close }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.p_sharelink_copylink }}&lt;/template&gt;
		&lt;/small-popup&gt;

		&lt;div ref=&#34;pausePopupWrap&#34; id=&#34;pausePopupWrap&#34;&gt;
			&lt;div v-show=&#34;game.pauseScreen.showMenu&#34; ref=&#34;pausePopup&#34; class=&#34;pause-container centered&#34;&gt;
				&lt;div id=&#34;respawn-group&#34; class=&#34;display-grid&#34;&gt;
				&lt;display-ad id=&#34;shellshock-io_respawn_three&#34; ref=&#34;headerDisplayAdGame&#34; class=&#34;display-ad-header&#34; :ignoreSize=&#34;true&#34; :adUnit=&#34;displayAd.adUnit.respawnThree&#34; adSize=&#34;728x90&#34; :check-products=&#34;checkProducts&#34;&gt;&lt;/display-ad&gt;
					&lt;div id=&#34;respawn-menu&#34;&gt;
						&lt;div class=&#34;display-grid grid-column-2-eq gap-sm&#34;&gt;
							&lt;player-challenge-list :loc=&#34;loc&#34; :challenges=&#34;player.challenges&#34; :challenge-data=&#34;player.challengeDailyData&#34; :timers=&#34;player.challengeTimer&#34; :in-game=&#34;true&#34; @challengeReroll=&#34;challengeReroll&#34;&gt;&lt;/player-challenge-list&gt;
							&lt;div class=&#34;pause-ad-wrap display-grid align-items-center&#34;&gt;
								&lt;div class=&#34;pause-screen-content pause-bg roundme_md box_relative center_h&#34;&gt;
									&lt;section id=&#34;btn_horizontal&#34; class=&#34;pause-game-weapon-select pause-popup--btn-group&#34;&gt;
										&lt;div class=&#34;media-tab-container display-grid align-items-center ss_marginbottom bg_blue3&#34;&gt;
											&lt;h4 class=&#34;common-box-shadow text-shadow-black-40 text_white&#34;&gt;{{loc.p_weapon_title}}&lt;/h4&gt;
										&lt;/div&gt;
										&lt;weapon-select-panel
											ref=&#34;weaponSelect&#34;
											id=&#34;weapon_select&#34;
											:loc=&#34;loc&#34;
											:current-class=&#34;classIdx&#34;
											:account-settled=&#34;true&#34;
											:play-clicked=&#34;false&#34;
											@changed-class=&#34;pauseWeaponSelect&#34;
											:current-screen=&#34;showScreen&#34;
											:screens=&#34;screens&#34;
										&gt;&lt;/weapon-select-panel&gt;
									&lt;/section&gt;
								&lt;/div&gt;
								&lt;!-- end .pause-screen-content --&gt;
								&lt;!-- &lt;div class=&#34;pause-screen-play-btn center_h text-center&#34;&gt; --&gt;
								&lt;button v-if=&#34;!extern.observingGame&#34; @click=&#34;onPlayClicked()&#34; class=&#34;ss_button btn_big btn-dark-bevel btn-respawn&#34; :class=&#34;playBtnColor&#34; :disabled=&#34;isRespawning&#34;&gt;
									&lt;i v-if=&#34;delayTheCracking&#34; v-show=&#34;!isRespawning&#34; class=&#34;fa fa-play&#34;&gt;&lt;/i&gt;{{ playBtnText }} &lt;span style=&#34;display: inline-block; font-size: 0.4em;&#34;&gt;{{ playBtnAdBlockerText }}&lt;/span&gt;
								&lt;/button&gt;
								&lt;button v-if=&#34;delayTheCracking&#34; v-show=&#34;isTeamGame&#34; @click=&#34;onSwitchTeamClicked&#34; class=&#34;ss_button btn_big btn_team_switch btn-dark-bevel btn-respawn&#34; :class=&#34;teamColorCss&#34;&gt;
									&lt;div class=&#34;display-grid grid-column-1-2 align-items-center&#34;&gt;
										&lt;i class=&#34;fa fa-flag fa-2x&#34;&gt;&lt;/i&gt;
										&lt;div v-html=&#34;teamName&#34; class=&#34;team-switch-text text-left&#34;&gt;&lt;/div&gt;
									&lt;/div&gt;
								&lt;/button&gt;
								&lt;h1 class=&#34;text_white&#34; v-if=&#34;extern.observingGame&#34;&gt;OBSERVING - SPECTATE ONLY&lt;/h1&gt;
								&lt;!-- &lt;/div&gt; --&gt;
							&lt;/div&gt;
						&lt;/div&gt;
						&lt;!-- respawn menu--&gt;
					&lt;/div&gt;
					&lt;div id=&#34;respawn-ad-two&#34;&gt;
						&lt;div v-if=&#34;!isSubscriber&#34; class=&#34;respawn-container respawn-two display-grid&#34;&gt;
							&lt;display-ad id=&#34;shellshockers_respawn_banner_2_ad&#34; ref=&#34;respawnTwoDisplayAd&#34; class=&#34;pauseFiller&#34; :ignoreSize=&#34;false&#34; :adUnit=&#34;displayAd.adUnit.respawnTwo&#34; adSize=&#34;300x250&#34; :check-products=&#34;checkProducts&#34;&gt;&lt;/display-ad&gt;
						&lt;/div&gt;
						&lt;!-- .respawn-two smaller--&gt;
					&lt;/div&gt;
					&lt;div id=&#34;respawn-ad-one&#34;&gt;
						&lt;div class=&#34;pause-screen-wrapper grid-span-2-start-1&#34; :class=&#34;pauseScreenWrapGrid&#34;&gt;
							&lt;div ref=&#34;pauseContainer&#34; class=&#34;pause-popup--container box_relative roundme_lg display-grid gap-1&#34;&gt;
								&lt;!-- wrapper --&gt;
								&lt;div v-if=&#34;!isSubscriber&#34; class=&#34;respawn-container respawn-one display-block&#34;&gt;
									&lt;display-ad id=&#34;shellshockers_respawn_banner-new_ad&#34; ref=&#34;respawnDisplayAd&#34; class=&#34;pauseFiller&#34; :ignoreSize=&#34;false&#34; :adUnit=&#34;displayAd.adUnit.respawn&#34; adSize=&#34;728x90&#34; :check-products=&#34;checkProducts&#34;&gt;&lt;/display-ad&gt;
								&lt;/div&gt;
								&lt;!-- .respawn-one --&gt;
							&lt;/div&gt;
							&lt;!-- end .pause-popup--container --&gt;
						&lt;/div&gt;
						&lt;!-- end .pause-screen-wrapper --&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script id="shell-streak-msg" type="text/x-template">
      &lt;div :id=&#34;htmlId&#34; :class=&#34;htmlClass&#34;&gt;
		&lt;div class=&#34;egg-breaker-container display-grid&#34;&gt;
			&lt;div id=&#34;egg-breaker-icon-wrap&#34; class=&#34;box_relative&#34;&gt;
				&lt;div v-if=&#34;!showRestock&#34; class=&#34;box_absolute&#34;&gt;						
					&lt;svg id=&#34;Layer_2&#34; data-name=&#34;Layer 2&#34; class=&#34;egg-breaker-icon&#34; xmlns=&#34;http://www.w3.org/2000/svg&#34; viewBox=&#34;0 0 112.49 135.74&#34;&gt;&lt;path class=&#34;cls-1&#34; d=&#34;m64.53.31-4.95 14.66 16.84 5.2-26 27.81 7.69-23.51H42.74L49.14 0C21.43 6.67 0 50.83 0 79.49 0 96.65 7.69 112 19.81 122.32l15.92-16.8-2.5 25.28a55.973 55.973 0 0 0 23.02 4.93c6.03 0 11.84-.96 17.29-2.72l-2.76-11.5H57.67v-14.98l5.65 9.04 16.96-3.84 7.56 14.29c14.88-10.12 24.66-27.19 24.66-46.54C112.49 51.25 91.66 7.94 64.53.31Z&#34; id=&#34;Layer_1-2&#34; data-name=&#34;Layer 1&#34;/&gt;&lt;/svg&gt;
					&lt;div :id=&#34;htmlClass&#34; class=&#34;centered&#34;&gt;15&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
			&lt;div class=&#34;egg-breaker-msg text-uppercase&#34; :class=&#34;elStyle&#34;&gt;
				&lt;span v-if=&#34;!showRestock&#34; class=&#34;font-sigmar x-two-msg&#34;&gt;&lt;span&gt;x&lt;/span&gt;2&lt;/span&gt;
				&lt;icon v-if=&#34;showRestock&#34; name=&#34;ico-shell-streak-restock&#34; class=&#34;egg-breaker-icon shell-streak-restock-icon&#34;&gt;&lt;/icon&gt;
				{{ msgLoc }}
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script>
      const CompShellStreakMsg = {
    template: &#39;#shell-streak-msg&#39;,
	props: [&#39;loc&#39;, &#39;msgId&#39;, &#39;svg&#39;, &#39;msg&#39;],
    computed: {
		htmlId() {
			return &#39;shellStreak-&#39; + this.msgId;
		},
		htmlClass() {
			return `shellStreak-${this.msgId}-timer`;
		},
		msgLoc() {
			return this.loc[this.msg];
		},
		showRestock() {
			return this.msgId === &#39;restock&#39;;
		},
		elStyle() {
			return this.showRestock ? &#39;f_row align-items-center&#39; : &#39;&#39;;
		}

	},
	watched: {
	}
};
    </script>
    <script>
      var comp_game_screen = {
        template: &#39;#game-screen-template&#39;,
        components: {
            &#39;account-panel&#39;: comp_account_panel,
            &#39;weapon-select-panel&#39;: comp_weapon_select_panel,
            &#39;weapon-select-panel&#39;: comp_weapon_select_panel,
            &#39;player-challenge-list&#39;: CompPlayerChallengeList,
            &#39;shell-streak-msg&#39;: CompShellStreakMsg,
            // &#39;chw&#39;: CompChwHomeScreen
        },
        props: [&#39;kname&#39;, &#39;kdname&#39;],
        data: function() {
            return vueData;
        },
        created: function() {
            this.isPoki = pokiActive;
        },
        methods: {
            sharedPopupOpened(id) {
                this.game.openPopupId = id ? id : &#39;&#39;;
            },

            sharedPopupClosed(id) {},

            showGameMenu: function() {

                if (this.abTestInventory.enabled) {
                    return;
                }

                vueApp.setDarkOverlay(false);
                this.game.pauseScreen.showMenu = true;
                this.game.gameType = extern.gameType;

                if (this.showScreen === this.screens.game) {
                    vueApp.showRespawnDisplayAd();
                    vueApp.hideHeaderAd();
                }

                setTimeout(() =&gt; vueApp.disableRespawnButton(false), 500);
                vueApp.gameUiAddClassForNoScroll();

                addEventListener(&#39;gamepadbuttondown&#39;, this.onControllerButton);
                this.crazyAdsRespawn();
                vueApp.hideShareLinkPopup();

                this.pauseUi();

                vueApp.setPause(true);

                addEventListener(&#39;resize&#39;, this.announcementMsg());

                this.ui.showCornerButtons = true;
                this.ui.game.spectate = false;

                if (this.announcementMessage) {
                    this.announcementMsg();
                }
            },

            announcementMsg() {
                this.$nextTick(() =&gt; {
                    const fontSize = parseFloat(getComputedStyle(this.$refs.announcementMsg).fontSize);
                    const heightInPx = this.$refs.announcementMsg.clientHeight;
                    const heightInEm = heightInPx / fontSize;
                    this.$refs.chatWrapper.style.height = `calc(var(--ss--chat-height) + ${heightInEm}em)`;
                });
            },
            announcementMsgReset() {
                if (this.game.isPaused) {
                    this.$refs.chatWrapper.style.height = &#39;calc(var(--ss--chat-height) + 0em)&#39;;
                } else {
                    this.$refs.chatWrapper.style.height = &#39;auto&#39;;
                }
            },

            delayGameMenuPlayButtons() {
                setTimeout(() =&gt; {
                    this.delayTheCracking = true;
                    extern.prepRespawnButton();
                }, 3000);
            },

            hideGameMenu: function() {
                if (!extern.inGame) {
                    return;
                }
                this.game.pauseScreen.showMenu = false;
                crazySdk.clearAllBanners(); // Per CG&#39;s request
                vueApp.gameUiAddClassForNoScroll();
                vueApp.hideRespawnDisplayAd();

                if (!this.game.isPaused) {
                    this.announcementMsgReset();
                }

                removeEventListener(&#39;gamepadbuttondown&#39;, this.onControllerButton);
                // removeEventListener(&#39;resize&#39;, this.pauseScreenPlayerListOverflowCheck);
            },

            onLeaveGameConfirm: function() {
                if (this.showScreen === this.screens.equip) {
                    vueApp.onBackClick();
                }
                this.resetUi();
                this.leaveGame();
                this.delayTheCracking = false;
            },

            onLeaveGameCancel: function() {
                this.showGameMenu();
            },

            leaveGame: function() {
                // clientGame.js manipulates chickenBadge element directly to hide/show it
                this.resetMsgs();
                this.clearMsgTimers();
                removeEventListener(&#39;resize&#39;, this.pauseScreenPlayerListOverflowCheck);
                vueApp.disablePlayButton(false);
                this.$refs.chickenBadge.style.display = &#39;none&#39;;
                document.body.style.overflow = &#39;visible&#39;;
                window.scrollY = 0;
                this.hidePopupsIfGameCloses();
                extern.leaveGame(this.afterLeftGame);
                this.player.challengeTimer.played = 0;
                this.player.challengeTimer.alive = 0;
                vueData.ui.showCornerButtons = true;
                // OneSignal elements are not part of the Vue app
                var oneSignalBell = document.getElementById(&#39;onesignal-bell-container&#39;);
                if (oneSignalBell) {
                    oneSignalBell.style.display = &#39;none&#39;;
                }

            },

            hidePopupsIfGameCloses: function() {
                const gamePopups = vueApp.$refs.gameScreen.$children;
                if (Array.isArray(gamePopups)) {
                    gamePopups.forEach(gamePopup =&gt; {
                        ;
                        if (gamePopup.isShowing === true &amp;&amp; gamePopup.$el.id !== &#39;pausePopup&#39;) {
                            gamePopup.close();
                            console.log(`Closing ${gamePopup.$el.id}`);
                        }
                    });
                }
            },

            afterLeftGame: function() {
                vueApp.showSpinner();
                setTimeout(() =&gt; {
                    // extern.resize();
                    vueApp.hideSpinner();
                }, 200);
                vueApp.switchToHomeUi();
            },

            onHelpClicked: function() {
                // this.hideGameMenu();
                vueApp.showHelpPopup();
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onShareLinkClicked: function() {
                extern.inviteFriends();
                BAWK.play(&#39;ui_popupopen&#39;);
            },

            onSettingsClicked: function(openMisc) {
                if (!openMisc) openMisc = false;
                // this.hideGameMenu();
                vueApp.showSettingsPopup();
                BAWK.play(&#39;ui_popupopen&#39;);
                if (openMisc) vueApp.onSettingsPopupSwitchTabMisc();
            },

            onShareLinkConfirm: function() {
                extern.copyFriendCode(this.game.shareLinkPopup.url);
            },

            onEquipClicked: function() {
                this.game.pauseScreen.wasGameInventoryOpen = true;
                this.game.pauseScreen.classChanged = false;
                this.gaSend(&#39;inventory&#39;);
                vueApp.openEquipSwitchTo(this.equipMode.inventory);
                BAWK.play(&#39;ui_equip&#39;);
            },

            onSwitchTeamClicked: function() {
                // this.hideGameMenu();
                BAWK.play(&#39;ui_popupopen&#39;);
                this.$refs.switchTeamPopup.show();
            },

            onSwitchTeamConfirm: function() {
                extern.switchTeam();
            },

            onControllerButton: function(e) {
                switch (e.detail) {
                    case &#39;9&#39;:
                        if (document.hasFocus() &amp;&amp; !this.isRespawning &amp;&amp; this.delayTheCracking) {
                            //this.onPlayClicked();
                        }
                        break;

                    case &#39;4&#39;:
                    case &#39;6&#39;:
                    case &#39;14&#39;:
                        vueData.classIdx = Math.max(0, vueData.classIdx - 1);
                        this.$refs.weaponSelect.onWeaponSelect(vueData.classIdx);
                        break;

                    case &#39;5&#39;:
                    case &#39;7&#39;:
                    case &#39;15&#39;:
                        vueData.classIdx = Math.min(6, vueData.classIdx + 1);
                        this.$refs.weaponSelect.onWeaponSelect(vueData.classIdx);
                        break;
                }
            },

            gaSendOnClassChange() {
                if (!this.game.pauseScreen.wasGameInventoryOpen &amp;&amp; this.game.pauseScreen.classChanged) {
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;respawn-popup&#39;, &#39;classClick&#39;, Object.keys(CharClass).find(key =&gt; CharClass[key] === vueApp.classIdx));
                }

                // reset for good measure
                this.game.pauseScreen.wasGameInventoryOpen = false;
                this.game.pauseScreen.classChanged = false;
            },

            onPlayClicked() {
                if ((!this.delayTheCracking &amp;&amp; !this.isRespawning) || (this.delayTheCracking &amp;&amp; this.isRespawning) || this.game.disableRespawnButton) {
                    return;
                }

                vueApp.disableRespawnButton(true);
                vueData.ui.showCornerButtons = false;
                extern.respawn();
                BAWK.play(&#39;ui_playconfirm&#39;);
                this.gaSendOnClassChange();
            },

            onSpectateClicked: function() {
                this.gaSend(&#39;spectate&#39;);
                this.hideGameMenu();
                vueData.ui.showCornerButtons = false;
                extern.enterSpectatorMode();
                this.ui.game.spectate = true;
                BAWK.play(&#39;ui_playconfirm&#39;);
            },

            showPlayerActionsPopup: function() {
                // this.hideGameMenu();
                this.$refs.playerActionsPopup.show();
            },

            onMuteClicked: function() {
                this.$refs.playerActionsPopup.hide();
                this.playerActionsPopup.muteFunc();
            },

            onReportActionClicked: function() {
                for (let i = 0; i &lt; this.reportPlayerPopup.checked.length; i++) {
                    this.reportPlayerPopup.checked[i] = false;
                }

                this.$refs.playerActionsPopup.hide();
                this.$refs.reportPlayerPopup.show();
            },

            onReportClicked: function() {
                this.$refs.reportPlayerPopup.hide();

                let reasons = 0;

                for (let i = 0; i &lt; this.reportPlayerPopup.checked.length; i++) {
                    if (this.reportPlayerPopup.checked[i]) {
                        reasons |= (1 &lt;&lt; i);
                    }
                }

                this.playerActionsPopup.reportFunc(reasons);
            },

            onBootClicked: function() {
                this.$refs.playerActionsPopup.hide();
                this.playerActionsPopup.bootFunc();
            },

            onBanActionClicked: function() {
                this.$refs.playerActionsPopup.hide();
                this.$refs.banPlayerPopup.show();
            },

            onBanClicked: function() {
                this.$refs.banPlayerPopup.hide();
                this.playerActionsPopup.banFunc(this.$refs.banReason.value, this.$refs.banDuration.value);
            },

            onInfoClicked: function() {
                this.$refs.playerActionsPopup.hide();
                this.playerActionsPopup.infoFunc();
            },

            resizeBannerAdTagForGame: function() {
                const pauseAdPlacement = document.getElementById(&#39;pauseAdPlacement&#39;);
                const rect = document.getElementById(&#39;pausePopup&#39;).getBoundingClientRect();

                pauseAdPlacement.style.top = (rect.height).toString() + &#39;px&#39;;
            },
            earnInGameReward() {
                // this.hideGameMenu();
                vueApp.setDarkOverlay(true);
                this.pokiRewardReady = false;
                this.isPokiNewRewardTimer = false;
                extern.api_inGameReward(this.inGameRewardSuccessCallback, this.inGameRewardFailedCallback, this.rewardReachedDailyLimits);
                extern.setVolume(0);
            },
            inGameRewardSuccessCallback() {
                extern.pokiRewardedBreak(this.inGameRewardIsGranted, this.inGameRewardFailedCallback);
            },
            inGameRewardIsGranted(rewardValue) {
                console.log(&#39;inGameRewardSuccessCallback&#39;);
                this.isPokiNewRewardTimer = true;
                vueApp.showGiveStuffPopup(&#39;reward_title&#39;, rewardValue, &#39;&#39;);
                ga(&#39;send&#39;, &#39;event&#39;, &#39;Poki&#39;, &#39;Rewarded Video&#39;, &#39;Reward Success&#39;, this.pokiRewNum);
                this.pokiRewNum++;
            },
            inGameRewardFailedCallback() {
                vueApp.showGenericPopup(&#39;p_redeem_error_title&#39;, &#39;in_game_reward_try_again&#39;, &#39;ok&#39;);
                this.isPokiNewRewardTimer = false;
                ga(&#39;send&#39;, &#39;event&#39;, &#39;Poki&#39;, &#39;Rewarded Video&#39;, &#39;Failed&#39;);
            },
            rewardReachedDailyLimits() {
                vueApp.showGenericPopup(&#39;in_game_reward_title&#39;, &#39;in_game_reward_try_again&#39;, &#39;ok&#39;);
                this.isPokiNewRewardTimer = false;
                localStore.setItem(&#39;inGameRewardLimitDate&#39;, Date.now());
                extern.setVolume();
                ga(&#39;send&#39;, &#39;event&#39;, &#39;Poki&#39;, &#39;Rewarded Video&#39;, &#39;Reached Daily Limit&#39;);
            },

            pokiTimers(value, milliseconds) {
                let pokiSetTimer;

                if (value === false) {
                    clearTimeout(pokiSetTimer);
                    console.log(&#39;cancelTimer&#39;);
                    return;
                }
                pokiSetTimer = setTimeout(() =&gt; this.pokiRewardReady = true, milliseconds);
            },

            pauseWeaponSelect() {
                this.game.pauseScreen.wasGameInventoryOpen = false;
                this.game.pauseScreen.classChanged = true;
                vueApp.$refs.equipScreen.onChangedClass();
            },
            songHasChanged() {
                setTimeout(() =&gt; this.songChanged = false, 2000);
            },

            // So crazy games requires an array for multiple display ad calls on the same screen
            crazyAdsRespawn() {
                this.cGrespawnBannerErrors = 0;
                this.$nextTick(() =&gt; {
                    // crazySdk.requestResponsiveBanner(&#39;shellshock-io_respawn_three&#39;);
                    crazySdk.requestResponsiveBanner(&#39;shellshockers_respawn_banner-new_ad&#39;);
                    crazySdk.requestResponsiveBanner(&#39;shellshockers_respawn_banner_2_ad&#39;);
                });
            },

            onClickCreator(url) {
                window.open(url, )
            },

            openVipPopup() {
                this.$refs.playerActionsPopup.hide();
                vueApp.showSubStorePopup();
            },
            gaSend(label) {
                if (!label) return;
                ga(&#39;send&#39;, &#39;event&#39;, &#39;respawn-popup&#39;, &#39;click&#39;, label);
            },
            playIncentivizedAd() {
                vueApp.playIncentivizedAd();

            },
            onEggShopClicked() {
                vueApp.openEquipSwitchTo(this.equipMode.shop);
            },
            onFullscreenClicked() {
                extern.toggleFullscreen();
            },
            pauseUi() {
                this.resetMsgs(true);
                this.clearMsgTimers();
                // vueApp.$refs.gameCanvas.appendChild(this.$refs.gameUiInner);
            },
            resetUi() {
                // this.$refs.pausePopupWrap.appendChild(this.$refs.pausePopup);
            },
            resetMsgs(saveStreak) {
                // Reset the killDeathMsg object
                this.game.killDeathMsg = {
                    showing: false,
                    msgs: [],
                    msg: &#39;&#39;,
                    style: &#39;&#39;,
                    timer: null
                };

                // Reset the challengeMsg object
                this.game.challengeMsg = {
                    showing: false,
                    msgs: [],
                    icon: &#39;&#39;,
                    title: &#39;&#39;,
                    timer: null
                };

                // Reset the ctsMsg object properties
                this.game.ctsMsg.showing = false;
                this.game.ctsMsg.team = 0;
                this.game.ctsMsg.msg = &#39;&#39;;
                this.game.ctsMsg.timer = null;

                // Reset the streakMsg object
                this.game.streakMsg = {
                    showing: false,
                    msg: &#39;&#39;,
                    count: 0,
                    timer: null
                };

                if (!saveStreak) {
                    // Reset the bestStreak object
                    this.game.bestStreak = {
                        count: 0,
                        timer: null
                    };
                }

                // Reset the ingameNotification object
                this.game.ingameNotification = {
                    item: {
                        type: 0,
                        msg: &#39;&#39;,
                        streak: 0,
                        style: &#39;&#39;
                    },
                    showing: false,
                    timer: null,
                    multiTimer: null
                };
            },

            clearMsgTimers() {
                if (this.game.killDeathMsg.timer) clearTimeout(this.game.killDeathMsg.timer);
                if (this.game.challengeMsg.timer) clearTimeout(this.game.challengeMsg.timer);
                if (this.game.ctsMsg.timer) clearTimeout(this.game.ctsMsg.timer);
                if (this.game.streakMsg.timer) clearTimeout(this.game.streakMsg.timer);
                if (this.game.bestStreak.timer) clearTimeout(this.game.bestStreak.timer);
                if (this.game.ingameNotification.timer) clearTimeout(this.game.ingameNotification.timer);
                if (this.game.ingameNotification.multiTimer) clearTimeout(this.game.ingameNotification.multiTimer);
                if (this.game.inGameNotification.timer) clearTimeout(this.game.inGameNotification.timer);
            },

            onTutorialPopupClick() {
                this.gaSend(&#39;tutorial&#39;);
                vueApp.onTutorialPopupClick();
            },
            onLockClicked() {
                if (!extern.gameIsOwnerLocked) {
                    extern.sendChat(&#39;/lock&#39;);
                    extern.gameIsOwnerLocked = true;
                } else {
                    extern.sendChat(&#39;/unlock&#39;);
                    extern.gameIsOwnerLocked = false;
                }
            },

            challengeReroll(id) {
                extern.playerChallenges.reroll(id);
            },
            killDeathMsg() {
                if (this.game.killDeathMsg.msgs.length &gt; 0) {

                    if (this.game.killDeathMsg.msgs[0].type === 0) {
                        // show kill
                        this.killDeathMsg.msg = this.loc[&#39;ui_game_youkilled&#39;].format(this.game.killDeathMsg.msgs[0].name)
                        this.killDeathMsg.style = &#39;killed&#39;;
                    } else {
                        // show death
                        this.killDeathMsg.msg = this.loc[&#39;ui_game_killedby&#39;].format(this.game.killDeathMsg.msgs[0].name)
                        this.killDeathMsg.style = &#39;died&#39;;
                    }

                    this.game.killDeathMsg.showing = true;
                    this.game.killDeathMsg.msgs.shift();

                    setTimeout(() =&gt; {
                        this.game.killDeathMsg.showing = false;
                        this.killDeathMsg();
                    }, 4000);

                }
            },
            challengeMsg() {
                const {
                    challengeMsg
                } = this.game;

                if (challengeMsg.msgs.length &gt; 0) {
                    BAWK.play(&#39;challenge_notify&#39;);

                    challengeMsg.icon = &#39;&#39;;
                    challengeMsg.title = &#39;&#39;;

                    // Destructure the first message directly, avoiding repetitive access
                    const {
                        icon,
                        title
                    } = challengeMsg.msgs.shift();
                    challengeMsg.icon = icon;
                    challengeMsg.title = title;
                    challengeMsg.showing = true;

                    // Use an arrow function to maintain the context of `this` naturally
                    setTimeout(() =&gt; {
                        challengeMsg.showing = false;
                        this.challengeMsg(); // Recursive call to process the next message
                    }, 2000);
                }
            },
            ctsCapturedMsg() {
                this.game.ctsMsg.showing = true;
                // if timer is null, set it
                if (this.game.ctsMsg.timer == null) {
                    this.game.ctsMsg.timer = setTimeout(() =&gt; {
                        this.game.ctsMsg.showing = false;
                        this.game.ctsMsg.timer = null;
                    }, 3000);
                } else {
                    // if timer is not null, clear it and set it again
                    clearTimeout(this.game.ctsMsg.timer);
                    this.game.ctsMsg.timer = null;
                    this.ctsCapturedMsg();
                }
            },

            bestStreakUpdate() {
                this.$refs.shellStreakCap.classList.add(&#39;streak-blow-out&#39;);

                if (this.game.streakMsg.timer != null) {
                    clearTimeout(this.game.streakMsg.timer);
                    this.game.streakMsg.timer = null;
                }

                this.game.streakMsg.timer = setTimeout(() =&gt; {
                    this.$refs.shellStreakCap.classList.remove(&#39;streak-blow-out&#39;);
                    this.game.streakMsg.timer = null;
                }, 300);
            },
            ingameNotification() {
                const {
                    ingameNotification
                } = this.game;
                const {
                    item
                } = ingameNotification;

                // Types 0, 1 are for kill/death messages
                // Simplify message setting based on type

                //	HardBoiled: 1,
                // EggBreaker: 2,
                // Restock: 3,
                // OverHeal: 4,
                // MiniEgg: 5,
                // DoubleEggs: 6
                if (item.type === 0 || item.type === 1) {
                    const messages = [&#39;ui_game_youkilled&#39;, &#39;ui_game_killedby&#39;];
                    const styles = [&#39;killed&#39;, &#39;died&#39;];
                    item.msg = this.loc[messages[item.type]].format(item.msg);
                    item.style = styles[item.type];
                } else {
                    if (item.streakType) {
                        // const ksLocs = [&#39;&#39;, &#39;ks_hardboiled&#39;, &#39;ks_egg_breaker&#39;, &#39;ks_restock&#39;, &#39;ks_overheal&#39;, &#39;ks_double_eggs&#39;, &#39;ks_miniegg&#39;];
                        const ksLocs = {
                            [ShellStreak.HardBoiled]: &#39;ks_hardboiled&#39;,
                            [ShellStreak.EggBreaker]: &#39;ks_egg_breaker&#39;,
                            [ShellStreak.Restock]: &#39;ks_restock&#39;,
                            [ShellStreak.OverHeal]: &#39;ks_overheal&#39;,
                            [ShellStreak.DoubleEggs]: &#39;ks_double_eggs&#39;,
                            [ShellStreak.MiniEgg]: &#39;ks_miniegg&#39;
                        };
                        if (ksLocs) {
                            item.msg = this.loc[ksLocs[item.streakType]];
                        } else {
                            return;
                        }
                    }
                }
                // Attempt to show the notification
                this.attemptToShowNotification();

            },

            attemptToShowNotification() {
                const {
                    ingameNotification
                } = this.game;
                const {
                    showing
                } = ingameNotification;

                this.applyNotificationEffects();
                // Set showing to true to start or continue display
                ingameNotification.showing = true;

                // Clear any existing timer and set a new one
                clearTimeout(ingameNotification.timer);

                ingameNotification.timer = setTimeout(() =&gt; {
                    this.clearNotificationEffects();
                    ingameNotification.showing = false;
                }, 3000);
            },

            applyNotificationEffects() {
                this.$refs.killMsg.classList.add(&#39;streak-blow-out&#39;);

                // Clear any previous short-duration effects
                clearTimeout(this.game.ingameNotification.multiTimer);

                this.game.ingameNotification.multiTimer = setTimeout(() =&gt; {
                    this.$refs.killMsg.classList.remove(&#39;streak-blow-out&#39;);
                }, 200);
            },

            clearNotificationEffects() {
                // Remove visual effects
                this.$refs.killMsg.classList.remove(&#39;streak-blow-out&#39;);
                clearTimeout(this.game.ingameNotification.multiTimer);
                this.game.ingameNotification.multiTimer = null;
            },
            showWelcomeBundleCta() {
                this.game.showWelcomeBundleCta = extern.getIsWelcomeBundlePurchased ? false : this.game.showWelcomeBundleCta ? false : true;
            },
            onEmitShowWelcomeBundlePopup() {
                this.$emit(&#39;show-welcome-bundle-popup&#39;);
            }
        },

        computed: {
            isRespawning: function() {
                return this.game.respawnTime &gt; 0;
            },

            isTeamGame: function() {
                // Would be better to use the same enum as the client game code
                return this.game.gameType !== 0;
            },

            teamColorCss: function() {
                return this.game.team === this.ui.team.blue ? &#39;blueTeam btn_red bevel_red&#39; : &#39;redTeam btn_blue bevel_blue&#39;;
            },

            teamName: function() {
                return this.game.team === this.ui.team.blue ? this.loc.p_pause_joinred : this.loc.p_pause_joinblue;
            },

            newTeamColorCss: function() {
                return this.game.team === this.ui.team.blue ? &#39;redTeam btn_red&#39; : &#39;blueTeam btn_blue&#39;;
            },

            newTeamName: function() {
                return this.game.team === this.ui.team.blue ? this.loc.team_red : this.loc.team_blue;
            },

            muteButtonLabel: function() {
                return this.playerActionsPopup.muted ? this.loc.ui_game_playeractions_unmute : this.loc.ui_game_playeractions_mute;
            },
            showIngameWidget() {
                if (!this.game.isPaused &amp;&amp; this.songChanged) {
                    this.songHasChanged();
                    return true;
                }
                return false;
            },
            showMusicWidget() {
                return this.showScreen === 2;
            },
            isEggStoreSaleItem() {
                return this.eggStoreItems.some(item =&gt; item[&#39;salePrice&#39;] !== &#39;&#39; &amp;&amp; this.ui.showCornerButtons);
            },
            upgradeBadgeUrl() {
                return &#39;img/vip-club/vip-club-popup-emblem.webp&#39;;
            },
            playerSocial() {
                return SOCIALMEDIA[this.playerActionsPopup.social.id];
            },
            chwShowVideoIcon() {
                return this.chw.winnerCounter &gt; 0 &amp;&amp; !this.chw.limitReached &amp;&amp; this.chw.ready;
            },
            progressMsg() {
                if (this.chw.adBlockDetect) {
                    return &#39;Please turn off ad blocker&#39;;
                }
                if (this.isChicknWinnerError) {
                    return this.loc.chw_error_text;
                }
                if (this.chw.ready &amp;&amp; !this.chw.limitReached) {
                    return this.chw.winnerCounter &gt; 0 ? this.loc.chw_cooldown_msg : this.loc.chw_ready_msg;
                }
                if (!this.chw.ready &amp;&amp; !this.chw.limitReached) {
                    return this.loc.chw_time_until;
                }
                if (this.chw.limitReached) {
                    return this.loc.chw_daily_limit_msg;
                }
            },
            progressBarWrapClass() {
                if (this.isChicknWinnerError) {
                    return &#39;chw-progress-bar-wrap-error&#39;;
                }

                if (this.chw.ready &amp;&amp; !this.chw.limitReached) {
                    return &#39;chw-progress-bar-wrap-complete&#39;;
                }
            },
            playAdText() {
                return vueApp.getChwPlayAdText();
            },
            chwShowCountdown() {
                if (this.chw.limitReached || this.isChicknWinnerError) {
                    return &#39;hideme&#39;;
                } else {
                    if (this.chw.ready) {
                        return &#39;hideme&#39;;
                    } else {
                        return &#39;display-inline&#39;;
                    }
                }
            },
            chwChickSrc() {
                if (this.chw.limitReached || this.isChicknWinnerError) {
                    return this.chw.imgs.limit;
                } else {
                    if (!this.chw.ready) {
                        return this.chw.imgs.sleep;
                    } else {
                        return this.chw.imgs.speak;
                    }
                }
            },

            playBtnColor() {
                if (!this.delayTheCracking &amp;&amp; !this.isRespawning || this.delayTheCracking &amp;&amp; this.isRespawning) {
                    return &#39;btn_red bevel_red&#39;;
                } else {
                    return &#39;ss_button btn_green bevel_green&#39;;
                }
            },

            playBtnText() {
                if (!this.delayTheCracking &amp;&amp; !this.isRespawning) {
                    return this.loc.ui_game_get_ready;
                } else if (this.delayTheCracking &amp;&amp; this.isRespawning) {
                    if (this.game.respawnTime &gt; 5) {
                        return this.game.respawnTime - 5;
                    } else {
                        return this.game.respawnTime
                    }
                } else {
                    return this.loc.p_pause_play;
                }
            },

            playBtnAdBlockerText() {
                if (this.delayTheCracking &amp;&amp; this.isRespawning &amp;&amp; extern.adBlocker &amp;&amp; this.game.respawnTime &lt;= 5 &amp;&amp; !extern.productBlockAds &amp;&amp; !this.isPoki) {
                    return &#39;Ad block delay!&#39;;
                }
            },
            classGameType() {
                if (this.game.gameType === 0) {
                    return &#39;pause-screen-free-for-all&#39;
                }
            },
            pauseScreenWrapGrid() {
                if (!this.isSubscriber) {
                    return &#39;pause-screen-wrapper-no-vip&#39;;
                } else {
                    return &#39;pause-screen-wrapper-is-vip&#39;
                }
            },
            pauseScreenStateClass() {
                if (this.game.isPaused) {
                    return `is-paused ${this.game.openPopupId}`
                }
            },
            chatEnabled() {
                return this.settingsUi.togglers.misc[this.settingsUi.togglers.misc.findIndex(item =&gt; item.id === &#34;enableChat&#34;)].value
            },
            chwProgress() {
                return this.chw.progress + &#39;%&#39;;
            },
            isReportFilled() {
                return this.reportPlayerPopup.checked.some(checked =&gt; checked === true);
            },
            serverLoc() {
                return this.loc[&#39;server_&#39; + this.currentRegionId];
            },
            spectateControls() {
                let key = this.settingsUi.controls.keyboard.spectate[this.settingsUi.controls.keyboard.spectate.findIndex(item =&gt; item.id === &#34;toggle_freecam&#34;)].value;
                return this.loc[&#39;ui_game_spectate_controls&#39;].format(key);
            },
            canChangeTeams() {
                return !(extern.GameOptions.value.flags &amp; extern.GameFlags.noTeamChange);
            },
            optionsButtonClass() {
                if (this.gameOptionsPopup.usingDefaults) {
                    return &#39;btn_blue bevel_blue&#39;;
                }

                return &#39;btn_yolk bevel_yolk&#39;;
            },
            wakeTheChw() {
                return this.loc.chw_wake.format(200 * (this.chw.resets + 1));
            },
            // eggOrgGameStats() {
            // 	return this.$eggOrgFormatTeamScores(this.game.eggOrg.stats);
            // },

            // eggOrgLeaderboard() {
            // 	return this.$eggOrgFormatTeamScores(this.eggOrg.leaderboard);
            // },

            // factionsAGameScore() {
            // 	return formatLargeNumbers(this.game.eggOrg.stats[0]);
            // },
            // factionsBGameScore() {
            // 	return formatLargeNumbers(this.game.eggOrg.stats[1]);
            // },
        },

        watch: {
            isPokiGameLoad(value) {
                this.pokiTimers(value, this.videoRewardTimers.initial);
                // this.pokiTimers(value, 300);
            },
            isPokiNewRewardTimer(value) {
                this.pokiTimers(value, this.videoRewardTimers.primary);
                // this.pokiTimers(value, 300);
            },
            kname(val) {
                this.killedByMessage = this.loc[&#39;ui_game_killedby&#39;].format(val);
            },
            kdname(val) {
                this.killedMessage = this.loc[&#39;ui_game_youkilled&#39;].format(val);
            },
            announcementMessage(val) {
                if (val) {
                    this.announcementMsg();
                } else {
                    this.announcementMsgReset();
                }
            }
        }
    };
    </script>
    <script id="photoBooth-screen-template" type="text/x-template">
      &lt;div data-html2canvas-ignore&gt;
		&lt;div class=&#34;box_relative margins_lg screens-menu&#34; :class=&#34;{&#39;phb-active-bg&#39; : bgIdx}&#34;&gt;
			&lt;div v-show=&#34;uiActive&#34;&gt;
				&lt;h3 class=&#34;pb-title text-center text_white display-grid grid-auto-flow-column justify-content-center gap-sm text-shadow-black-40&#34;&gt;&lt;img class=&#34;pb-title-img&#34; src=&#34;img/photo-booth/ico_shelfieStars.svg&#34; /&gt;Shellfie&lt;br /&gt; Booth &lt;img class=&#34;pb-title-img pb-title-img-flip&#34;src=&#34;img/photo-booth/ico_shelfieStars.svg&#34; /&gt;&lt;/h3&gt;
				&lt;section id=&#34;photoBooth-map&#34; class=&#34;ss_marginbottom photo-booth-map-section&#34;&gt;
					&lt;ss-button-dropdown class=&#34;btn-1 fullwidth&#34; :loc=&#34;loc&#34; :loc-txt=&#34;mapTxt&#34; :list-items=&#34;bgData&#34; :selected-item=&#34;bgIdx&#34; menuPos=&#34;right&#34; @onListItemClick=&#34;onChangeMap&#34;&gt;&lt;/ss-button-dropdown&gt;
				&lt;/section&gt;
				&lt;section id=&#34;photoBooth-egg-sizes&#34; class=&#34;ss_marginbottom&#34;&gt;
					&lt;ss-button-dropdown class=&#34;btn-1 fullwidth&#34; :loc=&#34;loc&#34; :loc-txt=&#34;eggSizeTxt&#34; :list-items=&#34;egg.sizes&#34; :selected-item=&#34;eggSize&#34; menuPos=&#34;right&#34; @onListItemClick=&#34;onChangeEggSize&#34; :loc-list=&#34;true&#34;&gt;&lt;/ss-button-dropdown&gt;
				&lt;/section&gt;
				&lt;!-- &lt;section id=&#34;photoBooth-vignette&#34; class=&#34;ph-egg-hide pb-vignette-setting btn_big common-box-shadow btn_game_mode bg_blue6 text-left border-blue5 ss_marginbottom display-grid align-items-center&#34;&gt;
					&lt;h3 class=&#34;ss-dropdown-select text_blue3 display-grid grid-column-2-1 fullwidth align-items-center&#34;&gt;{{ loc.screen_photo_booth_vignette }} Vignette&lt;label class=&#34;ss_checkbox label justify-self-end&#34;&gt; &lt;span class=&#34;hideme&#34;&gt;{{ loc.screen_photo_booth_vignette }}&lt;/span&gt; &lt;input type=&#34;checkbox&#34; :checked=&#34;vignette&#34; @change=&#34;onVignetteChange(true)&#34;&gt; &lt;span class=&#34;checkmark&#34;&gt;&lt;/span&gt;&lt;/label&gt;&lt;/h3&gt;
				&lt;/section&gt; --&gt;
				&lt;section id=&#34;photoBooth-egg-hide-item&#34; class=&#34;ph-egg-hide btn_big common-box-shadow btn_game_mode bg_blue6 text-left border-blue5 ss_marginbottom&#34;&gt;
					&lt;h3 class=&#34;ss-dropdown-select text_blue3&#34;&gt;{{ loc.screen_photo_booth_show_hide }}&lt;/h3&gt;
					&lt;div class=&#34;display-grid grid-column-3-eq justify-items-center align-items-center center_h&#34;&gt;
						&lt;button v-for=&#34;(item, idx) in egg.items&#34; :id=&#34;item.id&#34; :key=&#34;item.value&#34; class=&#34;ico_itemtype clickme roundme_sm f_row align-items-center&#34; @click=&#34;hideEggItem(item.value, idx)&#34; :class=&#34;{&#39;selected&#39; : !item.hidden}&#34;&gt;
							&lt;svg&gt;
								&lt;use :xlink:href=&#34;item.icon&#34;&gt;&lt;/use&gt;
							&lt;/svg&gt;
						&lt;/button&gt;
					&lt;/div&gt;
				&lt;/section&gt;
				&lt;section id=&#34;photoBooth-instructions&#34; class=&#34;ph-egg-hide btn_big common-box-shadow btn_game_mode bg_blue6 text-left border-blue5 ss_marginbottom&#34;&gt;
					&lt;h3 class=&#34;ss-dropdown-select text_blue3&#34;&gt;{{ loc.screen_photo_booth_instructions }}&lt;/h3&gt;
					&lt;ul class=&#34;font-nunito text_blue5&#34;&gt;
						&lt;li&gt;&lt;strong&gt;{{ loc.screen_photo_booth_point_one }}&lt;/strong&gt;&lt;/li&gt;
						&lt;li&gt;&lt;strong&gt;{{ loc.screen_photo_booth_point_two }}&lt;/strong&gt;&lt;/li&gt;
					&lt;/ul&gt;
				&lt;/section&gt;
			&lt;/div&gt;
			&lt;div class=&#34;fullwidth ss_marginbottom display-flex&#34;&gt;
				&lt;button class=&#34;ss_button btn_yolk bevel_yolk box_relative fullwidth text-uppercase&#34; @click=&#34;screenGrabStartProcess&#34;&gt;&lt;i class=&#34;fas fa-camera&#34;&gt;&lt;/i&gt; {{ loc.screen_photo_booth_screenshot }}&lt;/button&gt;
			&lt;/div&gt;
			&lt;div ref=&#34;photoBoothDisplayAd&#34; class=&#34;hideme f_col align-items-center&#34;&gt;&lt;/div&gt;
		&lt;/div&gt;
		&lt;small-popup id=&#34;screenshotPopup&#34; ref=&#34;screenshotPopup&#34; @popup-confirm=&#34;screenGabDownload&#34;&gt;
			&lt;template slot=&#34;header&#34;&gt;{{ loc.screen_photo_booth_screenshot2 }}&lt;/template&gt;
			&lt;template slot=&#34;content&#34;&gt;
				&lt;div ref=&#34;grabImage&#34; class=&#34;photo-booth-screen-grab&#34;&gt;&lt;/div&gt;
			&lt;/template&gt;
			&lt;template slot=&#34;cancel&#34;&gt;{{ loc.close }}&lt;/template&gt;
			&lt;template slot=&#34;confirm&#34;&gt;{{ loc.screen_photo_booth_download }}&lt;/template&gt;
		&lt;/small-popup&gt;

	&lt;/div&gt;
    </script>
    <script>
      const CompPhotoboothUi = {
    template: &#39;#photoBooth-screen-template&#39;,
	props: [&#39;loc&#39;, &#39;playerName&#39;, &#39;itemTypeChange&#39;],
	data: function () {
		return {
			eggSize: 0,
			bgIdx: 0,
			uiActive: true,
			showBtn : true,
			screenshotImg: &#39;&#39;,
			// vignette: false,
			// vignetteUpdated: false,
			egg: {
				sizes: [
					{ id: &#39;egg-size-normal&#39;, name: &#39;screen_photo_booth_size_normal&#39;, value: 0 },
					{ id: &#39;egg-size-medium&#39;, name: &#39;screen_photo_booth_size_medium&#39;, value: 1 },
					{ id: &#39;egg-size-large&#39;, name: &#39;screen_photo_booth_size_large&#39;, value: 2 }
				],
				items: [
					{ id: &#39;item-type-3&#39;, name: &#39;Primary&#39;, value: 3,  hidden: false, icon: ItemIcons.Primary},
					{ id: &#39;item-type-4&#39;, name: &#39;Secondary&#39;, value: 4,  hidden: false, icon: ItemIcons.Secondary},
					{ id: &#39;item-type-1&#39;, name: &#39;Hat&#39;, value: 1, hidden: false, icon: ItemIcons.Hat},
					{ id: &#39;item-type-2&#39;, name: &#39;Stamp&#39;, value: 2,  hidden: false, icon: ItemIcons.Stamp},
					{ id: &#39;item-type-6&#39;, name: &#39;Grenade&#39;, value: 6, hidden: false, icon: ItemIcons.Grenade},
					{ id: &#39;item-type-7&#39;, name: &#39;Melee&#39;, value: 7,  hidden: false, icon: ItemIcons.Melee}
				],
			},
			background: {
				map: {
					names: [&#39;none&#39;, &#39;aqueduct&#39;, &#39;chickenitzaeggsmas&#39;, &#39;backstage&#39;, &#39;backstageeggsmas&#39;, &#39;bedrock&#39;, &#39;castle&#39;, &#39;castletwo&#39;, &#39;catacombs&#39;, &#39;dirt&#39;, &#39;downfall&#39;, &#39;enchanted&#39;, &#39;exposure&#39;, &#39;jinx&#39;, &#39;mansion&#39;, &#39;outerreacheggsmas&#39;, &#39;quarters&#39;, &#39;raceway&#39;, &#39;rats2&#39;, &#39;scales&#39;, &#39;skyscratcher&#39;, &#39;spacefactory&#39;, &#39;teggtris&#39;, &#39;timetwist&#39;, &#39;twotowers&#39;, &#39;wimble&#39;, &#39;quarry&#39;],
				},
				color: {
					none: &#39;&#39;,
					colorRed: &#39;bg_red&#39;,
					colorBlue: &#39;bg_blue3&#39;,
					colorGreen: &#39;bg_green&#39;,
				}
			},
		}
    },
    methods: {
		onChangeEggSize(size) {
			if (size === this.eggSize) return;
			this.eggSize = size;
			extern.photoBooth.eggDollSize(this.eggSize);
			BAWK.play(&#39;ui_click&#39;);
		},
		onChangeMap(idx) {
			if (idx === this.bgIdx) return;
			this.bgIdx = idx;
			if (this.bgData[this.bgIdx].bgColor) {
				this.$emit(&#39;bg-change-image&#39;, this.bgData[0].url);
				this.$emit(&#39;bg-change-color&#39;, this.background.color[this.bgData[this.bgIdx].url]);
			} else {
				this.$emit(&#39;bg-change-color&#39;, this.background.color.none);
				this.$emit(&#39;bg-change-image&#39;, this.bgData[this.bgIdx].url);
			}
			BAWK.play(&#39;ui_click&#39;);
		},
		hideEggItem(item, idx, hideAudio) {

			if (this.egg.items[idx].hidden) {
				this.egg.items[idx].hidden = false;
				this.$nextTick().then(()=&gt; {
					vueApp.$refs.equipScreen.switchItemType(this.egg.items[idx].value);
				})

			} else {
				this.egg.items[idx].hidden = true;
			}

			extern.photoBooth.hideItem(this.egg.items[idx]);
			if (!hideAudio || hideAudio === undefined) {
				BAWK.play(&#39;ui_click&#39;);
			}
		},
		onShowOuterUi() {
			this.showOuterUi(this.uiActive ? false : true);
			BAWK.play(&#39;ui_click&#39;);
		},
		showOuterUi(val) {
			this.uiActive = val;
			this.$emit(&#39;hide-ui&#39;, this.uiActive);
		},
		open() {
			// this.onVignetteChange();
			// randomize background
			this.onChangeMap(Math.floor(Math.random()*this.background.map.names.length));
		},
		close() {
			// this.vignette = false;
			this.eggSize = 0;
			this.bgIdx = 0;
			this.uiActive = true;
			this.showBtn = true;
			this.screenshotLoaded = false;
			this.egg.items.forEach((el, idx) =&gt; this.egg.items[idx].hidden = false);
			// this.updateVignette(this.vignette);
			this.$emit(&#39;bg-change-image&#39;, this.background.map.names[this.bgIdx].url);
			this.$emit(&#39;bg-change-color&#39;, this.background.color.none);
		},
		screenGrabStartProcess() {
			BAWK.play(&#39;ui_click&#39;);
			// if (!this.bgIdx) {
			// 	this.updateVignette(false);
			// 	this.vignetteUpdated = true;
			// }
			extern.photoBooth.getScreenshot(!this.bgIdx);

			// this.$nextTick().then(() =&gt; {
			// 	extern.photoBooth.getScreenshot(!this.bgIdx);
			// });
		},
		screenGrabDone(canvas) {
			if (!hasValue(canvas)) {
				this.showOuterUi(true);
				return;
			}

			// if (this.vignetteUpdated) {
			// 	this.updateVignette(true);
			// 	this.vignetteUpdated = false;
			// }
		
			if (this.screenshotImg) {
				if (this.$refs.grabImage.hasChildNodes()) {
					this.$refs.grabImage.removeChild(this.$refs.grabImage.children[0]);
					this.screenshotImg = null;
				}
			}
			this.screenshotImg = new Image();
			this.screenshotImg.src = canvas;
			// this.$refs.grabCanvas.appendChild(canvas);
			this.$refs.grabImage.appendChild(this.screenshotImg);
			this.showOuterUi(true);

			// extern.photoBooth.screenGrab(false, this.$refs.screenshotPopup.show());
			this.$refs.screenshotPopup.show()
			this.gaSendStuff();

		},
		gaSendStuff() {
			let items = extern.getEquippedItems();
			Object.keys(items).forEach((key) =&gt; {
				let idx = this.egg.items.findIndex(el =&gt; el.value === Number(key));
				ga(&#39;send&#39;, &#39;event&#39;, &#39;photo-booth&#39;, getKeyByValue(ItemType, Number(key)), !hasValue(items[key]) || this.egg.items[idx].hidden ? &#39;hidden&#39; : `${items[key].name}` );
			});
			ga(&#39;send&#39;, &#39;event&#39;, &#39;photo-booth&#39;, &#39;background&#39;, this.bgData[this.bgIdx].url);
		},
		screenGrabStart() {
			extern.photoBooth.screenGrabRequested = true;
			extern.photoBooth.screenGrab();
		},
		screenGabDownload() {
			if (this.screenshotImg) {
				this.screenshotImg.crossOrigin = &#39;anonymous&#39;;
				const link = document.createElement(&#39;a&#39;);
				link.download = `Shellshock-io-${this.playerName}.png`;

				link.href = this.screenshotImg.src;
				link.click();
				ga(&#39;send&#39;, &#39;event&#39;, &#39;photo-booth&#39;, &#39;click&#39;, &#39;download&#39;);

			}
		},
		updateTypeVisibility(val) {
			let idx = this.egg.items.findIndex(el =&gt; el.value === val);
			if (this.egg.items[idx].hidden) this.egg.items[idx].hidden = false;
		},
    },
	computed: {
		eggSizeTxt() {
			return {
				title: this.loc.screen_photo_booth_size_title,
				subTitle: this.loc[this.egg.sizes[this.eggSize].name],
			}
		},
		mapTxt() {
			return {
				title: this.loc.screen_photo_booth_background,
				subTitle: this.bgData[this.bgIdx].name,
			}
		},
		uiTxt() {
			return this.uiActive ? this.loc.screen_photo_booth_hide_ui : this.loc.screen_photo_booth_show_ui;
		},
		bgData() {
			const maps = [];
			this.background.map.names.forEach((el, idx) =&gt; maps.push({ name: this.loc[`screen_photo_booth_map_${el}`], value: idx, url: el, bgColor: el.includes(&#39;color&#39;) ? true : false}));
			return maps;
		}
	},
	watch: {

	}
};
    </script>
    <script id="vip-club-template" type="text/x-template">
      &lt;div class=&#34;vip-club centered&#34;&gt;
		&lt;img v-lazyload :data-src=&#34;ui.lazyImages.vipPopupBg&#34; class=&#34;lazy-load vip-club-background centered&#34; alt=&#34;VIP background image&#34;&gt;
        &lt;div class=&#34;vip-club-log-content--outer roundme_sm display-grid grid-column-1-2 grid-gap-space-lg box_relative&#34;&gt;
			&lt;header class=&#34;grid-span-2-start-1&#34;&gt;
				&lt;!-- &lt;h2&gt;&lt;span class=&#34;text-orange&#34;&gt;V&lt;/span&gt;ery &lt;span class=&#34;text-orange&#34;&gt;I&lt;/span&gt;mportant &lt;span class=&#34;text-orange&#34;&gt;P&lt;/span&gt;oultry&lt;/h2&gt; --&gt;
				&lt;span class=&#34;sr-only&#34;&gt;Very Important Poultry&lt;/span&gt;
				&lt;img v-lazyload :data-src=&#34;ui.lazyImages.vipImportant&#34; class=&#34;lazy-load vip-club-water-mark display-block center_h&#34; alt=&#34;Very Important Poultry text image&#34;&gt;

			&lt;/header&gt;
            &lt;div class=&#34;vip-club--logo display-grid align-content-space-between&#34;&gt;
				&lt;img v-lazyload :data-src=&#34;ui.lazyImages.vipEmblem&#34; class=&#34;lazy-load center_h&#34; alt=&#34;Shell Shockers VIP&#34;&gt;
				&lt;button v-on:click=&#34;openVipPopup&#34; class=&#34;display-block ss_button btn_sm bevel_blue btn_blue center_h&#34;&gt;{{loc.faq}}&lt;/button&gt;
            &lt;/div&gt;
            &lt;div class=&#34;vip-club--content&#34;&gt;
                &lt;div class=&#34;subs-info&#34;&gt;
                    &lt;ul class=&#34;display-grid align-content-space-between&#34;&gt;
                        &lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt;{{loc.p_chicken_goldfeature1}}&lt;/li&gt;
                        &lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt; &lt;span v-html=&#34;loc.p_chicken_goldfeature3&#34;&gt;&lt;/span&gt;&lt;/li&gt;
                        &lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt;&lt;span v-html=&#34;eggsPerKill&#34;&gt;&lt;/span&gt;&lt;/li&gt;
                        &lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt; {{loc.s_popup_feature_premium_items}}&lt;/li&gt;
						&lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt; {{loc.s_popup_feature_premium_stamp_pos}}&lt;/li&gt;
						&lt;li class=&#34;display-grid align-items-start&#34;&gt;&lt;img class=&#34;vip-club-star&#34; src=&#34;img/vip-club/vip-club-popup-bullet-point-star.webp&#34; alt=&#34;star-list-img&#34;&gt; {{loc.s_popup_and_more}}&lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
		&lt;h3 class=&#34;box_relative text-center text_white ss_margintop_micro ss_marginbottom_micro text-shadow-black-40 z-index-1&#34;&gt;{{ membershipTxt }}&lt;/h3&gt;
        &lt;div class=&#34;subscription-plans box_relative&#34; :class=&#34;subStyle&#34;&gt;
            &lt;div class=&#34;vip-club-items--outer display-grid&#34; :class=&#34;[hasPlan ? &#39;grid-column-1-eq justify-items-center&#39; : &#39;grid-column-3-eq&#39;]&#34;&gt;
                &lt;sub-item v-for=&#34;(sub, idx) in getSubs&#34; :key=&#34;idx&#34; :item=&#34;sub&#34; :loc=&#34;loc&#34; :upgrade-name=&#34;upgradeName&#34; :is-subscriber=&#34;isSubscriber&#34; :is-upgraded=&#34;isUpgraded&#34; :account-set=&#34;accountSettled&#34;&gt;&lt;/sub-item&gt;
            &lt;/div&gt;
            &lt;div v-if=&#34;hasPlan&#34; class=&#34;manage-subscription-wrapper&#34;&gt;
                &lt;div v-if=&#34;hasPlan&#34; class=&#34;plan-details text-center vip-club-log-content--outer roundme_sm&#34;&gt;
                    &lt;h5&gt;{{subsRenewalStateTxt}}:&lt;/h5&gt;
                        &lt;p v-if=&#34;expireDate&#34; class=&#34;plan-expiry&#34;&gt;{{ expireDate }}&lt;/p&gt;
                        &lt;p class=&#34;manage-details&#34; v-if=&#34;!hasActivePass&#34; v-html=&#34;manageInfo&#34;&gt;&lt;/p&gt;
                    	&lt;button v-if=&#34;!hasActivePass&#34; class=&#34;display-block ss_button btn_sm bevel_blue btn_blue center_h&#34; v-on:click=&#34;onManageClick&#34;&gt;{{loc.sManageBtn}}&lt;/button&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
		&lt;img v-lazyload :data-src=&#34;ui.lazyImages.vipPayment&#34; class=&#34;lazy-load payment-options display-block center_h box_relative ss_margintop_micro&#34; alt=&#34;Payment options: Visa, Mastercard PayPay, Amazon Pay, Google Pay&#34;&gt;
		&lt;p class=&#34;ss_margintop_micro box_relative text-center font-size-lg font-800&#34;&gt;{{loc.s_popup_and_more}}&lt;/p&gt;

    &lt;/div&gt;
	&lt;!-- end .vip-club --&gt;
    </script>
    <template id="comp-sub-item">
      <div v-if="isActive" class="vip-item text-center box_relative center_h" :class="vipStyle">
        <div class="vip-item--inner centered">
          <div class="subscription-details">
            <header>
              <h3 class="text_white">
                {{loc[name]}}
              </h3>
            </header>
            <p class="price-tag roundme_sm" v-html="priceTag">
            </p>
            <p class="value nospace font-size-md">
              {{valueTxt}}
            </p>
            <button v-if="!hasSub" class="ss_button btn_sm btn_blue bevel_blue" v-on:click="subClick">
              {{loc[buyBtnText]}}
            </button>
          </div>
        </div>
        <div v-if="flagText" class="vip-banner" :class="flagText">
          <span>          {{loc[flagText]}}
</span>
        </div>
        <img v-lazyload="" :data-src="img" class="lazy-load" aria-hidden="true" />
      </div>
    </template>
    <script>
      const comp_sub_item = {
        template: &#39;#comp-sub-item&#39;,
        props: [&#39;loc&#39;, &#39;item&#39;, &#39;upgradeName&#39;, &#39;isUpgraded&#39;, &#39;isSubscriber&#39;],
        data() {
            return {
                isCurrentSub: false,
                hasSub: false,
                hasUpgrade: false,
                locName: &#39;&#39;,
				numberWords: {
					&#39;1&#39;: &#39;one&#39;,
					&#39;12&#39;: &#39;twelve&#39;,
					&#39;3&#39;: &#39;three&#39;,
				}
            };
        },
        methods: {
            subClick() {

                if (this.$parent.$el.id === &#39;shell-subscriptions&#39;) {
                    this.$parent.$parent.hide();
                } else {
                    this.$parent.hide();
                }

                BAWK.play(&#39;ui_click&#39;);

                if (this.hasSub) {
                    extern.buyProductForMoney();
                } else {
                    extern.buyProductForMoney(this.item.sku, true);
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;subscriptions&#39;, &#39;click&#39;, this.locName);
                }
            }
        },
        computed: {
            nameLowerCaseHyphens() {
                this.locName =  this.item.name.replace(&#39; &#39;, &#39;-&#39;).toLowerCase().replace(&#39; &#39;, &#39;-&#39;);
                return this.locName;
            },
			vipStyle() {
				return this.nameLowerCaseHyphens.replace(/\d/g, match =&gt; this.numberWords[match]);
			},
            name() {
                return `s-${this.locName}-title`;
            },
            img() {
                return `img/vip-club/vip-club-popup-item-${this.locName}-bg.webp`;
            },
            priceTag() {
                let price = this.item.salePrice ? this.item.salePrice : this.item.price,
                    priceWcents = `${(price / 100).toFixed(2)}`,
                    thePrice = priceWcents.split(&#39;.&#39;);
                return `$${thePrice[0]}&lt;span class=&#34;price-tag--cents&#34;&gt;.${thePrice[1]}&lt;/span&gt;`;
            },
            buyBtnText() {
                if (this.isCurrentSub &amp;&amp; this.hasUpgrade) {
                    return &#39;sManageBtn&#39;;
                }
                return &#39;s_btn_txt_subscribe&#39;;
            },
            isActive() {
                if (this.isCurrentSub &amp;&amp; this.hasUpgrade) {
                    return true
                } else if (this.hasSub &amp;&amp; this.hasUpgrade) {
                    return false
                } else {
                    return true
                };
            },
            flagText() {
                if (this.isCurrentSub &amp;&amp; this.hasUpgrade) return &#39;p_egg_shop_purchased&#39;;
                return this.item.flagText;
            },
			valueTxt() {
				const amt = {
					25: 10,
					26: 30,
					27: 120,
				}

				return this.loc[&#39;s-membership-value&#39;].format(amt[this.item.id]);
			}
        },
        watch: {
            upgradeName(val) {
                
            },
            isUpgraded(val) {
                this.hasUpgrade = val;
                this.hasSub = this.isSubscriber &amp;&amp; this.hasUpgrade;
                this.isCurrentSub = this.upgradeName === this.item.name &amp;&amp; this.hasUpgrade;
            }
        }
    };
    </script>
    <script>
      var compVipClubTemplate = {
    template: &#39;#vip-club-template&#39;,
    components: {
        &#39;sub-item&#39;: comp_sub_item,
    },
    data() {
        return vueData;
    },
    props: [&#39;subs&#39;],
    
    methods: {
        onManageClick() {
            if (this.$parent.$el.id === &#39;shell-subscriptions&#39;) {
                this.$parent.$parent.hide();
            } else {
                this.$parent.hide();
            }
            extern.buyProductForMoney();
        },
        openVipPopup() {
            if (this.$parent.$el.id === &#39;shell-subscriptions&#39;) {
                this.$parent.$parent.hide();
            } else {
                this.$parent.hide();
            }
            BAWK.play(&#39;ui_click&#39;);
            vueApp.showVipPopup();
        }
    },
    computed: {
        hasPlan() {
            return this.isSubscriber &amp;&amp; this.isUpgraded;
        },
        expireDate() {
            if (this.hasPlan) {
                return new Date(extern.account.upgradeExpiryDate).toUTCString();
            }
            return;
        },
        planName() {
            if (this.hasPlan) {
                return &#39;s-&#39; + this.upgradeName.replace(&#39; &#39;, &#39;-&#39;).toLowerCase().replace(&#39; &#39;, &#39;-&#39;) + &#39;-title&#39;;
            }
            return;
        },
        manageInfo() {
            return this.loc.sManageInfo;
        },
		membershipTxt() {
			return this.hasPlan ? this.hasActivePass ? &#39;Pass&#39; : &#39;Membership&#39; : &#39;Membership Options&#39;;
		},
		subStyle() {
			return this.hasPlan ? this.hasActivePass ? &#39;display-grid vip-club-has-plan&#39; : &#39;display-grid grid-column-1-2 vip-club-has-plan&#39; : &#39;&#39;;
		},

		eggsPerKill() {
			return this.loc.p_chicken_goldfeature2.format(&#39;&lt;img src=&#34;img/svg/ico_goldenEgg.svg&#34; /&gt;&#39;);
		},
		hasActivePass() {
			if (!this.subs) return false;
			return this.hasPlan &amp;&amp; !this.subs.find(i =&gt; i.id === extern.account.upgradeProductId);
		},
		getSubs() {
			if (this.hasPlan) {
				if (this.subs &amp;&amp; this.subs.length &gt; 0) {
					return this.subs.filter(i =&gt; i.id === extern.account.upgradeProductId);
				}
			} else {
				return this.subs;
			}
		},
		subsRenewalStateTxt() {
			return this.hasActivePass ? this.loc.sRenewalExpires : this.loc.sRenewalDate;
		}
    }
};
    </script>
    <script id="give-stuff-popup" type="text/x-template">
      &lt;!-- Popup: Give Stuff --&gt;
   &lt;!-- &lt;large-popup id=&#34;giveStuffPopup&#34; ref=&#34;giveStuffPopup&#34; :popup-model=&#34;giveStuffPopup&#34; @popup-closed=&#34;onSharedPopupClosed&#34; :class=&#34;giveStuffPopup.type&#34;&gt; --&gt;
   &lt;large-popup id=&#34;giveStuffPopup&#34; ref=&#34;giveStuffPopup&#34; :popup-model=&#34;giveStuffPopup&#34; :class=&#34;giveStuffPopup.type&#34; @popup-closed=&#34;onGiveStuffPopupClosed&#34;&gt;
        &lt;template slot=&#34;content&#34;&gt;
			&lt;div id=&#34;giveStuffPopup-content&#34; class=&#34;giveStuffPopup-content&#34; :class=&#34;{&#39;fullwidth&#39; : giveStuffPopup.type === &#39;twitchDrops&#39;}&#34;&gt;
				&lt;div v-if=&#34;giveStuffPopup.type === &#39;vip&#39;&#34; id=&#34;give-stuff-icon&#34; class=&#34;give-stuff-icon&#34;&gt;
					&lt;img v-lazyload :data-src=&#34;imgs.vipEmblem&#34; class=&#34;lazy-load&#34; alt=&#34;Shell Shockers VIP&#34;&gt;
				&lt;/div&gt;

				&lt;h3 v-if=&#34;giveStuffPopup.type !== &#39;twitchDrops&#39;&#34; :class=&#34;{&#39;popup-title-vip&#39; : giveStuffPopup.type === &#39;vip&#39;}&#34; id=&#34;popup_title&#34; class=&#34;roundme_sm text-center text_white&#34; v-html=&#34;popupTitle&#34;&gt;
				&lt;/h3&gt;

				&lt;h2 v-if=&#34;giveStuffPopup.type === &#39;twitchDrops&#39;&#34; id=&#34;popup_title&#34; class=&#34;roundme_sm text-center title-shadow text-twitch-yellow&#34;&gt;
					{{ loc[giveStuffPopup.titleLoc] }}
				&lt;/h2&gt;

				&lt;p v-if=&#34;giveStuffPopup.type === &#39;twitchDrops&#39;&#34; class=&#34;text-center&#34;&gt;{{ loc.give_stuff_twitch_sub_desc }}&lt;/p&gt;
				&lt;div v-show=&#34;(giveStuffPopup.eggs)&#34; class=&#34;f_row&#34;&gt;
					&lt;div class=&#34;egg-give-stuff&#34;&gt;
						&lt;img v-lazyload :data-src=&#34;imgs.eggPackSm&#34; class=&#34;lazy-load&#34; /&gt;
						&lt;h2&gt;+ &lt;img v-lazyload :data-src=&#34;imgs.goldenEgg&#34; class=&#34;lazy-load vertical-align-middle width_1&#34; /&gt;{{giveStuffPopup.eggs}}&lt;/h2&gt;
					&lt;/div&gt;
				&lt;/div&gt;
				&lt;div v-show=&#34;giveStuffPopup.rickroll&#34; class=&#34;f_row&#34;&gt;
					&lt;img v-lazyload :data-src=&#34;imgs.rickRoll&#34; class=&#34;lazy-load&#34; style=&#34;margin-bottom: 1em; height: 25em;&#34; alt=&#34;Rick Roll!&#34; /&gt;

				&lt;/div&gt;
				&lt;div v-show=&#34;giveStuffPopup.eggOrg&#34; class=&#34;f_row&#34;&gt;
					&lt;img v-lazyload :data-src=&#34;imgs.eggOrgGiveStuff&#34; class=&#34;lazy-load&#34; style=&#34;margin-bottom: 1em;&#34; alt=&#34;Egg Org&#34; /&gt;

				&lt;/div&gt;
				&lt;div v-show=&#34;(giveStuffPopup.items &amp;&amp; giveStuffPopup.items.length &gt; 0)&#34; class=&#34;items-container f_row gap-1 &#34; :class=&#34;{&#39;popup-items-vip&#39; : giveStuffPopup.type === &#39;vip&#39;}&#34;&gt;
					&lt;item v-for=&#34;i in giveStuffPopup.items&#34; :loc=&#34;loc&#34; :item=&#34;i&#34; :key=&#34;i.id&#34; :isSelected=&#34;false&#34; :show-item-only=&#34;true&#34;&gt;&lt;/item&gt;
				&lt;/div&gt;
				&lt;p v-if=&#34;giveStuffPopup.type === &#39;twitchDrops&#39;&#34;&gt;&lt;/p&gt;
			&lt;/div&gt;
            &lt;footer :class=&#34;{&#39;text-center&#39; : giveStuffPopup.type === &#39;twitchDrops&#39;}&#34;&gt;
				&lt;!-- &lt;p v-if=&#34;giveStuffPopup.type === &#39;twitchDrops&#39;&#34; class=&#34;text-center&#34;&gt;{{ loc.give_stuff_twitch_footer_desc }}&lt;/p&gt; --&gt;
                &lt;button class=&#34;ss_button width_xs text-center&#34; :class=&#34;giveStuffPopup.type === &#39;twitchDrops&#39; ? &#39;twitch-btn twitch-btn-purple&#39; : &#39;btn_green bevel_green&#39;&#34; @click=&#34;onGiveStuffComplete&#34;&gt;{{ loc.ok }}&lt;/button&gt;
				&lt;button v-if=&#34;giveStuffPopup.type === &#39;twitchDrops&#39;&#34;class=&#34;ss_button twitch-btn twitch-btn-pink width_xs text-center&#34; @click=&#34;onClickTwitchDropsMore&#34;&gt;{{ loc.eq_buy_stuff }}&lt;/button&gt;
            &lt;/footer&gt;

        &lt;/template&gt;
        &lt;template slot=&#34;confirm&#34;&gt;{{ confirmBtnTxt }}&lt;/template&gt;
    &lt;/large-popup&gt;
    </script>
    <script>
      const GIVESTUFFPOPUP = {
	template: &#39;#give-stuff-popup&#39;,
	components: {
		&#39;item&#39;: comp_item,
	},
	props: [&#39;loc&#39;, &#39;giveStuffPopup&#39;, &#39;imgs&#39;],

	data: function () {
		return {
			languageCode: this.selectedLanguageCode,
			eggBalance: 0,
			vueData,
			isAbTest: false
		}
	},
	methods: {
		onGiveStuffComplete: function () {
			this.giveStuffPopup.eggOrg = false;
			this.giveStuffPopup.rickroll = false;
			vueApp.onGiveStuffComplete();
        },
		onClickTwitchDropsMore() {
			window.open(dynamicContentPrefix + &#39;twitch&#39;);
			this.onGiveStuffComplete();
		},
		onGiveStuffPopupClosed() {
			vueApp.onGiveStuffPopupClosed();
		}
	},
	computed: {
		popupTitle() {
			if (this.abTest) {
				switch (this.isAbTest) {
					case &#39;a&#39;:
						return this.loc.play_now;
						break;
					case &#39;b&#39;:
						return this.loc.play_now;
						
						break;
					case &#39;c&#39;:
						return this.loc.play_now;
						break;
					default:
						return this.loc.confirm;
						break;
				}
			} else {
				if (this.giveStuffPopup.type) {
					return this.loc[this.giveStuffPopup.titleLoc];
				} else {
					return this.loc.reward_title;
				}
			}
		},
		
		confirmBtnTxt() {
			switch (this.isAbTest) {
				case &#39;a&#39;:
					return this.loc.play_now;
					break;
				case &#39;b&#39;:
					return this.loc.play_now;
					
					break;
				case &#39;c&#39;:
					return this.loc.play_now;
					break;
				default:
					return this.loc.confirm;
					break;
			}
		}
	}
};
    </script>
    <script id="game-options-popup" type="text/x-template">
      &lt;!-- Popup: Private Game Options --&gt;
    &lt;large-popup id=&#34;gameOptionsPopup&#34; ref=&#34;gameOptionsPopup&#34; :popup-model=&#34;gameOptionsPopup&#34; @popup-x=&#34;onCancel&#34;&gt;
        &lt;template slot=&#34;content&#34;&gt;
			&lt;h1 class=&#34;text_white margin-0&#34;&gt;{{ loc.game_options_title }}&lt;/h1&gt;
			&lt;b style=&#34;margin-block: 0.5em&#34;&gt;{{ loc.p_sharelink_text }}&lt;/b&gt;

			&lt;div class=&#34;nowrap&#34;&gt;
				&lt;i :class=&#34;icon.invite&#34; style=&#34;size: 1em; zoom: 1.5; color: var(--ss-blue5)&#34;&gt;&lt;/i&gt;
				&lt;h1 style=&#34;color: var(--ss-gold)&#34; class=&#34;display-inline ss_marginleft ss_marginright&#34;&gt;{{ game.shareLinkPopup.code }}&lt;/h1&gt;
				&lt;button class=&#34;ss_button btn_blue bevel_blue btn_md&#34; @click=&#34;onShareLinkCopy&#34;&gt;{{ loc.game_options_copyShareLink }}&lt;/button&gt;
			&lt;/div&gt;

			&lt;section class=&#34;ss_section&#34; style=&#34;width: 40em;&#34;&gt;
				&lt;div class=&#34;f_center f_row&#34;&gt;
					&lt;h3 class=&#34;text_darkblue margin-0&#34;&gt;{{ loc.game_options_serverSettings }}&lt;/h3&gt;
				&lt;/div&gt;
				&lt;div class=&#34;f_center f_row&#34;&gt;
                    &lt;div class=&#34;f_col ss_marginright_lg&#34;&gt;
						&lt;div v-for=&#34;t in gameOptionsPopup.togglers&#34; class=&#34;nowrap&#34;&gt;
							&lt;label class=&#34;ss_checkbox label&#34;&gt;{{ loc[t.locKey] }}
								&lt;input :disabled=&#34;!extern.isGameOwner&#34; :id=&#34;t.id&#34; type=&#34;checkbox&#34; v-model=&#34;t.value&#34; @input=&#34;checkboxChange&#34;&gt;
								&lt;span class=&#34;checkmark ss_marginbottom_lg&#34;&gt;&lt;/span&gt;
							&lt;/label&gt;
						&lt;/div&gt;
					&lt;/div&gt;

					&lt;div class=&#34;f_col&#34;&gt;
						&lt;div v-for=&#34;t in gameOptionsPopup.adjusters&#34; class=&#34;nowrap&#34;&gt;
							&lt;settings-adjuster :disabled=&#34;!extern.isGameOwner&#34; small-header=&#34;true&#34; :loc=&#34;loc&#34; :loc-key=&#34;t.locKey&#34; :control-id=&#34;t.id&#34; :control-value=&#34;t.value&#34; :min=&#34;t.min&#34; :max=&#34;t.max&#34; :step=&#34;t.step&#34; :precision=&#34;t.precision&#34; :multiplier=&#34;t.multiplier&#34; labelSuffix=&#34;x&#34; @setting-adjusted=&#34;onSettingAdjusted&#34;&gt;&lt;/settings-adjuster&gt;
						&lt;/div&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/section&gt;
			&lt;section class=&#34;ss_section&#34; style=&#34;width: 40em;&#34;&gt;
				&lt;div class=&#34;f_center f_row&#34;&gt;
					&lt;h3 class=&#34;text_darkblue margin-0&#34;&gt;{{ loc.game_options_weaponsHeader }}&lt;/h3&gt;
				&lt;/div&gt;
				&lt;weapon-select-panel id=&#34;weapon_select&#34; :loc=&#34;loc&#34; :disabler=&#34;true&#34; :hide-desc=&#34;true&#34; :account-settled=&#34;accountSettled&#34; :play-clicked=&#34;false&#34; :current-class=&#34;classIdx&#34; @weapon-toggled=&#34;toggleWeaponClass&#34; :current-screen=&#34;showScreen&#34; :screens=&#34;screens&#34;&gt;&lt;/weapon-select-panel&gt;
			&lt;/section&gt;
			&lt;div class=&#34;ss_button_row&#34;&gt;
				&lt;button v-if=&#34;extern.isGameOwner&#34; class=&#34;ss_button btn_red bevel_red btn_md&#34; :disabled=&#34;gameOptionsPopup.resetClicked&#34; @click=&#34;resetGame&#34;&gt;{{ loc.game_options_reset_button }}&lt;/button&gt;
				&lt;button v-if=&#34;extern.isGameOwner&#34; class=&#34;ss_button btn_yolk bevel_yolk btn_md&#34; @click=&#34;onDefaults&#34;&gt;{{ loc.game_options_defaults_button }}&lt;/button&gt;
				&lt;button v-if=&#34;extern.isGameOwner&#34; class=&#34;ss_button btn_green bevel_green btn_lg&#34; @click=&#34;onApply&#34;&gt;{{ loc.game_options_apply_button }}&lt;/button&gt;
				&lt;button v-if=&#34;!extern.isGameOwner&#34; class=&#34;ss_button btn_green bevel_green btn_lg&#34; @click=&#34;onOkClicked&#34;&gt;{{ loc.ok }}&lt;/button&gt;
			&lt;/div&gt;
        &lt;/template&gt;
    &lt;/large-popup&gt;
    </script>
    <script>
      var comp_game_options_popup = {
    template: &#39;#game-options-popup&#39;,
	components: {
		&#39;settings-adjuster&#39;: comp_settings_adjuster,
		&#39;weapon-select-panel&#39;: comp_weapon_select_panel,
		//&#39;settings-toggler&#39;: comp_settings_toggler
	},
	data: function () {
		return vueData;
    },
    methods: {
		onShareLinkCopy () {
            extern.copyFriendCode(this.game.shareLinkPopup.url);
        },
		onDefaults () {
			this.gameOptionsPopup.options = deepClone(extern.GameOptions.getDefaults());
			this.gameOptionsPopup.changesMade = true;
			this.init();
			BAWK.play(&#39;ui_onchange&#39;);
		},
		onShow () {
			this.gameOptionsPopup.resetClicked = false;
			this.gameOptionsPopup.options = deepClone(extern.GameOptions.value);
			this.init();
			BAWK.play(&#39;ui_popupopen&#39;);
		},
		onApply () {

			if (this.gameOptionsPopup.changesMade) {
				this.gameOptionsPopup.options.flags = 0;

				this.gameOptionsPopup.togglers.forEach(t =&gt; {
					if (t.value === true) {
						this.gameOptionsPopup.options.flags |= extern.GameFlags[t.id];
					}
				});

				this.gameOptionsPopup.adjusters.forEach(t =&gt; {
					this.gameOptionsPopup.options[t.id] = parseFloat(t.value);
				});

				extern.GameOptions.value = deepClone(this.gameOptionsPopup.options);
				this.gameOptionsPopup.usingDefaults = extern.GameOptions.usingDefaults();
				
				if (extern.inGame) {
					extern.sendGameOptions();
					extern.sendGameOptionsMetrics();
				}
				vueData.selectedWeaponDisabled = extern.GameOptions.isSelectedWeaponDisabled(this.classIdx);
			}

			this.close();
			BAWK.play(&#39;ui_playconfirm&#39;);
		},
		onCancel () {
			this.gameOptionsPopup.options = deepClone(extern.GameOptions.value);
			this.close();
			BAWK.play(&#39;ui_popupclose&#39;);
		},
		onOkClicked () {
			this.close();
			BAWK.play(&#39;ui_popupclose&#39;);
		},
		onSettingAdjusted (id, value) {
			var adjuster = this.gameOptionsPopup.adjusters.find( (a) =&gt; { return a.id === id; });
			if (adjuster) {
				adjuster.value = value;
				this.gameOptionsPopup.changesMade = true;
			}
		},
		toggleWeaponClass (classIdx) {
			this.gameOptionsPopup.changesMade = true;
			this.gameOptionsPopup.options.weaponDisabled[classIdx] = !this.gameOptionsPopup.options.weaponDisabled[classIdx];
		},
		checkboxChange (e) {
			this.gameOptionsPopup.changesMade = true;
		},
		init () {
			this.gameOptionsPopup.togglers.forEach(t =&gt; {
				t.value = this.gameOptionsPopup.options.flags &amp; extern.GameFlags[t.id] ? true : false;
			});

			this.gameOptionsPopup.adjusters.forEach(a =&gt; {
				a.value = this.gameOptionsPopup.options[a.id];
			});
		},
		close () {
			this.$refs.gameOptionsPopup.close();
			vueApp.onGameOptionsClosed();
		},
		resetGame () {
			this.gameOptionsPopup.changesMade = true;
			this.gameOptionsPopup.resetClicked = true;
			extern.sendGameAction(extern.GameActions.reset);
		}
    },
	computed: {
		inGame: () =&gt; {
			return extern.inGame;
		}
	}
}
    </script>
    <script id="notification-content" type="text/x-template">
      &lt;!-- Popup: Give Stuff --&gt;
   &lt;!-- &lt;large-popup id=&#34;giveStuffPopup&#34; ref=&#34;giveStuffPopup&#34; :popup-model=&#34;giveStuffPopup&#34; @popup-closed=&#34;onSharedPopupClosed&#34; :class=&#34;giveStuffPopup.type&#34;&gt; --&gt;
	&lt;div id=&#34;give-stuff-wrap&#34; class=&#34;f_row gap-1&#34;&gt;
		&lt;div class=&#34;notification-content&#34; :class=&#34;typeBg&#34;&gt;
			&lt;section&gt;
				&lt;notification-slider 
					v-if=&#34;currentNotification&#34;
					:loc=&#34;loc&#34;
					:items=&#34;currentNotification.data.items&#34;
					:type=&#34;currentNotification.type&#34;
					:ids=&#34;currentNotification.data.ids&#34;
					:eggs=&#34;currentNotification.data.eggs&#34;
					:last-item=&#34;lastItem&#34;
					:bonus=&#34;bonus&#34;
					@open-bundle=&#34;openBundle&#34;
					@open-bonus=&#34;goToShop&#34;
					@close-popup=&#34;onClosePopup&#34;
					@close-item=&#34;handleNextNotification&#34;
				/&gt;
				&lt;!-- &lt;div v-show=&#34;(notification.data.eggs) &amp;&amp; eggsActive&#34; class=&#34;notify-group notify-group-eggs f_col justify-content-center roundme_lg box_relative&#34; :class=&#34;eggPackClass(notify.data.eggs)&#34;&gt;
					&lt;button @click=&#34;onEggPackClosed&#34; class=&#34;popup_close clickme roundme_sm&#34;&gt;&lt;i class=&#34;fas fa-times text_blue5 fa-2x&#34;&gt;&lt;/i&gt;&lt;/button&gt;
					&lt;div class=&#34;egg-give-stuff&#34;&gt;
						&lt;header&gt;
							&lt;h1 class=&#34;text-center&#34;&gt;{{ rewardTitle }}&lt;/h1&gt;
						&lt;/header&gt;
						&lt;img  src=&#34;img/egg_pack_small.webp&#34; /&gt;
						&lt;h2&gt;&lt;img class=&#34;vertical-align-middle width_1 egg-img&#34; src=&#34;img/svg/ico_goldenEgg.svg&#34; /&gt;{{notify.data.eggs}}&lt;/h2&gt;
						&lt;p class=&#34;item-name text-center text_blue5&#34;&gt;{{eggName(notify.data.eggs)}}&lt;/p&gt;
						&lt;button v-if=&#34;bonus&#34; @click=&#34;goToShop&#34; class=&#34;ss_button btn_lg btn_green bevel_green f_row align-items-center justify-content-center fullwidth&#34;&gt;{{loc.account_creation_popup_button}}&lt;/button&gt;
					&lt;/div&gt;
				&lt;/div&gt; --&gt;
			&lt;/section&gt;	
		&lt;/div&gt;
	&lt;/div&gt;
    </script>
    <script id="notification-slider" type="text/x-template">
      &lt;div v-if=&#34;type&#34; class=&#34;notify-group notify-group-items f_col justify-content-center roundme_lg box_relative&#34; :class=&#34;clsType&#34;&gt;
		&lt;img v-if=&#34;type === &#39;eggOrg&#39;&#34; src=&#34;img/gauge-bar/egg-org-red.png&#34; class=&#34;centered_x factions-egg-org-logo&#34;&gt;
		&lt;header&gt;
			&lt;h1 class=&#34;text-center&#34; :class=&#34;headerStyle&#34;&gt;{{ title }}&lt;/h1&gt;
		&lt;/header&gt;

		&lt;p v-if=&#34;type === &#39;eggOrg&#39;&#34; class=&#34;nospace text-center&#34;&gt;When the smoke cleared the &lt;span class=&#34;text-factions-b text-uppercase&#34;&gt;Eggsassins&lt;/span&gt; were victorious.
		Thanks for playing - Keep your Premium faction skin &amp; enjoy this stamp!&lt;/p&gt;
		&lt;item
			v-for=&#34;i in filteredItems&#34;
			:key=&#34;i.id&#34;
			:loc=&#34;loc&#34;
			:item=&#34;i&#34;
			:isSelected=&#34;false&#34;
			:show-item-only=&#34;true&#34;
			:notify=&#34;true&#34;
		/&gt;
		&lt;challenge
			v-if=&#34;ifChlg&#34;
			:loc=&#34;loc&#34;
			:chlg=&#34;items&#34;
			:notify-idx=&#34;notifyIdx&#34;
		/&gt;
		&lt;currency
			v-if=&#34;ifCurrency&#34;
			:loc=&#34;loc&#34;
			:eggs=&#34;eggs&#34;
			:notify-idx=&#34;notifyIdx&#34;
		/&gt;
		&lt;button @click=&#34;modalBtn&#34; class=&#34;ss_button&#34;&gt;
			{{loc[btnText]}}
		&lt;/button&gt;
	&lt;/div&gt;
    </script>
    <script id="notification-challenge" type="text/x-template">
      &lt;div v-if=&#34;chlg.length &gt; 0&#34;&gt;
		&lt;div v-for=&#34;(i, idx) in chlg&#34; v-show=&#34;idx === notifyIdx&#34;&gt;
			&lt;img class=&#34;chlg-icon display-block center_h&#34; :src=&#34;chlgImg(i[1])&#34;&gt;
			&lt;h3 class=&#34;text_blue5 text-center nospace&#34; v-html=&#34;chlgName(i[1])&#34;&gt;&lt;/h3&gt;
			&lt;p class=&#34;text-center text_blue5 nospace&#34; v-html=&#34;chlgDesc(i[1])&#34;&gt;&lt;/p&gt;
			&lt;div class=&#34;account_eggs roundme_sm clickme f_row justify-content-center ss_margintop_lg ss_marginbottom_lg&#34;&gt;
				&lt;span class=&#34;egg_count text-center text-shadow-black-40&#34;&gt;&lt;img src=&#34;img/svg/ico_goldenEgg.svg&#34; class=&#34;egg_icon&#34;&gt; {{ i[2] }}&lt;/span&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/div&gt;
	&lt;!-- challenges --&gt;
    </script>
    <script>
      const NotifiChallenge = {
	  template: &#39;#notification-challenge&#39;,
		components: {
		},
	  props: {
		chlg: {
			type: Array,
			required: false,
			default: () =&gt; [],
		},
		notifyIdx: {
			type: Number,
			required: false,
			default: 0,
		},
		loc: {
			type: Object,
			required: false,
			default: () =&gt; ({}),
		},
	  },
	  methods: {
		chlgName(ref) {
			return this.loc[`${ref}_title`];
		},
		chlgDesc(ref) {
			return this.loc[`${ref}_desc`];
		},
		chlgImg(ref) {
			return extern.playerChallenges.iconSrc(ref);
		}
	  }
	};
    </script>
    <script id="notification-currency" type="text/x-template">
      &lt;div class=&#34;egg-give-stuff&#34;&gt;
			&lt;img  src=&#34;img/egg_pack_small.webp&#34; /&gt;
			&lt;h2&gt;&lt;img class=&#34;vertical-align-middle width_1 egg-img&#34; src=&#34;img/svg/ico_goldenEgg.svg&#34; /&gt;{{eggs}}&lt;/h2&gt;
		&lt;/div&gt;
    </script>
    <script>
      const NotifiCurrency = {
	  template: &#39;#notification-currency&#39;,
	  props: {
		eggs: {
			type: Number,
			required: false,
			default: 0,
		},
	  },
	};
    </script>
    <script>
      const NotifiSlider = {
  template: &#39;#notification-slider&#39;,
	components: {
		&#39;item&#39;: comp_item,
		&#39;challenge&#39;: NotifiChallenge,
		&#39;currency&#39;: NotifiCurrency,
	},
  props: {
    loc: {
		type: Object,
		required: false,
		default: () =&gt; ({}),
    },
    items: {
		type: Array,
		required: false,
		default: () =&gt; [],
    },
    type: {
		type: String,
		required: false,
		default: &#39;&#39;,
    },
    ids: {
		type: Array,
		required: false,
		default: () =&gt; [],
    },
    eggs: {
		type: Number,
    	required: false,
    	default: 0,
    },
	lastItem: {
		type: Boolean,
		required: false,
		default: false,
	},
	bonus: {
		type: Boolean,
		required: false,
		default: false,
	}
  },

  data() {
    return {
      notifyIdx: 0,
	  text: {
		  bundle :[&#39;p_bundle_text_one&#39;,&#39;p_bundle_text_two&#39;, &#39;p_bundle_text_three&#39;,&#39;p_bundle_text_four&#39;],
		  pass :[&#39;p_pass_text_one&#39;,&#39;p_pass_text_two&#39;,&#39;p_pass_text_three&#39;,&#39;p_pass_text_four&#39;],
		  subscription:[&#39;p_vip_text_one&#39;,&#39;p_vip_text_two&#39;,&#39;p_vip_text_three&#39;,&#39;p_vip_text_four&#39;]
	  },
	  isType: {
		CURRENCY: &#39;currency&#39;,
		CHALLENGES: &#39;challenges&#39;,
		BUNDLE: &#39;bundle&#39;,
		PASS: &#39;pass&#39;,
		SUBSCRIPTION: &#39;subscription&#39;,
	  }
    };
  },
  methods: {
    nextItem() {
		if (this.type === this.isType.CURRENCY) {
			this.closeItem();
		}

		if (this.notifyIdx &lt; this.items.length - 1) {
			this.notifyIdx++;
		}
    },
    closeItem() {
		this.$emit(&#39;close-item&#39;);
		this.notifyIdx = 0;
    },
	modalBtn() {
		if (!this.endOfItems) {
			return this.nextItem();
		}
		this.onActionBtnClick();
		this.closeItem();
	},
	onActionBtnClick() {
		if (this.type === this.isType.BUNDLE) {
			this.$emit(&#39;open-bundle&#39;);
		} else if (this.bonus) {
			this.$emit(&#39;open-bonus&#39;);
		}
	}
  },
  computed: {
    endOfItems() {
      return this.notifyIdx === this.items.length - 1;
    },
    clsType() {
      return `notify-group-${this.type}`;
    },
    title() {
		return this.loc[`p_notification_${this.type}_title`]
    },
	btnText() {
		switch (this.type) {
			case this.type.BUNDLE:
			case this.type.PASS:
			case this.type.SUBSCRIPTION:
				return this.text[this.type][this.notifyIdx];
				break;
			default:
				if (this.lastItem &amp;&amp; this.endOfItems) {
					return &#39;close&#39;;
				}
				return &#39;p_notification_next&#39;;
				break;
		}
	},
	showActionBtn() {
		if ((this.type === this.isType.BUNDLE || this.bonus)) {
			return true;
		}
	},
	ifItem() {
		return (!this.ifChlg || !this.ifCurrency);
	},
	ifChlg() {
		return this.type === this.isType.CHALLENGES;
	},
	ifCurrency() {
		return this.type === this.isType.CURRENCY;
	},
	headerStyle() {
		if (this.ifChlg) {
			return &#39;text_white text-shadow-black-40&#39;;
		}
	},
	filteredItems() {
		if (!this.type || this.ifChlg || this.ifCurrency) {
			return [];
		}
		return this.items.filter((_, idx) =&gt; idx === this.notifyIdx);
  	},
  },
};
    </script>
    <script>
      const notifiInitState = () =&gt; {
		return {
			eggBalance: 0,
			notifyIdx: 0,
			activeIdxs: 0,
			eggsActive: true,
			btnText: &#39;Next&#39;,
			title: &#39;&#39;,
			currentNotificationIndex: 0,
			lastItem: false
		}
	}

	const NotificationContent = {
		template: &#39;#notification-content&#39;,
		components: {
			&#39;notification-slider&#39;: NotifiSlider,
		},
		props: [&#39;loc&#39;, &#39;notification&#39;, &#39;bonus&#39;],

		data: function () {
			return notifiInitState();
		},

		methods: {
			resetState() {
				Object.assign(this.$data, notifiInitState());
			},
			handleNextNotification() {
				// Ensure there is a next notification
				if (
					this.currentNotificationIndex &lt; this.notification.length - 1 &amp;&amp;
					(this.notification[this.currentNotificationIndex + 1]?.data?.items || this.notification[this.currentNotificationIndex + 1]?.data?.eggs)
				) {
					this.currentNotificationIndex++;
				} else {
					this.onClosePopup();
				}
			},
			onItemClosed() {
				if (!this.activeIdxs) {
					this.activeIdxs = this.notification.length;
				}
				this.activeIdxs--;
				if (this.activeIdxs === 0) {
					this.onClosePopup();
					if (extern.inGame) {
						vueApp.toggleRespawnDisplayAd(true);
					}
				}
			},
			onEggPackClosed() {
				this.eggsActive = false;
				this.onItemClosed();
			},
			onGiveStuffComplete: function () {
				this.giveStuffPopup.eggOrg = false;
				this.giveStuffPopup.rickroll = false;
				vueApp.onGiveStuffComplete();
			},
			onClickTwitchDropsMore() {
				window.open(dynamicContentPrefix + &#39;twitch&#39;);
				this.onGiveStuffComplete();
			},
			getProductTitle(data) {
				const product = extern.getProductTitle(data);
				if (product[0].sku) {
					return this.loc[`${product[0].sku}_title`];
				}
			},
			openBundle() {
				this.$emit(&#39;open-bundle&#39;, this.activeIdxs);
			},
			onClosePopup() {
				this.$emit(&#39;close-popup&#39;);
			},
			eggPackClass(eggs) {
				const name = extern.getProductTitleByEggVaule(eggs);
				if (name) {
					return name;
				}
			},
			eggName(eggs) {
				const name = extern.getProductTitleByEggVaule(eggs);
				if (name) {
					return this.loc[name + &#39;_title&#39;] + &#39; EGGS!&#39;;
				}
			},
			goToShop() {
				this.onEggPackClosed();
				if (vueApp.ui.bonus.showing) {
					vueApp.ui.bonus.showing = false;
					vueApp.openEquipSwitchTo(vueData.equipMode.skins, ItemType.Hat);
				} else {
					vueApp.openEquipSwitchTo(vueData.equipMode.skins);
				}
			},
		},
		computed: {
			rewardTitle() {
				if (this.bonus) {
					return this.loc.account_creation_popup_title;
				} else {
					this.loc.reward_title;
				}
			},
			currentNotification() {
				if (!this.notification) return;
				if (this.currentNotificationIndex === this.notification.length - 1) {
					this.lastItem = true;
				}
				return this.notification[this.currentNotificationIndex];
			},
			typeBg() {
				if (!this.currentNotification) return;
				switch (this.currentNotification.type) {
					case &#39;vip&#39;:
						return &#39;bg_blue5&#39;;
						break;
					
					case &#39;purchases&#39;:
						return &#39;bg_blue6&#39;;
						break;

					case &#39;challenges&#39;:
						return &#39;&#39;;
						break;
			
					default:
						return &#39;&#39;;
						break;
				}
			},
		},
	};
    </script>
    <script>
      const components = {
        &#39;dark-overlay&#39;: comp_dark_overlay,
        &#39;light-overlay&#39;: comp_light_overlay,
        &#39;spinner-overlay&#39;: comp_spinner_overlay,
        &#39;gdpr&#39;: comp_gdpr,
        &#39;settings&#39;: comp_settings,
        &#39;help&#39;: comp_help,
        &#39;vip-help&#39;: vip_help,
        &#39;subscription-store&#39;: compVipClubTemplate,
        // &#39;subscription-store&#39;: comp_egg_store,
        &#39;item&#39;: comp_item,
        &#39;home-screen&#39;: comp_home_screen,
        &#39;equip-screen&#39;: comp_equip_screen,
        &#39;game-screen&#39;: comp_game_screen,
        &#39;gold-chicken-popup&#39;: comp_gold_chicken_popup,
        &#39;chicken-nugget-popup&#39;: comp_chickn_winner_popup,
        &#39;egg-store-item&#39;: comp_store_item,
        &#39;give-stuff-popup&#39;: GIVESTUFFPOPUP,
        &#39;game-options-popup&#39;: comp_game_options_popup,
        &#39;main-sidebar&#39;: COMPMAINSIDE,
        &#39;account-panel&#39;: comp_account_panel,
        &#39;house-ad&#39;: CompHouseAd,
        &#39;photo-booth-ui&#39;: CompPhotoboothUi,
        &#39;notification-content&#39;: NotificationContent,
        &#39;social-panel&#39;: comp_social_panel,
        &#39;chw&#39;: CompChwHomeScreen,
        &#39;factions-popup&#39;: FactionsPopup,
        &#39;controls&#39;: ControlsSetup,
    };



    const lazyLoadDirective = {
        inserted(el) {
            const observer = new IntersectionObserver((entries, observer) =&gt; {
                entries.forEach((entry) =&gt; {
                    if (entry.isIntersecting) {
                        const img = entry.target;

                        if (img.dataset.src) {
                            img.src = img.dataset.src; // Set src attribute from data-src
                            img.removeAttribute(&#34;data-src&#34;); // Remove data-src once loaded
                        }

                        img.classList.add(&#34;loaded&#34;); // Optional class for transition
                        img.classList.remove(&#34;lazy-load&#34;);

                        observer.unobserve(img); // Stop observing once image is loaded
                    }
                });
            });
            observer.observe(el);
        }
    };

    const PerformanceTracker = {
        marks: {},
        mark(name) {
            this.marks[name] = performance.now();
        },
        measure(start, end) {
            return this.marks[end] - this.marks[start];
        }
    };


    function startVue(languageCode, locData) {

        vueData.extern = extern;
        vueData.loc = locData;

        extern.GameOptions.init();

        Vue.directive(&#39;lazyload&#39;, lazyLoadDirective);

        Vue.prototype.$eggOrgFormatTeamScores = function(teamScores) {
            const heroes = teamScores[0] || 0;
            const monsters = teamScores[1] || 0;

            return `Eggsassins: ${heroes} - Masters: ${monsters}`;
        }

        Vue.prototype.$parseJSON = function(str) {
            try {
                const result = JSON.parse(str);
                return result;
            } catch (e) {
                return false;
            }
        }

        vueApp = new Vue({
            el: &#39;#app&#39;,
            components,

            data: vueData,

            createdTime: null,
            mountedTime: null,
            fullyRenderedTime: null,

            multisizeAdTag: null,

            created() {
                console.log(&#39;Vue instance created&#39;);
                PerformanceTracker.mark(&#39;created&#39;);
                this.currentLanguageCode = languageCode;
                this.urlParams = parsedUrl.query.open ? parsedUrl.query.open : null;
            },

            async mounted() {
                console.log(&#39;Vue instance mounted&#39;);
                PerformanceTracker.mark(&#39;mounted&#39;);
                PerformanceTracker.measure(&#39;created&#39;, &#39;mounted&#39;);

                // Cannot modify data within the mounted hook, so wait until next tick
                try {
                    await this.$nextTick();
                    this.ready = true;
                    this.currentGameType = extern.gameType;
                    this.performanceTracking();
                    await this.initializeApplication();
                } catch (error) {
                    console.error(&#39;Error initializing application:&#39;, error);
                }

                // window.addEventListener(&#39;visibilitychange&#39;, () =&gt; this.handleVisibilityChange(), false);
                // window.addEventListener(&#39;focus&#39;, () =&gt; this.handleVisibilityChange(true), false);
                // window.addEventListener(&#39;blur&#39;, () =&gt; this.handleVisibilityChange(false), false);
            },

            methods: {
                async initializeApplication() {
                    this.ready = true;

                    // Group related initialization tasks
                    extern.continueStartup();
                    this.photoUrl = extern.firebaseUrl;
                    await Promise.all([
                        // this.appendGameCanvas(),
                        this.getLocLang(),
                        this.setupChangeLog(),
                        this.setupCrazyGames(),
                        this.resetGameOptions(),
                        this.setupAds(),
                        this.isTwitchLive(),
                    ]);

                },

                appendGameCanvas() {
                    const Canvas = document.getElementById(&#39;canvas&#39;);
                    this.$refs.gameCanvas.appendChild(Canvas);
                },

                performanceTracking() {
                    PerformanceTracker.mark(&#39;rendered&#39;);
                    console.log(&#39;mounted -&gt; fully rendered time (ms):&#39;,
                        PerformanceTracker.measure(&#39;mounted&#39;, &#39;rendered&#39;));
                    console.log(&#39;total initialization time (ms):&#39;,
                        PerformanceTracker.measure(&#39;created&#39;, &#39;rendered&#39;));
                },

                setupChangeLog() {
                    const changelog = this.changelogContent();
                    this.changelog.version = changelog[0].version;
                    this.changelog.current = changelog;
                },

                setupCrazyGames() {
                    this.ui.crazyGames = crazyGamesActive;
                },

                setupAds() {
                    if (this.$refs.headerAdContainer &amp;&amp; this.$refs.homeScreen.$refs.displayAdHeader) {
                        this.$refs.headerAdContainer.appendChild(
                            this.$refs.homeScreen.$refs.displayAdHeader
                        );
                    }
                },

                chromeIsABuggerPopupShow() {
                    vueApp.$refs.chromeIsABuggerPopup.show();
                },
                getGameElements: function() {
                    return {
                        canvas: this.$refs.canvas,
                        canvasWrapper: this.$refs.canvasWrapper,
                    }
                },

                onShowloginPopupWarning() {
                    if (extern.inGame) {
                        this.$refs.loginPopupWarning.show();
                    }
                },


                onShowlogoutPopupWarning() {
                    if (extern.inGame) {
                        this.$refs.logOutPopupWarning.show();
                    }
                },

                // handleVisibilityChange(val) {
                // 	if (document.hidden || document.visibilityState !== &#39;visible&#39; || !val) {
                // 		this.setDisplayAdVisibility(false);
                // 	} else  {
                // 		this.setDisplayAdVisibility(true);
                // 	}
                // },

                playMusic: function() {
                    myAudio = new Audio(&#39;./sound/theme&#39;);
                    // Uncomment for looping.
                    // myAudio.addEventListener(&#39;ended&#39;, function() {
                    //     this.currentTime = 0;
                    //     this.play();
                    // }, false);
                    myAudio.volume = this.volume;
                    myAudio.play();
                },

                changeLanguage: function(languageCode) {
                    extern.getLanguageData(languageCode, this.setLocData);
                },

                setLocData: function(languageCode, newLocData) {
                    this.currentLanguageCode = getStoredString(&#39;languageSelected&#39;, null) ? localStore.getItem(&#39;languageSelected&#39;) : languageCode;
                    this.loc = newLocData;
                },

                setPlayerName: function(playerName) {
                    this.playerName = playerName.substring(0, 128);
                },

                showSpinner: function(headerLocKey, footerLocKey, showTips) {
                    this.$refs.spinnerOverlay.show(headerLocKey, footerLocKey, showTips);
                },

                showSpinnerLoadProgress: function(percent) {
                    this.$refs.spinnerOverlay.showSpinnerLoadProgress(percent);
                },

                hideSpinner: function() {
                    this.$refs.spinnerOverlay.hide();
                },

                onSettingsPopupOpened: function() {
                    this.$refs.settings.captureOriginalSettings();
                    this.sharedIngamePopupOpened();
                },

                onSettingsPopupSwitchTabMisc: function() {
                    this.$refs.settings.switchTab(&#39;misc_button&#39;);
                },

                onSettingsX: function() {
                    this.$refs.settings.applyOriginalSettings();
                    this.$refs.settings.cancelLanguageSelect();
                    this.sharedIngamePopupClosed();
                },

                onSettingsQuickSave() {
                    this.$refs.settings.quickSave();
                },

                onNoAnonPopupConfirm: function() {
                    ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.denyAnonUserPopup, this.googleAnalytics.label.signInClick);
                    this.showFirebaseSignIn();
                },

                onSharedPopupClosed: function() {
                    // If in-game, show game menu after closing the popup
                    this.blackFridayBanner = false;
                    // if (this.showScreen === this.screens.game &amp;&amp; extern.inGame) {
                    // 	this.showGameMenu();
                    // }
                },

                sharedIngamePopupOpened() {
                    if (extern.inGame) this.$refs.gameScreen.sharedPopupOpened();
                },

                sharedIngamePopupClosed() {
                    if (extern.inGame) this.$refs.gameScreen.sharedPopupClosed();
                },

                abTestshowEggReward(data) {
                    if (this.abTestInventory.closed) {
                        this.showGameMenu();
                        return;
                    }
                    this.abTestInventory.enabled = true;
                    this.showGiveStuffPopup(data.loc, data.amount, data.items, data.type);
                },
                abTestInventoryShowItem() {
                    this.abTestInventorySetup();
                },
                adTestInventoryClickReset() {
                    this.abTestInventory.currentIdx = 0;
                    this.abTestInventory.enabled = false;
                    this.$refs.abTestContainer.classList.add(&#39;hideme&#39;);
                    this.setDarkOverlay(false);
                },
                abTestInventoryUiClicked() {
                    if (!this.abTestInventory.enabled) {
                        return;
                    }

                    let {
                        currentIdx,
                        clickables,
                        enabled
                    } = this.abTestInventory;
                    let showIdx = currentIdx;
                    let prevIdx = Math.max(currentIdx - 1, 0);

                    this.$nextTick(() =&gt; {

                        this.$refs.mainAside.style.zIndex = &#39;auto&#39;;

                        // Check if the current index exceeds the length of clickables
                        if (currentIdx &gt;= clickables.length) {
                            let prevEl = clickables[prevIdx].id ? document.querySelector(`.${clickables[prevIdx].id}`) : &#39;&#39;;
                            this.$refs.mainAside.style.zIndex = &#39;&#39;;

                            if (prevEl) {
                                prevEl.style.zIndex = 2;
                            }

                            this.adTestInventoryClickReset();
                            return; // Stop further execution
                        }

                        let newEl = clickables[showIdx].id ? document.querySelector(`.${clickables[showIdx].id}`) : null;
                        let prevEl = clickables[prevIdx].id ? document.querySelector(`.${clickables[prevIdx].id}`) : null;

                        // hack

                        if (newEl) {
                            if (clickables[currentIdx].scroll) {
                                newEl.scrollIntoView({
                                    behavior: &#39;smooth&#39;,
                                    block: &#39;start&#39;,
                                    inline: &#39;nearest&#39;
                                });
                            }

                            newEl.classList.add(&#39;box_relative&#39;);
                            newEl.appendChild(this.$refs.abTestContainer);
                            this.$refs.abTestContainer.classList.remove(&#39;hideme&#39;);
                            newEl.style.zIndex = 9000;

                            // Set up the event listener to fire only once
                            newEl.addEventListener(&#39;click&#39;, this.abTestInventoryUiClicked, {
                                once: true
                            });
                        } else {
                            this.$refs.abTestContainer.classList.add(&#39;hideme&#39;);
                        }

                        if (prevEl &amp;&amp; newEl !== prevEl) {
                            prevEl.style.zIndex = &#39;&#39;;
                        }

                        // Increment the index and set the dark overlay
                        this.setDarkOverlay(true);
                        this.abTestInventory.currentIdx += 1;
                    });
                },
                abTestInventorySetup() {
                    this.abTestInventoryUiClicked();

                },
                abTestInventoryCompleted() {
                    this.$refs.mainAside.style.zIndex = 2;
                    this.abTestInventory.enabled = false;
                    this.abTestInventory.started = false;
                },
                abTestInventoryCancel() {
                    if (this.abTestInventory.enabled &amp;&amp; !this.abTestInventory.started) {

                        if (!extern.inGame) {
                            this.$refs.giveStuffPopup.$refs.giveStuffPopup.hide();
                        }
                        this.adTestInventoryClickReset();
                        this.showGameMenu();
                        if (this.eggs &gt;= 1250) {
                            this.eggs = this.eggs - 1250;
                        }
                        this.abTestInventory.closed = true;
                        return;
                    }
                },
                onGiveStuffComplete: function() {
                    if (this.abTestInventory.enabled) {
                        this.abTestInventory.started = true;
                        this.abTestInventoryShowItem();
                        ga(&#39;set&#39;, &#39;ABTestGroup&#39;, &#39;noob_inventory_started&#39;);
                        this.$refs.giveStuffPopup.$refs.giveStuffPopup.hide();
                        return;
                    }
                    this.$refs.giveStuffPopup.$refs.giveStuffPopup.hide();
                    if (extern.inGame) {
                        this.showGameMenu();
                        if (this.$refs.equipScreen.showScreen === this.$refs.equipScreen.screens.equip) {
                            vueApp.setDarkOverlay(false);
                        }
                    }
                },

                onGiveStuffPopupClosed() {
                    // abtest only
                    this.$nextTick(() =&gt; {
                        this.abTestInventoryCancel();
                    });
                },

                onPrivacyOptionsOpened: function() {
                    this.showPrivacyPopup();
                },
                /**
                 * Creates a generic popup that passes content 3 data options to slots on the genericPopup smallPopup
                 * @param titleLockKey mixed - popup header text
                 * @param contentLocKey mixed- popup content
                 * @param confirmLocKey mixed - popup button text
                 */
                showGenericPopup: function(titleLocKey, contentLocKey, confirmLocKey, reload = false) {
                    this.genericMessagePopup.titleLocKey = titleLocKey;
                    this.genericMessagePopup.contentLocKey = contentLocKey;
                    this.genericMessagePopup.confirmLocKey = confirmLocKey;
                    this.genericMessagePopup.reload = reload;
                    this.hidePausePopupIfGenericPopupOpen();
                    this.$refs.genericPopup.show();
                },
                onGenericPopupConfirm: function() {
                    if (this.genericMessagePopup.reload) {
                        location.reload();
                    }
                },
                hidePausePopupIfGenericPopupOpen: function() {

                    if (!this.$refs.gameScreen.$refs.pausePopup &amp;&amp; $refs.gameScreen.$refs.pausePopup.isShowing === false) {
                        return;
                    }

                    // return this.$refs.gameScreen.$refs.pausePopup.hide();
                },
                showOpenUrlPopup: function(url, titleLocKey, content, confirmLocKey, cancelLocKey) {
                    console.log(&#39;title: &#39; + this.loc[titleLocKey]);
                    console.log(&#39;confirm: &#39; + this.loc[confirmLocKey]);
                    console.log(&#39;cancel: &#39; + this.loc[cancelLocKey]);

                    this.openUrlPopup.url = url;
                    this.openUrlPopup.titleLocKey = titleLocKey;
                    this.openUrlPopup.content = content;
                    this.openUrlPopup.confirmLocKey = confirmLocKey;
                    this.openUrlPopup.cancelLocKey = cancelLocKey;
                    this.$refs.openUrlPopup.show();
                },

                onOpenUrlPopupConfirm: function() {
                    extern.openUrlAndGiveReward();
                },

                showUnsupportedPlatformPopup: function(contentLocKey) {
                    this.showScreen = -1;
                    this.unsupportedPlatformPopup.contentLocKey = contentLocKey;
                    this.$refs.unsupportedPlatformPopup.show();
                },

                showMissingFeaturesPopup: function() {
                    this.showScreen = -1;
                    this.$refs.missingFeaturesPopup.show();
                },

                showFirebaseSignIn: function() {
                    this.$refs.homeScreen.showSignIn();
                },

                hideFirebaseSignInMsgChat: function() {
                    this.$refs.signinMsgChat.style.display = &#39;none&#39;;
                },

                hideFirebaseSignIn: function() {
                    this.$refs.firebaseSignInPopup.hide();
                    console.log(&#39;hideFirebaseSignIn&#39;);
                    this.hideFirebaseSignInMsgChat();
                },

                showCheckEmail: function() {
                    this.$refs.homeScreen.$refs.checkEmailPopup.show();
                },

                hideCheckEmail: function() {
                    this.$refs.homeScreen.$refs.checkEmailPopup.hide();
                },

                showResendEmail: function() {
                    this.$refs.homeScreen.$refs.resendEmailPopup.show();
                },

                hideResendEmail: function() {
                    this.$refs.homeScreen.$refs.resendEmailPopup.hide();
                },

                dontShowChwStuff() {
                    return (extern.inGame || (this.isChicknWinnerError || !this.chw.ready || this.chw.winnerCounter &gt; 3 || this.abTestInventory.enabled))
                },

                showChickenPopup: function() {

                    if (this.dontShowChwStuff()) {
                        return;
                    }

                    const show = localStore.getItem(&#39;chickenPopupShow&#39;),
                        today = new Date(),
                        dd = String(today.getDate()).padStart(2, &#39;0&#39;),
                        mm = String(today.getMonth() + 1).padStart(2, &#39;0&#39;), //January is 0!
                        yyyy = today.getFullYear(),
                        whole = dd + mm + yyyy;

                    if (!show || show !== whole) {
                        this.$refs.goldChickenPopup.show();
                        localStore.setItem(&#39;chickenPopupShow&#39;, whole);
                    }
                },

                hideChickenPopup: function() {
                    this.$refs.goldChickenPopup.hide();
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, &#39;chw-cta-popup&#39;, &#39;click-close-btn&#39;);
                },

                goldChickenPopupOpenChw() {
                    this.hideChickenPopup();
                    if (this.dontShowChwStuff()) {
                        return;
                    }

                    ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, &#39;chw-cta-popup&#39;, &#39;click-play-btn&#39;);

                    this.chwDoIncentivized();
                },

                showHelpPopup: function() {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.$refs.helpPopup.show();
                },

                showHelpPopupFeedbackWithDelete() {
                    this.$refs.help.openFeedbackTabWith(this.feedbackType.delete.id);
                    this.showHelpPopup();
                },

                showVipPopup: function() {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    BAWK.play(&#39;ui_popupopen&#39;);
                    this.$refs.vipPopup.show();
                },

                showAttentionPopup: function() {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.$refs.anonWarningPopup.show();
                },

                hideHelpPopup: function() {
                    this.$refs.helpPopup.hide();
                },

                showSettingsPopup: function() {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.$refs.settingsPopup.show();
                    extern.settingsMenuOpened();
                    this.sharedIngamePopupOpened();
                },

                hideSettingsPopup: function() {
                    this.$refs.settingsPopup.hide();
                },

                showEggStorePopup: function() {
                    this.$nextTick(() =&gt; {
                        this.hideGameMenu();
                        this.$refs.eggStorePopup.show();
                        if (this.isSale) {
                            this.blackFridayBanner = true;
                        }
                        ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopItemNeedMoreEggsPopup, this.googleAnalytics.label.getMoreEggs);
                    });
                },

                showSubStorePopup: function() {
                    this.$nextTick(() =&gt; {
                        if (!extern.inGame) {
                            this.hideGameMenu();
                        }
                        this.$refs.subStorePopup.show();
                        BAWK.play(&#39;ui_popupopen&#39;);
                    });
                },

                vipEndedPopup(type) {
                    this.home.vipEndedType = type;
                    this.$nextTick(() =&gt; {
                        this.$refs.vipEnded.show();
                        BAWK.play(&#39;ui_popupopen&#39;);
                    });
                },

                showPopupEggStoreSingle(sku) {
                    if (!sku) {
                        console.log(&#39;No sku for popup&#39;);
                        return;
                    }
                    if (!this.premiumShopItems.some(i =&gt; i.sku === sku)) {
                        vueApp.showGenericPopup(&#34;uh_oh&#34;, &#34;p_egg_shop_no_item_desc&#34;, &#34;ok&#34;);
                        return;
                    }

                    this.eggStorePopupSku = sku;
                    this.$refs.popupEggStoreSingle.show();
                },

                hidePopupEggStoreSingle() {
                    this.eggStorePopupSku = null;
                    this.$refs.popupEggStoreSingle.hide();
                },

                hideEggStorePopup: function() {
                    this.$refs.eggStorePopup.hide();
                },

                showChangelogPopup: function() {
                    this.$refs.changelogPopup.show();
                },

                showHistoryChangelogPopup() {
                    fetch(&#39;./changelog/oldChangelog.json&#39;, {
                            cache: &#34;no-cache&#34;
                        })
                        .then(response =&gt; response.json())
                        .then(data =&gt; {
                            data.forEach((log, idx) =&gt; {
                                const content = this.changelogSetup(log);
                                log.content.length = 0;
                                log.content.push(...content);
                                this.changelog.current.push(log)
                            });
                        });

                    this.changelog.showHistoryBtn = false;
                },

                hideChangelogPopup: function() {
                    this.$refs.changelogPopup.hide();
                },

                photoBoothTypeChange() {
                    this.$refs.photoBooth.updateTypeVisibility(this.equip.selectedItemType);
                },

                openPhotoBooth() {
                    this.$nextTick().then(() =&gt; {
                        this.openEquipSwitchTo(this.equipMode.inventory);
                        this.$nextTick().then(() =&gt; {
                            this.switchToPhotoBoothUi();
                        });
                    });
                },

                switchToPhotoBoothUi: function() {

                    const homeDisplayAd = document.getElementById(&#39;shellshockers_titlescreen_wrap&#39;);
                    const homeDisplayAdChild = homeDisplayAd ? homeDisplayAd.firstElementChild : null;

                    this.ui.showHomeEquipUi = this.ui.showHomeEquipUi ? false : true;
                    this.$refs.photoBooth.$refs.photoBoothDisplayAd.classList.toggle(&#39;hideme&#39;, this.ui.showHomeEquipUi);

                    if (this.ui.showHomeEquipUi) {
                        extern.photoBooth.close();
                        if (homeDisplayAd) {
                            homeDisplayAd.appendChild(this.$refs.photoBooth.$refs.photoBoothDisplayAd.firstElementChild);
                        }
                    } else {
                        extern.photoBooth.open();
                        if (homeDisplayAdChild) {
                            this.$refs.photoBooth.$refs.photoBoothDisplayAd.appendChild(homeDisplayAdChild);
                            this.showTitleScreenAd();
                        }
                    }
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;photo-booth&#39;, &#39;click&#39;, this.ui.showHomeEquipUi ? &#39;close&#39; : &#39;open&#39;);
                    BAWK.play(&#39;ui_toggletab&#39;);
                },

                onPhotoboothBgColorChange(bgClass) {
                    document.getElementById(&#39;ss_background&#39;).className = bgClass;
                },

                onPhotoBoothBgImageChange(url) {
                    document.getElementById(&#39;ss_background&#39;).style.backgroundImage = (url &amp;&amp; url !== &#39;none&#39;) ? `url(img/photo-booth/maps/${url}.webp)` : &#39;&#39;;
                },

                onPhotoBoothHideUi(show) {
                    if (!show) {
                        this.showScreen = -1;
                    } else {
                        this.showScreen = this.screens.equip;
                    }
                },

                // photoBoothVignetteChange(val) {
                // 	this.ui.photoBooth.vignette = val;
                // },

                screenGrabDone(canvasData) {
                    this.$refs.photoBooth.screenGrabDone(canvasData);
                },

                gameUiAddClassForNoScroll() {
                    let html = document.getElementsByTagName(&#34;html&#34;)[0];
                    html.classList.add(&#39;noScrollIngame&#39;);
                },

                showGiveStuffPopup: function(titleLoc, eggs, items, type, callback) {

                    if (this.giveStuffPopup.eggOrg) {
                        ga(&#39;send&#39;, &#39;event&#39;, &#39;Egg Org&#39;, &#39;Code Cracked&#39;, &#39;redeemed&#39;);
                    }
                    type = type || &#39;&#39;;
                    this.giveStuffPopup.titleLoc = titleLoc;
                    this.giveStuffPopup.eggs = eggs;
                    this.giveStuffPopup.items = items;
                    this.giveStuffPopup.type = type;
                    this.$refs.giveStuffPopup.$refs.giveStuffPopup.show();
                    if (callback) callback();
                },

                showPurchasesPopup: function(types, callback) {
                    this.$refs.notifiContent.resetState()
                    this.ui.notification = types;
                    this.$refs.notificationPopup.show();
                    if (callback) callback();
                },

                showChallengesAutoClaimed(chlgs) {
                    // [ { id: 11, status: &#39;claimed&#39; } ]
                    this.showPurchasesPopup({
                        challenges: chlgs
                    });

                },

                showEggOrgPopup() {
                    this.giveStuffPopup.eggOrg = true;
                    this.showGiveStuffPopup(&#39;p_give_stuff_title&#39;);
                },

                showShareLinkPopup: function(url, gameCode) {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.game.shareLinkPopup.url = url;
                    this.game.shareLinkPopup.code = gameCode;
                    BAWK.play(&#39;ui_popupopen&#39;);
                    this.$refs.gameScreen.$refs.shareLinkPopup.show();
                },

                hideShareLinkPopup() {
                    if (!this.$refs.gameScreen.$refs.shareLinkPopup.isShowing) {
                        return;
                    }
                    this.$refs.gameScreen.$refs.shareLinkPopup.hide();
                },

                showJoinPrivateGamePopup: function(code) {
                    this.$refs.homeScreen.$refs.playPanel.showJoinPrivateGamePopup(code, true);
                },

                showCreateGamePopup: function(code) {

                    if (this.screen !== this.screens.home) {
                        this.switchToHomeUi();
                    }

                    this.$refs.homeScreen.$refs.playPanel.showJoinPrivateGamePopup();
                },

                showCreateGamePopupCrazyGames() {
                    this.$refs.homeScreen.$refs.playPanel.onJoinPrivateGameClickCrazyGames();
                },

                showPrivateGamePopup() {
                    this.$refs.homeScreen.$refs.playPanel.$refs.createPrivateGamePopup.toggle();
                },

                showBannedPopup: function(expire) {
                    this.bannedPopup.expire = expire;
                    //this.ui.notification = types;
                    this.$refs.bannedPopup.show();
                    //if (callback) callback();
                },


                onBackClick() {
                    this.$refs.mainAside.style.zIndex = 2;
                    this.$refs.equipScreen.onBackClick();
                },

                switchToHomeUi: function() {
                    this.showScreen = this.screens.home;
                    this.$refs.equipScreen.removeKeyboardStampPositionHandlers();
                    this.equip.displayAdHeaderRefresh = true;
                    BAWK.play(&#39;ui_toggletab&#39;);
                    vueApp.showTitleScreenAd();
                    this.gameUiRemoveClassForNoScroll();
                    extern.resetPaperDoll();

                    this.$nextTick(() =&gt; {
                        if (this.chatInitiatesLogin) {
                            this.chatInitiatesLogin = false;
                            this.onSignInClicked();
                        }

                        if (this.leaveGameSignoutInitiated) {
                            this.leaveGameSignoutInitiated = false;
                            this.onSignOutClicked();
                        }
                    });
                },

                switchToProfileUi: function() {
                    this.showScreen = this.screens.profile;
                    this.$refs.equipScreen.removeKeyboardStampPositionHandlers();
                    this.equip.displayAdHeaderRefresh = true;
                    this.hideGameMenu();
                    BAWK.play(&#39;ui_toggletab&#39;);
                    vueApp.showTitleScreenAd();
                    this.gameUiRemoveClassForNoScroll();
                },

                openEquipSwitchTo: async function(mode) {
                    let hasMeshesLoaded = true;

                    if (mode === this.equipMode.shop) {
                        hasMeshesLoaded = await extern.loadAllMeshesOnDemand();
                    }

                    if (hasMeshesLoaded) {
                        this.showScreen = this.screens.equip;
                        this.$refs.equipScreen.setup();
                        this.$refs.equipScreen.switchTo(mode);

                        if (extern.inGame) {
                            this.hideGameMenu();
                            extern.openEquipInGame();
                        } else {
                            vueApp.hideTitleScreenAd();
                        }
                    }
                },

                switchToGameUi: function() {
                    this.showScreen = this.screens.game;
                    this.$refs.equipScreen.removeKeyboardStampPositionHandlers();
                    this.equip.displayAdHeaderRefresh = true;
                },

                gameUiAddClassForNoScroll() {
                    let html = document.getElementsByTagName(&#34;html&#34;)[0];
                    html.classList.add(&#39;noScrollIngame&#39;);
                },

                gameUiRemoveClassForNoScroll() {
                    let html = document.getElementsByTagName(&#34;html&#34;)[0];
                    html.classList.remove(&#39;noScrollIngame&#39;);
                },

                switchToGameUiQuickPlay() {
                    this.showScreen = this.screens.game;
                    this.ui.showCornerButtons = false;
                    vueApp.hideTitleScreenAd();
                    this.gameUiAddClassForNoScroll();
                },

                showGameMenu: function() {
                    if (this.abTestInventory.enabled) {
                        return;
                    }
                    this.$refs.gameScreen.showGameMenu();
                },

                hideGameMenu: function() {
                    this.$refs.gameScreen.hideGameMenu();
                },

                onMiniGameCompleted: function() {
                    this.$refs.homeScreen.onMiniGameCompleted();
                },

                setShellColor: function(colorIdx) {
                    this.equip.colorIdx = colorIdx;
                },

                setAccountUpgraded: function(upgraded, endDate) {
                    this.isUpgraded = upgraded;
                    this.equip.extraColorsLocked = !this.isUpgraded;
                    this.nugStart = endDate;

                },

                setDarkOverlay: function(visible, overlayClass) {
                    this.$refs.darkOverlay.show = visible;
                    this.$refs.darkOverlay.overlayClass = overlayClass;
                },

                setLightOverlay: function(visible, overlayClass) {
                    this.$refs.lightOverlay.show = visible;
                    this.$refs.darkOverlay.overlayClass = overlayClass;
                },

                authCompleted: function() {
                    this.accountSettled = true;
                    if (vueApp.$refs.firebaseSignInPopup.isShowing) this.hideFirebaseSignIn();
                },

                runProductCheck() {
                    this.checkProducts++;
                },

                showItemOnEquipScreen: function(item, mode) {
                    this.openEquipSwitchTo(mode);
                    this.$refs.equipScreen.autoSelectItem(item);
                },

                showItem: function(item) {
                    vueApp.openEquipSwitchTo(this.equipMode.inventory);
                    this.$refs.equipScreen.autoSelectItem(item);
                },
                autoSelectItem(item) {
                    this.$refs.equipScreen.autoSelectItem(item);
                },

                showTaggedItemsOnEquipScreen: function(tag) {
                    this.openEquipSwitchTo(this.equipMode.featured);
                    this.$refs.equipScreen.showTaggedItems(tag);
                },

                useHouseAdSmall: function(smallHouseAd) {
                    this.ui.houseAds.small = smallHouseAd;
                },

                useHouseAdBig: function(bigHouseAd) {
                    this.ui.houseAds.big = bigHouseAd;
                },

                denyAnonUser: function() {
                    ga(&#39;send&#39;, &#39;event&#39;, vueApp.googleAnalytics.cat.playerStats, vueApp.googleAnalytics.action.denyAnonUserPopup);
                    if (extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.$refs.noAnonPopup.show();
                },

                showGdprNotification: function() {
                    this.$refs.gdpr.show();
                },

                showPrivacyPopup: function() {
                    this.hideSettingsPopup();
                    this.$refs.privacyPopup.show();
                },

                hidePrivacyPopup: function() {
                    this.$refs.privacyPopup.hide();
                    this.showSettingsPopup();
                },

                ofAgeChanged: function() {
                    extern.setOfAge(this.isOfAge);
                    BAWK.play(&#39;ui_onchange&#39;);
                },

                targetedAdsChanged: function() {
                    extern.setTargetedAds(this.showTargetedAds);
                    BAWK.play(&#39;ui_onchange&#39;);
                },

                setPrivacySettings: function(ofAge, targetedAds) {
                    this.isOfAge = ofAge;
                    this.showTargetedAds = targetedAds;
                },

                gameJoined: function(gameType, team) {
                    this.game.gameType = gameType;
                    this.setTeam(team);
                },

                setTeam: function(team) {
                    if (hasValue(team)) {
                        this.game.team = team;
                    }
                },

                showGoldChickenPopup: function() {
                    this.$refs.goldChickenPopup.show();
                },

                hideGoldChickenPopup: function() {
                    this.$refs.goldChickenPopup.hide();
                },

                showChicknWinnerPopup: function() {
                    this.$refs.chicknWinner.show();
                    this.$refs.nuggetDisplayAd.show();
                    this.isBuyNugget = true;
                },

                hideChicknWinnerPopup: function() {
                    this.$refs.chicknWinner.hide();
                    this.$refs.chickenNugget.onGotWinner();
                    console.log(&#39;Hide nugget&#39;);
                },

                chicknWinnerIsReady() {
                    if (this.chw.limitReached) {
                        this.chwOnClick(true);
                        return;
                    }
                },

                chwAdBlockerDetected() {
                    this.chw.adBlockDetect = true;
                },

                chicknWinnerError(val) {
                    this.isChicknWinnerError = val;
                },

                chicknWinnerDailyLimit() {
                    this.chicknWinnerDailyLimitReached = true;
                },

                loadNuggetVideo() {
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.chwDoIncentivized();
                    BAWK.play(&#39;ui_playconfirm&#39;);
                },

                chwDoIncentivized() {
                    extern.chwTryPlay();
                },

                chwOnClick(val) {
                    this.chw.onClick = val;
                },

                chwMiniGameCompleted(val) {
                    this.$refs.nuggetDisplayAd.destroyAd();
                    this.chwMiniGameComplete = val;
                    this.chw.nuggetReset += 1;
                    setTimeout(() =&gt; this.chwOnClick(false), 1000);
                },

                onChwPopupClosed() {
                    this.$refs.chickenNugget.resetGame();
                },

                placeBannerAdTagForNugget: function(tagEl) {
                    this.$refs.chickenNugget.placeBannerAdTag(tagEl);
                },

                useSpecialItemsTag: function(tag) {
                    this.equip.specialItemsTag = tag;
                    this.equip.showSpecialItems = true;
                },

                disableSpecialItems: function() {
                    this.equip.showSpecialItems = false;
                },

                setUiSettings: function(settings) {
                    this.settingsUi.settings = settings;
                    this.$refs.settings.setSettings(settings);
                },

                showPlayerActionsPopup: function(slot) {
                    if (this.showAdBlockerVideoAd) {
                        return;
                    }

                    this.playerActionsPopup = slot;
                    this.$refs.gameScreen.showPlayerActionsPopup();
                },
                onSignInCancelClicked: function() {
                    vueApp.$refs.firebaseSignInPopup.hide();
                    BAWK.play(&#39;ui_popupclose&#39;);
                    this.hideFirebaseSignInMsgChat();
                },
                anonWarningPopupCancel: function() {
                    let anonWarnConfrimed = localStore.getItem(&#39;anonWarningConfirmed&#39;);
                    this.urlParamSet = this.urlParams ? true : null;
                    this.shellShockUrlParamaterEvents();
                    ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.playerStats, this.googleAnalytics.action.anonymousPopupOpenAuto, this.googleAnalytics.label.understood);
                    return anonWarnConfrimed === null &amp;&amp; localStore.setItem(&#39;anonWarningConfirmed&#39;, true);
                },
                anonWarningPopupConfrim() {
                    let anonWarnConfrimed = localStore.getItem(&#39;anonWarningConfirmed&#39;);
                    anonWarnConfrimed === null &amp;&amp; localStore.setItem(&#39;anonWarningConfirmed&#39;, true);
                    ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.playerStats, &#39;Account egg bonus popup&#39;, this.googleAnalytics.label.signInClick);
                    extern.showSignInDialog();
                    this.urlParamSet = false;
                    vueApp.$refs.firebaseSignInPopup.show();
                },
                conditionalAnonWarningCall: function() {

                    if (!this.isAnonymous || this.abTestInventory.enabled) {
                        return;
                    }

                    // set eggTotal checks
                    let lastIdx = localStore.getItem(&#39;anonPopupLastIdx&#39;);
                    const allChecks = [100000, 90000, 80000, 70000, 60000, 50000, 40000, 30000, 20000, 10000, 1000, 100, 0];

                    // Need to remove the all the past values so all the checks to run with each screen change
                    lastIdx = lastIdx === null ? allChecks.length : lastIdx;
                    const checks = allChecks.filter((i, idx) =&gt; lastIdx &gt; idx);

                    // set localStore items to match the values in checks
                    const localItems = [];
                    checks.forEach((i, idx) =&gt; localItems.push(`anonPopup${i}`));

                    for (let i = 0; i &lt; localItems.length; i++) {
                        if (localStore.getItem(localItems[i]) === null) {
                            if (this.eggsEarnedBalance &gt;= checks[i]) {
                                this.showAttentionPopup();
                                ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.playerStats, &#39;Account egg bonus popup auto&#39;, checks[i]);
                                localStore.setItem(localItems[i], true);
                                localStore.setItem(&#39;anonPopupLastIdx&#39;, i);
                                break;
                            }
                        }
                    }
                },
                needMoreEggsPopupCall: function() {
                    ga(&#39;send&#39;, &#39;event&#39;, this.googleAnalytics.cat.itemShop, this.googleAnalytics.action.shopItemNeedMoreEggsPopup);
                    this.$refs.needMoreEggsPopup.show();
                },
                /**
                 * Not 100 % certain this should live in vue but here it is.
                 * Add the ability to use url paramaters to trigger events in the game.
                 * e.g. shellshock.io/?open=eggStore&amp;type=Hat&amp;item=1111 will open the spiderman hat item.
                 * Called in the extern closure under gameApp.js =&gt; afterGameReady()
                 */
                shellShockUrlParamaterEvents() {
                    // VUE next tick https://vuejs.org/v2/api/#Vue-nextTick
                    this.$nextTick(() =&gt; {
                        this.doSsUlrParams();
                    });
                },

                doSsUlrParams() {
                    if (!this.urlParams) {
                        return;
                    }

                    console.log(hasValue(this.isAnonymous));

                    if (hasValue(this.ui.houseAds.big)) {
                        this.urlParamSet = false;
                        return;
                    } else if (this.isAnonymous &amp;&amp; !hasValue(localStore.getItem(&#39;anonWarningConfirmed&#39;))) {
                        this.urlParamSet = false;
                        console.log(&#39;Almost there!&#39;);
                        this.conditionalAnonWarningCall();
                        return;
                    }

                    console.log(&#39;Passed Popup gate&#39;);

                    switch (this.urlParams) {
                        case &#39;eggStore&#39;:
                            // Opens the purchase egg store popup
                            this.showEggStorePopup();
                            break;
                        case &#39;goldenChicken&#39;:
                            // Opens the golden chicken popup
                            vueApp.$refs.goldChickenPopup.show();
                            break;
                        case &#39;twoTimesTheEggs&#39;:
                            // Opens the chicken nugget video
                            extern.chwTryPlay();
                            BAWK.play(&#39;ui_playconfirm&#39;);
                            break;
                        case &#39;itemShop&#39;:
                            // Opens shop options
                            // /?open=itemShop
                            // /?open=itemShop&amp;type=Hat/Stamp/Primary/Secondary/Grenade/Premium/Tagged 
                            // /?open=itemShop&amp;gunClass=Soldier/Soldier/Scrambler/Ranger/Eggsploder/Whipper/Crackshot/TriHard
                            // /?open=itemShop&amp;item=1111 opens hat store and then selects item
                            // /?open=itemShop&amp;item=1111&amp;openBuyNow=1 opens hat store, selects item and then opens items popup
                            this.openEquipSwitchTo(this.equipMode.shop);
                            this.eggStoreUrlParams();
                            break;
                        case &#39;vipStore&#39;:
                            vueApp.showSubStorePopup();
                            break;
                        case &#39;redeem&#39;:
                            vueApp.openEquipSwitchTo(this.equipMode.inventory);
                            BAWK.play(&#39;ui_popupopen&#39;);
                            this.$refs.equipScreen.$refs.redeemCodePopup.show();
                            if (&#39;code&#39; in parsedUrl.query) this.equip.redeemCodePopup.code = parsedUrl.query.code;
                            break;
                        case &#39;faq&#39;:
                            this.showHelpPopup();
                            break;
                        case &#39;taggedItems&#39;:
                            this.openSpecialTagItemsTab();
                            break;
                        case &#39;privateGame&#39;:
                            this.showPrivateGamePopup();
                            break;
                        case &#39;kotcInstruction&#39;:
                            // this.showKotcInstrucPopup();
                            break;
                        default:
                            null;
                    };
                },
                eggStoreUrlParams() {
                    if (parsedUrl.query.hasOwnProperty(&#39;item&#39;)) {
                        this.urlParamShowItem(parseInt(parsedUrl.query.item), parsedUrl.query.hasOwnProperty(&#39;openBuyNow&#39;));
                        return;
                    } else if (parsedUrl.query.hasOwnProperty(&#39;type&#39;)) {
                        this.urlParamShowItemType(parsedUrl.query.type);
                        return;
                    } else if (parsedUrl.query.hasOwnProperty(&#39;gunClass&#39;) &amp;&amp; CharClass.hasOwnProperty(parsedUrl.query.gunClass)) {
                        this.urlParamShowClass(parsedUrl.query.gunClass)
                        return;
                    }
                },
                urlParamShowItem(itemId, openBuy) {
                    let item = extern.catalog.findItemById(itemId);
                    if (!item.is_available) {
                        vueApp.showGenericPopup(&#34;uh_oh&#34;, &#34;no_anon_title&#34;, &#34;ok&#34;);
                        return;
                    }
                    this.$nextTick().then(() =&gt; {
                        this.$refs.equipScreen.autoSelectItem(item);
                        if (openBuy) {
                            vueApp.$refs.equipScreen.onBuyItemClicked();
                        }
                    })
                },
                urlParamShowItemType(type) {
                    if (ItemType.hasOwnProperty(type)) {
                        this.$nextTick().then(() =&gt; this.equipSwitchTo(&#39;item&#39;, ItemType[parsedUrl.query.type]))
                    } else if (type === &#39;Premium&#39; || type === &#39;Tagged&#39;) {
                        this.$nextTick().then(() =&gt; this.openEquipSwitchTo(this.equipMode.featured));
                    }
                },
                urlParamShowClass(gClass) {
                    if (!CharClass.hasOwnProperty(gClass)) return;
                    this.$nextTick().then(() =&gt; {
                        this.equipSwitchTo(&#39;item&#39;, ItemType[&#39;Primary&#39;])
                        this.$nextTick().then(() =&gt; {
                            this.openEquipSwitchTo(this.equipMode.skins);
                            this.$nextTick().then(() =&gt; {
                                this.equipSwitchTo(&#39;class&#39;, CharClass[gClass])
                            })
                        })
                    })
                },
                equipSwitchTo(type, val) {
                    switch (type) {
                        case &#39;item&#39;:
                            vueApp.$refs.equipScreen.switchItemType(val);
                            break;
                        case &#39;class&#39;:
                            vueApp.$refs.equipScreen.$refs.weapon_select.selectClass(val);
                            break;
                        default:
                            break;
                    }
                },
                openSpecialTagItemsTab() {
                    let tag = parsedUrl.query.tag ? parsedUrl.query.tag : null;
                    vueApp.showTaggedItemsOnEquipScreen(tag);
                },

                delayInGamePlayButtons() {
                    vueApp.$refs.gameScreen.delayGameMenuPlayButtons();
                },
                displayAdEventObject(event) {
                    let object = event;
                    this.displayAdObject = object.size[0];
                },
                //Call/hide display ads
                hideRespawnDisplayAd() {
                    if (extern.productBlockAds) {
                        return;
                    }
                    if (this.showScreen === this.screens.game) {
                        this.$refs.gameScreen.$refs.headerDisplayAdGame.destroyAd();
                        this.$refs.gameScreen.$refs.respawnDisplayAd.destroyAd();
                        this.$refs.gameScreen.$refs.respawnTwoDisplayAd.destroyAd();
                    }
                },
                showRespawnDisplayAd() {
                    if (extern.productBlockAds || extern.abTestNoobNoAdsBlocks) {
                        return;
                    }
                    if (!this.ui.tutorialPopup.show || !this.faction.showPopup || !this.$refs.factionPopup.isShowing) {
                        if (!crazyGamesActive) {
                            this.$refs.gameScreen.$refs.headerDisplayAdGame.show();
                        }
                        this.$refs.gameScreen.$refs.respawnDisplayAd.show();
                        this.$refs.gameScreen.$refs.respawnTwoDisplayAd.show();
                    }
                },
                toggleRespawnDisplayAd(val) {
                    if (extern.productBlockAds || extern.abTestNoobNoAdsBlocks) {
                        return;
                    }
                    if (this.showScreen === this.screens.game) {
                        this.$refs.gameScreen.$refs.headerDisplayAdGame.toggleAd(val);
                        this.$refs.gameScreen.$refs.respawnDisplayAd.toggleAd(val);
                        this.$refs.gameScreen.$refs.respawnTwoDisplayAd.toggleAd(val);

                    }
                },
                setDisplayAdVisibility(val) {
                    if (extern.productBlockAds) {
                        return;
                    }
                    this.$refs.gameScreen.$refs.respawnDisplayAd.setWindowVisibility(val);
                    this.$refs.gameScreen.$refs.respawnTwoDisplayAd.setWindowVisibility(val);
                    this.$refs.homeScreen.$refs.titleScreenDisplayAd.setWindowVisibility(val);
                    this.$refs.homeScreen.$refs.headerDisplayAd.setWindowVisibility(val);

                },
                hideLoadingScreenAd() {
                    this.$refs.spinnerOverlay.$refs.loadingScreenDisplayAd.destroyAd()
                },
                showLoadingScreenAd() {
                    if (extern.productBlockAds) {
                        return;
                    }

                    if (this.ui.tutorialPopup.show) {
                        return;
                    }

                    this.$refs.spinnerOverlay.$refs.loadingScreenDisplayAd.show();
                    // this.histPushState({game: 3}, &#39;Shellshockers Loading display ad&#39;, &#39;?loadingAd=true&#39;);
                },
                showTitleScreenAd() {

                    if (extern.productBlockAds) {
                        return;
                    }

                    this.$refs.homeScreen.$refs.titleScreenDisplayAd.show();

                    if (!crazyGamesActive) {
                        vueApp.showHeaderAd();
                    } else {
                        this.$nextTick(() =&gt; {
                            crazySdk.requestResponsiveBanner(&#39;shellshockers_titlescreen_wrap&#39;);
                        });
                    }
                },

                // setTitleScreenAdVisibility(val) {
                // 	if (extern.productBlockAds &amp;&amp; this.showScreen === this.screens.game) {
                // 		return;
                // 	}
                // 	this.$refs.homeScreen.$refs.titleScreenDisplayAd.setWindowVisibility(val);
                // 	this.$refs.homeScreen.$refs.headerDisplayAd.setWindowVisibility(val);
                // },
                hideTitleScreenAd(forceHide) {
                    if (extern.productBlockAds &amp;&amp; !forceHide) {
                        return;
                    }
                    this.$refs.homeScreen.$refs.titleScreenDisplayAd.destroyAd(forceHide);
                },
                hideHomeScreenAds(forceHide) {
                    if (extern.productBlockAds) {
                        return;
                    }
                    this.hideTitleScreenAd(forceHide);
                    this.hideHeaderAd(forceHide);
                },
                showHeaderAd() {
                    if (extern.productBlockAds || extern.abTestNoobNoAdsBlocks) {
                        return;
                    }

                    if (!crazyGamesActive) {
                        this.$nextTick().then(() =&gt; {
                            this.$refs.homeScreen.$refs.headerDisplayAd.show();
                        })
                    }

                },
                hideHeaderAd(forceHide) {
                    if (extern.productBlockAds &amp;&amp; !forceHide) {
                        return;
                    }
                    this.$refs.homeScreen.$refs.headerDisplayAd.destroyAd(forceHide);
                },
                toggleTitleScreenAd(val) {
                    if (extern.productBlockAds || this.showScreen === this.screens.game || extern.abTestNoobNoAdsBlocks) {
                        return;
                    }

                    if (this.showScreen !== this.screens.equip) {
                        this.$refs.homeScreen.$refs.titleScreenDisplayAd.toggleAd(val);
                    }

                    this.$refs.homeScreen.$refs.headerDisplayAd.toggleAd(val);
                },
                scrollToTop() {
                    let position =
                        document.body.scrollTop || document.documentElement.scrollTop,
                        scrollAnimation;
                    if (position) {
                        window.scrollBy(0, -Math.max(1, Math.floor(position / 10)));
                        scrollAnimation = setTimeout(this.scrollToTop, 10);
                    } else clearTimeout(scrollAnimation);
                },
                externPlayObject(playType, gameType, playerName, mapIdx, joinCode) {
                    extern.play({
                        playType,
                        gameType,
                        playerName,
                        mapIdx,
                        joinCode
                    });
                },
                pleaseWaitPopup() {
                    vueApp.showGenericPopup(&#34;signin_auth_title&#34;, &#34;signin_auth_msg&#34;);
                },
                isPlayingPoki() {
                    this.isPoki = true;
                    this.ready = true;
                    return;
                },
                histPushState(obj, title, param) {
                    return history.pushState(obj, title, param);
                },
                disablePlayButton(val) {
                    const playBtns = document.querySelectorAll(&#39;.is-for-play&#39;);
                    playBtns.forEach(btn =&gt; btn.disabled = val);
                    this.playClicked = val;
                    // document.querySelector(&#39;.play-button&#39;).disabled = val;
                },
                disableRespawnButton(val) {
                    this.game.disableRespawn = val;
                },
                disaplyAdEventObject(event) {
                    this.displayAdObject = event.size === null ? null : event.size[0];
                },
                adBlockerPopupToggle() {
                    return vueApp.$refs.adBlockerPopup.toggle();
                },
                // musicPlayOnce() {
                //     return setTimeout(() =&gt; this.$refs.gameScreen.$refs.gameScreenMusic.playOnce(), 2000);
                // },
                // musicPause() {
                //     this.$refs.gameScreen.$refs.gameScreenMusic.pause();
                // },
                musicVolumeControl(value) {
                    return;
                    this.settingsUi.adjusters.music[0].value = Number(value);
                    this.$refs.gameScreen.$refs.gameScreenMusic.loadVolume();
                },
                toggleMusic() {
                    this.$refs.gameScreen.$refs.gameScreenMusic.toggleMusic();
                },
                musicWidget(val) {
                    this.music.isMusic = val;
                },
                fetchSponsors() {
                    fetch(this.music.musicJson)
                        .then((response) =&gt; response.json())
                        .then((sponsors) =&gt; this.music.sponsors = sponsors)
                        .catch((error) =&gt; console.log(&#39;Sponsors fetch error&#39;, error));
                },
                pwaPopup() {
                    return this.$refs.pwaPopup.show();
                },
                pwaBtnClick() {
                    // Track the click
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;pwa&#39;, &#39;button&#39;, &#39;click&#39;);
                    //close popup
                    this.$refs.pwaPopup.hide();
                    // Get the event
                    this.pwaDeferEvent = extern.getPwaEvent;

                    if (!this.pwaDeferEvent) {
                        return;
                    }
                    this.pwaDeferEvent.prompt();

                    this.pwaDeferEvent.userChoice
                        .then((choiceResult) =&gt; {
                            if (choiceResult.outcome === &#39;accepted&#39;) {
                                console.log(&#39;User accepted the A2HS prompt&#39;);
                            } else {
                                console.log(&#39;User dismissed the A2HS prompt&#39;);
                            }
                            ga(&#39;send&#39;, &#39;event&#39;, &#39;pwa&#39;, &#39;a2hs&#39;, choiceResult.outcome);
                            this.pwaDeferEvent = null;
                        });

                    this.pwaDeferEvent = &#39;&#39;;
                },
                signOut() {
                    this.isUpgraded = false;
                    this.equip.extraColorsLocked = true;
                    this.upgradeName = &#39;&#39;;
                    this.isSubscriber = false;
                    this.photoUrl = null;
                },
                mediaTabsStartRotate() {
                    const mediaTabs = this.$refs?.homeScreen?.$refs?.mediaTabs;

                    if (mediaTabs &amp;&amp; typeof mediaTabs.autoRotateTabs === &#39;function&#39;) {
                        mediaTabs.autoRotateTabs();
                    }
                },

                mediaTabsCancelRotate() {

                    const mediaTabs = this.$refs?.homeScreen?.$refs?.mediaTabs;

                    if (mediaTabs &amp;&amp; typeof mediaTabs.autoRotateTabs === &#39;function&#39;) {
                        mediaTabs.cancelRotate(true);
                    }
                },

                stopClicksFAdBlocker(e) {
                    e.stopPropagation();
                    e.preventDefault();
                },
                showAdBlockerVideo() {
                    document.addEventListener(&#39;click&#39;, this.stopClicksFAdBlocker, true);
                    this.bannerHouseAd = extern.getHouseAd(&#39;bigBanner&#39;);
                    this.showAdBlockerVideoAd = true;
                    if (!extern.inGame) {
                        this.hideGameMenu();
                    }
                    this.$refs.adBlockerVideo.show();
                },
                hideAdBlockerVideo() {
                    document.removeEventListener(&#34;click&#34;, this.stopClicksFAdBlocker, true);
                    this.$refs.adBlockerVideo.hide();
                    if (extern.inGame) {
                        this.showGameMenu();
                    }
                    this.bannerHouseAd = {};
                    this.showAdBlockerVideoAd = false;


                },
                // showKotcInstrucPopup() {
                // 	this.$refs.kotcInstrucPopup.show();
                // },
                // kotcInstrucPopupHide() {
                // 	this.$refs.kotcInstrucPopup.hide();
                // },
                onClickPlayKotcNow() {
                    return;
                    // this.externPlayObject(vueData.playTypes.joinPublic, 3, this.playerName, &#39;&#39;, &#39;&#39;);
                    // this.kotcInstrucPopupHide();
                },
                onVipHelpClosed() {
                    this.onSharedPopupClosed();
                    this.showSubStorePopup();
                },
                getLocLang(val) {
                    let data = this.loc,
                        langSetup = {};
                    if (val) data = val;

                    const newLoc = Object.entries(data).filter(item =&gt; item[0].includes(&#39;locLang&#39;)).forEach(lang =&gt; langSetup[lang[0].split(&#39;_&#39;).pop(&#39;&#39;).split(&#34;-&#34;).pop(&#39;&#39;)] = lang[1]);
                    this.$nextTick(() =&gt; {
                        this.locLanguage = langSetup
                    });
                },
                onClickTwitchDropsMore() {
                    window.open(dynamicContentPrefix + &#39;twitch&#39;);
                    this.onGiveStuffComplete();
                },
                onPremiumItemsClicked() {
                    this.openEquipSwitchTo(this.equipMode.shop);
                    this.$refs.equipScreen.onPremiumItemsClicked();
                },
                useTags(val) {
                    this.ui.socialMedia.selected = val.socialMedia;
                    this.ui.premiumFeaturedTag = val.premFeat;
                },
                onAccountDelectionConfirmed() {
                    this.$refs.help.onAccountDelectionConfirmed();
                },
                showDeleteAccoutApprovalPopup() {
                    this.$refs.deleteAccountApprovalPopup.show();
                },
                resetFeedbackType() {
                    this.feedbackSelected = 0;
                },
                playIncentivizedAd(e) {

                    const {
                        adBlockDetect,
                        ready,
                        limitReached,
                        onClick
                    } = this.chw;
                    const {
                        inGame
                    } = extern;

                    if (onClick) {
                        return;
                    }

                    if (this.showAdBlockerVideoAd || adBlockDetect || (!ready &amp;&amp; !limitReached)) {
                        return;
                    }

                    this.chwOnClick(true);

                    const action = limitReached ? &#39;Reset&#39; : &#39;Free eggs btn&#39;;
                    const btnClick = inGame ? &#39;click-in-game&#39; : &#39;click-home&#39;;

                    if (limitReached) {
                        extern.chwResetWithEggs();
                    } else {
                        if (inGame) {
                            this.playChwIngame();
                        }
                        this.loadNuggetVideo();
                    }

                    // Track the event using Google Analytics
                    ga(&#39;send&#39;, &#39;event&#39;, &#39;Chickn Winner&#39;, action, btnClick);
                },
                playChwIngame() {
                    vueApp.hideGameMenu();
                    vueApp.disableRespawnButton(true);
                },
                chwStopCycle() {
                    if (this.chwHomeTimer) {
                        clearInterval(this.chwHomeTimer);
                        this.chwHomeTimer = &#39;&#39;;
                        this.chwHomeEl.classList.remove(&#39;.active&#39;);
                    }
                },
                chwShowCycle() {
                    this.chwHomeEl = document.querySelector(&#39;.chw-home-timer&#39;);
                    if (this.chwHomeEl) {
                        this.chwHomeTimer = setInterval(() =&gt; {
                            this.chwHomeEl.classList.toggle(&#39;active&#39;);
                        }, this.chwActiveTimer);
                    }
                },

                // onHomeClicked() {
                // 	this.$refs.gameScreen.onHomeClicked();
                // },
                setInGame(val) {
                    this.game.on = val;
                },
                setPause(val) {
                    this.game.isPaused = val;
                },
                onHomeClicked: function() {
                    BAWK.play(&#39;ui_click&#39;);
                    this.hideRespawnDisplayAd();
                    this.$refs.leaveGameConfirmPopup.show();
                },
                onLeaveGameConfirmedSignIn() {
                    this.chatInitiatesLogin = true;
                    this.onLeaveGameConfirm();
                },

                onLeaveGameConfirm() {
                    // this.isTwitchLive();
                    this.$refs.gameScreen.onLeaveGameConfirm();
                },

                onLeaveGameConfirmedSignOut: function() {
                    this.leaveGameSignoutInitiated = true;
                    this.onLeaveGameConfirm();
                },
                onLeaveGameCancel: function() {
                    this.$refs.gameScreen.onLeaveGameCancel();
                },

                leaveGame: function() {
                    this.$refs.gameScreen.leaveGame();
                },
                statsLoading() {
                    if (!extern.inGame) {
                        this.ui.game.stats.loading = false;
                        return;
                    }
                    this.ui.game.stats.loading = this.ui.game.stats.loading ? false : true;
                },
                onSignInClicked() {
                    BAWK.play(&#39;ui_playconfirm&#39;);
                    this.$refs.homeScreen.onSignInClicked();
                },
                onSignOutClicked() {
                    BAWK.play(&#39;ui_reset&#39;);
                    this.$refs.homeScreen.onSignOutClicked();
                },
                showNuggyPopup() {
                    if (this.chw.ready &amp;&amp; this.firebaseId !== null) {
                        return this.playIncentivizedAd()
                    }
                    this.showChicknWinnerPopup();
                },
                openUnblocked() {
                    // if (crazyGamesActive) {
                    // 	window.open(&#39;https://scrambled.world/unblocked&#39;);
                    // }
                    // else {
                    // }
                    window.open(&#39;unblocked&#39;);
                },
                onGameTypeChanged(val) {
                    this.currentGameType = val;
                },
                onGamePauseUi() {
                    this.$refs.gameScreen.pauseUi();
                },
                onChwSignInClicked() {
                    this.chwSignInClicked = true
                },
                setUiGaugeMeterData(data) {
                    this.$refs.homeScreen.$refs.gaugeMeter.setGaugeMeterData(data)
                },
                fbTransferAccountSignin() {
                    this.hideFirebaseSignIn();
                    BAWK.play(&#39;ui_popupopen&#39;);
                    this.$refs.fbTransferAccountSignin.show();
                },

                setPreviousScreen(screen) {
                    this.previousScreen = screen;
                },

                onTutorialPopupClick() {
                    this.ui.tutorialPopup.show = true;

                    if (!extern.inGame) {
                        this.hideLoadingScreenAd();
                    }

                    this.$refs.tutorialPopup.show();
                },

                onTutorialClosed() {
                    this.ui.tutorialPopup.show = false;

                    // this.showFactionActivatedPopup();
                    this.afterTutorialFactionPopupClosed();
                },

                afterTutorialFactionPopupClosed() {
                    if (!extern.inGame) {
                        this.showLoadingScreenAd();
                    } else {
                        setTimeout(() =&gt; {
                            this.showRespawnDisplayAd();
                        }, 100);
                    }
                },

                onGameOptionsClick() {
                    this.$refs.gameOptionsPopup.onShow();
                    this.$refs.gameOptionsPopup.$refs.gameOptionsPopup.show();
                },

                onGameOptionsClosed() {
                    this.$refs.gameScreen.$forceUpdate();
                    this.gameOptionsPopup.changesMade = false;
                    setTimeout(() =&gt; {
                        this.showRespawnDisplayAd();
                    }, 100);
                },

                resetGameOptions() {
                    extern.GameOptions.init();
                },

                openDevXsollaPopup(sku, sub) {
                    this.$refs.xsollaPopup.show();
                    this.dev.store.sku = sku;
                },

                xsollaPopupConfrim() {
                    localStore.setItem(&#39;xsollaPopupConfrim&#39;, true);
                    extern.buyProductForMoney(this.dev.store.sku);
                    this.xsollaPopupCancel();
                },

                xsollaPopupCancel() {
                    this.dev.store.sku = null;
                },
                changelogSetup(log) {
                    const content = [];
                    log.content.forEach((item, idx) =&gt; {
                        if (Array.isArray(item)) {
                            if (item[0]) {
                                content.push(item[0]);
                            } else {
                                return;
                            }
                        } else {
                            content.push(item);
                        }
                    });

                    return content;
                },
                changelogContent() {
                    const log = extern.changelogData[0];
                    const content = this.changelogSetup(log);

                    log.content.length = 0;
                    log.content.push(...content);

                    return [log];

                },

                onOpenBundle(itemsOpen) {
                    if (itemsOpen === 0) {
                        this.onCloseNotification();
                    }
                    this.openEquipSwitchTo(this.equipMode.shop);
                },

                onCloseNotification() {
                    this.$refs.notificationPopup.hide();

                    if (this.faction.showPopup) {
                        this.showFactionActivatedPopup();
                    }
                },
                timeFormat(time) {
                    return time.toString().length &lt; 2 ? `0${time}` : `${time}`;
                },

                chwUiTimerUpdate(hours, minutes, seconds, progress, ready, limitReached, count, resets) {
                    this.chw.hours = hours ? this.timeFormat(hours) : 0;
                    this.chw.minutes = this.timeFormat(minutes);
                    this.chw.seconds = this.timeFormat(seconds);
                    this.chw.progress = progress;
                    this.chw.ready = ready;
                    this.chw.limitReached = limitReached;
                    this.chw.winnerCounter = count;
                    this.chw.resets = resets;
                },
                chwHomeForceReset() {
                    this.chwOnClick(false);
                    this.$refs.chwHomeScreen.$forceUpdate();
                },
                getChwPlayAdText() {
                    return this.playAdText;
                },
                getChwRemainingMsg() {
                    return this.remainingMsg;
                },
                setGameDataUi(map) {
                    this.game.mapName = map;
                },
                killDeathMsg(msg) {
                    this.game.killDeathMsg.msgs.push(msg);
                    this.$refs.gameScreen.killDeathMsg();
                },
                challengeMsg(msg) {
                    // Add the new message
                    this.game.challengeMsg.msgs.push(msg);

                    // Remove duplicates: Convert the array to a Set and back to an array
                    this.game.challengeMsg.msgs = [...new Set(this.game.challengeMsg.msgs)];

                    // Proceed with displaying the message if not already showing
                    if (!this.game.challengeMsg.showing) {
                        this.$refs.gameScreen.challengeMsg();
                    }
                },
                ctsCapturedMsg(msg) {
                    this.game.ctsMsg.team = msg.team;
                    this.game.ctsMsg.msg = msg.msg;

                    this.$refs.gameScreen.ctsCapturedMsg();
                },

                shellStreakMsg(msg) {
                    if (msg.streak &gt; 1 &amp;&amp; (msg.streak &gt; this.game.streakMsg.count)) {
                        this.$refs.gameScreen.gameScreenStreakAction();
                    }
                    this.game.streakMsg.count = msg.streak;
                    this.game.streakMsg.msg = msg.msg;
                },

                bestStreakUpdate(streak) {
                    const hasInc = streak &gt; this.game.bestStreak.count ? true : false;
                    this.game.bestStreak.count = streak;
                    if (hasInc) {
                        this.$refs.gameScreen.bestStreakUpdate();
                    }

                },

                shellIngameNotification(item) {
                    this.game.ingameNotification.item = item;
                    this.$refs.gameScreen.ingameNotification();
                },

                onWelcomeBundlePopupShow() {
                    this.$refs.welcomeBundlePopup.show();
                },
                onWelcomeBundlePopupConfirm() {
                    this.$refs.welcomeBundlePopup.close();
                    if (!this.welcomeBundleInfoRequested) {
                        this.openEquipSwitchTo(this.equipMode.shop);
                    }
                    extern.buyProductForMoney(extern.getWelcomePassSku);
                },
                onWelcomeBundlePopupClosed() {
                    this.welcomeBundleInfoRequested = false;
                },
                showWelcomeBundleCtaInGame() {
                    this.$refs.gameScreen.showWelcomeBundleCta();
                },
                assetLoaded() {
                    this.ui.homeToGameProgressBar.loadedAssets++;
                    this.ui.homeToGameProgressBar.progressValue = (this.ui.homeToGameProgressBar.loadedAssets / this.ui.homeToGameProgressBar.totalAssets) * 100;

                    // Ensure it never exceeds 100%
                    if (this.ui.homeToGameProgressBar.progressValue &gt; 100) {
                        this.ui.homeToGameProgressBar.progressValue = 100;
                    }

                },
                assetSetup(totalAssets) {
                    this.ui.homeToGameProgressBar.totalAssets = totalAssets;
                },
                progressBarReset() {
                    this.ui.homeToGameProgressBar.loadedAssets = 0;
                    this.ui.homeToGameProgressBar.totalAssets = 0;
                    this.ui.homeToGameProgressBar.progressValue = 0;
                },
                isTwitchLive() {
                    // var now = new Date();
                    // // Target date and time in PST. Note: Month is 0-indexed (0 = January, 11 = December)
                    // var targetDate = new Date(Date.UTC(2025, 1, 19, 20, 0, 0)); // February 19, 2025 at 12:00 PM PST (UTC-7) converted to UTC
                    // this.ui.events.twitch = now &gt;= targetDate;
                    this.ui.events.twitch = true;
                },
                // eggOrgUpdateGameStats(stats) {
                // 	const gameLeaderboard = this.$parseJSON(stats);
                // 	if (!gameLeaderboard) return;
                // 	this.game.eggOrg.stats = gameLeaderboard;
                // },
                // eggOrgUpdateGlobalLeaderBoards(leaderboards) {
                // 	if (!leaderboards) {
                // 		return;
                // 	}
                // 	this.eggOrg.leaderboard = leaderboards;
                // },
                // onFactionPopupClosed() {
                // 	this.afterTutorialFactionPopupClosed();
                // 	const meter = document.getElementById(&#39;gauge-meter&#39;);
                // 	const popupMeter = document.getElementById(&#39;egg-org-meter-home&#39;);
                // 	popupMeter.appendChild(meter);
                // },
                // factionsEquipItem(itemId) {
                // 	this.hideFactionsPopup();
                // 	let item = extern.catalog.findItemById(this.faction.items[itemId]);
                // 	this.openEquipSwitchTo(this.equipMode.inventory);
                // 	this.$refs.equipScreen.autoSelectItem(item);
                // },
                // factionsPlayNowClicked() {
                // 	this.$refs.factionPopup.hide();
                // 	this.externPlayObject(vueData.playTypes.joinPublic, this.currentGameType, this.playerName, -1, &#39;&#39;);
                // 	BAWK.play(&#39;ui_playconfirm&#39;);
                // },
                // eggOrgCheckShowPopupInGame() {
                // 	if (this.faction.showPopup) {
                // 		setTimeout(() =&gt; {
                // 			this.showFactionActivatedPopup();
                // 		}, 500);
                // 	}
                // },

                // showFactionActivatedPopup() {
                // 	const popup = this.$refs.factionPopup;
                // 	if (popup.isShowing) return;

                // 	if (extern.inGame &amp;&amp; this.screen === this.screens.game) {
                // 		this.toggleRespawnDisplayAd(true);
                // 	}

                // 	BAWK.play(&#39;ui_popupopen&#39;);
                // 	this.faction.showPopup = false;
                // 	popup.show();

                // 	const meter = document.getElementById(&#39;gauge-meter&#39;);
                // 	const popupMeter = document.getElementById(&#39;egg-org-meter-popup&#39;);

                // 	if (meter &amp;&amp; popupMeter) {
                // 		popupMeter.appendChild(meter);
                // 	}
                // },

                // hideFactionsPopup() {
                // 	this.$refs.factionPopup.hide();
                // 	if (extern.inGame &amp;&amp; this.screen === this.screens.game) {
                // 		this.toggleRespawnDisplayAd(false);
                // 	}
                // },
                showCrazyGamesDelink() {
                    this.hideCrazyGamesUserManagementPopup();
                    this.$refs.crazyGamesDelink.show();
                },
                hideCrazyGamesDelink() {
                    this.$refs.crazyGamesDelink.hide();
                },
                onCrazyGamesDelink() {
                    // this.$refs.crazyGamesDelink.hide();
                    extern.handleCrazyGamesDelink();
                },
                showCrazyGamesUserManagementPopup() {
                    this.$refs.crazyGamesUserManagementPopup.show();
                },
                hideCrazyGamesUserManagementPopup() {
                    this.$refs.crazyGamesUserManagementPopup.hide();
                },
                onCrazyGamesAutoLink() {
                    this.$refs.crazyGamesAutoLinkPopup.hide();
                    extern.showCrazyGamesLinkPrompt();
                },
                showCrazyGamesAutoLinkPopup() {
                    this.crazyGamesUser = {
                        ...this.crazyGamesUser,
                        hasAccount: true
                    };
                    this.$refs.crazyGamesAutoLinkPopup.show();
                },
                showLinkCgAccountPopup() {
                    this.$refs.linkCgAccountPopup.show();
                },
                onLinkCgAccount() {
                    this.$refs.linkCgAccountPopup.hide();
                    extern.showCrazyGamesLinkPrompt();
                },
                onCGSignInClicked() {
                    this.$refs.crazyGamesUserManagementPopup.hide();
                    this.showHelpPopup();
                    // get player id and firebase id and add the feedback textara
                    const playerId = this.id;
                    const firebaseId = this.firebaseId;
                    this.$refs.help.openFeedbackTabWith(this.feedbackType.account.id);
                    console.log(&#39;onCGSignInClicked this.$refs.help.$refs.feedbackText &#39;, this.$refs.help.$refs.feedbackText);
                    this.$nextTick(() =&gt; {
                        const feedbackText = this.$refs.help?.$refs?.feedbackText;
                        if (feedbackText) {
                            feedbackText.value = `Player ID: ${playerId}\nFirebase ID: ${firebaseId}\nRequests to claim Crazy Games account.`;
                        } else {
                            console.warn(&#39;feedbackText ref not available yet.&#39;);
                        }
                    });
                },
                onFirebasePasswordReauth() {
                    this.$refs.firebasePasswordReauthPopup.hide();
                    extern.handleFirebasePasswordReauth();
                },
                firebasePasswordReauthPopup(email) {
                    this.setDarkOverlay(true);
                    this.$refs.reAuthPasswordShowPasswordModal.classList.remove(&#39;hideme&#39;);
                    this.reAuthPassword.firebasePasswordReauthEmail = email;
                    this.reAuthPassword.firebasePasswordReauthPassword = &#39;&#39;;
                    this.reAuthPassword.showPasswordModal = true;

                    return new Promise((resolve, reject) =&gt; {
                        this.reAuthPassword._pwResolve = resolve;
                        this.reAuthPassword._pwReject = reject;
                    });
                },

                confirmPassword() {
                    const pw = (this.reAuthPassword.firebasePasswordReauthPassword || &#39;&#39;).trim();

                    const resolve = this.reAuthPassword._pwResolve;
                    this.reAuthPassword._pwResolve = null;
                    this.reAuthPassword._pwReject = null;

                    this.setDarkOverlay(false);
                    this.$refs.reAuthPasswordShowPasswordModal.classList.add(&#39;hideme&#39;);
                    this.reAuthPassword.showPasswordModal = false;

                    if (typeof resolve === &#39;function&#39;) {
                        resolve(pw);
                    } else {
                        console.warn(&#39;Password resolver missing; modal not opened via popup method.&#39;);
                    }
                },

                cancelPassword() {
                    const reject = this.reAuthPassword._pwReject;
                    this.reAuthPassword._pwResolve = null;
                    this.reAuthPassword._pwReject = null;

                    this.setDarkOverlay(false);
                    this.$refs.reAuthPasswordShowPasswordModal.classList.add(&#39;hideme&#39;);
                    this.reAuthPassword.showPasswordModal = false;

                    if (typeof reject === &#39;function&#39;) {
                        reject(new Error(&#39;reauth_cancelled&#39;));
                    } else {
                        console.warn(&#39;Password rejecter missing; modal not opened via popup method.&#39;);
                    }
                },
                onCGLinkToAnotherAccountClicked() {
                    extern.cgLinkToAnotherAccount();
                    this.hideCrazyGamesUserManagementPopup();
                },
            },
            computed: {
                appClassObj() {
                    return {
                        &#39;playing-crazy-games&#39;: crazyGamesActive,
                        &#39;is-vip&#39;: this.isSubscriber &amp;&amp; this.isUpgraded ? true : false,
                        &#39;is-paused&#39;: this.game.isPaused &amp;&amp; this.game.on &amp;&amp; this.showScreen === this.screens.game,
                    }
                },

                appClassScreen() {
                    return getKeyByValue(this.screens, this.showScreen) + &#39;-screen&#39;;
                },

                isPhotoBooth() {
                    return !this.ui.showHomeEquipUi ? &#39;photo-booth&#39; : &#39;&#39;;
                },

                bigBannerAdLink() {
                    return this.bigHouseAd.link
                },
                bigBannerAdImg() {
                    return dynamicContentPrefix + `data/img/art/${this.bigHouseAd.id}${this.bigHouseAd.imageExt}`;
                },
                showEquipScreens() {
                    return this.showScreen === this.screens.equip || this.showScreen === this.screens.featured || this.showScreen === this.screens.gear || this.showScreen === this.screens.limited;
                },

                accountStatus() {
                    if (this.isAnonymous) {
                        return this.isAnonymous &amp;&amp; hasValue(this.firebaseId) ? &#39;anon&#39; : &#39;no-account&#39;;
                    } else {
                        return hasValue(this.firebaseId) ? &#39;signed-in&#39; : &#39;no-account&#39;;
                    }
                },
                chwClass() {
                    if (this.chw.limitReached || this.isChicknWinnerError) {
                        return &#39;grid-column-1-eq&#39;;
                    } else {
                        return &#39;grid-column-1-eq&#39;;
                    }
                },
                chwHomeTimerCls() {
                    if (this.chw.limitReached) {
                        return &#39;chw-home-screen-max-watched&#39;;
                    } else {
                        if (this.chw.ready) {
                            return &#39;is-ready active&#39;;
                        } else {
                            return &#39;not-ready&#39;;
                        }
                    }
                },
                chwChickSrc() {
                    if (this.chw.limitReached || this.isChicknWinnerError) {
                        // return &#39;img/chicken-nugget/chickLoop_daily_limit.svg&#39;;
                        return this.chw.imgs.limit;
                    } else {
                        if (!this.chw.ready) {
                            // return &#39;img/chicken-nugget/chickLoop_sleep.svg&#39;;
                            return this.chw.imgs.sleep;
                        } else {
                            // return &#39;img/chicken-nugget/chickLoop_speak.svg&#39;;
                            return this.chw.imgs.speak;
                        }
                    }
                },
                chwShowTimer() {
                    return true;
                    if (this.chw.limitReached) {
                        // this.chwStopCycle();
                        return false;
                    } else {
                        if (this.chw.ready) {
                            this.chwShowCycle();
                            return false;
                        } else {
                            // this.chwStopCycle();
                            return true;
                        }
                    }
                },
                remainingMsg() {
                    const {
                        adBlockDetect,
                        ready,
                        limitReached,
                        winnerCounter
                    } = this.chw;
                    const {
                        chw_error_text,
                        chw_cooldown_msg,
                        chw_ready_msg,
                        chw_time_until,
                        chw_daily_limit_msg
                    } = this.loc;

                    if (adBlockDetect) {
                        return &#39;Please turn off ad blocker&#39;;
                    }

                    if (this.isChicknWinnerError) {
                        return chw_error_text;
                    }

                    if (limitReached) {
                        return chw_daily_limit_msg;
                    }

                    if (ready) {
                        return winnerCounter &gt; 0 ? chw_cooldown_msg : chw_ready_msg;
                    }

                    return chw_time_until;
                },
                progressBarWrapClass() {
                    if (this.chw.ready &amp;&amp; !this.chw.limitReached) {
                        return &#39;chw-progress-bar-wrap-complete&#39;;
                    }
                },
                playAdText() {
                    if (this.chw.limitReached) {
                        return `&lt;i class=&#34;fas fa-egg&#34;&gt;&lt;/i&gt; ${200 * (this.chw.resets + 1)} Wake Now!`;
                    } else {
                        return this.loc.chw_btn_free_reward;
                    }
                },
                isEggStoreSaleItem() {
                    return this.eggStoreItems.some(item =&gt; item[&#39;salePrice&#39;] !== &#39;&#39;);
                },
                footerLinksFormat() {
                    let link = [&#39;https://badegg.io/?utm_source=shellshock_homepage&amp;utm_medium=referral&#39;, &#39;https://basketbros.io/?utm_source=shellshock_homepage&amp;utm_medium=referral&#39;, &#39;https://wrestlebros.io/?utm_source=shellshock_homepage&amp;utm_medium=referral&#39;, &#39;https://www.crazygames.com/game/bad-egg&#39;, &#39;https://www.crazygames.com/game/basketbros&#39;, &#39;https://www.crazygames.com/game/wrestle-bros&#39;];
                    if (!crazyGamesActive) {
                        return this.loc.home_desc_p7.format(link[0], link[1], link[2]);
                    } else {
                        return this.loc.home_desc_p7.format(link[3], link[4], link[5]);
                    }
                },
                anonPopupContent() {
                    return this.loc.account_anon_warn_paragraph_block.format(&#39;&lt;img src=&#34;img/svg/ico_goldenEgg.svg&#34; class=&#34;egg_icon&#34; /&gt;&#39;);
                },
                chwShowBtn() {
                    //chw.ready &amp;&amp; !chw.adBlockDetect&#34;
                    if ((this.chw.ready &amp;&amp; !this.chw.limitReached &amp;&amp; !this.chw.adBlockDetect) || (!this.chw.ready &amp;&amp; this.chw.limitReached &amp;&amp; !this.chw.adBlockDetect)) {
                        return true;
                    } else {
                        return false;

                    }
                },
                abTestText() {
                    const idx = Math.max(this.abTestInventory.currentIdx - 1, 0);
                    let setting = &#39;&#39;;

                    if (this.abTestInventory.clickables[idx].setting) {
                        setting = vueApp.settingsUi.controls.keyboard.game.find(item =&gt; item.id === this.abTestInventory.clickables[idx].setting).value;
                    }
                    let text = this.loc[this.abTestInventory.clickables[idx].locKey];

                    if (text) {
                        return this.loc[this.abTestInventory.clickables[idx].locKey].format(setting);
                    }
                },
                loginPopupWarningTxt() {
                    return this.loc.sign_in_and_leave_game;
                },
                subEndedMsg() {
                    return !this.home.vipEndedType ? this.loc.account_vip_expired : this.loc.account_vip_expired_pass;
                },
                eggOrgLeaderBoard() {
                    return this.$eggOrgFormatTeamScores(this.eggOrg.leaderboard);
                },
                factionsPopupStyle() {
                    return this.faction.playerFaction === 1 ? &#39;faction-egg-assasins&#39; : &#39;faction-egg-masters&#39;;
                },
                factionLogo() {
                    return `img/gauge-bar/${this.factionsPopupStyle}.png`;
                },
                cgUserManagementPopupContent() {
                    if (this.crazyGamesUser.isAnonymous) {
                        return this.loc.crazygames_user_management_popup_anonymous_text;
                    } else {
                        return this.loc.crazygames_user_management_popup_linked_text;
                    }
                },
            },
            watch: {
                loc(val) {
                    this.getLocLang(val);
                },
                firebaseId(val) {
                    if (val &amp;&amp; this.chwSignInClicked) {
                        vueApp.showChicknWinnerPopup();
                        this.chwSignInClicked = false;
                    }
                }
            }
        });
    }
    </script>
    <div id="ad-block-test" class="adsbygoogle">
    </div>
    <div id="ublock-test" style="display:none;">
      <script defer="" src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon="{&#34;version&#34;:&#34;2024.11.0&#34;,&#34;token&#34;:&#34;b4cd973aeca34b509bef2ed0c9e0b720&#34;,&#34;server_timing&#34;:{&#34;name&#34;:{&#34;cfCacheStatus&#34;:true,&#34;cfEdge&#34;:true,&#34;cfExtPri&#34;:true,&#34;cfL4&#34;:true,&#34;cfOrigin&#34;:true,&#34;cfSpeedBrain&#34;:true},&#34;location_startswith&#34;:null}}" crossorigin="anonymous">
      </script>
    </div>
  </body>
</html>
